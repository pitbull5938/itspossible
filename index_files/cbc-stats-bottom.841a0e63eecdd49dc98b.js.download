"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _regeneratorRuntime(){_regeneratorRuntime=function(){return i};var c,i={},e=Object.prototype,u=e.hasOwnProperty,d=Object.defineProperty||function(e,t,n){e[t]=n.value},t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",n=t.asyncIterator||"@@asyncIterator",o=t.toStringTag||"@@toStringTag";function a(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{a({},"")}catch(c){a=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o,a,i,s,t=t&&t.prototype instanceof S?t:S,t=Object.create(t.prototype),r=new B(r||[]);return d(t,"_invoke",{value:(o=e,a=n,i=r,s=A,function(e,t){if(s===P)throw new Error("Generator is already running");if(s===p){if("throw"===e)throw t;return{value:c,done:!0}}for(i.method=e,i.arg=t;;){var n=i.delegate;if(n){n=function e(t,n){var r=n.method,o=t.iterator[r];if(o===c)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=c,e(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;r=C(o,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,h;o=r.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=c),n.delegate=null,h):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}(n,i);if(n){if(n===h)continue;return n}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(s===A)throw s=p,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);s=P;n=C(o,a,i);if("normal"===n.type){if(s=i.done?p:l,n.arg===h)continue;return{value:n.arg,done:i.done}}"throw"===n.type&&(s=p,i.method="throw",i.arg=n.arg)}})}),t}function C(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}i.wrap=s;var A="suspendedStart",l="suspendedYield",P="executing",p="completed",h={};function S(){}function b(){}function f(){}var t={},m=(a(t,r,function(){return this}),Object.getPrototypeOf),m=m&&m(m(E([]))),g=(m&&m!==e&&u.call(m,r)&&(t=m),f.prototype=S.prototype=Object.create(t));function v(e){["next","throw","return"].forEach(function(t){a(e,t,function(e){return this._invoke(t,e)})})}function T(i,s){var t;d(this,"_invoke",{value:function(n,r){function e(){return new s(function(e,t){!function t(e,n,r,o){var a,e=C(i[e],i,n);if("throw"!==e.type)return(n=(a=e.arg).value)&&"object"==_typeof(n)&&u.call(n,"__await")?s.resolve(n.__await).then(function(e){t("next",e,r,o)},function(e){t("throw",e,r,o)}):s.resolve(n).then(function(e){a.value=e,r(a)},function(e){return t("throw",e,r,o)});o(e.arg)}(n,r,e,t)})}return t=t?t.then(e,e):e()}})}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function y(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function B(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function E(t){if(t||""===t){var n,e=t[r];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return n=-1,(e=function e(){for(;++n<t.length;)if(u.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=c,e.done=!0,e}).next=e}throw new TypeError(_typeof(t)+" is not iterable")}return d(g,"constructor",{value:b.prototype=f,configurable:!0}),d(f,"constructor",{value:b,configurable:!0}),b.displayName=a(f,o,"GeneratorFunction"),i.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},i.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,a(e,o,"GeneratorFunction")),e.prototype=Object.create(g),e},i.awrap=function(e){return{__await:e}},v(T.prototype),a(T.prototype,n,function(){return this}),i.AsyncIterator=T,i.async=function(e,t,n,r,o){void 0===o&&(o=Promise);var a=new T(s(e,t,n,r),o);return i.isGeneratorFunction(t)?a:a.next().then(function(e){return e.done?e.value:a.next()})},v(g),a(g,o,"Generator"),a(g,r,function(){return this}),a(g,"toString",function(){return"[object Generator]"}),i.keys=function(e){var t,n=Object(e),r=[];for(t in n)r.push(t);return r.reverse(),function e(){for(;r.length;){var t=r.pop();if(t in n)return e.value=t,e.done=!1,e}return e.done=!0,e}},i.values=E,B.prototype={constructor:B,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=c,this.done=!1,this.delegate=null,this.method="next",this.arg=c,this.tryEntries.forEach(y),!e)for(var t in this)"t"===t.charAt(0)&&u.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=c)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function e(e,t){return a.type="throw",a.arg=n,r.next=e,t&&(r.method="next",r.arg=c),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var o=this.tryEntries[t],a=o.completion;if("root"===o.tryLoc)return e("end");if(o.tryLoc<=this.prev){var i=u.call(o,"catchLoc"),s=u.call(o,"finallyLoc");if(i&&s){if(this.prev<o.catchLoc)return e(o.catchLoc,!0);if(this.prev<o.finallyLoc)return e(o.finallyLoc)}else if(i){if(this.prev<o.catchLoc)return e(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return e(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&u.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}var a=(o=o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc?null:o)?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),y(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n,r,o=this.tryEntries[t];if(o.tryLoc===e)return"throw"===(n=o.completion).type&&(r=n.arg,y(o)),r}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:E(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=c),h}},i}function asyncGeneratorStep(e,t,n,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function _asyncToGenerator(s){return function(){var e=this,i=arguments;return new Promise(function(t,n){var r=s.apply(e,i);function o(e){asyncGeneratorStep(r,t,n,o,a,"next",e)}function a(e){asyncGeneratorStep(r,t,n,o,a,"throw",e)}o(void 0)})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_toPropertyKey(r.key),r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey(e){e=_toPrimitive(e,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(e,t){if("object"!==_typeof(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}window.CBC||(window.CBC={}),(CBC=CBC||window.CBC).APP||(CBC.APP={}),CBC.APP.AB||(CBC.APP.AB={}),CBC.APP.ANA||(CBC.APP.ANA={}),CBC.APP.ANA.ABTESTSCONFIG||(CBC.APP.ANA.ABTESTSCONFIG={}),CBC.APP.ANA.SURVEYCONFIG||(CBC.APP.ANA.SURVEYCONFIG={}),CBC.APP.ANA.DISPATCHERS||(CBC.APP.ANA.DISPATCHERS={}),CBC.APP.ANA.DISPATCHERS.Adobe||(CBC.APP.ANA.DISPATCHERS.Adobe={}),CBC.APP.ANA.DISPATCHERS.DAL||(CBC.APP.ANA.DISPATCHERS.DAL={}),CBC.APP.ANA.DISPATCHERS.FBPIXEL||(CBC.APP.ANA.DISPATCHERS.FBPIXEL={}),CBC.APP.ANA.DISPATCHERS.MirRoar||(CBC.APP.ANA.DISPATCHERS.MirRoar={}),CBC.APP.ANA.DISPATCHERS.DAL||(CBC.APP.ANA.DISPATCHERS.DAL={}),CBC.APP.ANA.ER||(CBC.APP.ANA.ER={}),CBC.APP.ANA.FORMATTERS||(CBC.APP.ANA.FORMATTERS={}),CBC.APP.ANA.FORMATTERS.Adobe||(CBC.APP.ANA.FORMATTERS.Adobe={}),CBC.APP.ANA.FORMATTERS.Common||(CBC.APP.ANA.FORMATTERS.Common={}),CBC.APP.ANA.FORMATTERS.Comscore||(CBC.APP.ANA.FORMATTERS.Comscore={}),CBC.APP.ANA.FORMATTERS.DAL||(CBC.APP.ANA.FORMATTERS.DAL={}),CBC.APP.ANA.FORMATTERS.MirRoar||(CBC.APP.ANA.FORMATTERS.MirRoar={}),CBC.APP.ANA.FORMATTERS.DAL||(CBC.APP.ANA.FORMATTERS.DAL={}),CBC.APP.ANA.LIBRARY||(CBC.APP.ANA.LIBRARY={}),CBC.APP.ANA.LIBRARY.FBPIXEL||(CBC.APP.ANA.LIBRARY.FBPIXEL={}),CBC.APP.ANA.LIBRARY.SENTRY||(CBC.APP.ANA.LIBRARY.SENTRY={}),CBC.APP.ANA.LinkTracker||(CBC.APP.ANA.LinkTracker={}),CBC.APP.ANA.SEARCHDEFAULT||(CBC.APP.ANA.SEARCHDEFAULT={}),CBC.APP.ANA.VALIDATORS||(CBC.APP.ANA.VALIDATORS={}),CBC.APP.ANA.VALIDATORS.Adobe||(CBC.APP.ANA.VALIDATORS.Adobe={}),CBC.APP.ANA.VALIDATORS.Common||(CBC.APP.ANA.VALIDATORS.Common={}),CBC.APP.ANA.VALIDATORS.DAL||(CBC.APP.ANA.VALIDATORS.DAL={}),CBC.APP.ANA.VALIDATORS.FBPIXEL||(CBC.APP.ANA.VALIDATORS.FBPIXEL={}),CBC.APP.ANA.VALIDATORS.MirRoar||(CBC.APP.ANA.VALIDATORS.MirRoar={}),CBC.APP.ANA.VALIDATORS.DAL||(CBC.APP.ANA.VALIDATORS.DAL={}),CBC.APP.ANA.VARS||(CBC.APP.ANA.VARS={}),CBC.APP.COMSCORE||(CBC.APP.COMSCORE={}),CBC.APP.CXENSE||(CBC.APP.CXENSE={}),CBC.APP.DMP||(CBC.APP.DMP={}),CBC.APP.DMP.LOTAME||(CBC.APP.DMP.LOTAME={}),CBC.APP.PubSub||(CBC.APP.PubSub={}),CBC.APP.readJS||(CBC.APP.readJS={}),CBC.APP.SC||(CBC.APP.SC={}),CBC.APP.SC.DTM||(CBC.APP.SC.DTM={}),CBC.APP.SC.DTM.DATA||(CBC.APP.SC.DTM.DATA={}),CBC.APP.SC.DTM.formatted||(CBC.APP.SC.DTM.formatted={}),CBC.APP.SC.EventTracker||(CBC.APP.SC.EventTracker={}),CBC.APP.SC.LOCALGEO||(CBC.APP.SC.LOCALGEO={}),CBC.APP.SC.masterSwitch||(CBC.APP.SC.masterSwitch={}),CBC.APP.SC.metadataAllowlist||(CBC.APP.SC.metadataAllowlist={}),CBC.APP.SC.PageTracker||(CBC.APP.SC.PageTracker={}),CBC.APP.SC.Pillar||(CBC.APP.SC.Pillar={}),CBC.APP.SC.Subscribers||(CBC.APP.SC.Subscribers={}),CBC.APP.SC.UTIL||(CBC.APP.SC.UTIL={}),CBC.APP.SC.VideoHeartbeat||(CBC.APP.SC.VideoHeartbeat={}),CBC.APP.SC.VideoHeartbeatVars||(CBC.APP.SC.VideoHeartbeatVars={}),CBC.APP.versions||(CBC.APP.versions={}),window.CBCRC||(window.CBCRC={}),(CBCRC=CBCRC||window.CBCRC).ANA||(CBCRC.ANA={}),CBCRC.ANA.DATALAYER||(CBCRC.ANA.DATALAYER={}),CBCRC.ANA.MEDIA||(CBCRC.ANA.MEDIA={}),CBC.APP.versions["cbc-stats-bottom"]="3.11.0",CBC.APP.SC.Detectizr=function(e){var t=e||(window.navigator.userAgent||window.navigator.vendor||window.opera).toLowerCase();function n(e){return e.test(t)}function r(e){return-1<t.indexOf(e)}function o(e){return e.exec(t)}function a(e,t){t=(e.version=t).split(".");0<t.length?(t=t.reverse(),e.major=t.pop(),0<t.length?(e.minor=t.pop(),0<t.length?(t=t.reverse(),e.patch=t.join(".")):e.patch="0"):e.minor="0"):e.major="0"}var e={type:"",model:""},i={},s=["tv","tablet","mobile","desktop"];return n(/googletv|smarttv|smart-tv|internet.tv|netcast|nettv|appletv|boxee|kylo|dlnadoc|roku|pov_tv|hbbtv|ce-html/)?(e.type=s[0],e.model="smartTv"):n(/xbox|playstation.3|wii/)?(e.type=s[0],e.model="gameConsole"):n(/ip(a|ro)d/)?(e.type=s[1],e.model="ipad"):n(/tablet/)&&!n(/rx-34/)||n(/folio/)?(e.type=s[1],e.model=String(o(/playbook/)||"")):n(/linux/)&&n(/android/)&&!n(/fennec|mobi|htc.magic|htcX06ht|nexus.one|sc-02b|fone.945/)?(e.type=s[1],e.model="android"):n(/kindle/)||n(/mac.os/)&&n(/silk/)?(e.type=s[1],e.model="kindle"):n(/gt-p10|sc-01c|shw-m180s|sgh-t849|sch-i800|shw-m180l|sph-p100|sgh-i987|zt180|htc(.flyer|_flyer)|sprint.atp51|viewpad7|pandigital(sprnova|nova)|ideos.s7|dell.streak.7|advent.vega|a101it|a70bht|mid7015|next2|nook/)||n(/mb511/)&&n(/rutem/)?(e.type=s[1],e.model="android"):n(/bb10/)?(e.type=s[1],e.model="blackberry"):(e.model=o(/iphone|ipod|android|blackberry|opera mini|opera mobi|skyfire|maemo|windows phone|palm|iemobile|symbian|symbianos|fennec|j2me/),null!==e.model?(e.type=s[2],e.model=String(e.model)):(e.model="",n(/bolt|fennec|iris|maemo|minimo|mobi|mowser|netfront|novarra|prism|rx-34|skyfire|tear|xv6875|xv6975|google.wireless.transcoder/)||n(/opera/)&&n(/windows.nt.5/)&&n(/htc|xda|mini|vario|samsung-gt-i8000|samsung-sgh-i9/)?e.type=s[2]:n(/windows.(nt|xp|me|9)/)&&!n(/phone/)||n(/win(9|.9|nt)/)||n(/\(windows 8\)/)?e.type=s[3]:n(/macintosh|powerpc/)&&!n(/silk/)?(e.type=s[3],e.model="mac os"):n(/cros/)?e.type=s[3]:e.type=s[2])),""!==e.model&&("ipad"===e.model||"iphone"===e.model||"ipod"===e.model?(i.name="ios",a(i,(n(/os\s([\d_]+)/)?RegExp.$1:"").replace(/_/g,"."))):"android"===e.model?(i.name="android",a(i,n(/android\s([\d.]+)/)?RegExp.$1:"")):"blackberry"===e.model?(i.name="blackberry",a(i,n(/version\/([^\s]+)/)?RegExp.$1:"")):"playbook"===e.model&&(i.name="blackberry",a(i,n(/os ([^\s]+)/)?RegExp.$1.replace(";",""):""))),i.name||(r("win")||r("16bit")?(i.name="windows",r("windows nt 10")?a(i,"10"):r("windows nt 6.3")?a(i,"8.1"):r("windows nt 6.2")||n(/\(windows 8\)/)?a(i,"8"):r("windows nt 6.1")?a(i,"7"):r("windows nt 6.0")?a(i,"vista"):(r("windows nt 5.2")||r("windows nt 5.1")||r("windows xp"))&&a(i,"xp")):r("mac")||r("darwin")?(i.name="mac os",r("os x")&&a(i,(n(/os\sx\s([\d_]+)/)?RegExp.$1:"os x").replace(/_/g,"."))):r("webtv")?i.name="webtv":(r("x11")||r("inux"))&&(i.name="linux")),{os:i,device:e,ua:t}},window.Detectizr=CBC.APP.SC.Detectizr(),function(){var e;Object.keys(CBC.APP.PubSub).length||(e=function(){function r(e,t,n){_classCallCheck(this,r),this.subscribers=e||{},this.queuedEvents=t||[],this.isOn=n||!1}return _createClass(r,[{key:"turnOn",value:function(){if(this.isOn=!0,this.queuedEvents.length)for(var e=0;e<this.queuedEvents.length;e++)this.publish(this.queuedEvents[e].event,this.queuedEvents[e].payload),this.queuedEvents.splice(e,1)}},{key:"turnOff",value:function(){this.isOn=!1}},{key:"isOn",value:function(){return this.isOn}},{key:"publish",value:function(t,n){t in this.subscribers?this.subscribers[t].slice().forEach(function(e){try{e(t,n)}catch(e){console.error(e.message)}}):this.isOn||this.queuedEvents.push({event:t,payload:n})}},{key:"subscribe",value:function(e,t){return e in this.subscribers||(this.subscribers[e]=[]),this.subscribers[e].some(function(e){if(t===e)return!0})?(console.log("callback already exists for event:",e,t),!1):(this.subscribers[e].push(t),!0)}},{key:"unsubscribe",value:function(e,r){e in this.subscribers&&this.subscribers[e].some(function(e,t,n){if(r===e)return n.splice(t,1),!0})}}]),r}(),CBC.APP.PubSub=new e)}(),CBC.APP.SC.viafouraSubscribed=!1,function(){function n(e,t){Array.isArray(t)&&0!==t.length&&CBC.APP.DMP.LOTAME.filterAudienceSegmentIDs(t,["Amplitude"]).length&&CBC.APP.PubSub.unsubscribe("loadedAudiences",n)}window.vfQ=window.vfQ||[],window.vfQ.push(function(){CBC.APP.SC.viafouraSubscribed||(CBC.APP.SC.DEBUG&&console.log("Subscribing to Viafoura events"),window.vf.$subscribe("share","clicked",function(e,t){CBC.APP.SC.EventTracker.trackEvent("SHARED",{network:e,elem:t})}),window.vf.$subscribe("logout","success",function(){CBC.APP.SC.EventTracker.trackEvent("SIGNED OUT",{})}),window.vf.$subscribe("comment","created",function(e){CBC.APP.SC.EventTracker.trackEvent("COMMENTED",{})}),window.vf.$subscribe("comment-reply","posted",function(e){CBC.APP.SC.EventTracker.trackEvent("COMMENTED",{})}),CBC.APP.SC.viafouraSubscribed=!0,CBC.APP.PubSub.publish("viafouraAvailable",{}))}),CBC.APP.PubSub.subscribe("loadedAudiences",n)}(),window._sf_endpt=(new Date).getTime(),CBC.APP.COMSCORE={useBeacon:!1,payload:{c1:2,c2:3005684,options:{bypassUserConsentRequirementFor1PCookie:!0,enableFirstPartyCookie:!0}},dataStructure:{},Call:function(){if(CBC.APP.SC.DTM.formatted.comscore&&(this.dataStructure=CBC.APP.SC.DTM.formatted.comscore),this.useBeacon)this.pvCandidate();else{this.useBeacon=!0;var e="",t={};if(Object.keys(this.dataStructure).length){if(this.dataStructure.syndicate&&"gamp"===this.dataStructure.syndicate)return!1;e=this.getC6(),t=this.getOptions()}e={c3:"",c4:escape(window.location.href),c5:"CBC.ca-CanadianNewsSportsEntertainmentKidsDocsRadioTV",c6:e,c15:"",options:t},t=window._comscore||[],e=(t.push(this.generatePayload(e,this.payload)),window._comscore=t,this.pvCandidate(),document.createElement("script")),t=document.getElementsByTagName("script")[0];e.async=!0,e.src="https://sb.scorecardresearch.com/beacon.js",t&&t.parentNode.insertBefore(e,t)}},getC6:function(){var e="";return this.dataStructure.subsection3?e=this.dataStructure.subsection3:this.dataStructure.subsection2?e=this.dataStructure.subsection2:this.dataStructure.subsection1&&(e=this.dataStructure.subsection1),e},getOptions:function(){var e,t,n={};return this.dataStructure.syndicate&&"fia"===this.dataStructure.syndicate?n={url_append:"comscorekw=fbia"}:this.useBeacon&&this.dataStructure.contentarea&&"homepage"!==this.dataStructure.contentarea&&(t=this.dataStructure.contentarea,e=this.dataStructure.subsection1,n={url_append:"comscorekw=".concat("news"===t&&e?e:t)}),document.getElementById("comscore-comment-div")&&document.getElementById("comscore-comment-div").remove(),n.url_append&&(e=document.createElement("div"),t=document.createComment("comScore Identifier: ".concat(n.url_append)),e.id="comscore-comment-div",e.appendChild(t),document.body.appendChild(e)),n.bypassUserConsentRequirementFor1PCookie=!0,n.enableFirstPartyCookie=!0,n},generatePayload:function(e,t){return Object.assign({},e,t)},pvCandidate:function(){var e=this.getOptions(),e=(window.COMSCORE&&window.COMSCORE.beacon(this.generatePayload(this.payload,{options:e})),void 0!==e.url_append?e.url_append+"&":"");CBC.APP.SC.UTIL.makeGETRequest("//www.cbc.ca/g/stats/comscore.json?".concat(e,"cache=").concat((new Date).getTime()),{success:function(e,t){JSON.parse(e.responseText).comscore||console.log("COMSCORE-bottom: json response error")},failure:function(e,t){console.log("COMSCORE-bottom: json request error")}},{success:{success:!0},failure:{success:!1}})}},Object.keys(CBC.APP.CXENSE).length||(CBC.APP.CXENSE={addMetaTags:function(){for(var e=document.querySelectorAll("meta[name^=cXenseParse]"),t=0;t<e.length;t++)e[t].parentNode.removeChild(e[t]);var n,r,o,a,i=CBC.APP.SC.DTM.formatted.cxense,s=document.querySelector("head");for(o in i&&i.contenttype&&(r="article","index"===i.contenttype&&(r="frontpage",i.contentarea)&&["video","kids","tv"].includes(i.contentarea.toLowerCase())&&(r="article","video"!==i.contentarea||i.contentid||(r="frontpage"),i.subsection1)&&["index","search"].includes(i.subsection1.toLowerCase())&&(r="frontpage"),r=this.createMetaTag("cXenseParse:","pageclass",r),s.appendChild(r)),i&&i.contenttype&&"index"===i.contenttype&&i.contentarea&&["video","kids","tv","life"].includes(i.contentarea.toLowerCase())&&(i.pillar&&"legacyee"===i.pillar?(n=i.subsection2?i.subsection2.replace(/[^a-zA-Z0-9"]/g," "):"",n+=i.subsection3&&"home"!==i.subsection3?" "+i.subsection3.replace(/[^a-zA-Z0-9"]/g," "):"",r=this.createMetaTag("cXenseParse:","cbc-keymatch",n),s.appendChild(r)):"video"===i.contentarea&&i.contentid&&(n=i.subsection3?i.subsection3.replace(/[^a-zA-Z0-9"]/g," "):"",r=this.createMetaTag("cXenseParse:","cbc-keymatch",n),s.appendChild(r))),i)!{}.hasOwnProperty.call(i,o)||(a=this.createMetaTag("cXenseParse:cbc-",o,i[o]),s.appendChild(a),"publishedTime"!==o||isNaN(parseInt(i[o]))||(a=this.createMetaTag("article:","published_time",new Date(parseInt(i[o])).toISOString(),"property"),s.appendChild(a)),"updatedTime"!==o)||isNaN(parseInt(i[o]))||(a=this.createMetaTag("article:","modified_time",new Date(parseInt(i[o])).toISOString(),"property"),s.appendChild(a))},createMetaTag:function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"name",o=document.createElement("meta");return o.setAttribute(r,e+t),o.setAttribute("content",n),o},pageView:function(){CBC.APP.CXENSE.addMetaTags(),window.cX.callQueue.push(["sendPageViewEvent"])}}),function(){var e,t,n;window.cX=window.cX||{},window.cX.callQueue=window.cX.callQueue||[],window.cX.callQueue.push(["setSiteId","9222369215399074873"]),n=document,e="script",(t=n.createElement(e)).type="text/java"+e,t.async="async",t.src="https://scdn.cxense.com/cx.js",(n=n.getElementsByTagName(e)[0])&&n.parentNode.insertBefore(t,n)}(),CBC.APP.PubSub.subscribe("CLOSED",function(e,t){CBC.APP.ANA.VALIDATORS.DAL.trackEvent(e,t),CBC.APP.ANA.VALIDATORS.MirRoar.trackEvent(e,t),CBC.APP.AB.processConductricsViewStateChange(e,t)}),CBC.APP.PubSub.subscribe("COMMENTED",function(e,t){CBC.APP.ANA.VALIDATORS.DAL.trackEvent(e,t),CBC.APP.ANA.VALIDATORS.MirRoar.trackEvent(e,t),CBC.APP.AB.processConductricsViewStateChange(e,t)}),CBC.APP.PubSub.subscribe("FOLLOWED",function(e,t){CBC.APP.ANA.VALIDATORS.DAL.trackEvent(e,t),CBC.APP.ANA.VALIDATORS.MirRoar.trackEvent(e,t),CBC.APP.AB.processConductricsViewStateChange(e,t)}),CBC.APP.PubSub.subscribe("IDENTIFY",function(e,t){CBC.APP.ANA.VALIDATORS.DAL.trackEvent(e,t)}),CBC.APP.PubSub.subscribe("LISTENED",function(e,t){CBC.APP.ANA.VALIDATORS.DAL.trackEvent(e,t),CBC.APP.ANA.VALIDATORS.MirRoar.trackEvent(e,t),CBC.APP.ANA.VALIDATORS.ESS.trackEvent(e,t),CBC.APP.AB.processConductricsViewStateChange(e,t)}),CBC.APP.PubSub.subscribe("LOADED",function(e,t){CBC.APP.ANA.VALIDATORS.Adobe.trackPageView(t),CBC.APP.ANA.VALIDATORS.DAL.trackEvent(e,t),CBC.APP.ANA.VALIDATORS.MirRoar.trackEvent(e,t),CBC.APP.ANA.VALIDATORS.Comscore.trackPageLoad(),CBC.APP.ANA.VALIDATORS.Cxense.trackPageLoad(),CBC.APP.ANA.VALIDATORS.Chartbeat.trackPageLoad(),CBC.APP.ANA.VALIDATORS.ESS.trackEvent(e,t),CBC.APP.ANA.VALIDATORS.FBPIXEL.trackEvent(),CBC.APP.AB.processConductricsViewStateChange(e,t)}),CBC.APP.PubSub.subscribe("LOADED MORE",function(e,t){CBC.APP.ANA.VALIDATORS.Adobe.trackPageView(t),CBC.APP.ANA.VALIDATORS.DAL.trackEvent(e,t),CBC.APP.ANA.VALIDATORS.MirRoar.trackEvent(e,t),CBC.APP.ANA.VALIDATORS.Comscore.trackPageLoad(),CBC.APP.ANA.VALIDATORS.Cxense.trackPageLoad(),CBC.APP.ANA.VALIDATORS.Chartbeat.trackPageLoad(),CBC.APP.ANA.VALIDATORS.FBPIXEL.trackEvent(),CBC.APP.AB.processConductricsViewStateChange(e,t)}),CBC.APP.PubSub.subscribe("NEXT",function(e,t){CBC.APP.ANA.VALIDATORS.DAL.trackEvent(e,t),CBC.APP.ANA.VALIDATORS.MirRoar.trackEvent(e,t),CBC.APP.AB.processConductricsViewStateChange(e,t)}),CBC.APP.PubSub.subscribe("OPENED",function(e,t){CBC.APP.ANA.VALIDATORS.DAL.trackEvent(e,t),CBC.APP.ANA.VALIDATORS.MirRoar.trackEvent(e,t),CBC.APP.AB.processConductricsViewStateChange(e,t)}),CBC.APP.PubSub.subscribe("PLAYED",function(e,t){CBC.APP.ANA.VALIDATORS.DAL.trackEvent(e,t),CBC.APP.ANA.VALIDATORS.MirRoar.trackEvent(e,t),CBC.APP.AB.processConductricsViewStateChange(e,t)}),CBC.APP.PubSub.subscribe("PREVIOUS",function(e,t){CBC.APP.ANA.VALIDATORS.DAL.trackEvent(e,t),CBC.APP.ANA.VALIDATORS.MirRoar.trackEvent(e,t),CBC.APP.AB.processConductricsViewStateChange(e,t)}),CBC.APP.PubSub.subscribe("READ",function(e,t){CBC.APP.ANA.VALIDATORS.DAL.trackEvent(e,t),CBC.APP.ANA.VALIDATORS.MirRoar.trackEvent(e,t),CBC.APP.ANA.VALIDATORS.ESS.trackEvent(e,t),CBC.APP.AB.processConductricsViewStateChange(e,t),CBC.APP.AB.sendEventGoalToConductrics(e,{})}),CBC.APP.PubSub.subscribe("SEARCHED",function(e,t){CBC.APP.ANA.VALIDATORS.DAL.trackEvent(e,t),CBC.APP.ANA.VALIDATORS.MirRoar.trackEvent(e,t),CBC.APP.AB.processConductricsViewStateChange(e,t)}),CBC.APP.PubSub.subscribe("SELECTED",function(e,t){CBC.APP.ANA.VALIDATORS.DAL.trackEvent(e,t),CBC.APP.ANA.VALIDATORS.MirRoar.trackEvent(e,t),CBC.APP.AB.processConductricsViewStateChange(e,t)}),CBC.APP.PubSub.subscribe("SET PREFERENCE",function(e,t){CBC.APP.ANA.VALIDATORS.DAL.trackEvent(e,t),CBC.APP.ANA.VALIDATORS.MirRoar.trackEvent(e,t),CBC.APP.AB.processConductricsViewStateChange(e,t)}),CBC.APP.PubSub.subscribe("SHARED",function(e,t){CBC.APP.ANA.VALIDATORS.DAL.trackEvent(e,t),CBC.APP.ANA.VALIDATORS.MirRoar.trackEvent(e,t),CBC.APP.AB.processConductricsViewStateChange(e,t)}),CBC.APP.PubSub.subscribe("SIGNED IN",function(e,t){CBC.APP.ANA.VALIDATORS.DAL.trackEvent(e,t),CBC.APP.ANA.VALIDATORS.MirRoar.trackEvent(e,t),CBC.APP.AB.processConductricsViewStateChange(e,t),CBC.APP.SC.DTM.DATA.authenticated=CBC.APP.SC.PageTracker.isLoggedIn(),CBC.APP.SC.UTIL.setFormattedLayer(),CBC.APP.SC.UTIL.sendDataToUIE(t)}),CBC.APP.PubSub.subscribe("SIGNED OUT",function(e,t){CBC.APP.ANA.VALIDATORS.DAL.trackEvent(e,t),CBC.APP.ANA.VALIDATORS.MirRoar.trackEvent(e,t),CBC.APP.AB.processConductricsViewStateChange(e,t),CBC.APP.SC.DTM.DATA.authenticated=CBC.APP.SC.PageTracker.isLoggedIn(),CBC.APP.SC.UTIL.setFormattedLayer(),CBC.APP.SC.UTIL.removeCBCPlusID(),CBC.APP.SC.UTIL.sendDataToUIE(t)}),CBC.APP.PubSub.subscribe("START WEB SESSION",function(e,t){CBC.APP.ANA.VALIDATORS.DAL.trackEvent(e,t),CBC.APP.ANA.VALIDATORS.MirRoar.trackEvent(e,t),CBC.APP.AB.processConductricsViewStateChange(e,t)}),CBC.APP.PubSub.subscribe("STREAMED",function(e,t){CBC.APP.ANA.VALIDATORS.DAL.trackEvent(e,t),CBC.APP.ANA.VALIDATORS.MirRoar.trackEvent(e,t),CBC.APP.AB.processConductricsViewStateChange(e,t),CBC.APP.AB.sendEventGoalToConductrics(e,t),CBC.APP.SC.UTIL.sendDataToUIE(t),CBC.APP.ANA.VALIDATORS.ESS.trackEvent(e,t)}),CBC.APP.PubSub.subscribe("SUBMITTED",function(e,t){CBC.APP.ANA.VALIDATORS.DAL.trackEvent(e,t),CBC.APP.ANA.VALIDATORS.MirRoar.trackEvent(e,t),CBC.APP.AB.processConductricsViewStateChange(e,t)}),CBC.APP.PubSub.subscribe("SUBSCRIBED",function(e,t){CBC.APP.ANA.VALIDATORS.DAL.trackEvent(e,t),CBC.APP.ANA.VALIDATORS.MirRoar.trackEvent(e,t),CBC.APP.AB.processConductricsViewStateChange(e,t),CBC.APP.SC.UTIL.sendDataToUIE(t)}),CBC.APP.PubSub.subscribe("UIEAlert",function(){CBC.APP.ANA.VALIDATORS.FBPIXEL.setUserOptinFlag()}),CBC.APP.PubSub.subscribe("UNFOLLOWED",function(e,t){CBC.APP.ANA.VALIDATORS.DAL.trackEvent(e,t),CBC.APP.ANA.VALIDATORS.MirRoar.trackEvent(e,t),CBC.APP.AB.processConductricsViewStateChange(e,t)}),CBC.APP.PubSub.subscribe("UNSUBSCRIBED",function(e,t){CBC.APP.ANA.VALIDATORS.DAL.trackEvent(e,t),CBC.APP.ANA.VALIDATORS.MirRoar.trackEvent(e,t),CBC.APP.AB.processConductricsViewStateChange(e,t),CBC.APP.SC.UTIL.sendDataToUIE(t)}),CBC.APP.PubSub.subscribe("VIEWED AD",function(e,t){CBC.APP.ANA.VALIDATORS.DAL.trackEvent(e,t),CBC.APP.ANA.VALIDATORS.MirRoar.trackEvent(e,t),CBC.APP.AB.processConductricsViewStateChange(e,t)}),CBC.APP.PubSub.subscribe("WATCHED",function(e,t){CBC.APP.ANA.VALIDATORS.DAL.trackEvent(e,t),CBC.APP.ANA.VALIDATORS.MirRoar.trackEvent(e,t),CBC.APP.ANA.VALIDATORS.ESS.trackEvent(e,t),CBC.APP.AB.processConductricsViewStateChange(e,t)}),CBC.APP.PubSub.subscribe("mediaAdBreakCompleted",function(e,t){try{CBC.APP.ANA.VALIDATORS.HarmonizedAdobe.trackMediaState(e,t)}catch(e){}}),CBC.APP.PubSub.subscribe("mediaAdBreakStarted",function(e,t){try{CBC.APP.ANA.VALIDATORS.HarmonizedAdobe.trackMediaState(e,t)}catch(e){}}),CBC.APP.PubSub.subscribe("mediaBufferCompleted",function(e,t){try{CBC.APP.ANA.VALIDATORS.HarmonizedAdobe.trackMediaState(e,t)}catch(e){}}),CBC.APP.PubSub.subscribe("mediaBufferStarted",function(e,t){try{CBC.APP.ANA.VALIDATORS.HarmonizedAdobe.trackMediaState(e,t)}catch(e){}}),CBC.APP.PubSub.subscribe("mediaChapterStarted",function(e,t){try{CBC.APP.ANA.VALIDATORS.HarmonizedAdobe.trackMediaState(e,t)}catch(e){}}),CBC.APP.PubSub.subscribe("mediaChapterCompleted",function(e,t){try{CBC.APP.ANA.VALIDATORS.HarmonizedAdobe.trackMediaState(e,t)}catch(e){}}),CBC.APP.PubSub.subscribe("mediaCompleted",function(e,t){try{CBC.APP.ANA.VALIDATORS.HarmonizedAdobe.trackMediaState(e,t)}catch(e){}}),CBC.APP.PubSub.subscribe("mediaPaused",function(e,t){try{CBC.APP.ANA.VALIDATORS.HarmonizedAdobe.trackMediaState(e,t)}catch(e){}}),CBC.APP.PubSub.subscribe("mediaPlayStarted",function(e,t){try{CBC.APP.ANA.VALIDATORS.HarmonizedAdobe.trackMediaState(e,t)}catch(e){}}),CBC.APP.PubSub.subscribe("mediaSeekStarted",function(e,t){try{CBC.APP.ANA.VALIDATORS.HarmonizedAdobe.trackMediaState(e,t)}catch(e){}}),CBC.APP.PubSub.subscribe("mediaSeekCompleted",function(e,t){try{CBC.APP.ANA.VALIDATORS.HarmonizedAdobe.trackMediaState(e,t)}catch(e){}}),CBC.APP.PubSub.subscribe("mediaSessionCompleted",function(e,t){try{CBC.APP.ANA.VALIDATORS.HarmonizedAdobe.trackMediaState(e,t)}catch(e){}}),CBC.APP.PubSub.subscribe("mediaSessionStarted",function(e,t){try{CBC.APP.ANA.VALIDATORS.HarmonizedAdobe.trackMediaState(e,t)}catch(e){}}),CBC.APP.ANA.VALIDATORS.Adobe=function(){function t(e){if(s_cbc_sitecatalyst){if(CBC.APP.SC.masterSwitch.switches&&CBC.APP.SC.masterSwitch.switches.adobe)return CBC.APP.ANA.FORMATTERS.Adobe.formatSignal(e)}else CBC.APP.SC.UTIL.console("The Adobe s_code.js is missing on the page");return!1}return{trackPageView:function(e){if(!(0===Object.keys(CBC.APP.SC.masterSwitch).length||CBC.APP.SC.masterSwitch.switches&&null==CBC.APP.SC.masterSwitch.switches.adobe))return t(e);CBC.APP.SC.UTIL.masterSwitchMetaPromise().then(function(){return t(e)})}}}(),CBC.APP.ANA.VALIDATORS.DAL=function(){var r=function(){var n=_asyncToGenerator(_regeneratorRuntime().mark(function e(n,r){var o;return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(CBC.APP.SC.masterSwitch.switches.DAL){e.next=2;break}return e.abrupt("return");case 2:if(a(n)){e.next=5;break}return CBC.APP.SC.UTIL.debug("".concat(n," is not valid.")),e.abrupt("return");case 5:if(i(r)){e.next=7;break}return e.abrupt("return");case 7:if("SIGNED IN"===n)return e.prev=8,e.next=11,CBC.APP.SC.UTIL.setCBCPlusIDPromise();e.next=14;break;case 11:return e.prev=11,CBC.APP.SC.UTIL.getCBCVisitorOrPlusCookieValue({isCbcPlus:!1})&&CBC.APP.PubSub.publish("UIEAlert"),e.finish(11);case 14:if(o="IDENTIFY"===n?CBC.APP.ANA.FORMATTERS.DAL.formatIdentify(r):CBC.APP.ANA.FORMATTERS.DAL.formatSignal(n,r)){e.next=18;break}return CBC.APP.SC.UTIL.debug("".concat(n,": ERROR: DAL Payload is invalid: null")),e.abrupt("return");case 18:if(t=o.user,"SIGNED IN"!==n?t.id&&t.id.cbc&&0<t.id.cbc.length:t.id&&t.id.cbcplus&&0<t.id.cbcplus.length){e.next=21;break}return e.next=21,s(n,o);case 21:CBC.APP.ANA.DISPATCHERS.DAL.dispatch(o);case 22:case"end":return e.stop()}var t},e,null,[[8,,11,14]])}));return function(e,t){return n.apply(this,arguments)}}(),a=function(e){return null==e?(CBC.APP.SC.UTIL.debug("DalFormatter - Error: Event name is null."),!1):"string"!=typeof e?(CBC.APP.SC.UTIL.debug("DalFormatter - Error: Event name is not a string."),!1):Boolean(CBC.APP.SC.EventTracker.getValidEvents()[e.toUpperCase()])},i=function(e){return"object"===_typeof(e)||(CBC.APP.SC.UTIL.debug("DalFormatter - Error: Event properties is not an object."),!1)};var n,s=function(){var n=_asyncToGenerator(_regeneratorRuntime().mark(function e(t,n){var r;return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return CBC.APP.SC.UTIL.debug("".concat(t,": DAL Payload user.id is missing")),r=window.viafoura&&window.viafoura.users&&window.viafoura.users.current&&window.viafoura.users.current(),r=r&&r.id?"plus":"visitor",e.next=5,o(n,r);case 5:case"end":return e.stop()}},e)}));return function(e,t){return n.apply(this,arguments)}}(),o=function(e,t){return("visitor"===t?CBC.APP.SC.UTIL.setCBCVisitorIDPromise:CBC.APP.SC.UTIL.setCBCPlusIDPromise)().then(function(){e.user.tier=CBC.APP.SC.UTIL.getUserTier(),e.device&&(e.device.id=e.device.id||{},e.device.id.uuid=CBC.APP.SC.UTIL.getCBCVisitorOrPlusCookieValue({isCbcPlus:!1}))}).catch(function(e){CBC.APP.SC.UTIL.debug("Error fetching user ID for ".concat(t,": ").concat(e))}).finally(function(){e.user.id=c(),CBC.APP.SC.UTIL.getCookie(t?"cbc_visitor":"cbc_plus")&&CBC.APP.PubSub.publish("UIEAlert")})},c=function(){var e={},t=CBC.APP.SC.UTIL.getCBCVisitorOrPlusCookieValue({isCbcPlus:!1}),n=CBC.APP.SC.UTIL.getCBCVisitorOrPlusCookieValue({isCbcPlus:!0});return t&&t.length&&(e.cbc=t),n&&n.length&&(e.cbcplus=n),e};return{trackEvent:(n=_asyncToGenerator(_regeneratorRuntime().mark(function e(t,n){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:0===Object.keys(CBC.APP.SC.masterSwitch).length||CBC.APP.SC.masterSwitch.switches&&null==CBC.APP.SC.masterSwitch.switches.DAL?(CBC.APP.SC.UTIL.masterSwitchMetaPromise().then(_asyncToGenerator(_regeneratorRuntime().mark(function e(){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(t,n);case 2:case"end":return e.stop()}},e)}))),e.next=6):e.next=4;break;case 4:return e.next=6,r(t,n);case 6:case"end":return e.stop()}},e)})),function(e,t){return n.apply(this,arguments)}),logEvent:r,updateUserAndDeviceIdsAndTier:o}}(),CBC.APP.ANA.VALIDATORS.Common={validateAppName:function(e){return CBC.APP.SC.UTIL.getMetadataAllowlist().metadata.allowlist.app.name[e]},validateFromAllowlist:function(e,t){for(var n=CBC.APP.SC.UTIL.getMetadataAllowlist().metadata.allowlist,r=e.split("."),o=n,a=0;a<r.length;a++){var i=r[a];if(!("object"===_typeof(o)&&null!==o&&i in o))return;o=o[i]}return o.pattern?new RegExp(o.pattern).test(t):o[t]},getFeatureNameRegex:function(){return["^tab\\.(\\w+-?\\w*)+$","^tab\\.(\\w+-?\\w*)+\\.card$","^tab\\.(\\w+-?\\w*)+\\.card\\.label$","^category\\.list\\.card$","^tab\\.sections\\.list$","^tab\\.sections\\.regions\\.list$","^tab\\.sections\\.list\\.card$","^tab\\.sections\\.regions\\.list\\.card$","^tab\\.local\\.editors-picks\\.\\b(\\w*[-]?\\w*)\\b$","^tab\\.local\\.pub-time\\$*","^search$","^tab\\.(\\w+-?\\w*)+\\.(\\w+-?\\w*)+\\.card$","^deeplink\\.(notification|widget|url|search)$","^story\\.(leadmedia|leadgallery|leadimage|similarlink|hyperlink|relatedlink|photogallery|image)$","^tab\\.(\\w+-?\\w*)+\\.content-package\\.(main-visual|title|link-[\\d]+)$","^tab\\.(\\w+-?\\w*)+\\.(\\w+-?\\w*)+\\.more$"]},validatePlayedContentType:function(e){return!(e.event_properties&&e.event_properties.content&&"game"!==e.event_properties.content.type||e.content&&"game"!==e.content.type)}},CBC.APP.ANA.VALIDATORS.MirRoar=function(){function n(e,t){if(CBC.APP.SC.masterSwitch.switches.MirRoar)CBC.APP.ANA.FORMATTERS.MirRoar.formatSignal(e,t)}return{trackEvent:function(e,t){0===Object.keys(CBC.APP.SC.masterSwitch).length||CBC.APP.SC.masterSwitch.switches&&null==CBC.APP.SC.masterSwitch.switches.MirRoar?CBC.APP.SC.UTIL.masterSwitchMetaPromise().then(function(){n(e,t)}):n(e,t)}}}(),CBC.APP.ANA.VALIDATORS.Comscore={trackPageLoad:function(){CBC.APP.COMSCORE&&!CBC.APP.SC.UTIL.isIOSWebviewPrivate()&&CBC.APP.COMSCORE.Call()}},CBC.APP.ANA.VALIDATORS.Chartbeat={trackPageLoad:function(){window._sf_async_config.cbc&&"gamp"!==CBC.APP.SC.DTM.formatted.adobe.syndicate&&window._sf_async_config.cbc.pageChange()}},CBC.APP.ANA.VALIDATORS.Cxense={trackPageLoad:function(){CBC.APP.CXENSE&&CBC.APP.CXENSE.pageView()}},CBC.APP.ANA.VALIDATORS.HarmonizedAdobe=function(){var o=JSON.parse('{\n    "app": {\n        "name": {\n            "mediaSessionStarted": {\n                "mandatory": true,\n                "streamTypes": ["ALL_STREAM_TYPES"]\n            }\n        },\n        "version": {\n            "mediaSessionStarted": {\n                "mandatory": true,\n                "streamTypes": ["ALL_STREAM_TYPES"]\n            }\n        }\n    },\n    "cms": {\n        "content": {\n            "area": {\n                "mediaSessionStarted": {\n                    "mandatory": false,\n                    "streamTypes": ["ALL_STREAM_TYPES"]\n                }\n            },\n            "cms": {\n                "mediaSessionStarted": {\n                    "mandatory": true,\n                    "streamTypes": ["ALL_STREAM_TYPES"]\n                }\n            },\n            "genre": {\n                "level1": {\n                    "mediaSessionStarted": {\n                        "mandatory": false,\n                        "streamTypes": ["ALL_STREAM_TYPES"]\n                    }\n                }\n            },\n            "id": {\n                "mediaSessionStarted": {\n                    "mandatory": true,\n                    "streamTypes": ["ALL_STREAM_TYPES"]\n                }\n            },\n            "keywords": {\n                "mediaSessionStarted": {\n                    "mandatory": false,\n                    "streamTypes": ["ALL_STREAM_TYPES"]\n                }\n            },\n            "media": {\n                "chapter_length": {\n                    "mediaChapterStarted": {\n                        "mandatory": true,\n                        "streamTypes": ["ALL_STREAM_TYPES"]\n                    }\n                },\n                "chapter_name": {\n                    "mediaChapterStarted": {\n                        "mandatory": true,\n                        "streamTypes": ["ALL_STREAM_TYPES"]\n                    }\n                },\n                "chapter_number": {\n                    "mediaChapterStarted": {\n                        "mandatory": true,\n                        "streamTypes": ["ALL_STREAM_TYPES"]\n                    }\n                },\n                "chapter_start": {\n                    "mediaChapterStarted": {\n                        "mandatory": true,\n                        "streamTypes": ["ALL_STREAM_TYPES"]\n                    }\n                },\n                "episode": {\n                    "mediaSessionStarted": {\n                        "mandatory": false,\n                        "streamTypes": ["on-demand"]\n                    }\n                },\n                "is_full_episode": {\n                    "mediaSessionStarted": {\n                        "mandatory": false,\n                        "streamTypes": ["ALL_STREAM_TYPES"]\n                    }\n                },\n                "length": {\n                    "mediaSessionStarted": {\n                        "mandatory": false,\n                        "streamTypes": ["on-demand"]\n                    }\n                },\n                "liveondemand": {\n                    "mediaSessionStarted": {\n                        "mandatory": false,\n                        "streamTypes": ["ALL_STREAM_TYPES"]\n                    }\n                },\n                "media_title": {\n                    "mediaSessionStarted": {\n                        "mandatory": false,\n                        "streamTypes": ["ALL_STREAM_TYPES"]\n                    }\n                },\n                "region": {\n                    "mediaSessionStarted": {\n                        "mandatory": false,\n                        "streamTypes": ["ALL_STREAM_TYPES"]\n                    }\n                },\n                "season": {\n                    "mediaSessionStarted": {\n                        "mandatory": false,\n                        "streamTypes": ["on-demand"]\n                    }\n                },\n                "sport": {\n                    "mediaSessionStarted": {\n                        "mandatory": false,\n                        "streamTypes": ["ALL_STREAM_TYPES"]\n                    }\n                },\n                "stream_type": {\n                    "mediaSessionStarted": {\n                        "mandatory": false,\n                        "streamTypes": ["ALL_STREAM_TYPES"]\n                    }\n                }\n            },\n            "producer": {\n                "name": {\n                    "mediaSessionStarted": {\n                        "mandatory": false,\n                        "streamTypes": ["on-demand"]\n                    }\n                }\n            },\n            "published": {\n                "date": {\n                    "mediaSessionStarted": {\n                        "mandatory": false,\n                        "streamTypes": ["live", "on-demand"]\n                    }\n                }\n            },\n            "station_code": {\n                "mediaSessionStarted": {\n                    "mandatory": false,\n                    "streamTypes": ["ALL_STREAM_TYPES"]\n                }\n            },\n            "tier": {\n                "mediaSessionStarted": {\n                    "mandatory": false,\n                    "streamTypes": ["ALL_STREAM_TYPES"]\n                }\n            },\n            "title": {\n                "mediaSessionStarted": {\n                    "mandatory": false,\n                    "streamTypes": ["ALL_STREAM_TYPES"]\n                }\n            },\n            "type": {\n                "mediaSessionStarted": {\n                    "mandatory": false,\n                    "streamTypes": ["ALL_STREAM_TYPES"],\n                    "allowlistLocation": "content.media.type"\n                }\n            }\n        },\n        "department": {\n            "level1": {\n                "mediaSessionStarted": {\n                    "mandatory": false,\n                    "streamTypes": ["ALL_STREAM_TYPES"]\n                }\n            },\n            "level2": {\n                "mediaSessionStarted": {\n                    "mandatory": false,\n                    "streamTypes": ["ALL_STREAM_TYPES"]\n                }\n            },\n            "level3": {\n                "mediaSessionStarted": {\n                    "mandatory": false,\n                    "streamTypes": ["ALL_STREAM_TYPES"]\n                }\n            }\n        }\n    },\n    "feature": {\n        "instance": {\n            "mediaSessionStarted": {\n                "mandatory": false,\n                "streamTypes": ["ALL_STREAM_TYPES"]\n            }\n        },\n        "name": {\n            "mediaSessionStarted": {\n                "mandatory": false,\n                "streamTypes": ["ALL_STREAM_TYPES"]\n            }\n        },\n        "position": {\n            "mediaSessionStarted": {\n                "mandatory": false,\n                "streamTypes": ["ALL_STREAM_TYPES"]\n            }\n        },\n        "value": {\n            "mediaSessionStarted": {\n                "mandatory": false,\n                "streamTypes": ["ALL_STREAM_TYPES"]\n            }\n        }\n    },\n    "player": {\n        "mediaAdBreak": {\n            "name": {\n                "mediaAdBreakStarted": {\n                    "mandatory": true,\n                    "streamTypes": ["ALL_STREAM_TYPES"]\n                }\n            },\n            "offset": {\n                "mediaAdBreakStarted": {\n                    "mandatory" : true,\n                    "streamTypes": ["ALL_STREAM_TYPES"]\n                }\n            },\n            "podIndex": {\n                "mediaAdBreakStarted": {\n                    "mandatory": true,\n                    "streamTypes": ["ALL_STREAM_TYPES"]\n                }\n            }\n        },\n        "name": {\n            "mediaSessionStarted": {\n                "mandatory": false,\n                "streamTypes": ["ALL_STREAM_TYPES"]\n            }\n        },\n        "playhead": {\n            "mediaSessionStarted": {\n                "mandatory": true,\n                "streamTypes": ["ALL_STREAM_TYPES"]\n            },\n            "mediaAdBreakStarted": {\n                "mandatory": true,\n                "streamTypes": ["ALL_STREAM_TYPES"]\n            },\n            "mediaChapterStarted": {\n                "mandatory": true,\n                "streamTypes": ["ALL_STREAM_TYPES"]\n            },\n            "mediaOther": {\n                "mandatory": true,\n                "streamTypes": ["ALL_STREAM_TYPES"]\n            }\n        }\n    },\n    "sponsor": {\n        "name": {\n            "mediaSessionStarted": {\n                "mandatory": false,\n                "streamTypes": ["on-demand"]\n            }\n        }\n    }\n}\n');return{trackPageLoad:function(){CBC.APP.ANA.FORMATTERS.HarmonizedAdobe.formatPageLoad()},trackEvent:function(e,t){CBC.APP.ANA.FORMATTERS.HarmonizedAdobe.formatSignal(e,t)},trackMediaState:function(e,t){if(!t.media_object)throw{name:"MEDIAOBJ_NOT_FOUND",message:"The media_object object was not found at its expected location in the payload."};var n=Object.getOwnPropertyNames(t.media_object)[0],r=window.CBCRC.ANA.MEDIA.getActivePlayerList();if(!(n&&{}.hasOwnProperty.call(r,n)&&["mediaAdBreakCompleted","mediaAdBreakStarted","mediaBufferCompleted","mediaBufferStarted","mediaChapterStarted","mediaChapterCompleted","mediaCompleted","mediaPaused","mediaPlayStarted","mediaSeekStarted","mediaSeekCompleted","mediaSessionCompleted","mediaSessionStarted"].includes(e)))throw{name:"MEDIAOBJ_ID_INVALID",message:"The Harmonized Media Tracking ID is either missing or not properly mapped against vendor media tracking."};r=t.media_object[n],n=window.CBCRC.ANA.DATALAYER.validateMediaProperties(e,r,o,[]);if(n.returnCode)throw n;window.CBC.APP.ANA.FORMATTERS.HarmonizedAdobe.formatMediaSignal(e,t)}}}(),CBC.APP.ANA.VALIDATORS.ESS=function(){var r={LISTENED:"LISTENED",LOADED:"LOADED",READ:"READ",STREAMED:"STREAMED",WATCHED:"WATCHED"};return{trackEvent:function(e,t){var n=CBC.APP.ANA.FORMATTERS.ESS.generateGoogleCloudPayload(),t=JSON.parse(JSON.stringify(t));if(CBC.APP.ANA.FORMATTERS.ESS&&CBC.APP.SC.masterSwitch&&CBC.APP.SC.masterSwitch.switches&&!CBC.APP.SC.UTIL.getDoNotTrackValue())return e=e.toUpperCase(),!!Object.keys(r).includes(e)&&(e!==r.LOADED||"story"===CBC.APP.SC.DTM.formatted.raw.contenttype)&&(e===r.READ?!(!CBC.APP.SC.masterSwitch.switches.essv0||n&&n.content&&(!n.content.id||"comments"===n.content.type)||(CBC.APP.ANA.FORMATTERS.ESS.formatSignal(e,n),0)):!(!CBC.APP.SC.masterSwitch.switches.essv1||!CBC.APP.SC.masterSwitch.switches.essv0)&&void CBC.APP.ANA.FORMATTERS.ESS.formatSignal(e,t))}}}(),CBC.APP.ANA.DISPATCHERS.Adobe={dispatch:function(e){e.t()}},CBC.APP.ANA.DISPATCHERS.DAL={dispatch:function(n,r,e){var o=e,e="https://dal.data.cbc.ca/v1/publish",a=(new Map).set(500,!0).set(502,!0).set(503,!0).set(504,!0);CBC.APP.SC.UTIL.makePOSTRequest(e,JSON.stringify(n),{success:function(e,t){void 0!==r&&r(JSON.parse(e.response))},failure:function(e,t){a.has(e.status)&&0<o?(--o,setTimeout(function(){CBC.APP.ANA.DISPATCHERS.DAL.dispatch(n,r,o)},2e3)):a.has(e.status)&&o<=0?CBC.APP.SC.UTIL.debug("ERROR: DAL Server too busy or overloaded."):400===e.status?CBC.APP.SC.UTIL.debug("Error: Missing or wrong DAL Payload."):CBC.APP.SC.UTIL.debug("Unable to talk to DAL endpoint.")}},{success:{uri:e},failure:{payload:n,uri:e}},null,{"Content-Type":"application/json"})}},CBC.APP.ANA.DISPATCHERS.FBPIXEL={pageView:function(){fbq("trackCustom","LOADED")}},CBC.APP.ANA.DISPATCHERS.MirRoar={dispatch:function(e){CBC.APP.SC.UTIL.makePOSTRequest("https://us-central1-digitalproducts-gabbo.cloudfunctions.net/web_streaming_prod",JSON.stringify(e),{success:function(e,t){},failure:function(e,t){}},{success:{uri:"https://us-central1-digitalproducts-gabbo.cloudfunctions.net/web_streaming_prod"},failure:{payload:e,uri:"https://us-central1-digitalproducts-gabbo.cloudfunctions.net/web_streaming_prod"}},null,{"Content-Type":"application/json"})}},CBC.APP.ANA.DISPATCHERS.HarmonizedAdobe={trackEvent:function(e){s_cbc_sitecatalyst&&s_cbc_sitecatalyst.tl(!0,"o",e)},trackPageLoad:function(){s_cbc_sitecatalyst&&(s_cbc_sitecatalyst.events="",s_cbc_sitecatalyst.t())},trackMediaSignal:function(e,t,n){var r=Object.getOwnPropertyNames(t.media_object)[0],o=window.CBCRC.ANA.MEDIA.getActivePlayerList();if(!{}.hasOwnProperty.call(o,r))throw{name:"MEDIA_ID_INVALID",message:"The media tracking ID supplied is either invalid or expired. Dispatch aborted."};var a=o[r],i=t.media_object[r],s=Number(i.player.playhead);switch(e){case"mediaAdBreakCompleted":CBC.APP.SC.VideoHeartbeat.adComplete(a,{id:"Not Specified"}),CBC.APP.SC.VideoHeartbeat.adBreakComplete(a,{playhead:s});break;case"mediaAdBreakStarted":var c=n[0];CBC.APP.SC.VideoHeartbeat.adBreakStart(a,c);CBC.APP.SC.VideoHeartbeat.adStart(a,{id:"Not Specified",length:1,name:"Not Specified",position:1});break;case"mediaBufferCompleted":CBC.APP.SC.VideoHeartbeat.bufferComplete(a,{playhead:s});break;case"mediaBufferStarted":CBC.APP.SC.VideoHeartbeat.bufferStart(a,{playhead:s});break;case"mediaChapterStarted":c=n[0];CBC.APP.SC.VideoHeartbeat.chapterStart(a,c);break;case"mediaChapterCompleted":CBC.APP.SC.VideoHeartbeat.chapterComplete(a,{playhead:s});break;case"mediaCompleted":CBC.APP.SC.VideoHeartbeat.videoComplete(a,{playhead:s});break;case"mediaPaused":CBC.APP.SC.VideoHeartbeat.videoPause(a,{playhead:s});break;case"mediaPlayStarted":CBC.APP.SC.VideoHeartbeat.videoPlay(a,{playhead:s});break;case"mediaSeekCompleted":CBC.APP.SC.VideoHeartbeat.seekComplete(a,{playhead:s});break;case"mediaSeekStarted":CBC.APP.SC.VideoHeartbeat.seekStart(a,{playhead:s});break;case"mediaSessionCompleted":CBC.APP.SC.VideoHeartbeat.videoUnload(a),CBCRC.ANA.MEDIA.destroy(r);break;case"mediaSessionStarted":c=n[0],c=(CBC.APP.SC.VideoHeartbeat.init(c),n[1]);CBC.APP.SC.VideoHeartbeat.videoLoad(a,c,i);break;default:throw CBC.APP.ANA.ER.report("Unknown Harmonized Signal ".concat(e),e,[CBC.APP.ANA.ER.TAG_TYPES.error.VAL,CBC.APP.ANA.ER.TAG_TYPES.tracking.MEDIA]),{name:"MEDIA_SIGNAL_UNKNOWN",message:"The media signal being dispatched is not recognized. Dispatch aborted."}}}},CBC.APP.ANA.DISPATCHERS.ESS={trackEvent:function(n,r){var o,a,e,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:void 0;0!==n||CBC.APP.SC.masterSwitch.switches.essv0?1!==n||CBC.APP.SC.masterSwitch.switches.essv1?(o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:3,a=(new Map).set(500,!0).set(502,!0).set(503,!0).set(504,!0),e=(0===n?CBC.APP.SC.masterSwitch.googlecloud.essv0:CBC.APP.SC.masterSwitch.googlecloud.essv1).url,CBC.APP.SC.UTIL.makePOSTRequest(e,JSON.stringify(r),{success:function(e,t){void 0!==i&&i(JSON.parse(e.response))},failure:function(e,t){a.has(e.status)&&0<o?(--o,setTimeout(function(){CBC.APP.ANA.DISPATCHERS.ESS.trackEvent(n,r,i,o)},2e3)):a.has(e.status)&&o<=0?(console.log("ERROR: ESS Server too busy or overloaded."),console.log("    URL: "+t.failure.uri),console.log("    Payload: "+JSON.stringify(t.failure.payload))):400===e.status?(console.log("ERROR: Missing or malformed ESS Payload."),console.log("    Payload: "+JSON.stringify(t.failure.payload))):(console.log("ERROR: Unable to talk to ESS Enpoint."),console.log("    URL: "+t.failure.uri))}},{success:{uri:e},failure:{payload:r,uri:e}},null,{"Content-Type":"application/json"})):console.log("ERROR: ESS v1 is disabled."):console.log("ERROR: ESS v0 is disabled.")}},function(){var e,t=/cbckids\.(ca|com)|cbc\.(ca|com)(:\d{4})?\/kids($|\/|cbc2|news|fantasyhockey)|subscriptions\.cbc\.ca\/listmanagement\/widget\/KID|gem\.cbc\.ca\/category\/kids/i,i=((A=B=B||{}).BLUECONIC="blueconic",A.LOTAME="lotame",(e=e||{}).GLOBAL_DISABLE_USER_TRACKING="globalDisableUserTracking",["www.cbc.ca","gem.cbc.ca","newsinteractives.cbc.ca","cbchelp.cbc.ca","subscriptions.cbc.ca","usability.cbc.ca"]),o={watch:!0,live:!0,betalisten:!0,gem:!0},M={artists:!0},h=(r.prototype.getProductHostName=function(){if(null==this.productHostName){this.productHostName=this.hostname||"";var e=this.hostname.split("."),t=null,n=null,r=null;if(2<=e.length&&(t=e[e.length-1],n=e[e.length-2],3<=e.length)&&(r=e[0]),"ca"===t){e=null;if("cbc"===n)e=o;else{if("cbcmusic"!==n)return this.productHostName;e=M}this.productHostName=(e[r]?"".concat(r,"."):"").concat(n,".").concat(t)}}return this.productHostName},r.getLocationUrl=function(){return window.location.href},r),a=(Object.defineProperty(n,"spa",{get:function(){return!0===(window.CBC.APP.SC.DTM.DATA&&window.CBC.APP.SC.DTM.DATA.spa)},enumerable:!1,configurable:!0}),Object.defineProperty(n,"keywords",{get:function(){var e=window.CBC.APP.SC.DTM.formatted&&window.CBC.APP.SC.DTM.formatted.lotame&&window.CBC.APP.SC.DTM.formatted.lotame.keywords;return void 0===e?null:e},enumerable:!1,configurable:!0}),Object.defineProperty(n,"contentType",{get:function(){return window.CBC.APP.SC.DTM.DATA&&window.CBC.APP.SC.DTM.DATA.contenttype||""},enumerable:!1,configurable:!0}),Object.defineProperty(n,"contentGenre",{get:function(){var e;return(null==(e=null==(e=window.CBC.APP.SC.DTM.DATA)?void 0:e.content)?void 0:e.genre)||""},enumerable:!1,configurable:!0}),Object.defineProperty(n,"contentSeason",{get:function(){var e;return(null==(e=null==(e=window.CBC.APP.SC.DTM.DATA)?void 0:e.content)?void 0:e.season)||""},enumerable:!1,configurable:!0}),Object.defineProperty(n,"title",{get:function(){var e;return(null==(e=window.CBC.APP.SC.DTM.DATA)?void 0:e.title)||""},enumerable:!1,configurable:!0}),Object.defineProperty(n,"url",{get:function(){return h.getLocationUrl()||""},enumerable:!1,configurable:!0}),Object.defineProperty(n,"userTier",{get:function(){return window.CBC.APP.SC.DTM.DATA&&window.CBC.APP.SC.DTM.DATA.userTier||""},enumerable:!1,configurable:!0}),Object.defineProperty(n,"sponsorName",{get:function(){return window.CBC.APP.SC.DTM&&window.CBC.APP.SC.DTM.formatted&&window.CBC.APP.SC.DTM.formatted.raw&&window.CBC.APP.SC.DTM.formatted.raw.sponsor&&window.CBC.APP.SC.DTM.formatted.raw.sponsor.name||""},enumerable:!1,configurable:!0}),Object.defineProperty(n,"grapeshotCategories",{get:function(){return window.CBC.APP.SC.DTM.DATA&&window.CBC.APP.SC.DTM.DATA.grapeshotCategories||[]},enumerable:!1,configurable:!0}),Object.defineProperty(n,"grapeshotKeywords",{get:function(){return window.CBC.APP.SC.DTM.DATA&&window.CBC.APP.SC.DTM.DATA.grapeshotKeywords||[]},enumerable:!1,configurable:!0}),n),u=function(e,i,s,c){return new(s=s||Promise)(function(n,t){function r(e){try{a(c.next(e))}catch(e){t(e)}}function o(e){try{a(c.throw(e))}catch(e){t(e)}}function a(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,o)}a((c=c.apply(e,i||[])).next())})},d=function(r,o){var a,i,s,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},u={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function e(n){return function(e){var t=[n,e];if(a)throw new TypeError("Generator is already executing.");for(;c=u&&t[u=0]?0:c;)try{if(a=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return c.label++,{value:t[1],done:!1};case 5:c.label++,i=t[1],t=[0];continue;case 7:t=c.ops.pop(),c.trys.pop();continue;default:if(!((s=0<(s=c.trys).length&&s[s.length-1])||6!==t[0]&&2!==t[0])){c=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3]))c.label=t[1];else if(6===t[0]&&c.label<s[1])c.label=s[1],s=t;else{if(!(s&&c.label<s[2])){s[2]&&c.ops.pop(),c.trys.pop();continue}c.label=s[2],c.ops.push(t)}}t=o.call(r,c)}catch(e){t=[6,e],i=0}finally{a=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}};function n(){}function r(e){var t=this,e=(this.hostname="",this.pathname="",this.path=[],this.query="",this.params={},this.fragment="",this.productHostName=null,e=(e=e||"").toLowerCase(),new URL(e,"https://www.cbc.ca"));e.hostname&&(this.hostname=e.hostname.replace(/^www\./,"")),e.pathname&&(this.pathname=e.pathname,this.path=e.pathname.split("/").filter(Boolean)),e.hash&&(this.fragment=e.hash.replace(/^#/,"")),e.search&&(this.query=e.search.slice(1),this.query.split("&").forEach(function(e){e=e.split("=");t.params[e[0]]=decodeURIComponent(e[1])}))}function s(e){var t=new Promise(function(e){window.vfQ=window.vfQ||[],window.vfQ.push(function(){e(null)})}),n=e.logger;function r(){return window.vf?2:window.viafoura?1:0}function o(){return t.then(function(){return 1<r()?window.vf:window.viafoura})}function a(){var e=this;return t.then(function(){return u(e,void 0,void 0,function(){return d(this,function(e){switch(e.label){case 0:return 1<r()?[4,o()]:[3,2];case 1:return[2,e.sent().context.get("user")];case 2:return[4,o()];case 3:return[2,e.sent().users.current()]}})})})}function i(){return u(this,void 0,void 0,function(){var t;return d(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,a()];case 1:return t=e.sent(),"guest"!==(t=t.user_privilege)&&t?[2,t]:[2,null];case 2:return e.sent(),n.debug("user has no privilege!"),[2,null];case 3:return[2]}})})}function s(){return u(this,void 0,void 0,function(){var t,n;return d(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,a()];case 1:return t=e.sent(),n=1<r()?1e3:1,[2,Math.floor(t.date_created/n)||0];case 2:return e.sent(),[2,0];case 3:return[2]}})})}function c(){return u(this,void 0,void 0,function(){var t;return d(this,function(e){switch(e.label){case 0:return e.trys.push([0,3,,4]),[4,a()];case 1:return t=e.sent(),1===r()?[2,t.comments_made]:[4,t.data_count()];case 2:return[2,e.sent().commentsMade||0];case 3:return e.sent(),[2,0];case 4:return[2]}})})}return{viafouraLoaded:t,version:r,api:o,user:a,isLoggedIn:function(){return u(this,void 0,void 0,function(){var t;return d(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,i()];case 1:return[2,(t=e.sent())&&"guest"!==t];case 2:return e.sent(),[2,!1];case 3:return[2]}})})},userId:function(){return u(this,void 0,void 0,function(){return d(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,a()];case 1:return[2,e.sent().id||null];case 2:return e.sent(),[2,null];case 3:return[2]}})})},userPrivilege:i,userDateCreated:s,commentsMade:c,activityRange:function(){return u(this,void 0,void 0,function(){var r,o;return d(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,Promise.all([s(),c()])];case 1:return o=e.sent(),r=o[0],o=o[1],[2,(t=r,n=o,(n/=(Math.floor(Date.now()/1e3)-t+1)/86400)<=0?"inactive":n<=1?"less than 1 comment per day":n<=5?"1-5 comments per day":n<=16?"5-16 comments per day":"more than 16 comments per day")];case 2:return e.sent(),[2,"inactive"];case 3:return[2]}var t,n})})}}}function c(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||((r=r||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}m.prototype.init=function(){this._pageChangeSub=this.update.bind(this),this.pubSub.subscribe("pageChange",this._pageChangeSub)},m.prototype.update=function(){900<=this.getSecondsDiff()?(this.pubSub.publish("startGeoipSession"),this.updateSessionTime()):this.logger.debug("Skipping Geoip update")},Object.defineProperty(m.prototype,"city",{get:function(){return"function"==typeof window.geoip_city?window.geoip_city():""},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"region",{get:function(){return"function"==typeof window.geoip_region?window.geoip_region():""},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"countryCode",{get:function(){return"function"==typeof window.geoip_country_code?window.geoip_country_code():""},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"fsa",{get:function(){return"function"==typeof window.geoip_postal_code?window.geoip_postal_code():""},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"geoipData",{get:function(){var e=[];return this.city&&e.push("city : "+this.city),this.region&&e.push("region code : "+this.region),this.countryCode&&e.push("country code : "+this.countryCode),this.fsa&&e.push("fsa : "+this.fsa),e},enumerable:!1,configurable:!0}),m.prototype.loadGeoipScript=function(){var t=this;return new Promise(function(e){window.CBC.APP.SC.UTIL.loadScript("//geoip.radio-canada.ca/geoip.js",function(){e(t.geoipData)},!0,!0)})},m.prototype.updateSessionTime=function(){var e={value:!0,timestamp:(new Date).getTime()};try{window.sessionStorage.setItem("geoip",JSON.stringify(e))}catch(e){void 0===window.sessionStorage?this.logger.debug("This browser doesn't support sessionStorage. The error message is {0}",e):this.logger.debug("Unable to store geoip in sessionStorage: {0}",e)}},m.prototype.getSessionTime=function(){try{return JSON.parse(window.sessionStorage.getItem("geoip")).timestamp}catch(e){return void 0===window.sessionStorage?this.logger.debug("This browser doesn't support sessionStorage. The error message is {0}",e):this.logger.debug("No value for key 'geoip' in sessionStorage or 'timestamp' in geoip."),0}},m.prototype.getSecondsDiff=function(){var e=(new Date).getTime(),e=Math.floor((e-this.getSessionTime())/1e3);return this.logger.trace("Time difference: {0}",e),e};var V=m,C=(f.TYPES={INTEREST:"int",GENERIC_PROPERTY:"genp",CUSTOM_SEGMENT:"seg",ACTION:"act",MEDIA:"med",GENERIC_GEO:"geo",GENERIC_DEMO:"dem",SITEMAPS:"sm",ADVERTISER:"adv",CAMPAIGN_INTERACTION:"camp_int"},f),x=(b.prototype.listSubPaths=function(e,t){void 0===t&&(t=" : ");var n=[],r=e.path.slice(0),o=(-1!==e.fragment.indexOf("/")&&0<(e=e.fragment.split("/").filter(Boolean)).length&&(r=c(c(c([],r,!0),["#"],!1),e,!0)),[]);return r.forEach(function(e){o.push(e),"#"!==e&&n.push(o.join(t))}),n},b.prototype.buildLoadedBehaviours=function(e,t,n){var r=e.url,o=e.title,a=e.contentType,i=e.contentGenre,s=e.contentSeason,c=e.keywords,u=e.gsCategories,d=e.gsKeywords,C=e.userTier,e=e.sponsorName,A=this.buildSiteTrafficBehaviours(r),l=this.buildSiteSectionBehaviours(r,a),P=[],p=[],c=("story"===a&&(P=this.buildKeywordBehaviours(c),p=this.buildGrapeshotBehaviours(u,d)),this.buildTimestampBehaviours("Page View")),u=new h(h.getLocationUrl()),d=this.buildCampaignReferralBehaviours(u),u=[],a=(a&&"index"===a&&(u=this.buildLandingPageBehaviours(r)),this.buildUserTierBehaviours(r,C)),C=this.buildSponsorBehaviours(r,e),e=[];return t&&n&&(e=this.buildOttVideoMetadataBehaviours(r,o,i,s)),[].concat(A,l,P,p,c,d,u,a,C,e)},b.prototype.buildUserTierBehaviours=function(e,t){var n=[],e=e?e.getProductHostName():"",e="".concat(e," : loaded");return t&&n.push(new C(C.TYPES.ACTION,"".concat(e," : user tier : ").concat(t))),n},b.prototype.buildSponsorBehaviours=function(e,t){var n=[],e=e?e.getProductHostName():"",e="".concat(e," : loaded");return t&&n.push(new C(C.TYPES.INTEREST,"".concat(e," : sponsor : ").concat(t))),n},b.prototype.buildSiteTrafficBehaviours=function(e){e=e?e.getProductHostName():"";return[new C(C.TYPES.INTEREST,"".concat(e," : Total Site Traffic"))]},b.prototype.buildSiteSectionBehaviours=function(e,t){var n=[],r=e?e.getProductHostName():"",o="".concat(r," : Site Section");if(0===e.path.length)n.push(new C(C.TYPES.INTEREST,"".concat(o," : homepage")));else for(var a=this.listSubPaths(e),i=0;i<a.length;i++){var s=C.TYPES.INTEREST;i===a.length-1&&("comeandsaygday"===a[0]?s=C.TYPES.CAMPAIGN_INTERACTION:t&&"index"!==t&&(s=C.TYPES.MEDIA)),n.push(new C(s,"".concat(o," : ").concat(a[i])))}return n},b.prototype.buildLandingPageBehaviours=function(e){var t=[],n=e?e.getProductHostName():"",n="".concat(n," : Landing Page");return 0<e.path.length&&(e=this.listSubPaths(e),t.push(new C(C.TYPES.MEDIA,"".concat(n," : ").concat(e[e.length-1])))),t},b.prototype.toPascalCase=function(e){return e.match(/[a-z]+/gi).map(function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}).join(" ")},b.prototype.buildSubjectKeywordBehaviours=function(e){var a=["Demographic Group","Demographic groups","Child and teen health","Sexual and reproductive health","Death and dying","Diagnosis and treatment","Diseases and conditions","Eye health","Heart health","Men's health","Women's health","Mental health","Oral health","Injuries","Seniors' health"],i=["cancer"],s={"&#39;":"'","&#x27;":"'"},c=[],t=C.TYPES.INTEREST;if(!(e instanceof Array))return[];for(var u=this,n=0,r=e;n<r.length;n++){var o=function(e){var t="Keyword : "+u.toPascalCase(e.type);if(!(e=e.path))return{value:[]};if(e=e.replace(new RegExp(Object.keys(s).join("|"),"g"),function(e){return s[e]})){var n=e.split("/").filter(Boolean);if(a.some(function(e){return n.includes(e)})||i.some(function(t){return n.some(function(e){return e.includes(t)})}))return"continue";for(var r=0,o=n;r<o.length;r++)t+=" : "+o[r],-1===c.indexOf(t)&&c.push(t)}}(r[n]);if("object"==_typeof(o))return o.value}return c.map(function(e){return new C(t,e)})},b.prototype.buildKeywordBehaviours=function(e){var t,n=[],r=C.TYPES.INTEREST;if(e&&(e.concepts instanceof Array&&(t=this.buildSubjectKeywordBehaviours(e.concepts),n=n.concat(t)),e.tags instanceof Array)){for(var o=[],a=0,i=e.tags;a<i.length;a++){var s=i[a],s="Keyword : "+this.toPascalCase(s.type)+" : "+s.name;o.push(new C(r,s))}n=n.concat(o)}return n},b.prototype.buildGrapeshotBehaviours=function(e,t){function n(t){return function(e){e&&r.push(new C(C.TYPES.ADVERTISER,"grapeshot : ".concat(t," : ").concat(e.trim())))}}var r=[];return e.forEach(n("category")),t.forEach(n("keyword")),r},b.prototype.buildShareBehaviours=function(e,t){t=t||"";var n=e?e.getProductHostName():"",r=(t=t.toLowerCase().replace(/\b[a-z]/g,function(e){return e.toUpperCase()}),"".concat(n," : Share Content")),o="".concat(n," : Share Content on ").concat(t),n=this.listSubPaths(e),a=(n.push(""),[]);return n.forEach(function(e){e=e&&" : ".concat(e),a.push(new C(C.TYPES.ACTION,"".concat(r).concat(e)),new C(C.TYPES.ACTION,"".concat(o).concat(e)))}),a},b.prototype.buildSurveySubmissionBehaviours=function(n,e){var r;return e&&e instanceof Array&&!(e.length<=0)?(r=[],e.forEach(function(e){var t="Survey Data : ".concat(n," : ").concat(e.tag," : ");e.choices instanceof Array!=0&&e.choices.forEach(function(e){r.push(new C(C.TYPES.ACTION,"".concat(t).concat(e)))})}),r):(this.logger.error("Answers does not exist or empty"),[])},b.prototype.buildSurveyLoadedBehaviour=function(e){return e?[new C(C.TYPES.ACTION,"Survey Loaded : ".concat(e))]:[]},b.prototype.buildAudienceSegmentRatingBehaviours=function(e,t,n){return"number"!=typeof n?(this.logger.error("Segment rating was not provided"),[]):(n=0<n?"like":"dislike",e="Audience Segment Feedback : ".concat(e," : ").concat(n),e=[new C(C.TYPES.INTEREST,e)],t&&(t="Family Feedback : ".concat(t," : ").concat(n),e.push(new C(C.TYPES.INTEREST,t))),e)},b.prototype.buildTimestampBehaviours=function(e){var t=new Date,n="Timestamp",r={0:"Sunday",1:"Monday",2:"Tuesday",3:"Wednesday",4:"Thursday",5:"Friday",6:"Saturday"}[t.getDay()],t=t.getHours(),t=(t<10?"0":"").concat(t,":00");return[new C(C.TYPES.ACTION,"".concat(n," : ").concat(t," : ").concat(e)),new C(C.TYPES.ACTION,"".concat(n," : ").concat(r," : ").concat(e)),new C(C.TYPES.ACTION,"".concat(n," : ").concat(t," : ").concat(r," : ").concat(e))]},b.prototype.buildCampaignReferralBehaviours=function(e){var t,n;return e.params&&void 0!==e.params.cmp&&null!==e.params.cmp?(n=decodeURI(e.params.cmp).replace(/\s+/g," ").match(/[^_]+/g),e="Referral : Campaign : ".concat(e.params.cmp),n&&"newsletter"===n[0].trim()&&(t=n[0].trim(),n=1<n.length?n[1].trim():"",e="Referral : Campaign : ".concat(t," : ").concat(n)),[new C(C.TYPES.INTEREST,"".concat(e))]):[]},b.prototype.buildRegionChangeBehaviours=function(e){return e?[new C(C.TYPES.GENERIC_GEO,"Local Region : news : ".concat(e))]:[]},b.prototype.buildAdTargetingOptOutBehaviour=function(e){return e?[new C(C.TYPES.ACTION,"Global Ad Targeting Opt Out : ".concat(e))]:[]},b.prototype.buildStartWebSessionBehaviour=function(){return[new C(C.TYPES.ACTION,"Start Web Session")]},b.prototype.buildGeoipBehaviours=function(e){if(!e.length)return[];for(var t=[],n=0,r=e;n<r.length;n++){var o=r[n];t.push(new C(C.TYPES.GENERIC_GEO,o))}return t},b.prototype.buildReadBehaviours=function(e,t){var n=[],r=e?e.getProductHostName():"";if("comments"===t)n.push(new C(C.TYPES.ACTION,"".concat(r," : Read comment")));else for(var o="".concat(r," : Read"),a=this.listSubPaths(e),i=0;i<a.length;i++){var s=C.TYPES.INTEREST;i===a.length-1&&t&&"index"!==t&&(s=C.TYPES.MEDIA),n.push(new C(s,"".concat(o," : ").concat(a[i])))}return n},b.prototype.buildCtaClickedBehaviours=function(e,t){e=e?e.getProductHostName():"";return t?[new C(C.TYPES.ACTION,"".concat(e," : CTA clicked : ").concat(t))]:[]},b.prototype.buildOttVideoMetadataBehaviours=function(e,t,n,r){var o,a=[],e=e?e.getProductHostName():"",e="".concat(e," : loaded");return a.push(new C(C.TYPES.ACTION,e)),t&&(o="".concat(e," : ").concat(t),a.push(new C(C.TYPES.INTEREST,o)),o=n?" ".concat(n," "):" ",n="".concat(e," :").concat(o,": ").concat(t),r?(e="".concat(n," : season ").concat(r),a.push(new C(C.TYPES.MEDIA,e))):a.push(new C(C.TYPES.MEDIA,"".concat(n)))),a},b),U=(S.prototype.isValidString=function(e){return"string"==typeof e&&0<e.trim().length&&"nan"!==e.toLowerCase()&&"null"!==e.toLowerCase()&&"undefined"!==e.toLowerCase()},S.prototype.getSectionsList=function(e){return e.replace(/^http[s]?:\/\//,"").split("/").slice(1)},S.prototype.buildStreamedBehaviours=function(e,t){var n,r,o=[],e=e?e.getProductHostName():"",e="".concat(e," : streamed");return t&&(o.push(new C(C.TYPES.ACTION,e)),t.content&&t.content.media&&(t.content.media.liveondemand&&"live"===t.content.media.liveondemand||"linear"===t.content.media.liveondemand?t.content.media.streamtitle&&o.push(new C(C.TYPES.INTEREST,"".concat(e," : ").concat(t.content.media.liveondemand," : ").concat(t.content.media.streamtitle))):this.isValidString(t.content.media.show)&&(n="".concat(e," : ").concat(t.content.media.show),o.push(new C(C.TYPES.INTEREST,n)),n=this.isValidString(t.content.media.genre)?" ".concat(t.content.media.genre," "):" ",n="".concat(e," :").concat(n,": ").concat(t.content.media.show),this.isValidString(t.content.media.seasonnumber)?(r="".concat(n," : season ").concat(t.content.media.seasonnumber),this.isValidString(t.content.media.episodenumber)?r="".concat(r," : episode ").concat(t.content.media.episodenumber):this.isValidString(t.content.media.streamtitle)&&(r="".concat(r," : ").concat(t.content.media.streamtitle)),o.push(new C(C.TYPES.MEDIA,r))):this.isValidString(t.content.media.episodenumber)?o.push(new C(C.TYPES.MEDIA,"".concat(n," : episode ").concat(t.content.media.episodenumber))):this.isValidString(t.content.media.streamtitle)&&o.push(new C(C.TYPES.MEDIA,"".concat(n," : ").concat(t.content.media.streamtitle))))),t.feature)&&this.isValidString(null==(r=t.feature)?void 0:r.name)&&o.push(new C(C.TYPES.ACTION,"".concat(e," : ").concat(t.feature.name))),o},S.prototype.buildStreamedShortFormVideo=function(e){var t;return e.content&&e.content.media?(t=[e.content.media.genre,e.content.media.region,e.content.media.show,e.content.title],e.content.url&&!e.content.url.match(/\/player\/play\//)&&(e=this.getSectionsList(e.content.url))&&(t.push("embedded_in"),t=t.concat(e)),e=function(e,t){for(var n,r=0,o=t.length;r<o;r++)!n&&r in t||((n=n||Array.prototype.slice.call(t,0,r))[r]=t[r]);return e.concat(n||Array.prototype.slice.call(t))}(["cbc.ca","streamed"],t.filter(function(e){return e}),!0).join(" : "),[new C(C.TYPES.MEDIA,e)]):[]},S.prototype.buildSubscribedBehaviours=function(e){var t=[],e=e?e.getProductHostName():"",e="".concat(e," : subscribed");return t.push(new C(C.TYPES.ACTION,e)),t},S.prototype.buildUnsubscribedBehaviours=function(e){var t=[],e=e?e.getProductHostName():"",e="".concat(e," : unsubscribed");return t.push(new C(C.TYPES.ACTION,e)),t},S),A={FATAL:"fatal",ERROR:"error",WARN:"warn",INFO:"info",DEBUG:"debug",TRACE:"trace"},l={OFF:"OFF",FATAL:"fatal",ERROR:"error",WARN:"warn",INFO:"info",DEBUG:"debug",TRACE:"trace",ALL:"ALL"},P=[A.FATAL,A.ERROR,A.WARN,A.INFO,A.DEBUG,A.TRACE],p={LEVEL:l,CHANNEL:A,create:function(e){var n=(e=e||l.OFF)===l.OFF?0:e===l.ALL?P.length:P.indexOf(e)+1,r={};function o(e){return e&&e.toString===Object.prototype.toString?JSON.stringify(e):Array.isArray(e)?"[".concat(e.map(o).join(","),"]"):""+e}return P.forEach(function(e,t){r[e]=t<n?function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];e=e||"",t=0<n.length?t.replace(/{(\d+)}/g,function(e,t){return t in n?o(n[parseInt(t,10)]):e}):o(t),console.log("DMP: ".concat(e.toUpperCase(),": ").concat(t))}.bind(null,e):function(){}}),r}},Y=/^idt\|(.*)/;function S(e){e=e.logger;this.logger=e}function b(e){e=e.logger;this.logger=e}function f(e,t){this.type=e,this.value=t}function m(e){var t=e.pubSub,n=e.logger,r=e.lotame,e=e.util;this.logger=n,this.lotame=r,this.pubSub=t,this.util=e}function g(){var e;return window.localStorage.getItem("LRTokenKey")?window.localStorage.getItem("LRTokenKey").replace(/"/g,""):window.localStorage.getItem("lrtoken")?window.localStorage.getItem("lrtoken").replace(/"/g,""):window.CBC.APP.SC.UTIL.getCookie("lr-user--token")?window.CBC.APP.SC.UTIL.getCookie("lr-user--token").replace(/"/g,""):(e=function(){for(var e,t,n=0,r=Object.entries(window.localStorage);n<r.length;n++){var o=r[n],a=o[0],o=o[1];Y.test(a)&&(e=o)}return e?(t=window.atob(e),t=JSON.parse(t).token,JSON.parse(window.atob(t.split(".")[0])),JSON.parse(window.atob(t.split(".")[1]))):null}())?e.lrat.replace(/"/g,""):null}function v(e,i,s,c){return new(s=s||Promise)(function(n,t){function r(e){try{a(c.next(e))}catch(e){t(e)}}function o(e){try{a(c.throw(e))}catch(e){t(e)}}function a(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,o)}a((c=c.apply(e,i||[])).next())})}function T(r,o){var a,i,s,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},u={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function e(n){return function(e){var t=[n,e];if(a)throw new TypeError("Generator is already executing.");for(;c=u&&t[u=0]?0:c;)try{if(a=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return c.label++,{value:t[1],done:!1};case 5:c.label++,i=t[1],t=[0];continue;case 7:t=c.ops.pop(),c.trys.pop();continue;default:if(!((s=0<(s=c.trys).length&&s[s.length-1])||6!==t[0]&&2!==t[0])){c=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3]))c.label=t[1];else if(6===t[0]&&c.label<s[1])c.label=s[1],s=t;else{if(!(s&&c.label<s[2])){s[2]&&c.ops.pop(),c.trys.pop();continue}c.label=s[2],c.ops.push(t)}}t=o.call(r,c)}catch(e){t=[6,e],i=0}finally{a=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}}_.prototype.init=function(){return v(this,void 0,void 0,function(){return T(this,function(e){switch(e.label){case 0:return this.pubSub.subscribe("SIGNED IN",this._onSignIn),this.pubSub.subscribe("SIGNED OUT",this._onSignOut),[4,this.viafoura.viafouraLoaded];case 1:return e.sent(),this._onViafouraAvailable(),[2]}})})},Object.defineProperty(_.prototype,"accessTokenForUser",{get:g,enumerable:!1,configurable:!0}),_.prototype.getGender=function(e){if(e.Identities)for(var t=0,n=e.Identities;t<n.length;t++){var r=n[t];if(r.Gender)return r.Gender}return e.CustomFields&&e.CustomFields.GenderDescription?e.CustomFields.GenderDescription:e.Gender||""},_.prototype.getAge=function(e){if(e.Identities)for(var t=0,n=e.Identities;t<n.length;t++){var r=n[t];if(r.Age)return r.Age}return e.Age||""},_.prototype.getPostalCode=function(e){var t=e.Addresses&&e.Addresses[0]&&e.Addresses[0].PostalCode;if(e.Identities)for(var n=0,r=e.Identities;n<r.length;n++){var o=r[n];if(o.Addresses&&o.Addresses[0]&&o.Addresses[0].PostalCode)return o.Addresses[0].PostalCode.substring(0,3)}return t?e.Addresses[0].PostalCode.substring(0,3):""},_.prototype._onViafouraAvailable=function(){var r=this;return Promise.all([this.viafoura.userId(),this.viafoura.userPrivilege(),this.viafoura.activityRange()]).then(function(e){var t=e[0],n=e[1],e=e[2];r._sendLotameBehaviours(t,n,e)}).catch(function(e){console.log("Error Message: ",e)})},_.prototype._sendLotameBehaviours=function(e,t,n){e=e?[new C(C.TYPES.CUSTOM_SEGMENT,"Authenticated User"),new C(C.TYPES.CUSTOM_SEGMENT,"User privilege: "+t),new C(C.TYPES.CUSTOM_SEGMENT,"User activity range: "+n)]:[new C(C.TYPES.CUSTOM_SEGMENT,"Unauthenticated User")];this.lotame.sendBehaviours(e)};var w,y,B,E,L,R,F=_,G=(k.prototype.init=function(){this._sendSurveyDataSub=this._onSendSurveyData.bind(this),this.pubSub.subscribe("surveySubmission",this._sendSurveyDataSub),this._sendSurveyNameSub=this._onSendSurveyName.bind(this),this.pubSub.subscribe("surveyLoad",this._sendSurveyNameSub),this._storySharedSub=this._onStoryShared.bind(this),this.pubSub.subscribe("SHARED",this._storySharedSub),this._rateSegmentSub=this._onRateSegment.bind(this),this.pubSub.subscribe("rateAudienceSegment",this._rateSegmentSub),this._regionChangeSub=this._onRegionChange.bind(this),this.pubSub.subscribe("regionChange",this._regionChangeSub),this._adTargetingOptOutSub=this._onAdTargetingOptOut.bind(this),this.pubSub.subscribe("adTargetingOptOut",this._adTargetingOptOutSub),this._startWebSessionSub=this._onStartWebSession.bind(this),this.pubSub.subscribe("START WEB SESSION",this._startWebSessionSub),this._startGeoipSessionSub=this._onStartGeoipSession.bind(this),this.pubSub.subscribe("startGeoipSession",this._startGeoipSessionSub),this._videoStreamedSub=this._onVideoStreamed.bind(this),this.pubSub.subscribe("STREAMED",this._videoStreamedSub),this._subscribedEventSub=this._onSubscribedEvent.bind(this),this.pubSub.subscribe("SUBSCRIBED",this._subscribedEventSub),this._unsubscribedEventSub=this._onUnsubscribedEvent.bind(this),this.pubSub.subscribe("UNSUBSCRIBED",this._unsubscribedEventSub),this._loadedEventSub=this._onLoadedEvent.bind(this),this.pubSub.subscribe("LOADED",this._loadedEventSub),this._readEventSub=this._onReadEvent.bind(this),this.pubSub.subscribe("READ",this._readEventSub),this._ctaClickedEventSub=this._onCtaClicked.bind(this),this.pubSub.subscribe("ctaClicked",this._ctaClickedEventSub)},k.prototype._onLoadedEvent=function(e,t){this.logger.debug("LOADED subscriber");var n,r,o=a.url;o&&(n="ott-web-app"===(null==(n=null==(n=null==(n=null==(n=null==(n=window.CBC)?void 0:n.APP)?void 0:n.SC)?void 0:n.DTM)?void 0:n.DATA)?void 0:n.appname),r="show"===(null==(r=null==(r=null==(r=null==(r=null==(r=window.CBC)?void 0:r.APP)?void 0:r.SC)?void 0:r.DTM)?void 0:r.DATA)?void 0:r.subsection1),o={url:new h(o),title:a.title,contentType:a.contentType,contentGenre:a.contentGenre,contentSeason:a.contentSeason,keywords:a.keywords,gsCategories:a.grapeshotCategories,gsKeywords:a.grapeshotKeywords,userTier:a.userTier,sponsorName:a.sponsorName},o=this.behaviourBuilder.buildLoadedBehaviours(o,n,r),this.lotame.sendBehaviours(o,a.spa))},k.prototype._onStoryShared=function(e,t){this.logger.debug("Story shared - {0}",t);var n=new h(a.url),n=this.behaviourBuilder.buildShareBehaviours(n,t.network);this.lotame.sendBehaviours(n)},k.prototype._onSendSurveyData=function(e,t){this.logger.debug("Send survey data sub - {0}",t);t=this.behaviourBuilder.buildSurveySubmissionBehaviours(t.name,t.answers);this.lotame.sendBehaviours(t)},k.prototype._onSendSurveyName=function(e,t){this.logger.debug("Send survey name sub - {0}",t);t=this.behaviourBuilder.buildSurveyLoadedBehaviour(t);this.lotame.sendBehaviours(t)},k.prototype._onRateSegment=function(e,t){var n=t.segmentId,r=t.family,t=t.rating,n=this.behaviourBuilder.buildAudienceSegmentRatingBehaviours(n,r,t);this.lotame.sendBehaviours(n)},k.prototype._onRegionChange=function(e,t){t=this.behaviourBuilder.buildRegionChangeBehaviours(t.title);this.lotame.sendBehaviours(t)},k.prototype._onAdTargetingOptOut=function(e,t){t=this.behaviourBuilder.buildAdTargetingOptOutBehaviour(t);this.lotame.sendBehaviours(t)},k.prototype._onStartWebSession=function(e,t){var n=this.behaviourBuilder.buildStartWebSessionBehaviour();this.lotame.sendBehaviours(n)},k.prototype._onStartGeoipSession=function(e,t){var n=this;this.geoip.loadGeoipScript().then(function(e){e=n.behaviourBuilder.buildGeoipBehaviours(e);n.lotame.sendBehaviours(e)}).catch(function(){n.logger.error("Error: The script //geoip.radio-canada.ca/geoip.js failed to load")})},k.prototype._onReadEvent=function(e,t){var n=(null==(n=null==(n=null==(n=null==(n=null==(n=null==(n=null==(n=window.CBC)?void 0:n.APP)?void 0:n.SC)?void 0:n.DTM)?void 0:n.formatted)?void 0:n.googlecloud)?void 0:n.content)?void 0:n.type)||a.contentType,r=new h(a.url),r=this.behaviourBuilder.buildReadBehaviours(r,n);this.lotame.sendBehaviours(r)},k.prototype._onVideoStreamed=function(e,t){var n=new h(a.url),r=n.hostname,n=this.behaviourBuilderOtt.buildStreamedBehaviours(n,t);"gem.cbc.ca"==r||/watch.(\S)*cbc.ca/.test(r)||(n=n.concat(this.behaviourBuilderOtt.buildStreamedShortFormVideo(t))),this.lotame.sendBehaviours(n)},k.prototype._onSubscribedEvent=function(e,t){var n=new h(a.url),n=this.behaviourBuilderOtt.buildSubscribedBehaviours(n);this.lotame.sendBehaviours(n)},k.prototype._onUnsubscribedEvent=function(e,t){var n=new h(a.url),n=this.behaviourBuilderOtt.buildUnsubscribedBehaviours(n);this.lotame.sendBehaviours(n)},k.prototype._onCtaClicked=function(e,t){this.logger.debug("Send App CTA click sub - {0}",t);var n=new h(a.url),n=this.behaviourBuilder.buildCtaClickedBehaviours(n,t);this.lotame.sendBehaviours(n)},k),D="vfidtolotame",I="//bcp.crwdcntrl.net/map/c=10743/tp=VIAF/tpid=",j=p.create(p.LEVEL.ALL),H=(N.prototype.init=function(){var e=this;this.viafoura.viafouraLoaded.then(function(){e.addVfEvents()})},N.prototype.run=function(){var t=this;return this.logger.debug("Running Viafoura/Lotame sync pixel code."),this.viafoura.isLoggedIn().then(function(e){t.carryPixelOperations(e)})},N.prototype.carryPixelOperations=function(e){return w=this.getPixel(D),e?w?this.updatePixel():this.addPixel():w?this.deletePixel():void 0},N.prototype.addVfEvents=function(){return e=this,s=function(){var t,n,r,o,a,i,s,c,u,d=this;return r=this,o=function(e){switch(e.label){case 0:return this.logger.debug("Add Viafoura events"),[4,this.viafoura.viafouraLoaded];case 1:e.sent(),t=this.viafoura.version();try{1<t?this.viafoura.api().then(function(e){e.$subscribe("login","success-syncpixel",function(){d.run()})}):this.viafoura.api().then(function(e){e.subscribe("onLoginSuccess",function(){d.run()})})}catch(e){n=1<this.viafoura.version()?"Login.Success":"onLoginSuccess",this.logger.error("Can't subscribe to ".concat(n," event."))}try{1<t?this.viafoura.api().then(function(e){e.$subscribe("logout","success-syncpixel",function(){d.run()})}):this.viafoura.api().then(function(e){e.subscribe("onLogoutSuccess",function(){d.run()})})}catch(e){n=1<this.viafoura.version()?"Logout.Success":"onLogoutSuccess",this.logger.error("Can't subscribe to ".concat(n," event."))}return[2]}},c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},u={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function e(n){return function(e){var t=[n,e];if(a)throw new TypeError("Generator is already executing.");for(;c=u&&t[u=0]?0:c;)try{if(a=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return c.label++,{value:t[1],done:!1};case 5:c.label++,i=t[1],t=[0];continue;case 7:t=c.ops.pop(),c.trys.pop();continue;default:if(!((s=0<(s=c.trys).length&&s[s.length-1])||6!==t[0]&&2!==t[0])){c=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3]))c.label=t[1];else if(6===t[0]&&c.label<s[1])c.label=s[1],s=t;else{if(!(s&&c.label<s[2])){s[2]&&c.ops.pop(),c.trys.pop();continue}c.label=s[2],c.ops.push(t)}}t=o.call(r,c)}catch(e){t=[6,e],i=0}finally{a=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},new(i=(i=void 0,Promise))(function(n,t){function r(e){try{a(s.next(e))}catch(e){t(e)}}function o(e){try{a(s.throw(e))}catch(e){t(e)}}function a(e){var t;e.done?n(e.value):((t=e.value)instanceof i?t:new i(function(e){e(t)})).then(r,o)}a((s=s.apply(e,[])).next())});var e,i,s},N.prototype.getPixel=function(e){return document.getElementById(e)},N.prototype.addPixel=function(){var t=this;return this.logger.debug("Add Viafoura/Lotame sync pixel code."),this.viafoura.userId().then(function(e){e&&t._addPixelToDocument(e)})},N.prototype._addPixelToDocument=function(e){var t=document.createElement("img");t.setAttribute("src",I+e),t.setAttribute("id",D),document.body.appendChild(t)},N.prototype.updatePixel=function(){var t=this;return this.logger.debug("Update Viafoura/Lotame sync pixel code."),this.viafoura.userId().then(function(e){e&&t.getPixel(D).setAttribute("src",I+e)})},N.prototype.deletePixel=function(){this.logger.debug("Delete Viafoura/Lotame sync pixel code."),this.getPixel(D).remove()},N),A=(O.prototype.init=function(){/cbckids\.(ca|com)|cbc\.(ca|com)(:\d{4})?\/kids($|\/|cbc2|news|fantasyhockey)|subscriptions\.cbc\.ca\/widget\/KID/i.test(a.url)||window.CBC.APP.SC.UTIL.isIOSWebviewPrivate()?this.logger.debug("Not initializing DMP on CBC Kids or Kids News"):this._modules.forEach(function(e){return e.init()})},O);function O(e){this.pubSub=e.pubSub,this.util=e.util,this.logger=e.logger,this.lotame=e.lotame,this.behaviourBuilder=new x(this),this.behaviourBuilderOtt=new U(this),this.geoip=new V(this),this.subscribers=new G(this),this.viafoura=s(this),this.syncPixel=new H(this),this.userInfo=new F(this),this._modules=[this.subscribers,this.syncPixel,this.geoip,this.userInfo]}function N(e){var t=e.viafoura,t=void 0===t?s({logger:j}):t,n=e.pubSub,e=e.logger,e=void 0===e?p:e;this.viafoura=t,this.pubSub=n,this.logger=e}function k(e){this.dmp=e,this.logger=e.logger,this.pubSub=e.pubSub,this.lotame=e.lotame,this.geoip=e.geoip,this.behaviourBuilder=e.behaviourBuilder,this.behaviourBuilderOtt=e.behaviourBuilderOtt}function _(e){var t=e.logger,n=void 0===t?p.create(null!=(n=null==(n=null==(n=window.CBC)?void 0:n.APP)?void 0:n.SC)&&n.DEBUG?p.LEVEL.DEBUG:p.LEVEL.ERROR):t,t=e.viafoura,t=void 0===t?s({logger:n}):t,r=e.lotame,o=e.pubSub,e=e.util,a=this;this.sendData=function(e){var t,n;e&&(n=a.getGender(e),t=a.getAge(e),e=a.getPostalCode(e),n=[new C(C.TYPES.GENERIC_DEMO,"User Info : Gender : "+n),new C(C.TYPES.GENERIC_DEMO,"User Info : Age : "+t),new C(C.TYPES.GENERIC_GEO,"User Info : Postal Code : "+e)],a.lotame.sendBehaviours(n))},this._onSignIn=function(){return v(a,void 0,void 0,function(){return T(this,function(e){return n=this.sendData,t="//api.loginradius.com/identity/v2/auth/account?apikey="+(i.includes(window.location.hostname)||"ocelot-staging.cbc.ca"==window.location.hostname?"3f4beddd-2061-49b0-ae80-6f1f2ed65b37":"936da557-6daa-4444-92cc-161fc290c603"),new Promise(function(e,t){var n;window.LR_IS_READY||window.LoginRadiusV2?e(null):n=setInterval(function(){(window.LR_IS_READY||window.LoginRadiusV2)&&(clearInterval(n),e(null))},100)}).then(function(){var e=g();if(!e)return n(null);window.CBC.APP.SC.UTIL.makeGETRequest(t,{success:function(e,t){console.debug("User logged in success : {0}",e.responseText),n(JSON.parse(e.responseText))},failure:function(e,t){console.error("Error : login radius api call to get user profile")}},void 0,void 0,{Authorization:"Bearer "+e},void 0)}),[2];var n,t})})},this._onSignOut=function(){a.lotame.sendBehaviours([new C(C.TYPES.ACTION,"User Info : Sign out")])},this.logger=n,this.viafoura=t,this.lotame=r,this.pubSub=o,this.util=e}[window.Element.prototype,window.CharacterData.prototype,window.DocumentType.prototype].forEach(function(e){e.hasOwnProperty("remove")||Object.defineProperty(e,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})}),window.CBC=window.CBC||{},(L=window.CBC).APP=L.APP||{},L.APP.DMP=L.APP.DMP||{},L.APP.SC=L.APP.SC||{},L.APP.SC.UTIL=L.APP.SC.UTIL||{},(R=new A({logger:L.APP.DMP.LOGGER,lotame:L.APP.DMP.LOTAME,pubSub:L.APP.PubSub,util:L.APP.SC.UTIL})).logger.debug("DMP initialize starting"),R.init(),L.APP.DMP.pageChange=function(){R.logger.debug("Forced DMP pageChange"),a.spa&&L.APP.PubSub.publish("pageChange")},A=window.location.hostname,/^.+\.cbc\.ca$/.test(A)||window.CBC.APP.SC.UTIL.console("The top level domain should be cbc.ca or gem.cbc.ca"),E=new URLSearchParams(window.location.search),t.test(window.location.href)||E.get("ios_a_p")||1<(E="; ".concat(window.document.cookie).split("; ".concat("ios_a_p","="))).length&&E.pop().split(";").shift()?(console.debug("Not initializing BlueConic and Lotame on CBC Kids, GEM Kids or Kids News"),Promise.resolve()):(E=B.BLUECONIC,t=e.GLOBAL_DISABLE_USER_TRACKING,((B=null==(B=null==(B=null==(B=null==(B=null==(B=window.CBC)?void 0:B.APP)?void 0:B.SC)?void 0:B.dmpAudienceslist)?void 0:B.featureToggle)?void 0:B[E])?void 0===(B=B[t])?(console.error("Property ".concat(t," is not defined for ").concat(E," feature toggle.")),0):B:(console.error("".concat(E," feature toggle is not defined.")),0))?(console.debug("Blueconic initialization is disabled by the feature toggle."),Promise.resolve()):(void 0===(t=A)&&(t=window.location.hostname),y="https://cbcrc.sb.blueconic.net/script.js",i.includes(t)&&(y="https://cdp.cbc.ca/script.js"),new Promise(function(e,t){window.CBC.APP.SC.UTIL.loadScript(y,function(){e(!0)},!0)}).then(function(){window.CBC.APP.SC.UTIL.console("loadBlueConicTag: Success!")}).catch(function(e){window.CBC.APP.SC.UTIL.console(e)})))}(),CBC.APP.SC.Subscribers.pageview=CBC.APP.SC.Subscribers.pageview||[],CBC.APP.SC.PageTracker=function(){var c={},u={},d=window.CBC.APP.SC.UTIL,C=!1,A=!1;return{init:function(){try{CBC.APP.PubSub.turnOn()}catch(e){console.log("There has been an error: "+e)}var e=document.location.href;if(-1<e.indexOf("polopoly")||-1<e.indexOf("/meta/preview")||-1<e.indexOf("/preview/www")||-1<e.indexOf("/preview/web"))return d.console("Preview page. Page Tracking Disabled."),!1;if(-1!==window.Detectizr.ua.indexOf("googlebot"))return!1;d.inDebugMode(),A?(CBC.APP.ANA.FORMATTERS.Adobe.clearVariables(),window.CBC.APP.SC.Subscribers.pageview.push({cb:function(){window.dispatchEvent(new window.CustomEvent("ConductricsStateChange",{detail:window.s_cbc_sitecatalyst.pageName}))}})):document.addEventListener("click",CBC.APP.ANA.LinkTracker.checkClickEvent);var t,n,e=CBC.APP.versions["cbc-stats-top"],r=CBC.APP.versions["cbc-stats-bottom"],e=(void 0!==e&&void 0!==r&&this.checkStatsVersions(e,r),void 0===CBC.APP.SC.DTM&&(CBC.APP.SC.DTM={}),void 0===CBC.APP.SC.DTM.DATA&&(CBC.APP.SC.DTM.DATA={}),0<Object.keys(CBC.APP.SC.DTM.DATA).length?c.prop75="new":(d.console("Data Layer - Data layer not found. Defaulting to URL."),CBC.APP.SC.DTM.DATA=this.urlToObj(document.location.hostname,document.location.pathname),c.prop75="dne"),CBC.APP.SC.DTM.DATA.authenticated=this.isLoggedIn(),d.initReferringDepartmentStatus(),d.setFormattedLayer(),CBC.APP.readJS.checkLoad(),!C&&window.vf&&window.vf.$once&&(window.vf.$once("comments","read",function(e){window.vf.context.get("page").then(function(e){e.num_replies&&CBC.APP.SC.EventTracker.trackEvent("READ",{content:{type:"comments"}})}),C=!1}),C=!0),{}),r="LOADED",o=this.readLinkTrackerCookie(),a={},a=((o.prop22||o.prop23||o.prop24||o.dataFeatureValue)&&(e.feature={},a.feature={},o.prop22&&(e.feature.name=o.prop22,a.feature.name=o.prop22),o.prop23&&(e.feature.instance=o.prop23,a.feature.instance=o.prop23),o.prop24&&(e.feature.position=o.prop24,a.feature.position=o.prop24),o.dataFeatureValue)&&(e.feature.value=o.dataFeatureValue,a.feature.value=o.dataFeatureValue),Object.assign(o,c),e.linkTrackObj=JSON.parse(JSON.stringify(o)),window.conductricsDataLayer=window.conductricsDataLayer||[],CBC.APP.SC.DTM&&(a.feature?(o=Object.assign({},CBC.APP.SC.DTM,a),window.conductricsDataLayer.push(o)):window.conductricsDataLayer.push(CBC.APP.SC.DTM)),CBC.APP.SC.DTM.formatted.raw),i=("LOADED"===(r=a.referrer&&a.referrer.url===a.url?"LOADED MORE":r)&&(e.custom={},e.custom.DNT=CBC.APP.SC.UTIL.getDoNotTrackValue(),e.custom.cookiesenabled=window.navigator.cookieEnabled),A||(A=!0,o=d.getCBCVisitorOrPlusCookieValue({isCbcPlus:!0}),a=d.getCBCVisitorOrPlusCookieValue({isCbcPlus:!1}),t=function(e){e&&CBC.APP.PubSub.publish("UIEAlert")},n=!0,(o||a)&&(n=!1,CBC.APP.PubSub.publish("USER_ID_AVAILABLE")),window.viafoura&&window.viafoura.users&&window.viafoura.users.current&&window.viafoura.users.current().id?d.setCBCPlusIDPromise().catch(function(e){CBC.APP.SC.UTIL.console(e)}).finally(function(){d.getCBCVisitorOrPlusCookieValue({isCbcPlus:!0})&&t(n)}):d.setCBCVisitorIDPromise().catch(function(e){CBC.APP.SC.UTIL.console(e)}).finally(function(){d.getCBCVisitorOrPlusCookieValue({isCbcPlus:!1})&&t(n)})),CBC.APP.PubSub.publish("pageChange"),CBC.APP.SC.EventTracker.trackEvent(r,e),0),s=window.setInterval(function(){var e=window.s_cbc_sitecatalyst;if(e.pageName&&e.events||39<i){for(var t=CBC.APP.SC.Subscribers.pageview,n=t.length,r=0,r=0;r<n;++r)"function"==typeof t[n-r-1].cb?t.pop().cb():t.pop();window.clearInterval(s)}else++i},10);return!0},urlToObj:function(e,t){var n,r=t.split("/"),o={},a=0;e.match("cbcmusic")?o.contentarea="music":o.contentarea="misc";for(var a=1,i=0;i<r.length;++i)""!==r[i]&&(n="subsection".concat(a),++a,o[n]=d.sanitize(r[i]));return o.contenttype="index",o.url="https://".concat(e).concat(t),o},setInitialized:function(e){A=!!e},readLinkTrackerCookie:function(){var t="SC_LINKS",n="DATA_FEATURE_LINKS",e={};try{var r,o,a,i,s=d.getCookie(n);s?(r=JSON.parse(s),o=CBC.APP.SC.UTIL.getMetadataAllowlist().metadata.allowlist.feature,a={},Object.keys(o).forEach(function(e){for(var t in a[e]={},o[e])a[e][window.CBC.APP.SC.UTIL.cleanString(t)]=o[e][t]}),e.prop21=r.pageName,e.prop22=a.name[r.dataFeatureName]?r.dataFeatureName:void 0,e.prop23=a.instance[r.dataFeatureInstance]?r.dataFeatureInstance:void 0,e.prop24=new RegExp(a.position.pattern).test(r.dataFeaturePosition)?r.dataFeaturePosition:void 0,e.dataFeatureValue=a.value[r.dataFeatureValue]?r.dataFeatureValue:void 0):(s=d.getCookie(t),CBC.APP.SC.masterSwitch.switches.legacysclt&&s&&(i=JSON.parse(s),e.prop21=i.pageName,e.prop22=i.linkName,e.prop24=i.linkPosition))}catch(e){return d.setCookie(n,"",0),d.setCookie(t,"",0),{}}return d.setCookie(n,"",0),d.setCookie(t,"",0),u=JSON.parse(JSON.stringify(e)),e},getLinkTrackObj:function(){return u},isLoggedIn:function(){try{return"guest"!==window.viafoura.users.current().user_privilege}catch(e){return!1}},isCommentor:function(){try{return 0<window.viafoura.users.current().comments_made}catch(e){return!1}},checkStatsVersions:function(e,t){return c.prop70="".concat(e===t,":").concat(e,":").concat(t),e!==t&&CBC.APP.ANA.ER.report("Stats Version Mismatched: stats-top ".concat(e,", stats-bottom ").concat(t),{}),c.prop70}}}(),CBC.APP.SC.preventDefault||CBC.APP.SC.DTM.DATA.preventDefault?CBC.APP.SC.UTIL.console("Warning: Not firing page tracking on page load"):CBC.APP.SC.PageTracker.init(),function(){var e;document.getElementById("cbc-as-search-root")&&((e=document.createElement("link")).rel="stylesheet",e.id="cbc-as-search-css",e.href="/search-assets/static/css/cbc-as-search.css",document.head.appendChild(e),(e=document.createElement("script")).type="text/javascript",e.id="cbc-as-search-js",e.src="/search-assets/static/js/cbc-as-search.js",document.body.appendChild(e))}(),function(r){function e(e,t){var n=window.document.createElement("iframe");n.setAttribute("src","/g/stats/html/cmf.html?a="+e+"&m="+t+"&s=cbc&p="+encodeURIComponent(r.location.href)),n.setAttribute("id","cmf-iframe"),n.setAttribute("width","0"),n.setAttribute("height","0"),n.setAttribute("frameBorder","0"),document.body.appendChild(n)}document.getElementById("cmf-iframe")&&document.getElementById("cmf-iframe").remove();var t,n={"cbc.ca\\/xcompany\\/debriefing":"1415.11316.140589","cbc.ca\\/bellevue\\/videos\\/1994-videos":"1617.11311.146736","cbc.ca\\/kidscbc1\\/shows\\/chirp":"1213.11116.133491","cbc.ca\\/covermecanada":"1112.11416.132002","cbc.ca\\/player\\/tv\\/Halifax%20Comedy%20Festival\\/Season%2019":"1415.11453.141153","cbc.ca\\/kidscbcolympics":"1617.11116.144982","cbc.ca\\/murdochmysteries\\/onthecase":"1516.11316.142584","cbc.ca\\/murdochmysteries\\/noqs":"1213.11316.132929","cbc.ca\\/murdochmysteries\\/videos\\/making-murdoch\\/\\S+":"1314.11313.138117","cbc.ca\\/murdochmysteries\\/theinfernaldevice":"1415.11353.141147","cbc.ca\\/overtherainbow":"1213.11416.133409","cbc.ca\\/republicofdoyle\\/episodes\\/season-5\\/\\S+":"1314.11313.138147","cbc.ca\\/thebestlaidplans\\/videos\\/the-petes-laid-plans\\/\\S+":"1314.11313.138145","cbc.ca\\/22minutes\\/videos\\/22-minutes-update\\/\\S+":"1516.11353.142570","cbc.ca\\/thislife\\/videos\\/exclusives\\/\\S+":"1516.11313.142585","cbc.ca\\/workinmoms\\/videos\\/season-1\\/\\S+":"1617.11353.145375","cbc.ca\\/xcompany\\/videos\\/x-company-animated\\/\\S+":"1516.11313.142581","cbc.ca\\/shootthemessenger\\/murderboard":"1516.11315.142932","cbc.ca\\/arcticair\\/videos\\/man-of-the-north":"1112.11316.131909","cbc.ca\\/michael\\/videos\\/lost-therapy-tapes":"1112.11316.131239","cbc.ca\\/michael\\/videos\\/after-the-beep":"1112.11316.131239","comedycoup.cbc.ca\\/cc\\/canada-2014":"1415.11316.139499","cbc.ca\\/mrd\\/videos\\/xavier-gazette":"1112.11316.131856","cbc.ca\\/insecurity":"1011.11316.128616"};Object.keys(n).some(function(e){return!!new RegExp(e).test(r.location.href)&&(t=n[e],!0)})?e(t,r.document.title):r.CBC.APP.SC.DTM.DATA&&r.CBC.APP.SC.DTM.DATA.cmfAppId&&e(r.CBC.APP.SC.DTM.DATA.cmfAppId,r.CBC.APP.SC.DTM.DATA.title)}(window._window||window);