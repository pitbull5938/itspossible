function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_toPropertyKey(r.key),r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _createForOfIteratorHelper(e,t){var n,r,i,a,o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(o)return r=!(n=!0),{s:function(){o=o.call(e)},n:function(){var e=o.next();return n=e.done,e},e:function(e){r=!0,i=e},f:function(){try{n||null==o.return||o.return()}finally{if(r)throw i}}};if(Array.isArray(e)||(o=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length)return o&&(e=o),a=0,{s:t=function(){},n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _regeneratorRuntime(){"use strict";_regeneratorRuntime=function(){return o};var c,o={},e=Object.prototype,u=e.hasOwnProperty,l=Object.defineProperty||function(e,t,n){e[t]=n.value},t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",n=t.asyncIterator||"@@asyncIterator",i=t.toStringTag||"@@toStringTag";function a(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{a({},"")}catch(c){a=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var i,a,o,s,t=t&&t.prototype instanceof m?t:m,t=Object.create(t.prototype),r=new E(r||[]);return l(t,"_invoke",{value:(i=e,a=n,o=r,s=p,function(e,t){if(s===h)throw new Error("Generator is already running");if(s===_){if("throw"===e)throw t;return{value:c,done:!0}}for(o.method=e,o.arg=t;;){var n=o.delegate;if(n){n=function e(t,n){var r=n.method,i=t.iterator[r];if(i===c)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=c,e(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;r=d(i,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,g;i=r.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=c),n.delegate=null,g):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}(n,o);if(n){if(n===g)continue;return n}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(s===p)throw s=_,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);s=h;n=d(i,a,o);if("normal"===n.type){if(s=o.done?_:f,n.arg===g)continue;return{value:n.arg,done:o.done}}"throw"===n.type&&(s=_,o.method="throw",o.arg=n.arg)}})}),t}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}o.wrap=s;var p="suspendedStart",f="suspendedYield",h="executing",_="completed",g={};function m(){}function C(){}function v(){}var t={},y=(a(t,r,function(){return this}),Object.getPrototypeOf),y=y&&y(y(T([]))),A=(y&&y!==e&&u.call(y,r)&&(t=y),v.prototype=m.prototype=Object.create(t));function P(e){["next","throw","return"].forEach(function(t){a(e,t,function(e){return this._invoke(t,e)})})}function b(o,s){var t;l(this,"_invoke",{value:function(n,r){function e(){return new s(function(e,t){!function t(e,n,r,i){var a,e=d(o[e],o,n);if("throw"!==e.type)return(n=(a=e.arg).value)&&"object"==_typeof(n)&&u.call(n,"__await")?s.resolve(n.__await).then(function(e){t("next",e,r,i)},function(e){t("throw",e,r,i)}):s.resolve(n).then(function(e){a.value=e,r(a)},function(e){return t("throw",e,r,i)});i(e.arg)}(n,r,e,t)})}return t=t?t.then(e,e):e()}})}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function T(t){if(t||""===t){var n,e=t[r];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return n=-1,(e=function e(){for(;++n<t.length;)if(u.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=c,e.done=!0,e}).next=e}throw new TypeError(_typeof(t)+" is not iterable")}return l(A,"constructor",{value:C.prototype=v,configurable:!0}),l(v,"constructor",{value:C,configurable:!0}),C.displayName=a(v,i,"GeneratorFunction"),o.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===C||"GeneratorFunction"===(e.displayName||e.name))},o.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,a(e,i,"GeneratorFunction")),e.prototype=Object.create(A),e},o.awrap=function(e){return{__await:e}},P(b.prototype),a(b.prototype,n,function(){return this}),o.AsyncIterator=b,o.async=function(e,t,n,r,i){void 0===i&&(i=Promise);var a=new b(s(e,t,n,r),i);return o.isGeneratorFunction(t)?a:a.next().then(function(e){return e.done?e.value:a.next()})},P(A),a(A,i,"Generator"),a(A,r,function(){return this}),a(A,"toString",function(){return"[object Generator]"}),o.keys=function(e){var t,n=Object(e),r=[];for(t in n)r.push(t);return r.reverse(),function e(){for(;r.length;){var t=r.pop();if(t in n)return e.value=t,e.done=!1,e}return e.done=!0,e}},o.values=T,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=c,this.done=!1,this.delegate=null,this.method="next",this.arg=c,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&u.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=c)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function e(e,t){return a.type="throw",a.arg=n,r.next=e,t&&(r.method="next",r.arg=c),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var i=this.tryEntries[t],a=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var o=u.call(i,"catchLoc"),s=u.call(i,"finallyLoc");if(o&&s){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(o){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&u.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}var a=(i=i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc?null:i)?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),w(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n,r,i=this.tryEntries[t];if(i.tryLoc===e)return"throw"===(n=i.completion).type&&(r=n.arg,w(i)),r}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=c),g}},o}function asyncGeneratorStep(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function _asyncToGenerator(s){return function(){var e=this,o=arguments;return new Promise(function(t,n){var r=s.apply(e,o);function i(e){asyncGeneratorStep(r,t,n,i,a,"next",e)}function a(e){asyncGeneratorStep(r,t,n,i,a,"throw",e)}i(void 0)})}}function _defineProperty(e,t,n){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey(e){e=_toPrimitive(e,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(e,t){if("object"!==_typeof(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){var n;if(e)return"string"==typeof e?_arrayLikeToArray(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _iterableToArrayLimit(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){u=!0,i=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e){var t,n,r,i;void 0===t&&(t={}),void 0===n&&(n={}),(r=void 0===r?{}:r).radio||(r.radio={}),r.plugin||(r.plugin={}),(i=void 0===i?{}:i).clock||(i.clock={}),function(){"use strict";function d(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function s(e,t,n,r,i,a){return d((t=d(d(t,e),d(r,a)))<<i|t>>>32-i,n)}function p(e,t,n,r,i,a,o){return s(t&n|~t&r,e,t,i,a,o)}function f(e,t,n,r,i,a,o){return s(t&r|n&~r,e,t,i,a,o)}function h(e,t,n,r,i,a,o){return s(t^n^r,e,t,i,a,o)}function _(e,t,n,r,i,a,o){return s(n^(t|~r),e,t,i,a,o)}function o(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var n,r,i,a,o=1732584193,s=-271733879,c=-1732584194,u=271733878,l=0;l<e.length;l+=16)o=p(n=o,r=s,i=c,a=u,e[l],7,-680876936),u=p(u,o,s,c,e[l+1],12,-389564586),c=p(c,u,o,s,e[l+2],17,606105819),s=p(s,c,u,o,e[l+3],22,-1044525330),o=p(o,s,c,u,e[l+4],7,-176418897),u=p(u,o,s,c,e[l+5],12,1200080426),c=p(c,u,o,s,e[l+6],17,-1473231341),s=p(s,c,u,o,e[l+7],22,-45705983),o=p(o,s,c,u,e[l+8],7,1770035416),u=p(u,o,s,c,e[l+9],12,-1958414417),c=p(c,u,o,s,e[l+10],17,-42063),s=p(s,c,u,o,e[l+11],22,-1990404162),o=p(o,s,c,u,e[l+12],7,1804603682),u=p(u,o,s,c,e[l+13],12,-40341101),c=p(c,u,o,s,e[l+14],17,-1502002290),o=f(o,s=p(s,c,u,o,e[l+15],22,1236535329),c,u,e[l+1],5,-165796510),u=f(u,o,s,c,e[l+6],9,-1069501632),c=f(c,u,o,s,e[l+11],14,643717713),s=f(s,c,u,o,e[l],20,-373897302),o=f(o,s,c,u,e[l+5],5,-701558691),u=f(u,o,s,c,e[l+10],9,38016083),c=f(c,u,o,s,e[l+15],14,-660478335),s=f(s,c,u,o,e[l+4],20,-405537848),o=f(o,s,c,u,e[l+9],5,568446438),u=f(u,o,s,c,e[l+14],9,-1019803690),c=f(c,u,o,s,e[l+3],14,-187363961),s=f(s,c,u,o,e[l+8],20,1163531501),o=f(o,s,c,u,e[l+13],5,-1444681467),u=f(u,o,s,c,e[l+2],9,-51403784),c=f(c,u,o,s,e[l+7],14,1735328473),o=h(o,s=f(s,c,u,o,e[l+12],20,-1926607734),c,u,e[l+5],4,-378558),u=h(u,o,s,c,e[l+8],11,-2022574463),c=h(c,u,o,s,e[l+11],16,1839030562),s=h(s,c,u,o,e[l+14],23,-35309556),o=h(o,s,c,u,e[l+1],4,-1530992060),u=h(u,o,s,c,e[l+4],11,1272893353),c=h(c,u,o,s,e[l+7],16,-155497632),s=h(s,c,u,o,e[l+10],23,-1094730640),o=h(o,s,c,u,e[l+13],4,681279174),u=h(u,o,s,c,e[l],11,-358537222),c=h(c,u,o,s,e[l+3],16,-722521979),s=h(s,c,u,o,e[l+6],23,76029189),o=h(o,s,c,u,e[l+9],4,-640364487),u=h(u,o,s,c,e[l+12],11,-421815835),c=h(c,u,o,s,e[l+15],16,530742520),o=_(o,s=h(s,c,u,o,e[l+2],23,-995338651),c,u,e[l],6,-198630844),u=_(u,o,s,c,e[l+7],10,1126891415),c=_(c,u,o,s,e[l+14],15,-1416354905),s=_(s,c,u,o,e[l+5],21,-57434055),o=_(o,s,c,u,e[l+12],6,1700485571),u=_(u,o,s,c,e[l+3],10,-1894986606),c=_(c,u,o,s,e[l+10],15,-1051523),s=_(s,c,u,o,e[l+1],21,-2054922799),o=_(o,s,c,u,e[l+8],6,1873313359),u=_(u,o,s,c,e[l+15],10,-30611744),c=_(c,u,o,s,e[l+6],15,-1560198380),s=_(s,c,u,o,e[l+13],21,1309151649),o=_(o,s,c,u,e[l+4],6,-145523070),u=_(u,o,s,c,e[l+11],10,-1120210379),c=_(c,u,o,s,e[l+2],15,718787259),s=_(s,c,u,o,e[l+9],21,-343485551),o=d(o,n),s=d(s,r),c=d(c,i),u=d(u,a);return[o,s,c,u]}function c(e){for(var t="",n=0;n<32*e.length;n+=8)t+=String.fromCharCode(e[n>>5]>>>n%32&255);return t}function u(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;for(t=0;t<8*e.length;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function r(e){for(var t,n="0123456789abcdef",r="",i=0;i<e.length;i+=1)t=e.charCodeAt(i),r+=n.charAt(t>>>4&15)+n.charAt(15&t);return r}function l(e){return unescape(encodeURIComponent(e))}function i(e){return c(o(u(e=l(e)),8*e.length))}function a(e,t){var n,e=l(e),t=l(t),r=u(e),i=[],a=[];for(i[15]=a[15]=void 0,16<r.length&&(r=o(r,8*e.length)),n=0;n<16;n+=1)i[n]=909522486^r[n],a[n]=1549556828^r[n];return e=o(i.concat(u(t)),512+8*t.length),c(o(a.concat(e),640))}t.md5=function(e,t,n){return t?n?a(t,e):r(a(t,e)):n?i(e):r(i(e))}}(),function(){"use strict";var e={startsWith:function(e,t){return 0==e.indexOf(t)}};t.StringUtils=e}(),function(){"use strict";var i={clone:function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n},merge:function(e,t){var n,r=i.clone(e);for(n in t)t.hasOwnProperty(n)&&(r[n]=t[n]);return r}};t.ObjectUtils=i}(),function(e){"use strict";function t(e,t,n){this.fn=e,this.ctx=t,this.params=n}t.prototype.run=function(){this.params?this.fn.apply(this.ctx,this.params):this.fn.apply(this.ctx)},e.radio.Command=t}(r),function(e){"use strict";function t(e,t){this._queue=[],this._lastTs=0,this._isSuspended=void 0!==e&&e,this._delay=void 0!==t?t:0}t.prototype.addCommand=function(e){this._queue.push(e),this._drain()},t.prototype.cancelAllCommands=function(){this._queue=[]},t.prototype.isEmpty=function(){return 0===this._queue.length},t.prototype.suspend=function(){this._isSuspended=!0},t.prototype.resume=function(){this._isSuspended=!1,this._drain()},t.prototype.flush=function(){this._isSuspended=!1;for(var e=0;e<this._queue.length;e++)this._queue[e].run();this._queue=[]},t.prototype._drain=function(){var n;this._isSuspended||this._drainInProgress||(this._drainInProgress=!0,n=this,function e(){var t=n._queue.shift();t?n._runCommand(t,function(){n._isSuspended||e()}):n._drainInProgress=!1}())},t.prototype._runCommand=function(e,t){function n(){e.run(),null!=t&&t.call(a)}var r,i,a=this;0!=this._lastTs&&(i=(r=(new Date).getTime())-this._lastTs,this._lastTs=r,i<this._delay)?setTimeout(n,this._delay-i):n()},e.radio.CommandQueue=t}(r),function(e){"use strict";function o(e,t){if(this._name=e,!t)throw new Error("Reference to the logger object cannot be NULL");this._logger=t,this._listeners={},this._requests={},this._commands={},this._isShutDown=!1}o.WILDCARD="*",o.SEPARATOR=":",o.prototype.toString=function(){return"<channel: "+this._name+">"},o.prototype.shutdown=function(){this._isShutDown||(this._logger.debug(r,"#shutdown > Shutting down"),this.off(),this._requests={},this._commands={},this._isShutDown=!0)},o.prototype.on=function(e,t,n){this._isShutDown||(this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push({fn:t,ctx:n}))},o.prototype.off=function(e,t,n){if(!this._isShutDown)if(t="function"==typeof t?t:null,e||null!=t||n)if(e)this._removeListener(e,t,n);else for(e in this._listeners)this._listeners.hasOwnProperty(e)&&this._removeListener(e,t,n);else this._listeners={}},o.prototype.trigger=function(e){if(!this._isShutDown)for(var t in this._listeners)if(this._listeners.hasOwnProperty(t)&&function(e,t){if(e===t)return 1;for(var n=(e||"").split(o.SEPARATOR),r=(t||"").split(o.SEPARATOR),i=!0,a=0;a<n.length;a++)i=i&&(n[a]===o.WILDCARD||n[a]===r[a]);return i}(t,e.name))for(var n=this._listeners[t].slice(0),r=0;r<n.length;r++){var i=n[r];i.fn.call(i.ctx,e)}},o.prototype.comply=function(e,t,n){this._isShutDown||(this._commands[e]={cmd:t,ctx:n})},o.prototype.command=function(e,t){var n;if(!this._isShutDown)return(n=this._commands[e])?void n.cmd.call(n.ctx,t):void this._logger.warn(r,"#command > No command handler for: "+e)},o.prototype.reply=function(e,t,n){this._isShutDown||(this._requests[e]={fn:t,ctx:n})},o.prototype.request=function(e){var t;if(!this._isShutDown)return(t=this._requests[e])?t.fn.call(t.ctx):(this._logger.warn(r,"#request > No request handler for: "+e),null)},o.prototype._removeListener=function(e,t,n){t="function"==typeof t?t:null;var r=this._listeners[e];if(r)if(!r.length||null==t&&!n)delete this._listeners[e];else for(var i=0;i<r.length;i++){var a=r[i];null!==t&&t!==a.fn||n&&n!==a.ctx||this._listeners[e].splice(i,1)}};var r="radio::Channel";e.radio.Channel=o}(r),function(e){"use strict";function t(e){if(!e)throw new Error("Reference to the logger object cannot be NULL");this._logger=e,this._channels={}}var n=e.radio.Channel;t.prototype.channel=function(e){return this._channels[e]||(this._channels[e]=new n(e,this._logger)),this._channels[e]},t.prototype.shutdown=function(){for(var e in this._channels)this._channels.hasOwnProperty(e)&&this._channels[e].shutdown()},e.radio.Radio=t}(r),function(){"use strict";r.extend=function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e}}(),function(e){"use strict";function t(){}t.prototype.write=function(e){throw new Error("Implementation error: Method must be overridden.")},e.ILogWriter=t}(r),function(e){"use strict";function t(){}t.prototype.write=function(e){window.console&&window.console.log&&window.console.log(e)},e.LogWriter=t}(r),function(e){"use strict";function t(){}t.prototype.setLogWriter=function(e){throw new Error("Implementation error: Method must be overridden.")},t.prototype.getLogWriter=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.getEnabled=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.enable=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.disable=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.debug=function(e,t){throw new Error("Implementation error: Method must be overridden.")},t.prototype.info=function(e,t){throw new Error("Implementation error: Method must be overridden.")},t.prototype.warn=function(e,t){throw new Error("Implementation error: Method must be overridden.")},t.prototype.error=function(e,t){throw new Error("Implementation error: Method must be overridden.")},e.ILogger=t}(r),function(e){"use strict";function t(){this._logWriter=new n}var n=e.LogWriter,r=(t.prototype.setLogWriter=function(e){if(!e)throw new Error("Reference to the ILogWriter object cannot be NULL");this._logWriter=e,this._enabled=!1},t.prototype.getLogWriter=function(){return this._logWriter},t.prototype.getEnabled=function(){return this._enabled},t.prototype.enable=function(){this._enabled=!0},t.prototype.disable=function(){this._enabled=!1},t.prototype.debug=function(e,t){this._log(e,i,t)},t.prototype.info=function(e,t){this._log(e,r,t)},t.prototype.warn=function(e,t){this._log(e,a,t)},t.prototype.error=function(e,t){this._log(e,o,t)},t.prototype._log=function(e,t,n){var r,i;t!=o&&!this._enabled||(r="",r+="["+(i=new Date).toTimeString()+"."+((i=i.getMilliseconds())<10?"00"+i:i<100?"0"+i:""+i)+"] ["+t+"] ",this._logWriter.write(r+="["+e+"] "+n))},"INFO"),i="DEBUG",a="WARN",o="ERROR";e.Logger=t}(r),function(e){"use strict";function t(e,t){this._pluginName=e,this._eventName=t}var n=e.radio.Channel;t.prototype.getPluginName=function(){return this._pluginName},t.prototype.getEventName=function(){return this._eventName},t.prototype.getName=function(){return this._pluginName+n.SEPARATOR+this._eventName},e.Trigger=t}(r),function(e){"use strict";function t(e,t){this.name=e,this.data=t}t.SUCCESS="success",t.ERROR="error",t.createFromTrigger=function(e){return new t(e.getName())},e.Event=t}(r),function(e){"use strict";function t(){this._events={}}t.prototype.addEventListener=function(e,t,n){e&&t&&(n=n||window,this._events[e]=this._events[e]||[],this._events[e].push({cb:t,ctx:n}))},t.prototype.removeEventListener=function(e,t,n){if(e&&t){n=n||window;var r,i,a=!1;for(i in this._events)if(e===i){a=!0;break}if(a){for(r=this._events[i].length-1;0<=r;r--){var o=this._events[i][r];t===o.cb&&n===o.ctx&&this._events[i].splice(r,1)}this._events[i].length||delete this._events[i]}}},t.prototype.dispatchEvent=function(e){if(e.name)for(var t in this._events)if(this._events.hasOwnProperty(t)&&e.name===t){for(var n=this._events[t].slice(0),r=n.length,i=0;i<r;i++)n[i].cb.call(n[i].ctx,e);break}},t.prototype.removeAllListeners=function(e){var t,n;if(e){for(n in this._events)if(this._events.hasOwnProperty(n)){for(t=this._events[n].length-1;0<=t;t--)this._events[n][t].ctx===e&&this._events[n].splice(t,1);this._events[n].length||delete this._events[n]}}else this._events={}},e.EventDispatcher=t}(r),function(e){"use strict";function t(){}function a(){a.__super__.constructor.call(this),this._connection=null}var o=e.Event,n=e.EventDispatcher;t.GET="GET",a.RESPONSE="response",a.INSTANCE="instance",e.extend(a,n),a.prototype.close=function(){this.removeAllListeners(null)},a.prototype.load=function(e){e&&e.method&&e.url&&(e._xmlhttp=this._createCORSRequest(e),e._xmlhttp?e._xmlhttp.send():this._loadImage(e))},a.prototype._createCORSRequest=function(e){var t,n,r,i=null;return void 0!==window.XMLHttpRequest&&"withCredentials"in(t=new window.XMLHttpRequest)&&(i=t).open(e.method,e.url,!0),null==i&&void 0!==window.XDomainRequest&&(i=new window.XDomainRequest).open(e.method,e.url),i&&(r=(n={})[a.INSTANCE]=this,i.onload=function(){return i.status&&400<=parseInt(i.status,10)?this.onerror():(n[a.RESPONSE]=i.responseText,void r.dispatchEvent(new o(o.SUCCESS,n)))},i.onerror=function(){r.dispatchEvent(new o(o.ERROR,n))}),i},a.prototype._loadImage=function(e){this._connection||(this._connection=new Image,this._connection.alt=""),this._connection.src=e.url;e={};e[a.RESPONSE]="",(e[a.INSTANCE]=this).dispatchEvent(new o(o.SUCCESS,e))},e.URLRequestMethod=t,e.URLRequest=function(e,t){this.url=e||null,this.method=t,this._xmlhttp=null},e.URLLoader=a}(r),function(){"use strict";var t="2.0.2.123",e={getVersion:function(){return"js-"+t+"-150f2b"},getMajor:function(){return e.getNumberAtPosition(0)},getMinor:function(){return e.getNumberAtPosition(1)},getMicro:function(){return e.getNumberAtPosition(2)},getPatch:function(){return e.getNumberAtPosition(3)},getBuild:function(){return"150f2b"},getApiLevel:function(){return 4},getNumberAtPosition:function(e){return t.split(".")[e]}};n.Version=e}(),function(e){"use strict";function t(e,t){this._message=e,this._details=t}t.prototype.getMessage=function(){return this._message},t.prototype.getDetails=function(){return this._details},e.ErrorInfo=t}(n),function(){"use strict";n.HeartbeatConfig=function(){this.debugLogging=!1}}(),function(e){"use strict";function t(){}t.prototype.onError=function(e){},e.HeartbeatDelegate=t}(n),function(e){"use strict";function t(){}t.prototype.configure=function(e){throw new Error("Implementation error: Method must be overridden.")},t.prototype.bootstrap=function(e){throw new Error("Implementation error: Method must be overridden.")},t.prototype.setup=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.destroy=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.enable=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.disable=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.getName=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.isInitialized=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.resolveData=function(e){throw new Error("Implementation error: Method must be overridden.")},e.plugin.IPlugin=t}(r),function(e){"use strict";function t(e,t,n,r){this.trigger=e,this.action=n,this.plugin=t,this._paramMappings={},this.mergeParams(r)}var n=e.plugin.ParamMapping;t.prototype.mergeParams=function(e){if(e)for(var t=0;t<e.length;t++){var n=e[t];this._paramMappings[n.getKeyName()]=n}},t.prototype.getParams=function(){var e,t=[];for(e in this._paramMappings)this._paramMappings.hasOwnProperty(e)&&t.push(this._paramMappings[e]);return t},t.prototype.addParam=function(e){this._paramMappings[e.getKeyName()]=e},t.prototype.removeParam=function(e,t){e=new n(e,t);this._paramMappings.hasOwnProperty(e.getKeyName())&&delete this._paramMappings[e.getKeyName()]},e.plugin.Behaviour=t}(r),function(e){"use strict";function t(e,t,n){this._pluginName=e,this._key=t,this._paramName=n||e+r.SEPARATOR+t}var r=e.radio.Channel;t.prototype.getPluginName=function(){return this._pluginName},t.prototype.getKey=function(){return this._key},t.prototype.getKeyName=function(){return this._pluginName+r.SEPARATOR+this._key},t.prototype.getParamName=function(){return this._paramName},e.plugin.ParamMapping=t}(r),function(e){"use strict";function t(e){if(!e)throw new Error("Reference to the logger object cannot be NULL");this._logger=e,this._plugins={},this._behaviours={},this._radio=new r(this._logger),this._dataChannel=this._radio.channel(o),this._ctrlChannel=this._radio.channel(s)}var n=e.Event,r=e.radio.Radio,i=e.radio.Channel,a=e.plugin.Behaviour,o=(t.ERROR="error",t.prototype.addPlugin=function(e){var t=e.getName();this._plugins[t]&&this._logger.warn(c,"#addPlugin > Replacing plugin: "+t),(this._plugins[t]=e).bootstrap(this)},t.prototype.setupPlugins=function(){for(var e in this._plugins)this._plugins.hasOwnProperty(e)&&this._plugins[e].setup()},t.prototype.pluginExists=function(e){return!!this._plugins[e]},t.prototype.isPluginInitialized=function(e){return this._plugins[e]&&this._plugins[e].isInitialized()},t.prototype.on=function(e,t,n,r){this._dataChannel.on(e+i.SEPARATOR+t,n,r)},t.prototype.off=function(e,t,n,r){e=e&&t?e+i.SEPARATOR+t:null;this._dataChannel.off(e,n,r)},t.prototype.trigger=function(e){var t=e.name,n=this._behaviours[t];if(n){for(var r,i,a,o,s={},c={},u=0;u<n.length;u++)if(i=(l=n[u]).getParams())for(r=0;r<i.length;r++)s[(a=i[r]).getPluginName()]=s[a.getPluginName()]||[],a.key in s[a.getPluginName()]||s[a.getPluginName()].push(a.getKey());for(o in s)s.hasOwnProperty(o)&&(c[o]=this.request(o,s[o]));for(u=0;u<n.length;u++){var l,d={_behaviour:l=n[u],_eventData:e.data||{}};if(i=l.getParams()){for(r=0;r<i.length;r++)d[(a=i[r]).getParamName()]=c[a.getPluginName()]?c[a.getPluginName()][a.getKey()]:null;this.command(l.plugin.getName(),l.action,d)}}}this._dataChannel.trigger(e)},t.prototype.request=function(e,t){e=this._plugins[e];return e&&t&&0!=t.length?e.resolveData(t):null},t.prototype.raise=function(e){this._errorInfo=e;e=new n(t.ERROR,e);this._ctrlChannel.trigger(e)},t.prototype.getErrorInfo=function(){return this._errorInfo},t.prototype.destroy=function(){for(var e in this._radio.shutdown(),this._plugins)this._plugins.hasOwnProperty(e)&&this._plugins[e].destroy()},t.prototype.comply=function(e,t,n){this._dataChannel.comply(e.getName()+i.SEPARATOR+t,n,e)},t.prototype.command=function(e,t,n){this._dataChannel.command(e+i.SEPARATOR+t,n)},t.prototype.registerBehaviour=function(e,t,n,r){var i=e.getName(),e=new a(e,t,n,r);this._behaviours[i]=this._behaviours[i]||[],this._behaviours[i].push(e)},"data_channel"),s="ctrl_channel",c="plugin::PluginManager";e.plugin.PluginManager=t}(r),function(e,t){"use strict";function n(e){this._name=e,this._isInitialized=!1,this._isDestroyed=!1,this._isEnabled=!0,this._dataResolver={},this._logTag="plugin::"+this.getName(),this._logger=new r}var r=e.Logger,i=e.Trigger,a=e.Event,o=t.ErrorInfo;n.INITIALIZED="initialized",n.prototype.configure=function(e){},n.prototype.bootstrap=function(e){this._pluginManager=e,this._isDestroyed&&this._pluginManager.raise(new o("Invalid state.","Plugin already destroyed."))},n.prototype.setup=function(){this._trigger(n.INITIALIZED),this._isInitialized=!0},n.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._teardown())},n.prototype.enable=function(){this._isEnabled=!0,this._enabled()},n.prototype.disable=function(){this._isEnabled=!1,this._disabled()},n.prototype.getName=function(){return this._name},n.prototype.getLogger=function(){return this._logger},n.prototype.isInitialized=function(){return this._isInitialized},n.prototype.resolveData=function(e){if(!this._isEnabled||!this._isInitialized)return this._logger.warn(this._logTag,"Unable to retrieve plugin data. Plugin: "+this._name+". Enabled: "+this._isEnabled+". Initialized: "+this._isInitialized+"."),null;if("function"==typeof this._dataResolver)return this._dataResolver.call(this,e);var t=null;if(e)for(var n=0;n<e.length;n++){var r=e[n];this._dataResolver.hasOwnProperty(r)&&(t=t||{},"function"==typeof this._dataResolver[r]?t[r]=this._dataResolver[r].call(this):t[r]=this._dataResolver[r])}return t},n.prototype.toString=function(){return"<plugin: "+this._name+">"},n.prototype._enabled=function(){},n.prototype._disabled=function(){},n.prototype._teardown=function(){},n.prototype._canProcess=function(){return this._isEnabled?!this._isDestroyed||(this._logger.error(this._logTag,"Plugin destroyed."),!1):(this._logger.error(this._logTag,"Plugin disabled."),!1)},n.prototype._trigger=function(e,t){e=a.createFromTrigger(new i(this.getName(),e));e.data=t,this._pluginManager.trigger(e)},e.plugin.BasePlugin=n}(r,n),function(e){"use strict";function r(e,t,n){this.name=e,this.interval=t,this.isActive=!1,this.repeatCount=void 0!==n?n:i,this._nextTickTimestamp=0,this.reset()}function t(e,t){if(!e)throw new Error("Reference to the ClockService object cannot be NULL");if(this._service=e,!t)throw new Error("Reference to the logger object cannot be NULL");this._logger=t,this._isDestroyed=!1,this._timers={};var n=this;this._clock=window.setInterval(function(){n._onTick()},1e3*a)}r.prototype.reset=function(){this.tick=0,this._createdTimestamp=(new Date).getTime(),this._updateNextTickTimestamp()},r.prototype.shouldTick=function(){return(new Date).getTime()>this._nextTickTimestamp-a/2&&(this.tick++,this._updateNextTickTimestamp(),!0)},r.prototype._updateNextTickTimestamp=function(){this._nextTickTimestamp=this._createdTimestamp+1e3*this.interval*(this.tick+1)},t.prototype.createTimer=function(e,t,n){this._timers[e]=new r(e,t,n)},t.prototype.destroyTimer=function(e){delete this._timers[e]},t.prototype.resumeTimer=function(e,t){this._logger.debug(n,"#resumeTimer(name="+e+", reset="+(t=void 0!==t&&t)+")");e=this._timers[e];e&&(e.isActive=!0,t)&&e.reset()},t.prototype.pauseTimer=function(e,t){this._logger.debug(n,"#pauseTimer(name="+e+", reset="+(t=void 0!==t&&t)+")");e=this._timers[e];e&&(e.isActive=!1,t)&&e.reset()},t.prototype.isTimerPaused=function(e){e=this._timers[e];return!!e&&!e.isActive},t.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._timers={},window.clearInterval(this._clock))},t.prototype._onTick=function(){for(var e in this._timers)this._timers.hasOwnProperty(e)&&(e=this._timers[e]).isActive&&e.shouldTick()&&(1<e.interval&&this._logger.debug(n,"#_onTick() > "+e.name+"("+e.tick+" | "+e.repeatCount+")"),0!=e.repeatCount?(this._service.onTick(e.name,e.interval,e.tick),e.repeatCount!=i&&e.repeatCount--):this.destroyTimer(e.name))};var n="service.clock::TimerManager",i=-1,a=.25;e.clock.TimerDescriptor=r,e.clock.TimerManager=t}(i),function(e,t,n){"use strict";function r(e){if(r.__super__.constructor.call(this,a),!e)throw new Error("Reference to the logger object cannot be NULL");this._logger=e,this._timerManager=new i(this,this._logger),this._setupDataResolver()}var i=n.clock.TimerManager,o=t.StringUtils,t=e.plugin.BasePlugin,a=(e.extend(r,t),r.prototype.bootstrap=function(e){r.__super__.bootstrap.call(this,e),this._pluginManager.comply(this,s,this._cmdCreate),this._pluginManager.comply(this,u,this._cmdResume),this._pluginManager.comply(this,c,this._cmdPause),this._pluginManager.comply(this,l,this._cmdDestroy)},r.prototype._teardown=function(){this._timerManager.destroy()},r.prototype._cmdCreate=function(e){var t=e[f]||m;this._timerManager.createTimer(e[d],e[p],t)},r.prototype._cmdPause=function(e){this._timerManager.pauseTimer(e[d],!!e[_])},r.prototype._cmdResume=function(e){this._timerManager.resumeTimer(e[d],!!e[_])},r.prototype._cmdDestroy=function(e){this._timerManager.destroyTimer(e[d])},r.prototype.onTick=function(e,t,n){var r={};r[d]=e+=".tick",r[p]=t,r[h]=n,this._trigger(e,r)},r.prototype._setupDataResolver=function(){var a={},t=this._timerManager;a[g]=function(e){return t.isTimerPaused(e)},this._dataResolver=function(e){if(!e||0==e.length)return null;for(var t=null,n=0;n<e.length;n++){var r,i=e[n],t=t||{};o.startsWith(i,g)&&0<(r=i.split(g+".")).length&&(t[i]=a[g].call(this,r[1]))}return t}},"service.clock"),s="create",c="pause",u="resume",l="destroy",d="name",p="interval",f="repeat_count",h="tick",_="reset",g="is_paused",m=-1;n.clock.ClockService=r}(r,t,i),function(e,t,n){"use strict";function r(e,t){if(this._logger=new i,this._pluginManager=new a(this._logger),this._pluginManager.addPlugin(new o(this._logger)),t)for(var n=0;n<t.length;n++)this._pluginManager.addPlugin(t[n]);this._pluginManager.setupPlugins(),this._isDestroyed=!1}var i=e.Logger,a=e.plugin.PluginManager,o=t.clock.ClockService,s=(r.prototype.configure=function(e){if(!e)throw new Error("Configuration object cannot be NULL.");e.debugLogging?this._logger.enable():this._logger.disable(),this._isDestroyed&&this._logger.error(s,"Instance is destroyed.")},r.prototype.destroy=function(){this._isDestroyed||(this._pluginManager.destroy(),this._isDestroyed=!0)},"Heartbeat");n.Heartbeat=r}(r,i,n),e.ADB||(e.ADB={}),e.ADB.core||(e.ADB.core=r),e.ADB.va||(e.ADB.va=n),e.ADB.va.utils||(e.ADB.va.utils=t),e.ADB.va.plugins||(e.ADB.va.plugins={})}(this),function(e){var t;void 0===t&&(t={}),function(){"use strict";var e={ASSET_TYPE_VOD:"vod",ASSET_TYPE_LIVE:"live",ASSET_TYPE_LINEAR:"linear"};t.AssetType=e}(),function(e){"use strict";function t(){this.playerName=null,this.name=null,this.position=null,this.startTime=null}t.prototype.toString=function(){return"playerName="+this.playerName+", name="+this.name+", position="+this.position+", startTime="+this.startTime},e.AdBreakInfo=t}(t),function(e){"use strict";function t(){this.id=null,this.name=null,this.length=null,this.position=null}t.prototype.toString=function(){return"id="+this.id+", name="+this.name+", length="+this.length+", position="+this.position},e.AdInfo=t}(t),function(e){"use strict";function t(){this.name=null,this.length=null,this.position=null,this.startTime=null}t.prototype.toString=function(){return"name="+this.name+", length="+this.length+", position="+this.position+", startTime="+this.startTime},e.ChapterInfo=t}(t),function(e){"use strict";function t(){this.bitrate=null,this.fps=null,this.droppedFrames=null,this.startupTime=null}t.prototype.toString=function(){return"bitrate="+this.bitrate+", fps="+this.fps+", droppedFrames="+this.droppedFrames+", startupTime="+this.startupTime},e.QoSInfo=t}(t),function(e){"use strict";function t(){this.playerName=null,this.id=null,this.name=null,this.length=null,this.playhead=null,this.streamType=null,this.resumed=!1}t.prototype.toString=function(){return"playerName="+this.playerName+", id="+this.id+", name="+this.name+", length="+this.length+", playhead="+this.playhead+", streamType="+this.streamType+", resumed="+this.resumed},e.VideoInfo=t}(t),function(){"use strict";t.VideoPlayerPluginConfig=function(){this.debugLogging=!1}}(),function(e){"use strict";function t(){}t.prototype.getVideoInfo=function(){throw new Error("Implementation error: Method must be overridden.")},t.prototype.getAdBreakInfo=function(){return null},t.prototype.getAdInfo=function(){return null},t.prototype.getChapterInfo=function(){return null},t.prototype.getQoSInfo=function(){return null},e.VideoPlayerPluginDelegate=t}(t),function(e,t){"use strict";function n(e){if(n.__super__.constructor.call(this,s),!e)throw new Error("PlayerPlugin delegate cannot be NULL.");this._delegate=e,this._isTrackingSessionActive=!1,this._isTrackingSessionStarted=!1,this._isTrackingAd=!1,this._playheadTimer=null,this._previousPlayhead=-1,this._stalledPlayheadCount=0,this._playheadStalled=!1,this._videoIdle=!1,this._setupDataResolver()}var r=e.plugin.ParamMapping,i=e.Trigger,a=e.plugin.BasePlugin,o=t.VideoPlayerPluginConfig,s=(e.extend(n,a),n.prototype.configure=function(e){if(!e)throw new Error("Reference to the configuration data cannot be NULL.");if(!(e instanceof o))throw new Error("Expected config data to be instance of VideoPlayerPluginConfig.");e.debugLogging?this._logger.enable():this._logger.disable(),this._logger.debug(this._logTag,"#configure(debugLogging="+e.debugLogging+")")},n.prototype.bootstrap=function(e){n.__super__.bootstrap.call(this,e),this._registerCommands(),this._registerBehaviours()},n.prototype._cmdVideoIdleStart=function(e){this._logger.info(this._logTag,"#_cmdVideoIdleStart()"),this._videoIdle=!0},n.prototype._cmdVideoIdleResume=function(e){this._logger.info(this._logTag,"#_cmdVideoIdleResume()"),this._videoIdle&&(this._trigger(h),this._trigger(_),e.isInChapter&&this._trigger(E),e.isInAd)&&(this._trigger(y),this._isTrackingAd=!0),this._videoIdle=!1},n.prototype.trackSessionStart=function(){var e;this._logger.info(this._logTag,"#trackSessionStart()"),this._canProcess()&&(this._isTrackingSessionActive?this._isTrackingSessionStarted?this._logger.info(this._logTag,"#trackSessionStart() > Tracking session already started."):(this._trigger(h),this._isTrackingSessionStarted=!0,(e=this._dataResolver(["video.resumed"])).hasOwnProperty("video.resumed")&&e["video.resumed"]&&this._trigger(_)):this._logger.warn(this._logTag,"#trackSessionStart() > No active tracking session."))},n.prototype.trackVideoLoad=function(){this._logger.info(this._logTag,"#trackVideoLoad()"),this._canProcess()&&(this._trigger(p),this._isTrackingSessionActive=!0,this._isTrackingSessionStarted=!1)},n.prototype.trackVideoUnload=function(){this._logger.info(this._logTag,"#trackVideoUnload()"),this._canProcess()&&(this._isTrackingSessionActive?(this._stopPlayheadTimer(),this._trigger(f),this._isTrackingSessionActive=!1,this._isTrackingSessionStarted=!1,this._videoIdle=!1):this._logger.warn(this._logTag,"#trackVideoUnload() > No active tracking session."))},n.prototype.trackPlay=function(){this._logger.info(this._logTag,"#trackPlay()"),this._canProcess()&&this._startSessionIfNeeded("trackPlay")&&(this._trigger(C),this._startPlayheadTimer())},n.prototype.trackPause=function(){var e;this._logger.info(this._logTag,"#trackPause()"),this._canProcess()&&this._startSessionIfNeeded("trackPause")&&(this._stopPlayheadTimer(),(e={})[B]=!1,this._trigger(v,e))},n.prototype.trackBufferStart=function(){this._logger.info(this._logTag,"#trackBufferStart()"),this._canProcess()&&this._startSessionIfNeeded("trackBufferStart")&&(this._stopPlayheadTimer(),this._trigger(P))},n.prototype.trackBufferComplete=function(){this._logger.info(this._logTag,"#trackBufferComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackBufferComplete")&&(this._trigger(b),this._startPlayheadTimer())},n.prototype.trackSeekStart=function(){this._logger.info(this._logTag,"#trackSeekStart()"),this._canProcess()&&this._startSessionIfNeeded("trackSeekStart")&&(this._stopPlayheadTimer(),this._trigger(S))},n.prototype.trackSeekComplete=function(){var e;this._logger.info(this._logTag,"#trackSeekComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackSeekComplete")&&(this._trigger(w),this._startPlayheadTimer(),e=this._dataResolver(["ad.isInAd"]),this._isTrackingAd=e.hasOwnProperty("ad.isInAd")&&e["ad.isInAd"])},n.prototype.trackComplete=function(e){var t;this._logger.info(this._logTag,"#trackComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackComplete")&&((t={})[O]=e,this._stopPlayheadTimer(),this._trigger(g,t))},n.prototype.trackTimedMetadata=function(e){this._logger.info(this._logTag,"#trackComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackTimedMetadata")&&this._trigger(m,e)},n.prototype.trackChapterStart=function(){this._logger.info(this._logTag,"#trackChapterStart()"),this._canProcess()&&this._startSessionIfNeeded("#trackChapterStart")&&this._trigger(E)},n.prototype.trackChapterComplete=function(){this._logger.info(this._logTag,"trackChapterComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackChapterComplete")&&this._trigger(T)},n.prototype.trackAdStart=function(){this._logger.info(this._logTag,"#trackAdStart()"),this._canProcess()&&this._startSessionIfNeeded("trackAdStart")&&(this._trigger(y),this._isTrackingAd=!0)},n.prototype.trackAdComplete=function(){this._logger.info(this._logTag,"#trackAdComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackAdComplete")&&(this._trigger(A),this._isTrackingAd=!1)},n.prototype.trackBitrateChange=function(){this._logger.info(this._logTag,"#trackBitrateChange()"),this._canProcess()&&this._startSessionIfNeeded("trackBitrateChange")&&this._trigger(I)},n.prototype.trackVideoPlayerError=function(e){var t;this._logger.info(this._logTag,"#trackVideoPlayerError(errorId="+e+")"),this._startSessionIfNeeded("trackVideoPlayerError")&&((t={})[L]=d,t[M]=e,this._trigger(D,t))},n.prototype.trackApplicationError=function(e){var t;this._logger.info(this._logTag,"#trackApplicationError(errorId="+e+")"),this._startSessionIfNeeded("trackApplicationError")&&((t={})[L]=l,t[M]=e,this._trigger(D,t))},n.prototype._registerCommands=function(){this._pluginManager.comply(this,"handleVideoIdleStart",this._cmdVideoIdleStart),this._pluginManager.comply(this,"handleVideoIdleResume",this._cmdVideoIdleResume)},n.prototype._registerBehaviours=function(){this._pluginManager.registerBehaviour(new i(u,k),this,"handleVideoIdleStart"),this._pluginManager.registerBehaviour(new i(u,N),this,"handleVideoIdleResume",[new r(c,"ad.isInAd","isInAd"),new r(c,"chapter.isInChapter","isInChapter")])},n.prototype._setupDataResolver=function(){function t(){return s.video||(s.video=c._delegate.getVideoInfo(),c._logger.info(c._logTag,"Data from delegate > VideoInfo: "+s.video),s.video)}function n(){return s.ad||(s.ad=c._delegate.getAdInfo(),c._logger.info(c._logTag,"Data from delegate > AdInfo: "+s.ad),s.ad)}function r(){return s.pod||(s.pod=c._delegate.getAdBreakInfo(),c._logger.info(c._logTag,"Data from delegate > AdBreakInfo: "+s.pod),s.pod)}function i(){return s.chapter||(s.chapter=c._delegate.getChapterInfo(),c._logger.info(c._logTag,"Data from delegate > ChapterInfo: "+s.chapter),s.chapter)}function a(){return s.qos||(s.qos=c._delegate.getQoSInfo(),c._logger.info(c._logTag,"Data from delegate > QoSInfo: "+s.qos),s.qos)}var o={},s={},c=this;o["video.id"]=function(){var e=t(),e=e?e.id:null;return c._logger.debug(c._logTag,"Resolving video.id: "+e),e},o["video.name"]=function(){var e=t(),e=e?e.name:null;return c._logger.debug(c._logTag,"Resolving video.name: "+e),e},o["video.length"]=function(){var e=t(),e=e?e.length:NaN;return c._logger.debug(c._logTag,"Resolving video.length: "+e),e},o["video.playerName"]=function(){var e=t(),e=e?e.playerName:null;return c._logger.debug(c._logTag,"Resolving video.playerName: "+e),e},o["video.streamType"]=function(){var e=t(),e=e?e.streamType:null;return c._logger.debug(c._logTag,"Resolving video.streamType: "+e),e},o["video.playhead"]=function(){var e=t(),e=e?e.playhead:NaN;return c._logger.debug(c._logTag,"Resolving video.playhead: "+e),e},o["video.resumed"]=function(){var e=t(),e=!!e&&e.resumed;return c._logger.debug(c._logTag,"Resolving video.resumed: "+e),e},o["video.playheadStalled"]=function(){return this._playheadStalled},o["pod.name"]=function(){var e=r(),e=e?e.name:null;return c._logger.debug(c._logTag,"Resolving pod.name: "+e),e},o["pod.playerName"]=function(){var e=r(),e=e?e.playerName:null;return c._logger.debug(c._logTag,"Resolving pod.playerName: "+e),e},o["pod.position"]=function(){var e=r(),e=e?e.position:NaN;return c._logger.debug(c._logTag,"Resolving pod.position: "+e),e},o["pod.startTime"]=function(){var e=r(),e=e?e.startTime:NaN;return c._logger.debug(c._logTag,"Resolving pod.startTime: "+e),e},o["ad.isInAd"]=function(){var e=null!=n();return c._logger.debug(c._logTag,"Resolving ad.isInAd: "+e),e},o["ad.isInAdBreak"]=function(){var e=null!=r();return c._logger.debug(c._logTag,"Resolving ad.isInAdBreak: "+e),e},o["ad.id"]=function(){var e=n(),e=e?e.id:null;return c._logger.debug(c._logTag,"Resolving ad.id: "+e),e},o["ad.name"]=function(){var e=n(),e=e?e.name:null;return c._logger.debug(c._logTag,"Resolving ad.name: "+e),e},o["ad.length"]=function(){var e=n(),e=e?e.length:NaN;return c._logger.debug(c._logTag,"Resolving ad.length: "+e),e},o["ad.position"]=function(){var e=n(),e=e?e.position:NaN;return c._logger.debug(c._logTag,"Resolving ad.position: "+e),e},o["chapter.isInChapter"]=function(){var e=null!=i();return c._logger.debug(c._logTag,"Resolving chapter.isInChapter: "+e),e},o["chapter.name"]=function(){var e=i(),e=e?e.name:null;return c._logger.debug(c._logTag,"Resolving chapter.name: "+e),e},o["chapter.length"]=function(){var e=i(),e=e?e.length:NaN;return c._logger.debug(c._logTag,"Resolving chapter.length: "+e),e},o["chapter.position"]=function(){var e=i(),e=e?e.position:NaN;return c._logger.debug(c._logTag,"Resolving chapter.position: "+e),e},o["chapter.startTime"]=function(){var e=i(),e=e?e.startTime:NaN;return c._logger.debug(c._logTag,"Resolving chapter.startTime: "+e),e},o["qos.bitrate"]=function(){var e=a(),e=e?e.bitrate:NaN;return c._logger.debug(c._logTag,"Resolving qos.bitrate: "+e),e},o["qos.fps"]=function(){var e=a(),e=e?e.fps:NaN;return c._logger.debug(c._logTag,"Resolving qos.fps: "+e),e},o["qos.droppedFrames"]=function(){var e=a(),e=e?e.droppedFrames:NaN;return c._logger.debug(c._logTag,"Resolving qos.droppedFrames: "+e),e},o["qos.startupTime"]=function(){var e=a(),e=e?1e3*e.startupTime:NaN;return c._logger.debug(c._logTag,"Resolving qos.startupTime: "+e),e},this._dataResolver=function(e){if(!e||0==e.length)return null;s={};for(var t=null,n=0;n<e.length;n++){var r=e[n];(t=t||{})[r]=o.hasOwnProperty(r)?o[r].call(this):null}return t}},n.prototype._trackPlayheadStall=function(){!this._canProcess()||this._playheadStalled||(this._logger.info(this._logTag,"#_trackPlayheadStall()"),this._stalledPlayheadCount=0,this._playheadStalled=!0,this._trigger(v))},n.prototype._trackExitStall=function(){this._canProcess()&&(this._stalledPlayheadCount=0,this._playheadStalled)&&(this._logger.info(this._logTag,"#_trackExitStall()"),this._playheadStalled=!1,this._trigger(C))},n.prototype._startPlayheadTimer=function(){var t=this;this._playheadTimer||(this._playheadTimer=setInterval(function(){var e;t._canProcess()&&(e=t._dataResolver(["ad.isInAd","video.playhead"]),t._isTrackingAd?(t._playheadStalled&&t._trackExitStall(),e.hasOwnProperty("ad.isInAd")&&!e["ad.isInAd"]&&(t._isTrackingAd=!1)):((e=e["video.playhead"])!=t._previousPlayhead?t._trackExitStall():0<=t._previousPlayhead&&e==t._previousPlayhead&&(t._stalledPlayheadCount++,t._stalledPlayheadCount==x)&&t._trackPlayheadStall(),t._previousPlayhead=e))},R))},n.prototype._stopPlayheadTimer=function(){this._playheadTimer&&(clearInterval(this._playheadTimer),this._playheadTimer=null),this._trackExitStall()},n.prototype._startSessionIfNeeded=function(e){return this._isTrackingSessionActive?(this._isTrackingSessionStarted||(this._logger.info(this._logTag,"#"+e+"() > Tracking session auto-start."),this.trackSessionStart()),!0):(this._logger.warn(this._logTag,"#"+e+"() > No active tracking session."),!1)},"player"),c=s,u="adobe-heartbeat",l="sourceErrorExternal",d="sourceErrorSDK",p="video_load",f="video_unload",h="video_start",_="video_resume",g="video_complete",m="timed_metadata",C="play",v="pause",y="ad_start",A="ad_complete",P="buffer_start",b="buffer_complete",S="seek_start",w="seek_complete",E="chapter_start",T="chapter_complete",I="bitrate_change",D="track_error",k="video_idle_start",N="video_idle_resume",O="callback",B="filter_report",L="source",M="error_id",R=1001,x=2;t.VideoPlayerPlugin=n}(e.ADB.core,t),e.ADB.va.plugins.videoplayer||(e.ADB.va.plugins.videoplayer=t)}(this),function(e){var t;(t=void 0===t?{}:t).clock||(t.clock={}),t.context||(t.context={}),t.filter||(t.filter={}),t.model||(t.model={}),t.network||(t.network={}),function(e,t){"use strict";function n(e,t,n,r,i){if(!t)throw new Error("Reference to the channel object cannot be NULL");if(this._channel=t,!e)throw new Error("Reference to the pluginManager object cannot be NULL");if(this._pluginManager=e,!i)throw new Error("Reference to the logger object cannot be NULL");this._logTag="ah::Timer."+n,this._logger=i,this._isDestroyed=!1,this._createTimer(n,r),this._installHandlers()}var r=e.Event,i=(n.KEY_NAME="name",n.KEY_INTERVAL="interval",n.KEY_RESET="reset",n.prototype.resume=function(e){this._logger.debug(this._logTag,"Starting timer: "+this._name);var t={};t[n.KEY_NAME]=i+"."+this._name,t[n.KEY_RESET]=e,this._pluginManager.command(a,c,t)},n.prototype.pause=function(e){this._logger.debug(this._logTag,"Stopping timer: "+this._name);var t={};t[n.KEY_NAME]=i+"."+this._name,t[n.KEY_RESET]=e,this._pluginManager.command(a,s,t)},n.prototype.destroy=function(){var e;this._isDestroyed||(this._isDestroyed=!0,this._uninstallHandlers(),(e={})[n.KEY_NAME]=i+"."+this._name,this._pluginManager.command(a,u,e))},n.prototype.setInterval=function(e){var t=l+"."+i+"."+this._name,t=this._pluginManager.request(a,[t])[t];this.pause(!0),this._createTimer(this._name,e),t||this.resume(!0)},n.prototype._cmdResume=function(e){var t=!1;null!=e&&e.hasOwnProperty(n.KEY_RESET)&&(t=e[n.KEY_RESET]),this.resume(t)},n.prototype._cmdPause=function(e){var t=!1;null!=e&&e.hasOwnProperty(n.KEY_RESET)&&(t=e[n.KEY_RESET]),this.pause(t)},n.prototype._onTick=function(e,t){this._channel.trigger(new r("clock:"+this._name+".tick",t))},n.prototype._installHandlers=function(){this._channel.comply("clock:"+this._name+".resume",this._cmdResume,this),this._channel.comply("clock:"+this._name+".pause",this._cmdPause,this),this._pluginManager.on(a,i+"."+this._name+".tick",this._onTick,this)},n.prototype._uninstallHandlers=function(){this._channel.off(null,null,this),this._pluginManager.off(null,null,null,this)},n.prototype._createTimer=function(e,t){this._name=e,this._interval=t;e={};e[n.KEY_NAME]=i+"."+this._name,e[n.KEY_INTERVAL]=this._interval,this._pluginManager.command(a,o,e)},"heartbeat"),a="service.clock",o="create",s="pause",c="resume",u="destroy",l="is_paused";t.clock.Timer=n}(e.ADB.core,t),function(e,t){"use strict";function r(e,t,n){r.__super__.constructor.call(this,e,t,a,s,n)}var n=e.Event,i=t.clock.Timer,a=(e.extend(r,i),r.prototype._onCheckStatusComplete=function(e){e=e.data[d];this._logger.debug(this._logTag,"#_onCheckStatusComplete(interval="+e+")"),e?e==this._interval?this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval value not changed."):o<e?(this._logger.warn(this._logTag,"#_onCheckStatusComplete() > Interval value too large: "+e),this.setInterval(o)):(this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval changed to: "+e),this.setInterval(e)):(this._logger.warn(this._logTag,"#_onCheckStatusComplete() > Invalid interval value."),this.setInterval(s))},r.prototype._getSettings=function(e){this._logger.debug(this._logTag,"#_getSettings()"),this._channel.trigger(new n(c))},r.prototype._installHandlers=function(){r.__super__._installHandlers.call(this),this._channel.on(u,this._getSettings,this),this._channel.on(l,this._onCheckStatusComplete,this),this._channel.reply(d,function(){return this._interval},this)},"check_status"),o=600,s=60,c="clock:check_status.tick",u="clock:check_status.get_settings",l="net:check_status_complete",d="check_status_interval";t.clock.CheckStatusTimer=r}(e.ADB.core,t),function(e,t){"use strict";function r(e,t,n){r.__super__.constructor.call(this,e,t,i,a,n)}var n=t.clock.Timer,i=(e.extend(r,n),r.prototype._onCheckStatusComplete=function(e){e=e.data[o];this._logger.debug(this._logTag,"#_onCheckStatusComplete(interval="+e+")"),e?e==this._interval?this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval value not changed."):(this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval changed to: "+e),this.setInterval(e)):(this._logger.warn(this._logTag,"#_onCheckStatusComplete() > Invalid interval value."),this.setInterval(a))},r.prototype._installHandlers=function(){r.__super__._installHandlers.call(this),this._channel.on(s,this._onCheckStatusComplete,this),this._channel.reply(o,function(){return this._interval},this)},"reporting"),a=10,o="reporting_interval",s="net:check_status_complete";t.clock.ReportingTimer=r}(e.ADB.core,t),function(e,t){"use strict";function r(e,t,n){r.__super__.constructor.call(this,e,t,i,a,n)}var n=t.clock.Timer,i=(e.extend(r,n),"idle"),a=1800;t.clock.IdleTimer=r}(e.ADB.core,t),function(e,t){"use strict";function r(e,t,n){r.__super__.constructor.call(this,e,t,i,a,n)}var n=t.clock.Timer,i=(e.extend(r,n),"flush_filter"),a=.25;t.clock.FlushFilterTimer=r}(e.ADB.core,t),function(e){"use strict";function t(e,t,n){if(!e)throw new Error("Reference to the pluginManager object cannot be NULL");if(!t)throw new Error("Reference to the channel object cannot be NULL");if(!n)throw new Error("Reference to the logger object cannot be NULL");this._isDestroyed=!1,this._reportingTimer=new a(e,t,n),this._checkStatusTimer=new r(e,t,n),this._flushFilterTimer=new i(e,t,n),this._idleTimer=new o(e,t,n)}var r=e.clock.CheckStatusTimer,i=e.clock.FlushFilterTimer,a=e.clock.ReportingTimer,o=e.clock.IdleTimer;t.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._reportingTimer.destroy(),this._checkStatusTimer.destroy(),this._flushFilterTimer.destroy(),this._idleTimer.destroy())},e.clock.Clock=t}((e.ADB.core,t)),function(e){"use strict";function r(e,t){this.value=e,this.hint=t}function t(e){this.realm=e,this.data={}}r.HINT_SHORT="short",t.prototype.setField=function(e,t,n){this.data[e]=new r(t,n)},t.prototype._createAccessor=function(e,t,n){var r=this;return function(){return arguments.length&&(r[e]=arguments[0],r.setField(t,arguments[0],n)),r[e]}},e.model.Dao=t,e.model.DaoField=r}((e.ADB.core,t)),function(e,t){"use strict";function n(){var e;n.__super__.constructor.call(this,"asset"),this.adId=this._createAccessor("_adId","ad_id",null),this.sid=this._createAccessor("_sid","ad_sid",null),this.resolver=this._createAccessor("_resolver","resolver",null),this.podId=this._createAccessor("_podId","pod_id",null),this.podPosition=this._createAccessor("_podPosition","pod_position",null),this.podOffset=this._createAccessor("_podOffset","pod_offset",null),this.podName=this._createAccessor("_podName","pod_name",null),this.adLength=this._createAccessor("_adLength","ad_length",null),this.adName=this._createAccessor("_adName","ad_name",null),arguments.length&&arguments[0]instanceof n?(this.adId((e=arguments[0]).adId()),this.sid(e.sid()),this.resolver(e.resolver()),this.podId(e.podId()),this.podPosition(e.podPosition()),this.podOffset(e.podOffset()),this.podName(e.podName()),this.adLength(e.adLength()),this.adName(e.adName())):(this.adId(""),this.sid(""),this.resolver(""),this.podId(""),this.podPosition(""),this.podOffset(0),this.podName(""),this.adLength(0),this.adName(""))}var r=t.model.Dao;e.extend(n,r),t.model.AdDao=n}(e.ADB.core,t),function(e,t){"use strict";function n(){var e;n.__super__.constructor.call(this,"sc"),this.reportSuiteId=this._createAccessor("_reportSuiteId","rsid",null),this.trackingServer=this._createAccessor("_trackingServer","tracking_server",null),this.ssl=this._createAccessor("_ssl","ssl",i.HINT_SHORT),arguments.length&&arguments[0]instanceof n?(this.reportSuiteId((e=arguments[0]).reportSuiteId()),this.trackingServer(e.trackingServer()),this.ssl(e.ssl())):(this.reportSuiteId(""),this.trackingServer(""),this.ssl(0))}var r=t.model.Dao,i=t.model.DaoField;e.extend(n,r),t.model.AdobeAnalyticsDao=n}(e.ADB.core,t),function(e,t){"use strict";function n(){var e;n.__super__.constructor.call(this,"stream"),this.id=this._createAccessor("_id","chapter_id",null),this.sid=this._createAccessor("_sid","chapter_sid",null),this.name=this._createAccessor("_name","chapter_name",null),this.position=this._createAccessor("_position","chapter_pos",null),this.length=this._createAccessor("_length","chapter_length",null),this.offset=this._createAccessor("_offset","chapter_offset",null),arguments.length&&arguments[0]instanceof n?(this.id((e=arguments[0]).id()),this.sid(e.sid()),this.name(e.name()),this.position(e.position()),this.length(e.length()),this.offset(e.offset())):(this.id(""),this.sid(""),this.name(""),this.position(0),this.length(0),this.offset(0))}var r=t.model.Dao;e.extend(n,r),t.model.ChapterDao=n}(e.ADB.core,t),function(e,t){"use strict";function n(){var e,t;n.__super__.constructor.call(this,"asset"),this.type=this._createAccessor("_type","type",null),this.videoId=this._createAccessor("_videoId","video_id",null),this.publisher=this._createAccessor("_publisher","publisher",null),this.adData=this._createAccessor("_adData","ad_data",null),this.chapterData=this._createAccessor("_chapterData","chapter_data",null),this.length=this._createAccessor("_length","length",null),this.name=this._createAccessor("_name","name",null),arguments.length&&arguments[0]instanceof n?(this.type((e=arguments[0]).type()),this.name(e.name()),this.videoId(e.videoId()),this.publisher(e.publisher()),this.length(e.length()),t=e.adData()?new i(e.adData()):null,this.adData(t),t=e.chapterData()?new a(e.chapterData()):null,this.chapterData(t)):(this.type(""),this.name(""),this.videoId(""),this.publisher(""),this.length(0),this.adData(null),this.chapterData(null))}var r=t.model.Dao,i=t.model.AdDao,a=t.model.ChapterDao;e.extend(n,r),n.TYPE_AD="ad",n.TYPE_MAIN_CONTENT="main",t.model.AssetDao=n}(e.ADB.core,t),function(e,t){"use strict";function n(){var e;n.__super__.constructor.call(this,"event"),this.type=this._createAccessor("_type","type",null),this.duration=this._createAccessor("_duration","duration",null),this.playhead=this._createAccessor("_playhead","playhead",null),this.id=this._createAccessor("_id","id",null),this.source=this._createAccessor("_source","source",null),this.ts=this._createAccessor("_ts","ts",null),this.prevTs=this._createAccessor("_prevTs","prev_ts",null),arguments.length&&arguments[0]instanceof n?(this.type((e=arguments[0]).type()),this.duration(e.duration()),this.playhead(e.playhead()),this.id(e.id()),this.source(e.source()),this.ts(e.ts()),this.prevTs(e.prevTs())):(this.type(""),this.duration(0),this.playhead(0),this.id(""),this.source(""),this.ts(0),this.prevTs(-1))}var r=t.model.Dao;e.extend(n,r),n.EVENT_TYPE_AA_START="aa_start",n.EVENT_TYPE_AA_AD_START="aa_ad_start",n.EVENT_TYPE_START="start",n.EVENT_TYPE_RESUME="resume",n.EVENT_TYPE_CHAPTER_START="chapter_start",n.EVENT_TYPE_CHAPTER_COMPLETE="chapter_complete",n.EVENT_TYPE_PLAY="play",n.EVENT_TYPE_PAUSE="pause",n.EVENT_TYPE_STALL="stall",n.EVENT_TYPE_BUFFER="buffer",n.EVENT_TYPE_BITRATE_CHANGE="bitrate_change",n.EVENT_TYPE_ERROR="error",n.EVENT_TYPE_COMPLETE="complete",t.model.EventDao=n}(e.ADB.core,t),function(e,t){"use strict";function n(){var e;n.__super__.constructor.call(this,"stream"),this.bitrate=this._createAccessor("_bitrate","bitrate",null),this.fps=this._createAccessor("_fps","fps",null),this.droppedFrames=this._createAccessor("_droppedFrames","dropped_frames",null),this.startupTime=this._createAccessor("_startup_time","startup_time",null),arguments.length&&arguments[0]instanceof n?(this.bitrate((e=arguments[0]).bitrate()),this.fps(e.fps()),this.droppedFrames(e.droppedFrames()),this.startupTime(e.startupTime()),this.isStartupTimeOverridden=e.isStartupTimeOverridden):(this.bitrate(0),this.fps(0),this.droppedFrames(0),this.startupTime(0),this.isStartupTimeOverridden=!1)}var r=t.model.Dao;e.extend(n,r),t.model.QoSDao=n}(e.ADB.core,t),function(e,t){"use strict";function n(){var e;n.__super__.constructor.call(this,"sp"),this.ovp=this._createAccessor("_ovp","ovp",null),this.sdk=this._createAccessor("_sdk","sdk",null),this.channel=this._createAccessor("_channel","channel",null),this.playerName=this._createAccessor("_playerName","player_name",null),this.libVersion=this._createAccessor("_libVersion","hb_version",null),this.apiLevel=this._createAccessor("_apiLevel","hb_api_lvl",null),arguments.length&&arguments[0]instanceof n?(this.ovp((e=arguments[0]).ovp()),this.sdk(e.sdk()),this.channel(e.channel()),this.playerName(e.playerName()),this.libVersion(e.libVersion()),this.apiLevel(e.apiLevel())):(this.ovp(i),this.sdk(i),this.channel(i),this.playerName(""),this.libVersion(""),this.apiLevel(0))}var r=t.model.Dao,i=(e.extend(n,r),"unknown");t.model.ServiceProviderDao=n}(e.ADB.core,t),function(e,t){"use strict";function n(){n.__super__.constructor.call(this,"event"),this.sessionId=this._createAccessor("_sessionId","sid",null),arguments.length&&arguments[0]instanceof n?this.sessionId(arguments[0].sessionId()):this.sessionId(null)}var r=t.model.Dao;e.extend(n,r),t.model.SessionDao=n}(e.ADB.core,t),function(e,t){"use strict";function n(){n.__super__.constructor.call(this,"stream"),this.type=this._createAccessor("_type","type",null),arguments.length&&arguments[0]instanceof n?this.type(arguments[0].type()):this.type(null)}var r=t.model.Dao;e.extend(n,r),t.model.StreamDao=n}(e.ADB.core,t),function(e,t){"use strict";function n(){var e;n.__super__.constructor.call(this,"user"),this.analyticsVisitorId=this._createAccessor("_analyticsVisitorId","aid",null),this.marketingCloudVisitorId=this._createAccessor("_marketingCloudVisitorId","mid",null),this.visitorId=this._createAccessor("_visitorId","id",null),arguments.length&&arguments[0]instanceof n?(this.analyticsVisitorId((e=arguments[0]).analyticsVisitorId()),this.marketingCloudVisitorId(e.marketingCloudVisitorId()),this.visitorId(e.visitorId())):(this.analyticsVisitorId(null),this.marketingCloudVisitorId(null),this.visitorId(null))}var r=t.model.Dao;e.extend(n,r),t.model.UserDao=n}(e.ADB.core,t),function(e,t){"use strict";function n(){var e;n.__super__.constructor.call(this,"aam"),this.audienceManagerBlob=this._createAccessor("_audienceManagerBlob","blob",null),this.audienceManagerLocationHint=this._createAccessor("_audienceManagerLocationHint","loc_hint",null),arguments.length&&arguments[0]instanceof n?(this.audienceManagerBlob((e=arguments[0]).audienceManagerBlob()),this.audienceManagerLocationHint(e.audienceManagerLocationHint())):(this.audienceManagerBlob(null),this.audienceManagerLocationHint(null))}var r=t.model.Dao;e.extend(n,r),t.model.AudienceManagerDao=n}(e.ADB.core,t),function(e,t){"use strict";var a=e.ObjectUtils,o=t.model.EventDao,s=t.model.AssetDao,c=t.model.StreamDao,u=t.model.QoSDao;t.model.TrackItem=function(e,t,n,r,i){this.eventData=new o,this.eventData.type(t),this.eventData.duration(0),this.eventData.ts((new Date).getTime()),this.eventData.playhead(n),this.assetData=new s(e._assetData),this.streamData=new c(e._streamData),this.qosData=new u(e._qosData),this.cuserData=a.clone(e._cuserData),this.meta=r,this.callback=i,this.filterReport=!0}}(e.ADB.va.utils,t),function(e,t){"use strict";var o=e.ObjectUtils,s=t.model.EventDao,c=t.model.AssetDao,u=t.model.StreamDao,l=t.model.QoSDao;t.model.CUserDao,t.model.Report=function(e,t,n,r,i,a){this.adobeAnalyticsData=e,this.userData=t,this.aamData=n,this.serviceProviderData=r,this.sessionData=i,this.eventData=new s(a.eventData),this.assetData=new c(a.assetData),this.streamData=new u(a.streamData),this.qosData=new l(a.qosData),this.cuserData=o.clone(a.cuserData),this.meta=o.clone(a.meta),this.callback=a.callback,this.filterReport=a.filterReport}}(e.ADB.va.utils,t),function(e){"use strict";function t(){}t.prototype.serializeReport=function(e){},t.prototype.serializeDao=function(e){},t.prototype.serializeMap=function(e){},t.prototype.serializeNumber=function(e,t,n,r){},t.prototype.serializeString=function(e,t,n,r){},e.model.ISerializer=t}(t),function(e,t){"use strict";function n(e){if(!e)throw new Error("Reference to the logger object cannot be NULL");this._logger=e}var s=t.model.Dao,a=t.model.DaoField,r=t.model.ISerializer,c=(e.extend(n,r),n.prototype.serializeReport=function(e){var t=[];return t.push(this.serializeDao(e.adobeAnalyticsData)),t.push(this.serializeDao(e.userData)),t.push(this.serializeDao(e.aamData)),t.push(this.serializeMap(e.cuserData,"cuser")),t.push(this.serializeDao(e.serviceProviderData)),t.push(this.serializeDao(e.sessionData)),t.push(this.serializeDao(e.eventData)),t.push(this.serializeDao(e.assetData)),t.push(this.serializeDao(e.streamData)),t.push(this.serializeDao(e.qosData)),t.push(this.serializeMap(e.meta,"meta")),{serializedOutput:t.filter(function(e){return!!e}).join("&"),callback:e.callback}},n.prototype.serializeDao=function(e){return this._processDao(e).filter(function(e){return!!e}).join("&")},n.prototype.serializeMap=function(e,t){var n,r=[],i=t||"meta";for(n in e)e.hasOwnProperty(n)&&e[n]&&r.push("s:"+i+":"+n+"="+window.encodeURIComponent(e[n]));return r.join("&")},n.prototype.serializeNumber=function(e,t,n,r){var i=o;return null==t||isNaN(t)?null:(i=r===a.HINT_SHORT?u:i)+":"+n+":"+e+"="+Math.floor(t)},n.prototype.serializeString=function(e,t,n,r){return t?i+":"+n+":"+e+"="+window.encodeURIComponent(t):null},n.prototype._processDao=function(e){var t,n=[];for(t in e.data)if(e.data.hasOwnProperty(t)){var r=e.data[t],i=r.value,r=r.hint,a=null,o=e.realm;if(null==i)continue;"number"==typeof i?a=this.serializeNumber(t,i,o,r):"string"==typeof i?a=this.serializeString(t,i,o,r):i instanceof s?a=this.serializeDao(i):this._logger.warn(c,"#_processDao() > Unable to serialize DAO. Field: "+t+". Value: "+i+"."),a&&n.push(a)}return n},"ah::QuerystringSerializer"),o="l",u="h",i="s";t.model.QuerystringSerializer=n}(e.ADB.core,t),function(e){"use strict";function t(e,t){if(!e)throw new Error("Reference to the data object cannot be NULL");if(this._data=e,!t)throw new Error("Reference to the logger object cannot be NULL");this._logger=t}t.prototype.parse=function(){window.DOMParser?i=(new window.DOMParser).parseFromString(this._data,"text/xml"):((i=new window.ActiveXObject("Microsoft.XMLDOM")).async=!1,i.loadXML(this._data)),(r=parseInt(i.getElementsByTagName("trackingInterval")[0].childNodes[0].nodeValue,10))&&(e=r),(r=parseInt(i.getElementsByTagName("setupCheckInterval")[0].childNodes[0].nodeValue,10))&&(t=r),(r=parseInt(i.getElementsByTagName("trackExternalErrors")[0].childNodes[0].nodeValue,10))&&(n=1==r),r=!i.getElementsByTagName("nielsenEnabled")[0]||1==parseInt(i.getElementsByTagName("nielsenEnabled")[0].childNodes[0].nodeValue,10);var e,t,n,r,i={};return i[o]=e,i[s]=t,i[c]=n,i[u]=r,this._logger.debug(a,"#parse() > Obtained configuration settings."),i};var a="ah::SettingsParser",o="reporting_interval",s="check_status_interval",c="track_external_errors",u="nielsen_enabled";e.network.SettingsParser=t}((e.ADB.core,t)),function(e,t){"use strict";function n(e,t){if(this._trackingServer=null,this._checkStatusServer=null,this._publisher=null,this._isConfigured=!1,this._isDestroyed=!1,this._quietMode=!1,this._visitorOptedOut=!1,this._prevReportSent=null,!e)throw new Error("Reference to the channel object cannot be NULL");if(this._channel=e,!t)throw new Error("Reference to the logger object cannot be NULL");this._logger=t,this._serializer=new r(t),this._installEventListeners()}var a=e.Event,o=e.URLRequestMethod,s=e.URLRequest,c=e.URLLoader,u=t.network.SettingsParser,r=t.model.QuerystringSerializer,l=(n.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._logger.debug(l,"#destroy()"),this._uninstallEventListeners())},n.prototype._onApiConfig=function(e){e=e.data;this._logger.debug(l,"#_onApiConfig(sb_server="+e[i]+", check_status_server="+e[d]+", publisher="+e[p]+", quiet_mode="+e[f]+", ssl="+e[h]+")"),this._trackingServer=this._updateRequestProtocol(e[i],e[h]),this._checkStatusServer=this._updateRequestProtocol(e[d],e[h]),this._publisher=e[p],this._quietMode=e[f],this._isConfigured=!0},n.prototype._onUpdateVisitorOptOut=function(e){e=e.data;this._logger.debug(l,"#_onUpdateVisitorOptOut(visitor_opt_out="+e[g]+")"),this._visitorOptedOut=e[g]},n.prototype._onFilterReportAvailable=function(e){var t,n,r,i,e=e.data;this._isConfigured?(e=e[_],t=this._serializer.serializeReport(e),n=this._trackingServer+"/?"+t.serializedOutput,this._prevReportSent&&this._prevReportSent.eventData&&e.eventData&&this._prevReportSent.eventData.playhead==e.eventData.playhead&&this._prevReportSent.eventData.ts==e.eventData.ts&&this._prevReportSent.eventData.prevTs==e.eventData.prevTs&&this._prevReportSent.eventData.type==e.eventData.type?this._logger.debug(l,"#_onFilterReportAvailable() > Duplicate heartbeat report not sent for URL:\n"+n):(this._prevReportSent=e,e=new s(n,o.GET),this._logger.debug(l,"#_onFilterReportAvailable() > "+e.url),(r=this)._quietMode||this._visitorOptedOut||((i=new c).addEventListener(a.SUCCESS,function(e){i.close(),t.callback&&t.callback.call(null)},this),i.addEventListener(a.ERROR,function(e){i.close(),r._logger.warn(l,"#_onFilterReportAvailable() > Failed to send heartbeat report."),t.callback&&t.callback.call(null)},this),i.load(e)))):this._logger.warn(l,"#_onFilterReportAvailable() > Unable to send request: not configured.")},n.prototype._onClockCheckStatusTick=function(e){var t,n,r,i;this._isConfigured?this._publisher?(n=(t=this)._publisher.replace(/[^a-zA-Z0-9]+/,"-").toLocaleLowerCase(),n=this._checkStatusServer+n+".xml?r="+(new Date).getTime(),r=new s(n,o.GET),(i=new c).addEventListener(a.SUCCESS,function(e){e.data&&((e=new u(e.data.response,t._logger).parse())?t._channel.trigger(new a(A,e)):t._logger.warn(l,"#_onClockCheckStatusTick() > Failed to parse the config. settings.")),i.close()},this),i.addEventListener(a.ERROR,function(e){t._logger.warn(l,"#_onClockCheckStatusTick() > Failed to obtain the config. settings."),i.close()},this),this._logger.debug(l,"#_onClockCheckStatusTick() > Get new settings from: "+n),i.load(r)):this._logger.warn(l,"#_onClockCheckStatusTick() > Publisher is NULL."):this._logger.warn(l,"#_onClockCheckStatusTick() > Unable to send request: not configured.")},n.prototype._updateRequestProtocol=function(e,t){return 0===e.indexOf("http://")?e=e.slice(7):0===e.indexOf("https://")&&(e=e.slice(8)),t?"https://"+e:"http://"+e},n.prototype._installEventListeners=function(){this._channel.on(m,this._onApiConfig,this),this._channel.on(C,this._onUpdateVisitorOptOut,this),this._channel.on(v,this._onFilterReportAvailable,this),this._channel.on(y,this._onClockCheckStatusTick,this)},n.prototype._uninstallEventListeners=function(){this._channel.off(null,null,this)},"ah::Network"),i="tracking_server",d="check_status_server",p="publisher",f="quiet_mode",h="ssl",_="report",g="visitor_opt_out",m="api:config",C="api:update_visitor_optout",v="filter:data_available",y="clock:check_status.tick",A="net:check_status_complete";t.network.Network=n}(e.ADB.core,t),function(e,t){"use strict";function n(e,t){if(!e)throw new Error("Reference to the channel object cannot be NULL");if(this._channel=e,!t)throw new Error("Reference to the logger object cannot be NULL");this._logger=t,this._isDestroyed=!1,this._isBufferingInProgress=!1,this._reportBuffer={},this._tsHistory={},this._workQueue=new i,this._installEventListeners()}function f(r){var i=[];return r.forEach(function(e){var t,n;(e.eventData.type()!=_.EVENT_TYPE_PLAY||e.eventData.duration()>l||0==e.eventData.duration()&&e.assetData.type()==g.TYPE_MAIN_CONTENT&&(n=[],r.forEach(function(e){e.eventData.type()!=_.EVENT_TYPE_PLAY&&e.eventData.type()!=_.EVENT_TYPE_BUFFER&&e.eventData.type()!=_.EVENT_TYPE_START||n.push(e)}),(t=n).indexOf(e)==t.length-1))&&i.push(e)}),i}var r=e.radio.Command,i=e.radio.CommandQueue,h=e.Event,_=t.model.EventDao,g=t.model.AssetDao,a=(n.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._logger.debug(d,"#destroy()"),this._uninstallEventListeners(),this.clear())},n.prototype.clear=function(){this._logger.debug(d,"#clear()"),this._workQueue.cancelAllCommands(),this._reportBuffer={},this._tsHistory={},this._isBufferingInProgress=!1},n.prototype.flush=function(){this._workQueue.addCommand(new r(this._flushBufferReport,this))},n.prototype._bufferReport=function(e){var t;this._isDestroyed||((e=e[C])&&(t=e.sessionData.sessionId(),this._reportBuffer[t]=this._reportBuffer[t]||[],this._reportBuffer[t].push(e)),this._isBufferingInProgress)||(this._isBufferingInProgress=!0,(t={})[s]=!0,t[c]=1,this._channel.command(u,t))},n.prototype._flushBufferReport=function(){if(!this._isDestroyed){var e,t=this;for(e in this._reportBuffer)if(this._reportBuffer.hasOwnProperty(e)){var n=f(function(e){var t=-1,n=-1,r=[];return e.forEach(function(e){e.eventData.type()==_.EVENT_TYPE_START?e.assetData.type()==g.TYPE_MAIN_CONTENT?-1==t?t=r.push(e)-1:(e.eventData.prevTs(-1),r[t]=e):-1==n?n=r.push(e)-1:(e.eventData.prevTs(-1),r[n]=e):r.push(e)}),r}(function(e){var t=[];return e&&e.forEach(function(e){(e.eventData.type()!=_.EVENT_TYPE_PAUSE&&e.eventData.type()!=_.EVENT_TYPE_STALL||!e.filterReport||e.eventData.duration()>v)&&t.push(e)}),t}(this._reportBuffer[e]))),r=(s=o=a=i=r=void 0,n);if(r)for(var i=0;i<r.length;i++){var a=r[i],o=a.sessionData.sessionId(),s=(t._tsHistory[o]=t._tsHistory[o]||{},a.eventData.type()+"."+(a.assetData.type()==g.TYPE_AD?a.assetData.adData().adId():a.assetData.videoId()));t._tsHistory[o].hasOwnProperty(s)&&a.eventData.prevTs(t._tsHistory[o][s]),t._tsHistory[o][s]=a.eventData.ts()}for(var c=0;c<n.length;c++){var u=n[c],l={};l[C]=u,this._channel.trigger(new h(m,l))}}this._reportBuffer={};var d=this._channel.request(y),p=this._tsHistory[d]||{};this._tsHistory={},this._tsHistory[d]=p,this._isBufferingInProgress=!1}},n.prototype._onContextReportAvailable=function(e){e=e.data;this._workQueue.addCommand(new r(this._bufferReport,this,[e]))},n.prototype._onClockFlushFilterTick=function(e){this.flush()},n.prototype._installEventListeners=function(){this._channel.on(a,this._onContextReportAvailable,this),this._channel.on(o,this._onClockFlushFilterTick,this)},n.prototype._uninstallEventListeners=function(){this._channel.off(null,null,this)},"context:report_available"),m="filter:data_available",o="clock:flush_filter.tick",s="reset",C="report",c="repeat_count",u="clock:flush_filter.resume",l=250,v=250,y="session_id",d="ah::ReportFilter";t.filter.ReportFilter=n}(e.ADB.core,t),function(e,t){"use strict";function n(e,t){this._onFail={fn:e,ctx:t}}var r=e.ErrorInfo;n.prototype.validateFields=function(e,t){if(!e)return this._fail("Data cannot be null");if(t)for(var n=0;n<t.length;n++){var r=t[n];switch(r){case"videoId":if(!e.hasOwnProperty("videoId"))return this._fail("The ID for the main video must be specified.");if("string"!=typeof e.videoId)return this._fail("The ID for the main video must be a String.");if(""===e.videoId)return this._fail("The ID for the main video cannot be an empty string.");break;case"streamType":if(!e.hasOwnProperty("streamType"))return this._fail("The stream type for the main video must be specified.");if("string"!=typeof e.streamType)return this._fail("The stream type for the main video must be a String.");if(""===e.streamType)return this._fail("The stream type for the main video cannot be an empty string.");break;case"videoLength":if(!e.hasOwnProperty("videoLength"))return this._fail("The length of the main video must be specified.");if("number"!=typeof e.videoLength)return this._fail("The length of the main video must be a Number.");if(isNaN(e.videoLength))return this._fail("The length of the main video cannot be NaN.");break;case"playhead":if(!e.hasOwnProperty("playhead"))return this._fail("The playhead for the main video must be specified.");if("number"!=typeof e.playhead)return this._fail("The playhead for the main video must be a Number.");if(isNaN(e.playhead))return this._fail("The playhead for the main video cannot be NaN.");break;case"playerName":if(!e.hasOwnProperty("playerName"))return this._fail("The player name for the main video must be specified.");if("string"!=typeof e.playerName)return this._fail("The player name for the main video must be a String.");if(""===e.playerName)return this._fail("The player name for the main video cannot be an empty string.");break;case"rsid":if(!e.hasOwnProperty("rsid"))return this._fail("account (rsid) is required and has to be set in the AppMeasurement instance.");if("string"!=typeof e.rsid)return this._fail("account (rsid) of the AppMeasurement instance must be a String.");if(""===e.rsid)return this._fail("account (rsid) of the AppMeasurement instance  cannot be an empty string.");break;case"trackingServer":if(!e.hasOwnProperty("trackingServer"))return this._fail("trackingServer is required and has to be set in the AppMeasurement instance.");if("string"!=typeof e.trackingServer)return this._fail("trackingServer of the AppMeasurement instance must be a String.");if(""===e.trackingServer)return this._fail("trackingServer of the AppMeasurement instance cannot be an empty string.");break;case"podPlayerName":if(!e.hasOwnProperty("podPlayerName"))return this._fail("The player name for the ad-break must be specified.");if("string"!=typeof e.podPlayerName)return this._fail("The player name for the ad-break must be a String.");if(""===e.podPlayerName)return this._fail("The player name for the ad-break cannot be an empty string.");break;case"podPosition":if(!e.hasOwnProperty("podPosition"))return this._fail("Position (index) of the ad-break must be specified.");if("number"!=typeof e.podPosition)return this._fail("Position (index) of the ad-break must be a Number.");if(isNaN(e.podPosition))return this._fail("Position (index) of the ad-break cannot be NaN.");break;case"adId":if(!e.hasOwnProperty("adId"))return this._fail("The ad ID must be specified.");if("string"!=typeof e.adId)return this._fail("The ad ID must be a String.");if(""===e.adId)return this._fail("The ad ID cannot be an empty string.");break;case"adPosition":if(!e.hasOwnProperty("adPosition"))return this._fail("Position (index) of the ad must be specified.");if("number"!=typeof e.adPosition)return this._fail("Position (index) of the ad must be a Number.");if(isNaN(e.adPosition))return this._fail("Position (index) of the ad cannot be NaN.");break;case"chapterPosition":if(!e.hasOwnProperty("chapterPosition"))return this._fail("Position (index) of the chapter must be specified.");if("number"!=typeof e.chapterPosition)return this._fail("Position (index) of the chapter must be a Number.");if(isNaN(e.chapterPosition))return this._fail("Position (index) of the chapter cannot be NaN.");break;case"chapterOffset":if(!e.hasOwnProperty("chapterOffset"))return this._fail("Chapter start-time (offset) must be specified.");if("number"!=typeof e.chapterOffset)return this._fail("Chapter start-time (offset) must be a Number.");if(isNaN(e.chapterOffset))return this._fail("Chapter start-time (offset) cannot be NaN.");break;case"chapterLength":if(!e.hasOwnProperty("chapterLength"))return this._fail("The length of the chapter must be specified.");if("number"!=typeof e.chapterLength)return this._fail("The length of the chapter must be a Number.");if(isNaN(e.chapterLength))return this._fail("The length of the chapter cannot be NaN.");break;default:return this._fail("Unable to validate unknown parameter: "+r)}}return!0},n.prototype._fail=function(e){e=new r("Invalid input data",e);return this._onFail.fn&&this._onFail.fn.call(this._onFail.ctx,e),!1},t.context.InputDataValidator=n}(e.ADB.va,t),function(e){"use strict";function t(e,t){if(!t)throw new Error("Reference to the logger object cannot be NULL");if(this._logger=t,!e)throw new Error("Reference to the context object cannot be NULL");this._context=e}var n=e.model.Report,r=(t.prototype.createReportForItem=function(e){return this._logger.debug(r,"Creating report for item: "+e.eventData.type()),new n(this._context._adobeAnalyticsData,this._context._userData,this._context._aamData,this._context._serviceProviderData,this._context._sessionData,e)},"ah::ReportFactory");e.context.ReportFactory=t}((e.ADB.core,t)),function(e,t,n){"use strict";function r(e,t){if(!e)throw new Error("Reference to the channel object cannot be NULL");if(this._channel=e,!t)throw new Error("Reference to the logger object cannot be NULL");this._logger=t,this._lastInBandItem=null,this._autoComputedStartupTime=0,this._reportingInterval=M,this._assetData=null,this._streamData=null,this._qosData=null,this._sessionData=null,this._cuserData=null,this._adobeAnalyticsData=new c,this._serviceProviderData=new u,this._userData=new l,this._aamData=new d,this._isTrackingSessionActive=!1,this._isVideoComplete=!1,this._activeAssetId=null,this._isDestroyed=!1,this._doNotOverrideEventDuration=!1,this._reportFactory=new v(this,this._logger),this._inputDataValidator=new y(function(e){this._logger.error(A,e.getMessage()+" | "+e.getDetails()),this._channel.trigger(new o(b,e))},this),this._stashedChapterData=null,this._stashedAdData=null,this._trackExternalErrors=!0,this._installEventListeners()}var i=t.md5,a=t.ObjectUtils,o=e.Event,s=n.model.SessionDao,c=n.model.AdobeAnalyticsDao,u=n.model.ServiceProviderDao,l=n.model.UserDao,d=n.model.AudienceManagerDao,p=n.model.EventDao,f=n.model.AssetDao,h=n.model.StreamDao,_=n.model.QoSDao,g=n.model.AdDao,m=n.model.ChapterDao,C=n.model.TrackItem,v=n.context.ReportFactory,y=n.context.InputDataValidator,A=(r.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._logger.debug(A,"#destroy()"),this._uninstallEventListeners())},r.prototype._onApiAnalyticsStart=function(e){this._logger.debug(A,"#_onApiAnalyticsStart()");var e=e.data;this._checkCall("_onApiAnalyticsStart")&&this._inputDataValidator.validateFields(e,["playhead"])&&(this._userData.visitorId(e.vid),this._userData.analyticsVisitorId(e.aid),this._userData.marketingCloudVisitorId(e.mid),this._aamData.audienceManagerBlob(e.blob),this._aamData.audienceManagerLocationHint(e.loc_hint),e.customerIDs&&(this._cuserData=e.customerIDs),this._updateQoSInfo(e),(e=new C(this,p.EVENT_TYPE_AA_START,e.playhead,null,e._eventData[D])).assetData.adData(null),e.assetData.type(f.TYPE_MAIN_CONTENT),this._cuserData=null,this._sendHit(e))},r.prototype._onApiAnalyticsAdStart=function(e){this._logger.debug(A,"#_onApiAnalyticsAdStart()");var e=e.data;this._checkCall("_onApiAnalyticsAdStart")&&this._inputDataValidator.validateFields(e,["playhead"])&&(this._updateQoSInfo(e),e=new C(this,p.EVENT_TYPE_AA_AD_START,e.playhead,null,e._eventData[D]),this._sendHit(e))},r.prototype._onApiVideoLoad=function(e){e=e.data;this._logger.debug(A,"#_onApiVideoLoad(rsid="+e.rsid+", aa_trackingServer="+e.trackingServer+")"),this._resetInternalState(),this._inputDataValidator.validateFields(e,["rsid","trackingServer"])&&(this._sessionData.sessionId(this._generateSessionId()),this._isTrackingSessionActive=!0)},r.prototype._onApiVideoUnload=function(e){return this._logger.debug(A,"#_onApiVideoUnload()"),this._isTrackingSessionActive?void(this._isTrackingSessionActive=!1):void this._logger.debug(A,"#_onApiVideoUnload() > No active tracking session.")},r.prototype._onApiVideoStart=function(e){var t,e=e.data;this._logger.debug(A,"#_onApiVideoStart(id="+e.videoId+", name="+e.videoName+", length="+e.videoLength+", type="+e.streamType+", playerName="+e.playerName+")"),this._checkCall("_onApiVideoStart")&&this._inputDataValidator.validateFields(e,["videoId","streamType","videoLength","playhead","playerName"])&&(this._adobeAnalyticsData.reportSuiteId(e.rsid),this._adobeAnalyticsData.trackingServer(e.trackingServer),this._adobeAnalyticsData.ssl(Number(e.useSsl)),this._serviceProviderData.ovp(e.ovp),this._serviceProviderData.sdk(e.sdk),this._serviceProviderData.channel(e.channel),this._serviceProviderData.libVersion(e.version),this._serviceProviderData.apiLevel(e.apiLvl),this._activeAssetId=e.videoId,this._serviceProviderData.playerName(e.playerName),this._assetData.videoId(this._activeAssetId),this._assetData.length(e.videoLength),this._assetData.type(f.TYPE_MAIN_CONTENT),this._assetData.publisher(e.publisher),this._assetData.name(e.videoName),this._streamData.type(e.streamType),this._updateQoSInfo(e),t=e.metaNielsen?a.merge(e.metaVideo,e.metaNielsen):e.metaVideo,t=new C(this,p.EVENT_TYPE_START,e.playhead,t,e._eventData[D]),this._sendHit(t))},r.prototype._onApiVideoResume=function(e){var e=e.data;this._logger.debug(A,"#_onApiVideoResume(id="+e.videoId+", name="+e.videoName+", length="+e.videoLength+", type="+e.streamType+", playerName="+e.playerName+")"),this._checkCall("_onApiVideoResume")&&this._inputDataValidator.validateFields(e,["videoId","streamType","videoLength","playhead","playerName"])&&(this._activeAssetId=e.videoId,this._assetData.videoId(this._activeAssetId),this._assetData.length(e.videoLength),this._assetData.type(f.TYPE_MAIN_CONTENT),this._assetData.name(e.videoName),this._streamData.type(e.streamType),e=new C(this,p.EVENT_TYPE_RESUME,e.playhead,null,e._eventData[D]),this._sendHit(e))},r.prototype._onApiVideoComplete=function(e){this._logger.debug(A,"#_onApiVideoComplete()");var e=e.data;this._checkCall("_onApiVideoComplete")&&(e=new C(this,p.EVENT_TYPE_COMPLETE,this._assetData.length(),null,e._eventData[D]),this._sendHit(e),this._isVideoComplete=!0)},r.prototype._onApiPlay=function(e){this._logger.debug(A,"#_onApiPlay()");var e=e.data;this._checkCall("_onApiPlay")&&this._inputDataValidator.validateFields(e,["playhead"])&&(this._updateQoSInfo(e),e=new C(this,p.EVENT_TYPE_PLAY,e.playhead,null,e._eventData[D]),this._sendHit(e))},r.prototype._onApiPause=function(e){this._logger.debug(A,"#_onApiPause()");var t,e=e.data;this._checkCall("_onApiPause")&&this._inputDataValidator.validateFields(e,["playhead"])&&(this._updateQoSInfo(e),t=e.playheadStalled?p.EVENT_TYPE_STALL:p.EVENT_TYPE_PAUSE,t=new C(this,t,e.playhead,null,e._eventData[D]),e._eventData.hasOwnProperty(k)&&(t.filterReport=e._eventData[k]),this._sendHit(t))},r.prototype._onApiBufferStart=function(e){this._logger.debug(A,"#_onApiBufferStart()");var e=e.data;this._checkCall("_onApiBufferStart")&&this._inputDataValidator.validateFields(e,["playhead"])&&(this._updateQoSInfo(e),e=new C(this,p.EVENT_TYPE_BUFFER,e.playhead,null,e._eventData[D]),this._sendHit(e))},r.prototype._onApiSeekStart=function(e){this._logger.debug(A,"#_onApiSeekStart()"),this._checkCall("_onApiSeekStart")&&(this._stashedAdData=this._assetData.adData(),this._stashedChapterData=this._assetData.chapterData(),this._assetData.adData(null),this._assetData.type(f.TYPE_MAIN_CONTENT),this._activeAssetId=this._assetData.videoId(),this._assetData.chapterData(null))},r.prototype._onApiSeekComplete=function(e){this._logger.debug(A,"#_onApiSeekComplete()");e=e.data;if(this._checkCall("_onApiSeekComplete")&&this._inputDataValidator.validateFields(e,["playhead"])){if(e.isInAd){if(!this._inputDataValidator.validateFields(e,["adId","adPosition","podPosition","podPlayerName"]))return;var t,n=i(this._assetData.videoId())+"_"+e.podPosition;this._stashedAdData&&this._stashedAdData.podId()==n&&parseInt(this._stashedAdData.podPosition(),10)==e.adPosition?(this._assetData.adData(this._stashedAdData),this._activeAssetId=this._stashedAdData.adId()):this._assetData.adData()||(this._activeAssetId=e.adId,(t=new g).adId(this._activeAssetId),t.adName(e.adName),t.adLength(e.adLength),t.podId(n),t.resolver(e.podPlayerName),t.podPosition(e.podPosition+""),t.podName(e.podName),t.podOffset(e.podSecond),t.sid(this._generateSessionId()),this._assetData.adData(t)),this._assetData.type(f.TYPE_AD)}else this._assetData.adData(null),this._assetData.type(f.TYPE_MAIN_CONTENT),this._activeAssetId=this._assetData.videoId();if(e.isInChapter){if(!this._inputDataValidator.validateFields(e,["chapterPosition","chapterLength","chapterOffset"]))return;this._stashedChapterData&&e.chapterPosition==this._stashedChapterData.position()?this._assetData.chapterData(this._stashedChapterData):this._assetData.chapterData()||((n=new m).id(i(this._assetData.videoId())+"_"+e.chapterPosition),n.name(e.chapterName),n.length(e.chapterLength),n.position(e.chapterPosition),n.offset(e.chapterOffset),n.sid(this._generateSessionId()),this._assetData.chapterData(n))}else this._assetData.chapterData(null);this._stashedAdData=null,this._stashedChapterData=null}},r.prototype._onApiAdStart=function(e){var t,e=e.data;this._logger.debug(A,"#_onApiAdStart(id="+e.adId+", player_name="+e.podPlayerName+", parent_name="+this._assetData.videoId()+", pod_pos="+e.adPosition+")"),this._checkCall("_onApiAdStart")&&this._inputDataValidator.validateFields(e,["playhead","podPosition","podPlayerName","adId","adPosition"])&&(this._activeAssetId=e.adId,(t=new g).adId(this._activeAssetId),t.adName(e.adName),t.adLength(e.adLength),t.resolver(e.podPlayerName),t.podId(i(this._assetData.videoId())+"_"+e.podPosition),t.podPosition(e.adPosition+""),t.podName(e.podName),t.podOffset(e.podSecond),t.sid(this._generateSessionId()),this._assetData.adData(t),this._assetData.type(f.TYPE_AD),this._updateQoSInfo(e),t=a.merge(e.metaVideo,e.metaAd),t=e.metaNielsen?a.merge(t,e.metaNielsen):t,t=new C(this,p.EVENT_TYPE_START,e.playhead,t,e._eventData[D]),this._sendHit(t))},r.prototype._onApiAdComplete=function(e){this._logger.debug(A,"#_onApiAdComplete()");var e=e.data;this._checkCall("_onApiAdComplete")&&this._inputDataValidator.validateFields(e,["playhead"])&&(this._assetData.type()!=f.TYPE_AD?this._logger.warn(A,"#_onApiAdComplete() > Ignoring the ad complete event, because we are no longer in an ad."):(this._updateQoSInfo(e),e=new C(this,p.EVENT_TYPE_COMPLETE,e.playhead,null,e._eventData[D]),this._sendHit(e),this._assetData.adData(null),this._assetData.type(f.TYPE_MAIN_CONTENT),this._activeAssetId=this._assetData.videoId()))},r.prototype._onApiChapterStart=function(e){var t,e=e.data;this._logger.debug(A,"#_onApiChapterStart(name="+e.chapterName+", length="+e.chapterLength+", position="+e.chapterPosition+", chapter_offset="+e.chapterOffset+")"),this._checkCall("_onApiChapterStart")&&this._inputDataValidator.validateFields(e,["playhead","chapterPosition","chapterOffset","chapterLength"])&&((t=new m).id(i(this._assetData.videoId())+"_"+e.chapterPosition),t.name(e.chapterName),t.length(e.chapterLength),t.position(e.chapterPosition),t.offset(e.chapterOffset),t.sid(this._generateSessionId()),this._assetData.chapterData(t),this._updateQoSInfo(e),t=a.merge(e.metaVideo,e.metaChapter),(t=new C(this,p.EVENT_TYPE_CHAPTER_START,e.playhead,t,e._eventData[D])).assetData.adData(null),t.assetData.type(f.TYPE_MAIN_CONTENT),this._sendHit(t))},r.prototype._onApiChapterComplete=function(e){this._logger.debug(A,"#_onApiChapterComplete()");var e=e.data;this._checkCall("_onApiChapterComplete")&&this._inputDataValidator.validateFields(e,["playhead"])&&(this._assetData.chapterData()?(this._updateQoSInfo(e),(e=new C(this,p.EVENT_TYPE_CHAPTER_COMPLETE,e.playhead,null,e._eventData[D])).assetData.adData(null),e.assetData.type(f.TYPE_MAIN_CONTENT),this._sendHit(e),this._assetData.chapterData(null)):this._logger.warn(A,"#_onApiChapterComplete() > Ignoring the chapter complete event, because we are no longer in a chapter."))},r.prototype._onApiBitrateChange=function(e){this._logger.debug(A,"#_onApiBitrateChange()");var e=e.data;this._checkCall("_onApiBitrateChange")&&this._inputDataValidator.validateFields(e,["playhead"])&&(this._updateQoSInfo(e),e=new C(this,p.EVENT_TYPE_BITRATE_CHANGE,e.playhead,null,e._eventData[D]),this._sendHit(e))},r.prototype._onApiTrackError=function(e){var t,e=e.data;this._logger.debug(A,"#_onApiTrackError(source="+e._eventData.source+", err_id="+e._eventData.error_id+")"),this._isTrackingSessionActive?!this._trackExternalErrors&&e._eventData.source!==P||(this._updateQoSInfo(e),(t=new C(this,p.EVENT_TYPE_ERROR,0,null,e._eventData[D])).eventData.id(e._eventData.error_id),t.eventData.source(e._eventData.source),this._sendHit(t)):this._logger.warn(A,"#_onApiTrackError() > No active tracking session.")},r.prototype._onApiTrackInternalError=function(e){var e=e.data,t=(this._logger.debug(A,"#_onApiTrackInternalError(source="+e.source+", err_id="+e.error_id+")"),this._updateQoSInfo(e),new C(this,p.EVENT_TYPE_ERROR,0));t.eventData.id(e.error_id),t.eventData.source(e.source),this._sendHit(t)},r.prototype._onApiQuantumEnd=function(e){this._logger.debug(A,"#_onApiQuantumEnd(interval="+this._channel.request(E)+")");e=e.data;this._checkCall("_onApiQuantumEnd")&&this._inputDataValidator.validateFields(e,["playhead"])&&(this._lastInBandItem&&(this._lastInBandItem.eventData.playhead(e.playhead),this._updateQoSInfo(e),this._lastInBandItem.qosData.bitrate(this._qosData.bitrate()),this._lastInBandItem.qosData.fps(this._qosData.fps()),this._lastInBandItem.qosData.droppedFrames(this._qosData.droppedFrames()),this._lastInBandItem.qosData.startupTime(this._qosData.startupTime())),this._sendHit(this._lastInBandItem))},r.prototype._onNetworkCheckStatusComplete=function(e){e=e.data;this._trackExternalErrors=e[B],this._reportingInterval=e[R],this._reportingInterval||(this._reportingInterval=M),this._logger.debug(A,"#_onNetworkCheckStatusComplete(track_ext_err="+this._trackExternalErrors+")")},r.prototype._onResetSessionId=function(e){var t=this._generateSessionId();this._sessionData=new s,this._sessionData.sessionId(t),this._logger.debug(A,"#_resetSessionId(new sessionId="+t+")")},r.prototype._installEventListeners=function(){this._channel.on(x,this._onApiAnalyticsStart,this),this._channel.on(V,this._onApiAnalyticsAdStart,this),this._channel.on(U,this._onApiVideoLoad,this),this._channel.on(F,this._onApiVideoUnload,this),this._channel.on(j,this._onApiVideoStart,this),this._channel.on(G,this._onApiVideoComplete,this),this._channel.on(Y,this._onApiVideoResume,this),this._channel.on(H,this._onApiAdStart,this),this._channel.on(q,this._onApiAdComplete,this),this._channel.on(K,this._onApiPlay,this),this._channel.on(W,this._onApiPause,this),this._channel.on(J,this._onApiBufferStart,this),this._channel.on(z,this._onApiSeekStart,this),this._channel.on(X,this._onApiSeekComplete,this),this._channel.on(Q,this._onApiChapterStart,this),this._channel.on($,this._onApiChapterComplete,this),this._channel.on(te,this._onApiBitrateChange,this),this._channel.on(Z,this._onApiTrackError,this),this._channel.on(ee,this._onApiTrackInternalError,this),this._channel.on(ne,this._onApiQuantumEnd,this),this._channel.on(ie,this._onNetworkCheckStatusComplete,this),this._channel.on(I,this._onResetSessionId,this),this._channel.reply(T,function(){return this._sessionData&&this._sessionData.sessionId()?this._sessionData.sessionId():null},this)},r.prototype._uninstallEventListeners=function(){this._channel.off(null,null,this)},r.prototype._resetInternalState=function(){this._logger.debug(A,"#_resetInternalState()"),this._isTrackingSessionActive=!1,this._isVideoComplete=!1,this._autoComputedStartupTime=0,this._streamData=new h,this._qosData=new _,this._sessionData=new s,this._assetData=new f,this._cuserData=null,this._stashedAdData=null,this._stashedChapterData=null,this._lastInBandItem=null},r.prototype._generateSessionId=function(){return""+(new Date).getTime()+Math.floor(1e9*Math.random())},r.prototype._updateQoSInfo=function(e){this._qosData.bitrate(e.bitrate||0),this._qosData.fps(e.fps||0),this._qosData.droppedFrames(e.droppedFrames||0),null==e.startupTime||isNaN(e.startupTime)?(this._qosData.startupTime(this._autoComputedStartupTime),this._qosData.isStartupTimeOverridden=!1):(this._qosData.startupTime(e.startupTime),this._qosData.isStartupTimeOverridden=!0)},r.prototype._checkCall=function(e){return this._isTrackingSessionActive?!this._isVideoComplete||(this._logger.warn(A,"#"+e+"() > The video content already completed."),!1):(this._logger.warn(A,"#"+e+"() > No active tracking session."),!1)},r.prototype._updateLastInBandItem=function(e){var t=(new Date).getTime(),n=1e3*Math.abs(e.eventData.playhead()-this._lastInBandItem.eventData.playhead()),r=Math.abs(t-this._lastInBandItem.eventData.ts());this._lastInBandItem.eventData.type()==p.EVENT_TYPE_PAUSE||this._lastInBandItem.eventData.type()==p.EVENT_TYPE_STALL||(n<=r*L||this._doNotOverrideEventDuration)&&r<=this._reportingInterval*L*1e3?this._lastInBandItem.eventData.duration(t-this._lastInBandItem.eventData.ts()):(this._logger.warn(A,"[WARNING] Resetting duration in lastInBandItem to 0. playheadDelta:"+n+" tsDelta:"+r+" event type:"+this._lastInBandItem.eventData.type()),this._lastInBandItem.eventData.duration(0)),this._doNotOverrideEventDuration&&(this._doNotOverrideEventDuration=!1),this._lastInBandItem.eventData.ts(t),this._lastInBandItem.eventData.playhead(e.eventData.playhead()),this._lastInBandItem.qosData.startupTime(e.qosData.startupTime()),this._lastInBandItem.qosData.isStartupTimeOverridden=e.qosData.isStartupTimeOverridden},r.prototype._sendHit=function(e){function t(e){var e=n._reportFactory.createReportForItem(e),t=(e.qosData.isStartupTimeOverridden||e.qosData.startupTime(n._autoComputedStartupTime),{});t[N]=e,n._channel.trigger(new o(re,t)),e.eventData.type()!=p.EVENT_TYPE_PLAY&&e.eventData.type()!=p.EVENT_TYPE_BUFFER&&e.eventData.type()!=p.EVENT_TYPE_START||((r={})[O]=!0,n._channel.command(S,r))}var n=this,r={};switch(e.eventData.type()){case p.EVENT_TYPE_START:case p.EVENT_TYPE_PLAY:case p.EVENT_TYPE_PAUSE:case p.EVENT_TYPE_STALL:case p.EVENT_TYPE_BUFFER:this._lastInBandItem&&(this._updateLastInBandItem(e),this._lastInBandItem.eventData.type()==p.EVENT_TYPE_START&&this._lastInBandItem.assetData.type()==f.TYPE_MAIN_CONTENT&&(this._autoComputedStartupTime+=this._lastInBandItem.eventData.duration()),e!=this._lastInBandItem)&&t(this._lastInBandItem),t(e),this._lastInBandItem=e,(r={})[O]=!0,this._channel.command(S,r);break;case p.EVENT_TYPE_COMPLETE:this._lastInBandItem&&(e.assetData.type()==f.TYPE_AD&&(this._doNotOverrideEventDuration=!0),this._updateLastInBandItem(e),t(this._lastInBandItem)),t(e),e.assetData.type()==f.TYPE_MAIN_CONTENT?(this._lastInBandItem=null,(r={})[O]=!0,this._channel.command(w,r)):e.assetData.type()==f.TYPE_AD&&(this._lastInBandItem.assetData.adData(null),this._lastInBandItem.assetData.type(f.TYPE_MAIN_CONTENT),this._doNotOverrideEventDuration=!0);break;case p.EVENT_TYPE_CHAPTER_START:case p.EVENT_TYPE_CHAPTER_COMPLETE:this._lastInBandItem&&(this._updateLastInBandItem(e),t(this._lastInBandItem)),t(e),this._lastInBandItem&&(this._lastInBandItem.assetData.chapterData(e.eventData.type()==p.EVENT_TYPE_CHAPTER_START?new m(e.assetData.chapterData()):null),this._lastInBandItem.eventData.duration(0),t(this._lastInBandItem));break;default:t(e)}},"ah::Context"),P="sourceErrorSDK",b="error",S="clock:reporting.resume",w="clock:reporting.pause",E="reporting_interval",T="session_id",I="reset_session_id",D="callback",k="filter_report",N="report",O="reset",B="track_external_errors",R="reporting_interval",x="api:aa_start",V="api:aa_ad_start",U="api:video_load",F="api:video_unload",j="api:video_start",G="api:video_complete",Y="api:video_resume",H="api:ad_start",q="api:ad_complete",K="api:play",W="api:pause",J="api:buffer_start",z="api:seek_start",X="api:seek_complete",Q="api:chapter_start",$="api:chapter_complete",Z="api:track_error",ee="api:track_internal_error",te="api:bitrate_change",ne="api:quantum_end",re="context:report_available",ie="net:check_status_complete",L=1.5,M=10;n.context.Context=r}(e.ADB.core,(e.ADB.va,e.ADB.va.utils),t),function(){"use strict";var n="unknown";t.AdobeHeartbeatPluginConfig=function(e,t){this.trackingServer=e,this.publisher=t,this.ssl=!1,this.ovp=n,this.sdk=n,this.quietMode=!1,this.debugLogging=!1,this.__isPrimetime=!1,this.__psdkVersion=null}}(),function(e){"use strict";function t(){}t.prototype.onError=function(e){},e.AdobeHeartbeatPluginDelegate=t}(t),function(e,t,n){"use strict";function r(e){r.__super__.constructor.call(this,g),this._radio=new c(this._logger),this._channel=this._radio.channel(S),this._delegate=e,this._context=new d(this._channel,this._logger),this._filter=new p(this._channel,this._logger),this._network=new f(this._channel,this._logger),this._setupDataResolver()}var i=e.Event,a=e.Trigger,o=e.plugin.BasePlugin,s=e.plugin.ParamMapping,c=e.radio.Radio,u=t.ErrorInfo,l=t.Version,d=n.context.Context,p=n.filter.ReportFilter,f=n.network.Network,h=n.clock.Clock,_=n.AdobeHeartbeatPluginConfig,g=(e.extend(r,o),r.prototype.configure=function(e){if(!e)throw new Error("Reference to the configuration data cannot be NULL.");if(!(e instanceof _))throw new Error("Expected config data to be instance of AdobeHeartbeatPluginConfig.");this._config=e,this._config.debugLogging?this._logger.enable():this._logger.disable(),this._logger.debug(this._logTag,"#configure({trackingServer="+this._config.trackingServer+", publisher="+this._config.publisher+", quietMode="+this._config.quietMode+", ssl="+this._config.ssl+"})");var e=this._config.trackingServer+"/settings/",t={};t[te]=this._config.trackingServer,t[ne]=e,t[re]=this._config.publisher,t[ie]=this._config.quietMode,t[ae]=this._config.ssl,this._channel.trigger(new i(ue,t)),this._isConfigured=!0},r.prototype.bootstrap=function(e){r.__super__.bootstrap.call(this,e),this._channel.on(w,this._onError,this),this._clock=new h(this._pluginManager,this._channel,this._logger),this._channel.command(Ie),this._channel.trigger(new i(Me)),this._registerCommands(),this._registerBehaviours()},r.prototype._teardown=function(){this._logger.debug(this._logTag,"#_teardown()"),this._radio.shutdown(),this._context.destroy(),this._clock.destroy(),this._filter.destroy(),this._network.destroy()},r.prototype._canProcess=function(){return this._isConfigured?this._errorInfo?(this._logger.error(this._logTag,"_canProcess() > Plugin in ERROR state."),!1):r.__super__._canProcess.call(this):(this._logger.error(this._logTag,"_canProcess() > Plugin not configured."),!1)},r.prototype._cmdAnalyticsError=function(e){this._errorInfo||(this._errorInfo=new u("Internal error","AdobeAnalyticsPlugin is in ERROR state."),this._trigger(w,this._errorInfo),this._delegate&&this._delegate.onError(this._errorInfo))},r.prototype._cmdAnalyticsStart=function(e){var t;this._canProcess()&&((t={})[oe]=e.visitorOptedOut,this._channel.trigger(new i(le,t)),this._channel.trigger(new i(se,e)))},r.prototype._cmdAnalyticsAdStart=function(e){this._canProcess()&&this._channel.trigger(new i(ce,e))},r.prototype._cmdVideoLoad=function(e){this._errorInfo=null,this._canProcess()&&(this._isTrackingSessionActive&&this._channel.trigger(new i(L,e)),this._isTrackingSessionActive=!1,this._isPaused=!0,this._isSeeking=!1,this._isBuffering=!1,this._isVideoIdle=!1,this._filter.clear(),this._channel.trigger(new i(de,e)),this._isTrackingSessionActive=!0)},r.prototype._cmdVideoUnload=function(e){this._errorInfo=null,this._canProcess()&&(this._channel.trigger(new i(L,e)),this._filter.flush(),this._runReportingTimer(!1),this._runFlushFilterTimer(!1),this._runIdleTimer(!1),this._isTrackingSessionActive=!1)},r.prototype._cmdVideoStart=function(e){this._canProcess()&&this._channel.trigger(new i(pe,e))},r.prototype._cmdVideoComplete=function(e){this._canProcess()&&this._channel.trigger(new i(fe,e))},r.prototype._cmdVideoResume=function(e){this._canProcess()&&this._channel.trigger(new i(he,e))},r.prototype._cmdPlay=function(e){this._canProcess()&&(this._isPaused=!1,this._resumePlaybackIfPossible(e))},r.prototype._cmdPause=function(e){this._canProcess()&&(this._channel.trigger(new i(M,e)),this._isPaused=!0,this._runIdleTimer(!0))},r.prototype._cmdAdStart=function(e){this._canProcess()&&(this._channel.trigger(new i(_e,e)),this._resumePlaybackIfPossible(e))},r.prototype._cmdAdComplete=function(e){this._canProcess()&&(this._channel.trigger(new i(ge,e)),e.isInAdBreak||this._resumePlaybackIfPossible(e))},r.prototype._cmdBufferStart=function(e){this._canProcess()&&(this._channel.trigger(new i(Ce,e)),this._isBuffering=!0,this._runIdleTimer(!0))},r.prototype._cmdBufferComplete=function(e){this._canProcess()&&(this._isBuffering=!1,this._resumePlaybackIfPossible(e))},r.prototype._cmdSeekStart=function(e){this._canProcess()&&(this._channel.trigger(new i(ve,e)),this._channel.trigger(new i(M,e)),this._isSeeking=!0,this._runIdleTimer(!0))},r.prototype._cmdSeekComplete=function(e){this._canProcess()&&(this._channel.trigger(new i(ye,e)),this._isSeeking=!1,this._resumePlaybackIfPossible(e))},r.prototype._cmdChapterStart=function(e){this._canProcess()&&this._channel.trigger(new i(Ae,e))},r.prototype._cmdChapterComplete=function(e){this._canProcess()&&this._channel.trigger(new i(Pe,e))},r.prototype._cmdBitrateChange=function(e){this._canProcess()&&this._channel.trigger(new i(we,e))},r.prototype._cmdTrackError=function(e){this._canProcess()&&this._channel.trigger(new i(be,e))},r.prototype._cmdClockReportingTick=function(e){this._canProcess()&&this._channel.trigger(new i(Ee,e))},r.prototype._cmdIdleTick=function(e){this._canProcess()&&(this._isVideoIdle=!0,this._trigger(O),this._filter.flush(),this._runReportingTimer(!1),this._runFlushFilterTimer(!1),this._runIdleTimer(!1),this._trigger(z))},r.prototype._onError=function(e){this._errorInfo=e.data;e={};e[Z]=Te,e[ee]=this._errorInfo.getMessage()+"|"+this._errorInfo.getDetails(),this._channel.trigger(new i(Se,e)),this._runReportingTimer(!1),this._trigger(w,this._errorInfo),this._delegate&&this._delegate.onError(this._errorInfo)},r.prototype._runIdleTimer=function(e){var t={};t[B]=!0,e?this._channel.command(Be,t):this._channel.command(Le,t)},r.prototype._runFlushFilterTimer=function(e){var t={};t[B]=!0,e?this._channel.command(Ne,t):this._channel.command(Oe,t)},r.prototype._runReportingTimer=function(e){var t={};t[B]=!0,e?this._channel.command(De,t):this._channel.command(ke,t)},r.prototype._registerCommands=function(){this._pluginManager.comply(this,"handleAnalyticsError",this._cmdAnalyticsError),this._pluginManager.comply(this,"handleAnalyticsStart",this._cmdAnalyticsStart),this._pluginManager.comply(this,"handleAnalyticsAdStart",this._cmdAnalyticsAdStart),this._pluginManager.comply(this,"handleVideoLoad",this._cmdVideoLoad),this._pluginManager.comply(this,"handleVideoUnload",this._cmdVideoUnload),this._pluginManager.comply(this,"handleVideoStart",this._cmdVideoStart),this._pluginManager.comply(this,"handleVideoComplete",this._cmdVideoComplete),this._pluginManager.comply(this,"handleVideoResume",this._cmdVideoResume),this._pluginManager.comply(this,"handlePlay",this._cmdPlay),this._pluginManager.comply(this,"handlePause",this._cmdPause),this._pluginManager.comply(this,"handleAdStart",this._cmdAdStart),this._pluginManager.comply(this,"handleAdComplete",this._cmdAdComplete),this._pluginManager.comply(this,"handleBufferStart",this._cmdBufferStart),this._pluginManager.comply(this,"handleBufferComplete",this._cmdBufferComplete),this._pluginManager.comply(this,"handleSeekStart",this._cmdSeekStart),this._pluginManager.comply(this,"handleSeekComplete",this._cmdSeekComplete),this._pluginManager.comply(this,"handleChapterStart",this._cmdChapterStart),this._pluginManager.comply(this,"handleChapterComplete",this._cmdChapterComplete),this._pluginManager.comply(this,"handleBitrateChange",this._cmdBitrateChange),this._pluginManager.comply(this,"handleTrackError",this._cmdTrackError),this._pluginManager.comply(this,"handleClockReportingTick",this._cmdClockReportingTick),this._pluginManager.comply(this,"handleIdleTick",this._cmdIdleTick)},r.prototype._registerBehaviours=function(){this._pluginManager.registerBehaviour(new a(v,I),this,"handleVideoLoad",[new s(C,"rsid","rsid"),new s(C,"tracking_server","trackingServer")]),this._pluginManager.registerBehaviour(new a(v,D),this,"handleVideoUnload"),this._pluginManager.registerBehaviour(new a(v,k),this,"handleVideoStart",[new s(v,"video.id","videoId"),new s(v,"video.name","videoName"),new s(v,"video.length","videoLength"),new s(v,"video.playhead","playhead"),new s(v,"video.playerName","playerName"),new s(v,"video.streamType","streamType"),new s(v,"qos.fps","fps"),new s(v,"qos.droppedFrames","droppedFrames"),new s(v,"qos.bitrate","bitrate"),new s(v,"qos.startupTime","startupTime"),new s(C,"rsid","rsid"),new s(C,"tracking_server","trackingServer"),new s(C,"channel","channel"),new s(C,"meta.video.*","metaVideo"),new s(C,"ssl","useSsl"),new s(y,"meta","metaNielsen"),new s(m,"publisher","publisher"),new s(m,"sdk","sdk"),new s(m,"ovp","ovp"),new s(m,"version","version"),new s(m,"api_level","apiLvl")]),this._pluginManager.registerBehaviour(new a(v,R),this,"handleVideoComplete",[new s(v,"qos.fps","fps"),new s(v,"qos.droppedFrames","droppedFrames"),new s(v,"qos.bitrate","bitrate"),new s(v,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(v,N),this,"handleVideoResume",[new s(v,"video.id","videoId"),new s(v,"video.name","videoName"),new s(v,"video.length","videoLength"),new s(v,"video.playhead","playhead"),new s(v,"video.playerName","playerName"),new s(v,"video.streamType","streamType")]),this._pluginManager.registerBehaviour(new a(v,x),this,"handlePlay",[new s(v,"video.playhead","playhead"),new s(v,"qos.fps","fps"),new s(v,"qos.droppedFrames","droppedFrames"),new s(v,"qos.bitrate","bitrate"),new s(v,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(v,V),this,"handlePause",[new s(v,"video.playhead","playhead"),new s(v,"video.playheadStalled","playheadStalled"),new s(v,"qos.fps","fps"),new s(v,"qos.droppedFrames","droppedFrames"),new s(v,"qos.bitrate","bitrate"),new s(v,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(v,U),this,"handleAdStart",[new s(v,"video.playhead","playhead"),new s(v,"ad.id","adId"),new s(v,"ad.name","adName"),new s(v,"ad.length","adLength"),new s(v,"ad.position","adPosition"),new s(v,"pod.name","podName"),new s(v,"pod.playerName","podPlayerName"),new s(v,"pod.position","podPosition"),new s(v,"pod.startTime","podSecond"),new s(v,"qos.fps","fps"),new s(v,"qos.droppedFrames","droppedFrames"),new s(v,"qos.bitrate","bitrate"),new s(v,"qos.startupTime","startupTime"),new s(C,"meta.video.*","metaVideo"),new s(C,"meta.ad.*","metaAd"),new s(y,"meta","metaNielsen")]),this._pluginManager.registerBehaviour(new a(v,F),this,"handleAdComplete",[new s(v,"video.playhead","playhead"),new s(v,"ad.isInAdBreak","isInAdBreak"),new s(v,"qos.fps","fps"),new s(v,"qos.droppedFrames","droppedFrames"),new s(v,"qos.bitrate","bitrate"),new s(v,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(v,j),this,"handleBufferStart",[new s(v,"video.playhead","playhead"),new s(v,"qos.fps","fps"),new s(v,"qos.droppedFrames","droppedFrames"),new s(v,"qos.bitrate","bitrate"),new s(v,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(v,G),this,"handleBufferComplete",[new s(v,"video.playhead","playhead"),new s(v,"qos.fps","fps"),new s(v,"qos.droppedFrames","droppedFrames"),new s(v,"qos.bitrate","bitrate"),new s(v,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(v,Y),this,"handleSeekStart",[new s(v,"video.playhead","playhead")]),this._pluginManager.registerBehaviour(new a(v,H),this,"handleSeekComplete",[new s(v,"video.playhead","playhead"),new s(v,"ad.isInAd","isInAd"),new s(v,"ad.id","adId"),new s(v,"ad.position","adPosition"),new s(v,"pod.playerName","podPlayerName"),new s(v,"pod.position","podPosition"),new s(v,"chapter.isInChapter","isInChapter"),new s(v,"chapter.position","chapterPosition"),new s(v,"chapter.name","chapterName"),new s(v,"chapter.length","chapterLength"),new s(v,"chapter.startTime","chapterOffset"),new s(v,"qos.fps","fps"),new s(v,"qos.droppedFrames","droppedFrames"),new s(v,"qos.bitrate","bitrate"),new s(v,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(v,q),this,"handleChapterStart",[new s(v,"video.playhead","playhead"),new s(v,"chapter.position","chapterPosition"),new s(v,"chapter.name","chapterName"),new s(v,"chapter.length","chapterLength"),new s(v,"chapter.startTime","chapterOffset"),new s(v,"qos.fps","fps"),new s(v,"qos.droppedFrames","droppedFrames"),new s(v,"qos.bitrate","bitrate"),new s(v,"qos.startupTime","startupTime"),new s(C,"meta.video.*","metaVideo"),new s(C,"meta.chapter.*","metaChapter"),new s(y,"meta","metaNielsen")]),this._pluginManager.registerBehaviour(new a(v,K),this,"handleChapterComplete",[new s(v,"video.playhead","playhead"),new s(v,"qos.fps","fps"),new s(v,"qos.droppedFrames","droppedFrames"),new s(v,"qos.bitrate","bitrate"),new s(v,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(v,W),this,"handleBitrateChange",[new s(v,"video.playhead","playhead"),new s(v,"qos.fps","fps"),new s(v,"qos.droppedFrames","droppedFrames"),new s(v,"qos.bitrate","bitrate"),new s(v,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(v,J),this,"handleTrackError"),this._pluginManager.registerBehaviour(new a(A,Q),this,"handleClockReportingTick",[new s(v,"video.playhead","playhead"),new s(v,"qos.fps","fps"),new s(v,"qos.droppedFrames","droppedFrames"),new s(v,"qos.bitrate","bitrate"),new s(v,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(A,$),this,"handleIdleTick",[]),this._pluginManager.registerBehaviour(new a(m,O),this,"handleClockReportingTick",[new s(v,"video.playhead","playhead"),new s(v,"qos.fps","fps"),new s(v,"qos.droppedFrames","droppedFrames"),new s(v,"qos.bitrate","bitrate"),new s(v,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(C,w),this,"handleAnalyticsError"),this._pluginManager.registerBehaviour(new a(C,E),this,"handleAnalyticsStart",[new s(C,"vid","vid"),new s(C,"aid","aid"),new s(C,"mid","mid"),new s(C,"customerIDs","customerIDs"),new s(C,"visitorOptedOut","visitorOptedOut"),new s(C,"blob","blob"),new s(C,"loc_hint","loc_hint"),new s(v,"video.playhead","playhead"),new s(v,"qos.fps","fps"),new s(v,"qos.droppedFrames","droppedFrames"),new s(v,"qos.bitrate","bitrate"),new s(v,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new a(C,T),this,"handleAnalyticsAdStart",[new s(v,"video.playhead","playhead"),new s(v,"qos.fps","fps"),new s(v,"qos.droppedFrames","droppedFrames"),new s(v,"qos.bitrate","bitrate"),new s(v,"qos.startupTime","startupTime")])},r.prototype._setupDataResolver=function(){var i={},e=this;i.version=function(){return l.getVersion()},i.api_level=function(){return l.getApiLevel()},i.tracking_server=function(){return e._config?e._config.trackingServer:null},i.publisher=function(){return e._config?e._config.publisher:null},i.quiet_mode=function(){return!!e._config&&e._config.quietMode},i.ovp=function(){return e._config?e._config.ovp:null},i.sdk=function(){return e._config?e._config.sdk:null},i.is_primetime=function(){return!!e._config&&e._config.__isPrimetime},i.psdk_version=function(){return e._config?e._config.__psdkVersion:null},i.session_id=function(){return e._channel.request(P)},this._dataResolver=function(e){if(!e||0==e.length)return null;for(var t=null,n=0;n<e.length;n++){var r=e[n];(t=t||{})[r]=i.hasOwnProperty(r)?i[r].call(this):null}return t}},r.prototype._resumePlaybackIfPossible=function(e){this._errorInfo||this._isPaused||this._isSeeking||this._isBuffering||(this._isVideoIdle&&(this._isVideoIdle=!1,this._resumePlaybackFromIdle()),this._runIdleTimer(!1),this._channel.trigger(new i(me,e)))},r.prototype._resumePlaybackFromIdle=function(){this._trigger(O),this._filter.clear(),this._channel.trigger(new i(b)),this._trigger(X),this._runReportingTimer(!0),this._runFlushFilterTimer(!0)},"adobe-heartbeat"),m=g,C="adobe-analytics",v="player",y="nielsen",A="service.clock",P="session_id",b="reset_session_id",S="heartbeat-channel",w="error",E="aa_start",T="sc_ad_start",I="video_load",D="video_unload",k="video_start",N="video_resume",R="video_complete",x="play",V="pause",U="ad_start",F="ad_complete",j="buffer_start",G="buffer_complete",Y="seek_start",H="seek_complete",q="chapter_start",K="chapter_complete",W="bitrate_change",J="track_error",z="video_idle_start",X="video_idle_resume",O="quantum_close",Q="heartbeat.reporting.tick",$="heartbeat.idle.tick",B="reset",Z="source",ee="error_id",te="tracking_server",ne="check_status_server",re="publisher",ie="quiet_mode",ae="ssl",oe="visitor_opt_out",se="api:aa_start",ce="api:aa_ad_start",ue="api:config",le="api:update_visitor_optout",de="api:video_load",L="api:video_unload",pe="api:video_start",fe="api:video_complete",he="api:video_resume",_e="api:ad_start",ge="api:ad_complete",me="api:play",M="api:pause",Ce="api:buffer_start",ve="api:seek_start",ye="api:seek_complete",Ae="api:chapter_start",Pe="api:chapter_complete",be="api:track_error",Se="api:track_internal_error",we="api:bitrate_change",Ee="api:quantum_end",Te="sourceErrorHeartbeat",Ie="clock:check_status.resume",De="clock:reporting.resume",ke="clock:reporting.pause",Ne="clock:flush_filter.resume",Oe="clock:flush_filter.pause",Be="clock:idle.resume",Le="clock:idle.pause",Me="clock:check_status.get_settings";n.AdobeHeartbeatPlugin=r}(e.ADB.core,e.ADB.va,t),e.ADB.va.plugins.ah||(e.ADB.va.plugins.ah=t)}(this),function(e){var t;void 0===t&&(t={}),function(e,t){"use strict";function n(e,t){this._onFail={fn:e,ctx:t}}var r=e.ErrorInfo;n.prototype.validateFields=function(e,t){if(!e)return this._fail("Data cannot be null");if(t)for(var n=0;n<t.length;n++){var r=t[n];switch(r){case"videoId":if(!e.hasOwnProperty("videoId"))return this._fail("The ID for the main video must be specified.");if("string"!=typeof e.videoId)return this._fail("The ID for the main video must be a String.");if(""===e.videoId)return this._fail("The ID for the main video cannot be an empty string.");break;case"streamType":if(!e.hasOwnProperty("streamType"))return this._fail("The stream type for the main video must be specified.");if("string"!=typeof e.streamType)return this._fail("The stream type for the main video must be a String.");if(""===e.streamType)return this._fail("The stream type for the main video cannot be an empty string.");break;case"playerName":if(!e.hasOwnProperty("playerName"))return this._fail("The player name for the main video must be specified.");if("string"!=typeof e.playerName)return this._fail("The player name for the main video must be a String.");if(""===e.playerName)return this._fail("The player name for the main video cannot be an empty string.");break;case"videoLength":if(!e.hasOwnProperty("videoLength"))return this._fail("The length of the main video must be specified.");if("number"!=typeof e.videoLength)return this._fail("The length of the main video must be a Number.");if(isNaN(e.videoLength))return this._fail("The length of the main video cannot be NaN.");break;case"podPlayerName":if(!e.hasOwnProperty("podPlayerName"))return this._fail("The player name for the ad-break must be specified.");if("string"!=typeof e.podPlayerName)return this._fail("The player name for the ad-break must be a String.");if(""===e.podPlayerName)return this._fail("The player name for the ad-break cannot be an empty string.");break;case"podPosition":if(!e.hasOwnProperty("podPosition"))return this._fail("Position (index) of the ad-break must be specified.");if("number"!=typeof e.podPosition)return this._fail("Position (index) of the ad-break must be a Number.");if(isNaN(e.podPosition))return this._fail("Position (index) of the ad-break cannot be NaN.");break;case"adId":if(!e.hasOwnProperty("adId"))return this._fail("The ad ID must be specified.");if("string"!=typeof e.adId)return this._fail("The ad ID must be a String.");if(""===e.adId)return this._fail("The ad ID cannot be an empty string.");break;case"adPosition":if(!e.hasOwnProperty("adPosition"))return this._fail("Position (index) of the ad must be specified.");if("number"!=typeof e.adPosition)return this._fail("Position (index) of the ad must be a Number.");if(isNaN(e.adPosition))return this._fail("Position (index) of the ad cannot be NaN.");break;case"adLength":if(!e.hasOwnProperty("adLength"))return this._fail("The length of the ad must be specified.");if("number"!=typeof e.adLength)return this._fail("The length of the ad must be a Number.");if(isNaN(e.adLength))return this._fail("The length of the ad cannot be NaN.");break;default:return this._fail("Unable to validate unknown parameter: "+r)}}return!0},n.prototype._fail=function(e){e=new r("Invalid input data",e);return this._onFail.fn&&this._onFail.fn.call(this._onFail.ctx,e),!1},t.InputDataValidator=n}(e.ADB.va,t),function(){"use strict";t.AdobeAnalyticsPluginConfig=function(){this.channel="",this.debugLogging=!1}}(),function(e){"use strict";function t(){}t.prototype.onError=function(e){},e.AdobeAnalyticsPluginDelegate=t}(t),function(e,t,n,r){"use strict";function i(e,t){if(i.__super__.constructor.call(this,m),!e)throw new Error("The reference to the AppMeasurement object cannot be NULL.");this._appMeasurement=e,this._delegate=t,this._customMetaKeys=[],this._videoMetadata={},this._adMetadata={},this._chapterMetadata={},this._errorInfo=null,this._workQueue=new l(!0,P),this._inputDataValidator=new g(function(e){this._errorInfo=e,this._logger.error(this._logTag,e.getMessage()+" | "+e.getDetails());var t=this;setTimeout(function(){t._trigger(b,e),t._delegate&&t._delegate.onError(t._errorInfo)},0)},this),this._appMeasurement.isReadyToTrack(),this._setupDataResolver()}var a=e.Trigger,o=e.plugin.BasePlugin,s=e.plugin.ParamMapping,c=e.radio.Channel,u=e.radio.Command,l=e.radio.CommandQueue,d=t.ErrorInfo,p=n.md5,f=n.StringUtils,h=n.ObjectUtils,_=r.AdobeAnalyticsPluginConfig,g=r.InputDataValidator,m=(e.extend(i,o),i.prototype.configure=function(e){if(!e)throw new Error("Reference to the configuration data cannot be NULL.");if(!(e instanceof _))throw new Error("Expected config data to be instance of AdobeAnalyticsPluginConfig.");this._config=e,this._config.debugLogging?this._logger.enable():this._logger.disable(),this._logger.debug(this._logTag,"#configure({trackingServer="+this._config.debugLogging+", channel="+this._config.channel+", ssl="+this._appMeasurement.ssl+"})")},i.prototype.bootstrap=function(e){i.__super__.bootstrap.call(this,e),this._registerCommands(),this._registerBehaviours()},i.prototype.setup=function(){this._appMeasurement.isReadyToTrack()?this._onAppMeasurementReady():this._appMeasurement.callbackWhenReadyToTrack(this,this._onAppMeasurementReady,[]),i.__super__.setup.call(this)},i.prototype.setVideoMetadata=function(e){this._videoMetadata=h.clone(e)},i.prototype.setAdMetadata=function(e){this._adMetadata=h.clone(e)},i.prototype.setChapterMetadata=function(e){this._chapterMetadata=h.clone(e)},i.prototype._canProcess=function(){return this._errorInfo?(this._logger.error(this._logTag,"#_canProcess() > In ERROR state."),!1):i.__super__._canProcess.call(this)},i.prototype._cmdVideoLoad=function(e){this._errorInfo=null},i.prototype._cmdVideoStart=function(e){this._logger.debug(this._logTag,"#_cmdVideoStart()"),this._canProcess()&&this._workQueue.addCommand(new u(this._executeOpen,this,[e]))},i.prototype._cmdAdStart=function(e){this._logger.debug(this._logTag,"#_cmdAdStart()"),this._canProcess()&&this._workQueue.addCommand(new u(this._executeOpenAd,this,[e]))},i.prototype._cmdHeartbeatPluginError=function(e){this._errorInfo||(this._errorInfo=new d("Internal error","HeartbeatPlugin is in ERROR state."),this._trigger(b,this._errorInfo),this._delegate&&this._delegate.onError(this._errorInfo))},i.prototype._resetAppMeasurementContextData=function(){delete this._appMeasurement.contextData["a.contentType"],delete this._appMeasurement.contextData["a.media.name"],delete this._appMeasurement.contextData["a.media.friendlyName"],delete this._appMeasurement.contextData["a.media.length"],delete this._appMeasurement.contextData["a.media.playerName"],delete this._appMeasurement.contextData["a.media.channel"],delete this._appMeasurement.contextData["a.media.view"],delete this._appMeasurement.contextData["a.media.ad.name"],delete this._appMeasurement.contextData["a.media.ad.friendlyName"],delete this._appMeasurement.contextData["a.media.ad.podFriendlyName"],delete this._appMeasurement.contextData["a.media.ad.length"],delete this._appMeasurement.contextData["a.media.ad.playerName"],delete this._appMeasurement.contextData["a.media.ad.pod"],delete this._appMeasurement.contextData["a.media.ad.podPosition"],delete this._appMeasurement.contextData["a.media.ad.podSecond"],delete this._appMeasurement.contextData["a.media.ad.view"];for(var e=0;e<this._customMetaKeys.length;e++){var t=this._customMetaKeys[e];delete this._appMeasurement.contextData[t]}this._customMetaKeys=[]},i.prototype._executeOpen=function(e){if(this._logger.debug(this._logTag,"#_executeOpen(id="+e.videoId+", videoName="+e.videoName+", streamType="+e.streamType+", length="+e.videoLength+", playerName="+e.playerName+", channel="+e.channel+", isPrimetime="+e.isPrimetime+", sessionId="+e.sessionId+")"),this._canProcess()&&this._inputDataValidator.validateFields(e,["videoId","streamType","videoLength","playerName"])){for(var t in this._resetAppMeasurementContextData(),e.metaVideo)e.metaVideo.hasOwnProperty(t)&&(this._appMeasurement.contextData[t]=e.metaVideo[t],this._customMetaKeys.push(t));if(e.metaNielsen)for(var t in e.metaNielsen)e.metaNielsen.hasOwnProperty(t)&&(this._appMeasurement.contextData[t]=e.metaNielsen[t],this._customMetaKeys.push(t));this._appMeasurement.contextData["a.contentType"]=e.streamType,this._appMeasurement.contextData["a.media.name"]=e.videoId,this._appMeasurement.contextData["a.media.friendlyName"]=e.videoName||"",this._appMeasurement.contextData["a.media.length"]=Math.floor(e.videoLength)||"0.0",this._appMeasurement.contextData["a.media.playerName"]=e.playerName,this._appMeasurement.contextData["a.media.channel"]=e.channel||"",this._appMeasurement.contextData["a.media.view"]=!0,this._appMeasurement.contextData["a.media.vsid"]=e.sessionId,this._appMeasurement.pev3=S,this._appMeasurement.pe=e.isPrimetime?T:E,this._appMeasurement.track();var n=this;setTimeout(function(){n._trigger(k,e)},0)}},i.prototype._executeOpenAd=function(e){var t=p(e.videoId)+"_"+e.podPosition;if(this._logger.debug(this._logTag,"#_executeOpenAd(id="+e.adId+", streamType="+e.streamType+", length="+e.adLength+", podPlayerName="+e.podPlayerName+", parentId="+e.videoId+", podId="+t+", parentPodPosition="+e.adPosition+", podSecond="+e.podSecond+")"),this._canProcess()&&this._inputDataValidator.validateFields(e,["videoId","streamType","playerName","adId","adLength","podPlayerName","adPosition"])){for(n in e.podSecond=null==e.podSecond||isNaN(e.podSecond)?e.playhead:e.podSecond,this._resetAppMeasurementContextData(),e.metaVideo)e.metaVideo.hasOwnProperty(n)&&(this._appMeasurement.contextData[n]=e.metaVideo[n],this._customMetaKeys.push(n));for(n in e.metaAd)e.metaAd.hasOwnProperty(n)&&(this._appMeasurement.contextData[n]=e.metaAd[n],this._customMetaKeys.push(n));if(e.metaNielsen)for(var n in e.metaNielsen)e.metaNielsen.hasOwnProperty(n)&&(this._appMeasurement.contextData[n]=e.metaNielsen[n],this._customMetaKeys.push(n));this._appMeasurement.contextData["a.contentType"]=e.streamType,this._appMeasurement.contextData["a.media.name"]=e.videoId,this._appMeasurement.contextData["a.media.playerName"]=e.playerName,this._appMeasurement.contextData["a.media.channel"]=e.channel||"",this._appMeasurement.contextData["a.media.vsid"]=e.sessionId,this._appMeasurement.contextData["a.media.friendlyName"]=e.videoName||"",this._appMeasurement.contextData["a.media.length"]=Math.floor(e.videoLength)||"0.0",this._appMeasurement.contextData["a.media.ad.name"]=e.adId,this._appMeasurement.contextData["a.media.ad.friendlyName"]=e.adName||"",this._appMeasurement.contextData["a.media.ad.podFriendlyName"]=e.podName||"",this._appMeasurement.contextData["a.media.ad.length"]=Math.floor(e.adLength)||"0.0",this._appMeasurement.contextData["a.media.ad.playerName"]=e.podPlayerName,this._appMeasurement.contextData["a.media.ad.pod"]=t,this._appMeasurement.contextData["a.media.ad.podPosition"]=Math.floor(e.adPosition)||"0.0",this._appMeasurement.contextData["a.media.ad.podSecond"]=Math.floor(e.podSecond)||"0.0",this._appMeasurement.contextData["a.media.ad.view"]=!0,this._appMeasurement.pev3=w,this._appMeasurement.pe=e.isPrimetime?D:I,this._appMeasurement.track();var r=this;setTimeout(function(){r._trigger(N,e)},0)}},i.prototype._setupDataResolver=function(){var i={},a=this;i.rsid=function(){return a._appMeasurement.account},i.tracking_server=function(){return a._appMeasurement.ssl&&a._appMeasurement.trackingServerSecure?a._appMeasurement.trackingServerSecure:a._appMeasurement.trackingServer},i.ssl=function(){return a._appMeasurement.ssl},i.vid=function(){return a._appMeasurement.visitorID},i.aid=function(){return a._appMeasurement.analyticsVisitorID},i.mid=function(){return a._appMeasurement.marketingCloudVisitorID},i.blob=function(){return a._appMeasurement.audienceManagerBlob},i.loc_hint=function(){return a._appMeasurement.audienceManagerLocationHint?parseInt(a._appMeasurement.audienceManagerLocationHint):""},i.customerIDs=function(){var e,t=a._appMeasurement.visitor.getCustomerIDs(),n={};for(e in t)if(t.hasOwnProperty(e)){var r=t[e];if("object"==typeof r){for(var i in r)r.hasOwnProperty(i)&&("authState"==i?n[e+".as"]=r[i]:n[e+"."+i]=r[i]);n[e+".as"]||(n[e+".as"]="0")}}return n},i.channel=function(){return a._config?a._config.channel:null},i.meta=function(e){var t=e.split(".");if(t.length<2)return null;var n=t.shift();switch(e=t.join("."),n){case"video":return e==c.WILDCARD?a._videoMetadata:a._videoMetadata[e];case"ad":return e==c.WILDCARD?a._adMetadata:a._adMetadata[e];case"chapter":return e==c.WILDCARD?a._chapterMetadata:a._chapterMetadata[e];default:return null}},i.visitorOptedOut=function(){return null!=a._appMeasurement.visitorOptedOut&&a._appMeasurement.visitorOptedOut},this._dataResolver=function(e){if(!e||0==e.length)return null;for(var t=null,n=0;n<e.length;n++){var r=e[n],t=t||{};f.startsWith(r,"meta.")?t[r]=i.meta(r.split("meta.")[1]):t[r]=i.hasOwnProperty(r)?i[r].call(this):null}return t}},i.prototype._registerCommands=function(){this._pluginManager.comply(this,"handleVideoLoad",this._cmdVideoLoad),this._pluginManager.comply(this,"handleVideoStart",this._cmdVideoStart),this._pluginManager.comply(this,"handleAdStart",this._cmdAdStart),this._pluginManager.comply(this,"handleHeartbeatPluginError",this._cmdHeartbeatPluginError)},i.prototype._registerBehaviours=function(){this._pluginManager.registerBehaviour(new a(y,O),this,"handleVideoLoad"),this._pluginManager.registerBehaviour(new a(y,B),this,"handleVideoStart",[new s(y,"video.id","videoId"),new s(y,"video.streamType","streamType"),new s(y,"video.name","videoName"),new s(y,"video.length","videoLength"),new s(y,"video.playerName","playerName"),new s(y,"video.streamType","streamType"),new s(A,"is_primetime","isPrimetime"),new s(A,"session_id","sessionId"),new s(C,"channel","channel"),new s(C,"meta.video.*","metaVideo"),new s(v,"meta","metaNielsen")]),this._pluginManager.registerBehaviour(new a(y,L),this,"handleAdStart",[new s(y,"video.id","videoId"),new s(y,"video.streamType","streamType"),new s(y,"video.playhead","playhead"),new s(y,"video.playerName","playerName"),new s(y,"video.name","videoName"),new s(y,"video.length","videoLength"),new s(y,"ad.id","adId"),new s(y,"ad.length","adLength"),new s(y,"ad.position","adPosition"),new s(y,"ad.name","adName"),new s(y,"pod.name","podName"),new s(y,"pod.position","podPosition"),new s(y,"pod.playerName","podPlayerName"),new s(y,"pod.startTime","podSecond"),new s(A,"is_primetime","isPrimetime"),new s(A,"session_id","sessionId"),new s(C,"channel","channel"),new s(C,"meta.video.*","metaVideo"),new s(C,"meta.ad.*","metaAd"),new s(v,"meta","metaNielsen")]),this._pluginManager.registerBehaviour(new a(A,b),this,"handleHeartbeatPluginError")},i.prototype._onAppMeasurementReady=function(){this._workQueue.resume()},"adobe-analytics"),C=m,v="nielsen",y="player",A="adobe-heartbeat",P=2e3,b="error",S="video",w="videoAd",E="ms_s",T="msp_s",I="msa_s",D="mspa_s",k="aa_start",N="sc_ad_start",O="video_load",B="video_start",L="ad_start";r.AdobeAnalyticsPlugin=i}(e.ADB.core,e.ADB.va,e.ADB.va.utils,t),function(e){"use strict";e.VideoMetadataKeys={SHOW:"a.media.show",SEASON:"a.media.season",EPISODE:"a.media.episode",ASSET_ID:"a.media.asset",GENRE:"a.media.genre",FIRST_AIR_DATE:"a.media.airDate",FIRST_DIGITAL_DATE:"a.media.digitalDate",RATING:"a.media.rating",ORIGINATOR:"a.media.originator",NETWORK:"a.media.network",SHOW_TYPE:"a.media.type",AD_LOAD:"a.media.adLoad",MVPD:"a.media.pass.mvpd",AUTHORIZED:"a.media.pass.auth",DAY_PART:"a.media.dayPart",FEED:"a.media.feed",STREAM_FORMAT:"a.media.format"},e.AdMetadataKeys={ADVERTISER:"a.media.ad.advertiser",CAMPAIGN_ID:"a.media.ad.campaign",CREATIVE_ID:"a.media.ad.creative",PLACEMENT_ID:"a.media.ad.placement",SITE_ID:"a.media.ad.site",CREATIVE_URL:"a.media.ad.creativeURL"}}(t),e.ADB.va.plugins.aa||(e.ADB.va.plugins.aa=t)}(this),function(x){!function(e){"use strict";function t(){this.trackingServer=void 0,this.channel=void 0,this.ovp=void 0,this.appVersion=void 0,this.playerName=void 0,this.ssl=!1,this.debugLogging=!1}e.MediaHeartbeatConfig=t,e.MediaHeartbeatConfig.sharedInstance=new t}(x.ADB.va),function(e){"use strict";function t(){this.data={}}var n=e.plugins.videoplayer.VideoInfo,r=e.plugins.videoplayer.AdBreakInfo,i=e.plugins.videoplayer.AdInfo,a=e.plugins.videoplayer.ChapterInfo,o=e.plugins.videoplayer.QoSInfo;t.MEDIAINFO_KEY_NAME="a.name",t.MEDIAINFO_KEY_VIDEOID="a.videoId",t.MEDIAINFO_KEY_ADID="a.adId",t.MEDIAINFO_KEY_LENGTH="a.length",t.MEDIAINFO_KEY_PLAYHEAD="a.playhead",t.MEDIAINFO_KEY_STREAMTYPE="a.streamType",t.MEDIAINFO_KEY_POSITION="a.position",t.MEDIAINFO_KEY_STARTTIME="a.startTime",t.MEDIAINFO_KEY_BITRATE="a.bitrate",t.MEDIAINFO_KEY_FPS="a.fps",t.MEDIAINFO_KEY_DROPPEDFRAMES="a.droppedFrames",t.MEDIAINFO_KEY_STARTUPTIME="a.startupTime",t.MEDIAINFO_KEY_TIMEDMETADATA="a.timedMetadata",t.prototype.setValue=function(e,t){this.data[e]=t},t.prototype.getValue=function(e){return this.data.hasOwnProperty(e)?this.data[e]:null},t.prototype.createVideoInfo=function(){var e=new n;return e.id=null!=this.getValue(t.MEDIAINFO_KEY_VIDEOID)?this.getValue(t.MEDIAINFO_KEY_VIDEOID):"",e.name=null!=this.getValue(t.MEDIAINFO_KEY_NAME)?this.getValue(t.MEDIAINFO_KEY_NAME):"",e.length=null!=this.getValue(t.MEDIAINFO_KEY_LENGTH)?this.getValue(t.MEDIAINFO_KEY_LENGTH):0,e.playhead=null!=this.getValue(t.MEDIAINFO_KEY_PLAYHEAD)?this.getValue(t.MEDIAINFO_KEY_PLAYHEAD):0,e.streamType=null!=this.getValue(t.MEDIAINFO_KEY_STREAMTYPE)?this.getValue(t.MEDIAINFO_KEY_STREAMTYPE):"",e},t.prototype.createAdBreakInfo=function(){var e=new r;return e.name=null!=this.getValue(t.MEDIAINFO_KEY_NAME)?this.getValue(t.MEDIAINFO_KEY_NAME):"",e.position=null!=this.getValue(t.MEDIAINFO_KEY_POSITION)?this.getValue(t.MEDIAINFO_KEY_POSITION):0,e.startTime=null!=this.getValue(t.MEDIAINFO_KEY_STARTTIME)?this.getValue(t.MEDIAINFO_KEY_STARTTIME):0,e},t.prototype.createAdInfo=function(){var e=new i;return e.id=null!=this.getValue(t.MEDIAINFO_KEY_ADID)?this.getValue(t.MEDIAINFO_KEY_ADID):"",e.name=null!=this.getValue(t.MEDIAINFO_KEY_NAME)?this.getValue(t.MEDIAINFO_KEY_NAME):"",e.length=null!=this.getValue(t.MEDIAINFO_KEY_LENGTH)?this.getValue(t.MEDIAINFO_KEY_LENGTH):0,e.position=null!=this.getValue(t.MEDIAINFO_KEY_POSITION)?this.getValue(t.MEDIAINFO_KEY_POSITION):0,e},t.prototype.createChapterInfo=function(){var e=new a;return e.name=null!=this.getValue(t.MEDIAINFO_KEY_NAME)?this.getValue(t.MEDIAINFO_KEY_NAME):"",e.length=null!=this.getValue(t.MEDIAINFO_KEY_LENGTH)?this.getValue(t.MEDIAINFO_KEY_LENGTH):0,e.startTime=null!=this.getValue(t.MEDIAINFO_KEY_STARTTIME)?this.getValue(t.MEDIAINFO_KEY_STARTTIME):0,e.position=null!=this.getValue(t.MEDIAINFO_KEY_POSITION)?this.getValue(t.MEDIAINFO_KEY_POSITION):0,e},t.prototype.createQoSInfo=function(){var e=new o;return e.bitrate=null!=this.getValue(t.MEDIAINFO_KEY_BITRATE)?this.getValue(t.MEDIAINFO_KEY_BITRATE):0,e.fps=null!=this.getValue(t.MEDIAINFO_KEY_FPS)?this.getValue(t.MEDIAINFO_KEY_FPS):0,e.droppedFrames=null!=this.getValue(t.MEDIAINFO_KEY_DROPPEDFRAMES)?this.getValue(t.MEDIAINFO_KEY_DROPPEDFRAMES):0,e.startupTime=null!=this.getValue(t.MEDIAINFO_KEY_STARTUPTIME)?this.getValue(t.MEDIAINFO_KEY_STARTUPTIME):0,e},e.MediaObject=t}(x.ADB.va),function(e,t){"use strict";function n(e){n.__super__.constructor.call(this),this._heartbeat=e}function r(e){r.__super__.constructor.call(this),this._heartbeat=e}function i(e){i.__super__.constructor.call(this),this._heartbeat=e}function a(e){a.__super__.constructor.call(this),this._heartbeat=e}e.extend(n,t.plugins.aa.AdobeAnalyticsPluginDelegate),n.prototype.onError=function(e){t.MediaHeartbeat._onDelegateError.call(this._heartbeat,e)},e.extend(r,t.plugins.ah.AdobeHeartbeatPluginDelegate),r.prototype.onError=function(e){t.MediaHeartbeat._onDelegateError.call(this._heartbeat,e)},e.extend(i,t.HeartbeatDelegate),i.prototype.onError=function(e){t.MediaHeartbeat._onDelegateError.call(this._heartbeat,e)},e.extend(a,t.plugins.videoplayer.VideoPlayerPluginDelegate),a.prototype.getVideoInfo=function(){return this._heartbeat&&this._heartbeat._videoInfo?(this._heartbeat._delegate&&(this._heartbeat._videoInfo.playhead=this._heartbeat._delegate.getCurrentPlaybackTime()),this._heartbeat._videoInfo):null},a.prototype.getAdBreakInfo=function(){return this._heartbeat&&this._heartbeat._adBreakInfo?this._heartbeat._adBreakInfo:null},a.prototype.getAdInfo=function(){return this._heartbeat&&this._heartbeat._adInfo?this._heartbeat._adInfo:null},a.prototype.getChapterInfo=function(){return this._heartbeat&&this._heartbeat._chapterInfo?this._heartbeat._chapterInfo:null},a.prototype.getQoSInfo=function(){if(this._heartbeat&&this._heartbeat._delegate&&this._heartbeat._delegate.getQoSObject()){var e=this._heartbeat._delegate.getQoSObject();if(e&&"object"==typeof e&&e.setValue)return e.createQoSInfo()}return null},t._MediaAnalyticsPluginDelegate=n,t._MediaHeartbeatPluginDelegate=r,t._ADBMediaHeartbeatDelegate=i,t._MediaHeartbeatVideoPlayerPluginDelegate=a}(x.ADB.core,x.ADB.va),function(e,t){"use strict";function n(){}function r(e){r.__super__.constructor.call(this),this._heartbeat=e}var i=t.MediaHeartbeatConfig;t.plugins.nielsen&&(n.MEDIAHEARTBEAT_NIELSEN_CONTENT_METADATA="media_nielsen_content_metadata",n.MEDIAHEARTBEAT_NIELSEN_AD_METADATA="media_nielsen_ad_metadata",n.MEDIAHEARTBEAT_NIELSEN_CHANNEL_METADATA="media_nielsen_channel_metadata",i.prototype.nielsenConfigKey=void 0,i.prototype.nielsenAppInfo=void 0,e.extend(r,t.plugins.nielsen.NielsenPluginDelegate),r.prototype.getMetadataInfo=function(){if(this._heartbeat&&this._heartbeat._currentContentMediaObject){var e=this._heartbeat._currentContentMediaObject.getValue(n.MEDIAHEARTBEAT_NIELSEN_CONTENT_METADATA);if("object"==typeof e)return e}return null},r.prototype.getAdMetadataInfo=function(){if(this._heartbeat&&this._heartbeat._currentAdMediaObject){var e=this._heartbeat._currentAdMediaObject.getValue(n.MEDIAHEARTBEAT_NIELSEN_AD_METADATA);if("object"==typeof e)return e}return null},r.prototype.getChannelInfo=function(){if(this._heartbeat&&this._heartbeat._currentContentMediaObject){var e=this._heartbeat._currentContentMediaObject.getValue(n.MEDIAHEARTBEAT_NIELSEN_CHANNEL_METADATA);if("object"==typeof e)return e}return null},r.prototype.onError=function(e){this._heartbeat&&t.MediaHeartbeat._onError.call(this._heartbeat,e)},t._MediaHeartbeatNielsen=n,t._MediaHeartbeatNielsenPluginDelegate=r)}(x.ADB.core,x.ADB.va),function(e,r){"use strict";function t(){}function o(e,t,n){if(this._logger=new u,this._plugins=[],this._playerPlugin=null,this._aaPlugin=null,this._ahPlugin=null,this._nielsenPlugin=null,this._currentContentMediaObject=void 0,this._currentAdMediaObject=void 0,this._videoInfo=void 0,this._adBreakInfo=void 0,this._adInfo=void 0,this._chapterInfo=void 0,this._state={},this._delegate=e,n)this.appMeasurement=n;else{if(!x.s)return void this._logger.error(M,"Valid AppMeasurement instance required for initialising MediaHeartbeat");this.appMeasurement=x.s}t&&"object"==typeof t&&null!=t.trackingServer?(this._config=t,r.MediaHeartbeat._debugLogging||this._config.debugLogging?this._logger.enable():this._logger.disable()):this._logger.error(M,"Valid config required for initialising MediaHeartbeat")}function n(){this._ahPlugin=new A(new b(this));var e=new P(this._config.trackingServer,this.appMeasurement.visitor.marketingCloudOrgID),t=(e.debugLogging=r.MediaHeartbeat._debugLogging||this._config.debugLogging,e.ovp=this._config.ovp||"",e.ssl=this._config.ssl,e.sdk=this._config.appVersion||"",function(){return this._currentContentMediaObject?this._currentContentMediaObject.getValue(R):null}.call(this));t&&0<t.length&&(e.__primetime=!0,e.__psdkVersion=t),this._ahPlugin.configure(e),this._plugins.push(this._ahPlugin)}function a(e,t){if(e!=w&&(!this._state[w]||this._state[I]))return!1;if(e===E&&function(){this._state[k]&&this.trackEvent(o.Event.SeekComplete),this._state[D]&&this.trackEvent(o.Event.BufferComplete)}.call(this),!(e===B&&!t)&&(t?!this._state[e]:this._state[e]))return!1;switch(e){case E:this._state[T]=t,this._state[L]=!0;break;case T:this._state[E]=t;break;case B:if(!t&&this._state[O])return!1;break;case O:if(!t&&!this._state[B])return!1}return this._state[e]=!t,!0}function i(){return this._state[w]}function s(){this._state={}}function c(){this._plugins=[],this._aaPlugin=null,this._ahPlugin=null,this._playerPlugin=null,this._nielsenPlugin=null,this._heartbeat&&(this._heartbeat.destroy(),this._heartbeat=null)}var u=e.Logger,l=r.plugins.videoplayer.AssetType,d=r.MediaObject,p=r.Heartbeat,f=r.HeartbeatConfig,h=r._ADBMediaHeartbeatDelegate,_=r.plugins.videoplayer.VideoPlayerPlugin,g=r.plugins.videoplayer.VideoPlayerPluginConfig,m=r._MediaHeartbeatVideoPlayerPluginDelegate,C=r.plugins.aa.AdobeAnalyticsPlugin,v=r.plugins.aa.AdobeAnalyticsPluginConfig,y=r._MediaAnalyticsPluginDelegate,A=r.plugins.ah.AdobeHeartbeatPlugin,P=r.plugins.ah.AdobeHeartbeatPluginConfig,b=r._MediaHeartbeatPluginDelegate,S=(t.prototype.getCurrentPlaybackTime=function(){return null},t.prototype.getQoSObject=function(){return null},o.Event={AdBreakStart:"adBreakStart",AdBreakComplete:"adBreakComplete",AdStart:"adStart",AdComplete:"adComplete",AdSkip:"adSkip",ChapterStart:"chapterStart",ChapterComplete:"chapterComplete",ChapterSkip:"chapterSkip",SeekStart:"seekStart",SeekComplete:"seekComplete",BufferStart:"bufferStart",BufferComplete:"bufferComplete",BitrateChange:"bitrateChange",TimedMetadataUpdate:"timedMetadataUpdate"},o.StreamType={VOD:"vod",LIVE:"live",LINEAR:"linear"},o.MediaObjectKey={StandardVideoMetadata:"media_standard_content_metadata",StandardAdMetadata:"media_standard_ad_metadata",VideoResumed:"resumed"},o.VideoMetadataKeys=r.plugins.aa.VideoMetadataKeys,o.AdMetadataKeys=r.plugins.aa.AdMetadataKeys,o.version=function(){return r.Version.getVersion()},o.prototype.trackSessionStart=function(e,t){if(this._logger.info(M,"#::trackSessionStart()"),a.call(this,w))if(e&&"object"==typeof e&&e.setValue){this._currentContentMediaObject=e,this._videoInfo=e.createVideoInfo(),this._videoInfo.playerName=null!=this._config.playerName?this._config.playerName:"";var n=e.getValue(o.MediaObjectKey.StandardVideoMetadata);if(n&&"object"==typeof n)for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r]);var i=e.getValue(o.MediaObjectKey.VideoResumed);i&&"boolean"==typeof i&&(this._videoInfo.resumed=e.getValue(o.MediaObjectKey.VideoResumed)),S.call(this),this._playerPlugin&&(this._aaPlugin&&this._aaPlugin.setVideoMetadata(t),this._playerPlugin.trackVideoLoad(),this._playerPlugin.trackSessionStart())}else(function(e){this._state[e]=!1}).call(this,w),this._logger.error(M,"Invalid Media Info object");else this._logger.error(M,"API call trackSessionStart is unsupported in the current state.")},o.prototype.trackPlay=function(){return this._logger.info(M,"#::trackPlay()"),a.call(this,E)?void this._playerPlugin.trackPlay():void this._logger.error(M,"API call trackPlay is unsupported in the current state.")},o.prototype.trackPause=function(){return this._logger.info(M,"#::trackPause()"),a.call(this,T)?void(this._playerPlugin&&this._playerPlugin.trackPause()):void this._logger.error(M,"API call trackPause is unsupported in the current state.")},o.prototype.trackComplete=function(){return this._logger.info(M,"#::trackComplete()"),a.call(this,I)?void(this._playerPlugin&&this._playerPlugin.trackComplete(function(){})):void this._logger.error(M,"API call trackComplete is unsupported in the current state.")},o.prototype.trackSessionEnd=function(){return this._logger.info(M,"#::trackSessionEnd()"),a.call(this,w,!0)?(this._playerPlugin&&this._playerPlugin.trackVideoUnload(),s.call(this),void c.call(this)):(s.call(this),c.call(this),void this._logger.error(M,"API call trackSessionEnd is unsupported in the current state."))},o.prototype.trackError=function(e){return this._logger.info(M,"#::trackError()"),i.call(this)?void(this._playerPlugin&&this._playerPlugin.trackVideoPlayerError(e||"unknown_error_id")):void this._logger.error(M,"API call trackError is unsupported in the current state.")},o.prototype.trackEvent=function(e,t,n){switch(e){case o.Event.AdBreakStart:case o.Event.AdBreakComplete:!function(e,t){e==o.Event.AdBreakStart?(this._logger.info(M,"#::trackEvent(AdBreakStart)"),a.call(this,B)?t&&"object"==typeof t&&t.setValue?(this._adBreakInfo=t.createAdBreakInfo(),this._adBreakInfo.playerName=this._config.playerName||""):this._logger.error(M,"Invalid AdBreak Info for MediaHeartbeatEvent.AdBreakStart event."):this._logger.error(M,"API call trackEvent:AdBreakStart is unsupported in the current state.")):(this._logger.info(M,"#::trackEvent(AdBreakComplete)"),a.call(this,B,!0)?this._adBreakInfo=void 0:this._logger.error(M,"API call trackEvent:AdBreakComplete is unsupported in the current state."))}.call(this,e,t);break;case o.Event.AdStart:case o.Event.AdComplete:case o.Event.AdSkip:!function(e,t,n){if(e==o.Event.AdStart)if(this._logger.info(M,"#::trackEvent(AdStart)"),a.call(this,O))if(t&&"object"==typeof t&&t.setValue){this._currentAdMediaObject=t,this._adInfo=t.createAdInfo();var r=t.getValue(o.MediaObjectKey.StandardAdMetadata);if(r&&"object"==typeof r)for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i]);this._aaPlugin&&this._aaPlugin.setAdMetadata(n),this._playerPlugin.trackAdStart(),this._state[L]||this._state[T]||this.trackPlay()}else this._logger.error(M,"Invalid Ad Info for MediaHeartbeatEvent.AdStart event.");else this._logger.error(M,"API call trackEvent:AdStart is unsupported in the current state.");else e==o.Event.AdComplete?(this._logger.info(M,"#::trackEvent(AdComplete)"),a.call(this,O,!0)?(this._playerPlugin.trackAdComplete(),this._adInfo=null):this._logger.error(M,"API call trackEvent:AdComplete is unsupported in the current state.")):(this._logger.info(M,"#::trackEvent(AdSkip)"),a.call(this,O,!0)?this._adInfo=null:this._logger.error(M,"API call trackEvent:AdSkip is unsupported in the current state."))}.call(this,e,t,n);break;case o.Event.SeekStart:case o.Event.SeekComplete:!function(e){e==o.Event.SeekStart?(this._logger.info(M,"#::trackEvent(SeekStart)"),a.call(this,k)?this._playerPlugin.trackSeekStart():this._logger.error(M,"API call trackEvent:SeekStart is unsupported in the current state.")):(this._logger.info(M,"#::trackEvent(SeekComplete)"),a.call(this,k,!0)?this._playerPlugin.trackSeekComplete():this._logger.error(M,"API call trackEvent:SeekComplete is unsupported in the current state."))}.call(this,e);break;case o.Event.ChapterStart:case o.Event.ChapterComplete:case o.Event.ChapterSkip:!function(e,t,n){e==o.Event.ChapterStart?(this._logger.info(M,"#::trackEvent(ChapterStart)"),a.call(this,N)?t&&"object"==typeof t&&t.setValue?(this._chapterInfo=t.createChapterInfo(),this._aaPlugin&&this._aaPlugin.setChapterMetadata(n),this._playerPlugin.trackChapterStart(),this._state[L]||this._state[T]||this.trackPlay()):this._logger.error(M,"Invalid Chapter Info for MediaHeartbeatEvent.ChapterStart event."):this._logger.error(M,"API call trackEvent:ChapterStart is unsupported in the current state.")):e==o.Event.ChapterComplete?(this._logger.info(M,"#::trackEvent(ChapterComplete)"),a.call(this,N,!0)?(this._chapterInfo=null,this._playerPlugin.trackChapterComplete()):this._logger.error(M,"API call trackEvent:ChapterComplete is unsupported in the current state.")):(this._logger.info(M,"#::trackEvent(ChapterSkip)"),a.call(this,N,!0)?this._chapterInfo=null:this._logger.error(M,"API call trackEvent:ChapterSkip is unsupported in the current state."))}.call(this,e,t,n);break;case o.Event.BufferStart:case o.Event.BufferComplete:!function(e){e==o.Event.BufferStart?(this._logger.info(M,"#::trackEvent(BufferStart)"),a.call(this,D)?this._playerPlugin.trackBufferStart():this._logger.error(M,"API call trackEvent:BufferStart is unsupported in the current state.")):(this._logger.info(M,"#::trackEvent(BufferComplete)"),a.call(this,D,!0)?this._playerPlugin.trackBufferComplete():this._logger.error(M,"API call trackEvent:BufferComplete is unsupported in the current state."))}.call(this,e);break;case o.Event.BitrateChange:!function(){return this._logger.info(M,"#::trackEvent(BitrateChange)"),i.call(this)?void this._playerPlugin.trackBitrateChange():void this._logger.error(M,"API call trackEvent:BitrateChange is unsupported in the current state.")}.call(this);break;case o.Event.TimedMetadataUpdate:!function(e){this._logger.info(M,"#::trackEvent(TimedMetadataUpdate)"),e&&"object"==typeof e&&e.setValue&&(e=e.getValue(d.MEDIAINFO_KEY_TIMEDMETADATA),this._playerPlugin)&&e&&"string"==typeof e&&this._playerPlugin.trackTimedMetadata(e)}.call(this,t)}},r.plugins.nielsen&&(e=r._MediaHeartbeatNielsen,o.MediaObjectKey.NielsenContentMetadata=e.MEDIAHEARTBEAT_NIELSEN_CONTENT_METADATA,o.MediaObjectKey.NielsenAdMetadata=e.MEDIAHEARTBEAT_NIELSEN_AD_METADATA,o.MediaObjectKey.NielsenChannelMetadata=e.MEDIAHEARTBEAT_NIELSEN_CHANNEL_METADATA,o.prototype.nielsenLoadMetadata=function(e){this._nielsenPlugin&&this._nielsenPlugin.loadMetadata(e)}),function(){if(!this.appMeasurement||!this.appMeasurement.visitor)throw new Error("appMeasurement.visitor object cannot be NULL.");(function(){this._aaPlugin=new C(this.appMeasurement,new y(this));var e=new v;e.channel=this._config.channel||"",e.debugLogging=r.MediaHeartbeat._debugLogging||this._config.debugLogging,this._aaPlugin.configure(e),this._plugins.push(this._aaPlugin)}).call(this),n.call(this),function(){this._playerPlugin=new _(new m(this));var e=new g;e.debugLogging=r.MediaHeartbeat._debugLogging||this._config.debugLogging,this._playerPlugin.configure(e),this._plugins.push(this._playerPlugin)}.call(this),function(){var e;r.plugins.nielsen&&this._config.nielsenConfigKey&&this._config.nielsenAppInfo&&(this._nielsenPlugin=new r.plugins.nielsen.NielsenPlugin(new r._MediaHeartbeatNielsenPluginDelegate(this)),(e=new r.plugins.nielsen.NielsenPluginConfig).debugLogging=r.MediaHeartbeat._debugLogging||this._config.debugLogging,e.appInfo=this._config.nielsenAppInfo,e.configKey=this._config.nielsenConfigKey,this._nielsenPlugin.configure(e),this._plugins.push(this._nielsenPlugin))}.call(this),function(){var e=new f;e.debugLogging=r.MediaHeartbeat._debugLogging||this._config.debugLogging,this._heartbeat=new p(new h(this),this._plugins),this._heartbeat.configure(e)}.call(this)}),w=1,E=2,T=3,I=4,D=5,k=6,N=7,O=8,B=9,L=10,M=(o.createMediaObject=function(e,t,n,r){var i=new d,a=(i.setValue(d.MEDIAINFO_KEY_VIDEOID,t),i.setValue(d.MEDIAINFO_KEY_NAME,e),i.setValue(d.MEDIAINFO_KEY_LENGTH,n),i.setValue(d.MEDIAINFO_KEY_PLAYHEAD,0),l.ASSET_TYPE_VOD);switch(r){case o.StreamType.VOD:a=l.ASSET_TYPE_VOD;break;case o.StreamType.LIVE:a=l.ASSET_TYPE_LIVE;break;case o.StreamType.LINEAR:a=l.ASSET_TYPE_LINEAR}return i.setValue(d.MEDIAINFO_KEY_STREAMTYPE,a),i},o.createAdBreakObject=function(e,t,n){var r=new d;return r.setValue(d.MEDIAINFO_KEY_NAME,e),r.setValue(d.MEDIAINFO_KEY_POSITION,t),r.setValue(d.MEDIAINFO_KEY_STARTUPTIME,n),r},o.createAdObject=function(e,t,n,r){var i=new d;return i.setValue(d.MEDIAINFO_KEY_NAME,e),i.setValue(d.MEDIAINFO_KEY_ADID,t),i.setValue(d.MEDIAINFO_KEY_POSITION,n),i.setValue(d.MEDIAINFO_KEY_LENGTH,r),i},o.createChapterObject=function(e,t,n,r){var i=new d;return i.setValue(d.MEDIAINFO_KEY_NAME,e),i.setValue(d.MEDIAINFO_KEY_POSITION,t),i.setValue(d.MEDIAINFO_KEY_LENGTH,n),i.setValue(d.MEDIAINFO_KEY_STARTTIME,r),i},o.createQoSObject=function(e,t,n,r){var i=new d;return i.setValue(d.MEDIAINFO_KEY_BITRATE,e),i.setValue(d.MEDIAINFO_KEY_FPS,n),i.setValue(d.MEDIAINFO_KEY_DROPPEDFRAMES,r),i.setValue(d.MEDIAINFO_KEY_STARTUPTIME,t),i},o.createTimedMetadataObject=function(e){var t=new d;return t.setValue(d.MEDIAINFO_KEY_TIMEDMETADATA,e),t},"MediaHeartbeat"),R="a.__pttvsdkVersion";r.MediaHeartbeat=o,r.MediaHeartbeatDelegate=t,r.MediaHeartbeat._onDelegateError=function(e){this._logger.error(M,e.getMessage()+" | "+e.getDetails())},r.MediaHeartbeat._debugLogging=!1}(x.ADB.core,x.ADB.va),x.ADB||(x.ADB={}),x.ADB.core||(x.ADB.core=core),x.ADB.va||(x.ADB.va=va),x.ADB.va.plugins||(x.ADB.va.plugins={})}(this),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.analytics=t():(e.ns_=e.ns_||{},e.ns_.analytics=t())}("undefined"!=typeof self?self:this,function(){return n=[function(e,t){var s={filter:function(e,t){var n,r={};for(n in t)t.hasOwnProperty(n)&&e(t[n])&&(r[n]=t[n]);return r},extend:function(e){var t,n=arguments.length;e=e||{};for(var r=1;r<n;r++)if(t=arguments[r])for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e},h:function(e,t){if(t=t||0,"object"!=typeof e)return e;var n;if(e instanceof Array)for(var r=[],i=0,a=e.length;i<a;i++)r[i]=s.h(e[i],t-1);else for(var o in r={},e)e.hasOwnProperty(o)&&("object"==typeof(n=e[o])&&0<t&&(n=s.h(n,t-1)),r[o]=n);return r}};e.exports.filter=s.filter,e.exports.extend=s.extend,e.exports.h=s.h},function(e,t){var n,r=["play","pause","pause-on-buffering","end","buffer","buffer-stop","keep-alive","hb","custom","load","start","skstart","adskip","cta","error","trans","drmfa","drmap","drmde","bitrt","playrt","volume","window","audio","video","subs","cdn"],i=(n=["c","s","r"],{g:0,m:1,S:2,toString:function(e){return n[e]}});e.exports.I={PLAY:0,PAUSE:1,PAUSE_ON_BUFFERING:2,END:3,BUFFER:4,BUFFER_STOP:5,KEEPALIVE:6,HEARTBEAT:7,CUSTOM:8,LOAD:9,ENGAGE:10,SEEK_START:11,AD_SKIP:12,CTA:13,ERROR:14,TRANSFER:15,DRM_FAILED:16,DRM_APPROVED:17,DRM_DENIED:18,BIT_RATE:19,PLAYBACK_RATE:20,VOLUME:21,WINDOW_STATE:22,AUDIO:23,VIDEO:24,SUBS:25,CDN:26,toString:function(e){return r[e]}},e.exports.P={IDLE:0,PLAYBACK_NOT_STARTED:1,PLAYING:2,PAUSED:3,BUFFERING_BEFORE_PLAYBACK:4,BUFFERING_DURING_PLAYBACK:5,BUFFERING_DURING_SEEKING:6,BUFFERING_DURING_PAUSE:7,SEEKING_BEFORE_PLAYBACK:8,SEEKING_DURING_PLAYBACK:9,SEEKING_DURING_BUFFERING:10,SEEKING_DURING_PAUSE:11,PAUSED_DURING_BUFFERING:12},e.exports.A=i},function(e,t,n){var o=n(0),r=n(58),s=n(59),c=n(5),u=n(60),l=n(64),d=n(65),p=n(66),f=n(67),h=n(69),_=n(72),g=n(73),m=n(74),C=n(75),v=n(76),y=n(37),A=n(79),P={D:"PLATFORM",C:"defaultLiveEndpointUrl",L:"defaultSecureLiveEndpointUrl",T:"httpGet",N:"httpPost",Storage:"Storage",O:"offlineCache",R:"migratedStorage",k:"migratedIO",M:"defaultStorageWriteInterval",U:"onDataFetch",W:"getCrossPublisherUniqueDeviceId",F:"getApplicationName",B:"getApplicationVersion",V:"getPublisherSpecificUniqueDeviceId",G:"getPublisherSpecificUniqueDeviceIdSuffix",j:"getDeviceModel",H:"getPlatformVersion",K:"getPlatformName",J:"getRuntimeName",Y:"getRuntimeVersion",X:"getDisplayResolution",Z:"getApplicationResolution",nn:"getLanguage",tn:"getPackageName",setPlatformAPI:"setPlatformAPI",setTimeout:"setTimeout",setInterval:"setInterval",clearTimeout:"clearTimeout",clearInterval:"clearInterval",en:"getDeviceArchitecture",in:"getConnectionType",rn:"getDeviceJailBrokenFlag",un:"updateMeasurementLabels",sn:"standardOutputLog",an:"defaultSystemClockJumpDetectorNormalContextInterval",fn:"defaultSystemClockJumpDetectorAlternativeContextInterval",cn:"isNormalContext",ln:"addContextChangeListener",dn:"removeContextChangeListener",vn:"addEnvironmentExitListener",_n:"removeEnvironmentExitListener",pn:"overrideCollectedC12Value",hn:"defaultC12OverrideValue"};e.exports=new function(){var t,i;function a(e){if(!t)switch(t=!0,e){case s.SmartTV:o.extend(i,u);break;case s.Netcast:o.extend(i,l);break;case s.Cordova:o.extend(i,p);break;case s.Trilithium:o.extend(i,f);break;case s.AppleTV:o.extend(i,h);break;case s.Chromecast:o.extend(i,g);break;case s.Xbox:o.extend(i,_);break;case s.webOS:o.extend(i,d);break;case s.tvOS:o.extend(i,m);break;case s.JSMAF:o.extend(i,C);break;case s.nodejs:o.extend(i,v);break;case s.html5:o.extend(i,y);break;case s.WebBrowser:o.extend(i,A)}}o.extend(this,{gn:null,PlatformApis:s,mn:null,yn:function(){t||a(s.WebBrowser)},setPlatformApi:function(e,t){var n,r;if("number"==typeof e)n=e,r=t||{};else{if("object"!=typeof e)return;n=s.Skeleton,r=e}a(n),o.extend(i,function(e){var t,n={};for(t in P){var r=P[t];r in e&&(n[t]=e[r])}return n}(r))}}),t=!1,this.mn=i=o.h(c),this.gn=new r(this)}},function(e,t){e.exports={Sn:"unknown",wn:"0x0",bn:"-----BEGIN PUBLIC KEY-----\nMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQD0+fCVxGq3Bk24jUKO1PzsiUs3\nvqww6zR4n2e3AweVLUAgsrDRbAWJ/EjZm1WBLBVNMiTLpSAkV6sjOIrUs03xdUEj\nQZJHwOGK+MfzFaZukoo0qAsEMPwQ5posv0JdkBdUGhKchPk6+NYmD6Hb44Lkp7/a\nQnVeWzvfAPQyTJR5wQIDAQAB\n-----END PUBLIC KEY-----"}},function(e,t){var n,r={};r.In=(n=1,function(){return+new Date+"_"+n++}),r.En=function(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})},r.Pn=function(e){return null==e||""===e||e instanceof Array&&0===e.length},r.An=function(e){return!this.Pn(e)},r.Dn=function(e,t){return t=this.Cn(t)?t:"",this.Cn(e)?e:t},r.Ln=function(e){return void 0!==e&&("string"==typeof e?"true"===(e=e.toLowerCase())||"1"===e||"on"===e:!!e)},r.Tn=function(e,t,n,r,i){if(t<0||r<0||t+i>e.length||r+i>n.length)return!1;for(;0<=--i;)if(e.charAt(t++)!=n.charAt(r++))return!1;return!0},r.Cn=function(e){return void 0!==e&&null!=e},r.Nn=function(e){return!!(e&&e.constructor&&e.call&&e.apply)},e.exports.Nn=r.Nn,e.exports.Cn=r.Cn,e.exports.Tn=r.Tn,e.exports.Ln=r.Ln,e.exports.Dn=r.Dn,e.exports.An=r.An,e.exports.Pn=r.Pn,e.exports.In=r.In,e.exports.uuid=r.En},function(e,t,n){var r=n(18),i=n(13),a=n(8),o=n(3),s=n(9),c=o.Sn,u=o.wn;e.exports={D:"generic",C:"http://b.scorecardresearch.com/p2",L:"https://sb.scorecardresearch.com/p2",T:i,N:null,Storage:a,O:!1,R:null,k:null,M:0,U:function(e){e()},W:function(){return null},F:function(){return c},B:function(){return c},V:function(){return+new Date+~~(1e3*Math.random())},G:function(){return"72"},j:function(){return c},H:function(){return c},K:function(){return"js"},J:function(){return c},Y:function(){return c},X:function(){return u},Z:function(){return u},nn:function(){return c},tn:function(){return c},setPlatformAPI:function(){},setTimeout:function(e,t){return setTimeout(e,t)},setInterval:function(e,t){return setInterval(e,t)},clearTimeout:function(e){return clearTimeout(e)},clearInterval:function(e){return clearInterval(e)},en:function(){return c},in:function(){return s.UNKNOWN},rn:function(){return c},un:function(e){},sn:function(e){console.log(e)},an:3e3,fn:3e4,cn:function(){return!r.On()||!r.Rn()},ln:function(e){r.On()&&r.kn(e)},dn:function(e){r.On()&&r.Mn(e)},vn:function(e){},_n:function(e){},pn:!1,hn:"_"}},function(e,t){t.Un=function(e,t){var n;"undefined"!=typeof XMLHttpRequest?((n=new XMLHttpRequest).open("GET",e,!0),n.onreadystatechange=function(){4===n.readyState&&(t&&t(n.status),n=null)},n.send()):"function"==typeof setTimeout?t&&setTimeout(t,0):t&&t()},t.xn=function(e,t,n){var r;"undefined"!=typeof XMLHttpRequest?((r=new XMLHttpRequest).open("POST",e,!0),r.onreadystatechange=function(){4===r.readyState&&(n&&n(r.status),r=null)},r.send(t)):"function"==typeof setTimeout?n&&setTimeout(n,0):n&&n()}},function(e,t){var r={Wn:function(e,t,n){return null!=t&&t+""!=""&&null!=n&&(e[t+""]=n+"",!0)},Fn:function(e,t){for(var n in t)t.hasOwnProperty(n)&&r.Wn(e,n,t[n])}};e.exports.Wn=r.Wn,e.exports.Fn=r.Fn},function(e,t,n){var r=n(0);e.exports=function(e){var t;try{t="undefined"!=typeof localStorage?localStorage:null}catch(e){t=null}r.extend(this,{storeProperties:function(e){if(t)try{"function"==typeof t.setItem?t.setItem("cs_settings",e):t&&(t.Bn=e)}catch(e){}},getProperties:function(){if(!t)return null;try{return"function"==typeof t.getItem?t.getItem("cs_settings"):t?t.Bn:void 0}catch(e){}},storeCache:function(e){if(t)try{"function"==typeof t.setItem?t.setItem("cs_cache",e):t&&(t.Vn=e)}catch(e){}},getCache:function(){if(!t)return null;try{return"function"==typeof t.getItem?t.getItem("cs_cache"):t?t.Vn:void 0}catch(e){}}})}},function(e,t){e.exports={UNKNOWN:0,UNAVAILABLE:1,DISCONNECTED:2,CONNECTED:3,ETHERNET:4,WIFI:5,WWAN:6,BLUETOOTH:7,EMULATOR:8}},function(e,t,n){var r=n(0);e.exports=function(){var n="undefined"!=typeof localStorage?localStorage:null;r.extend(this,{get:function(e){try{return n&&"function"==typeof n.getItem?n.getItem("cs_"+e):n&&n["cs_"+e]}catch(e){}},remove:function(e){try{n&&"function"==typeof n.removeItem?n.removeItem("cs_"+e):n&&delete n["cs_"+e]}catch(e){}},clear:function(){try{for(var e=0;n&&e<n.length;++e){var t=n.key(e);"cs_"===t.substr(0,"cs_".length)&&("function"==typeof n.removeItem?n.removeItem(t):delete n[t])}}catch(e){}}})}},function(e,t){e.exports={qn:"ocdrm",Gn:"ltrts",jn:"pappv",Hn:"fits",Kn:"cits",Jn:"cpidmd5",Yn:"cpidrsa",Xn:"c12s",zn:"lappaccts",Qn:"lsaccts",$n:"lappsts",Zn:"ftrsc",nt:"accft",tt:"accbt",et:"accit",it:"tft",rt:"tbt",ot:"tit",ut:"accappst",st:"appsc",at:"g",ft:"pg",ct:"dc",lt:"dco",dt:"csc",vt:"sl"}},function(e,t,n){var d=n(21),r=n(0);e.exports=function(){var a=this,s="undefined"!=typeof encodeURIComponent?encodeURIComponent:escape,o="undefined"!=typeof decodeURIComponent?decodeURIComponent:unescape,c="undefined"!=typeof localStorage?localStorage:null,u={},l=c&&s&&o;r.extend(a,{dir:function(e){if(l){e="cs_dir_"+e;if(n=u[e])return n.slice();var t=c.getItem(e);if(t){for(var n=[],r=0,i=(t=t.split("|")).length;r<i;r++)0<t[r].length&&n.push(o(t[r]));return(u[e]=n).slice()}}return null},append:function(e,t,n){var r;l&&((r=a.read(e,t))?r+=n:r=n,a.write(e,t,r))},write:function(e,t,n){if(l){var r=a.dir(e);if(r||(i="cs_dir_"+e,"function"==typeof c.setItem?c.setItem(i,""):c[i]="",u[i]=[],r=[]),-1==d.indexOf(t,r)){i=t;r="cs_dir_"+e;try{"function"==typeof c.setItem?c.setItem(r,c.getItem(r)+"|"+s(i)):c[r]=c.getItem(r)+"|"+s(i)}catch(e){}u[r].push(i)}r=e,e=t,t=n;try{"function"==typeof c.setItem?c.setItem("cs_file_"+r+e,t):c["cs_file_"+r+e]=t}catch(e){}}var i},deleteFile:function(e,t){var n;return!!l&&!!(n=a.dir(e))&&-1!=d.indexOf(t,n)&&(function(e,t){var n="cs_dir_"+e,r=u[n];r.splice(d.indexOf(t,r),1);for(var i=[],a=0,o=r.length;a<o;a++)i.push(s(r[a]));try{"function"==typeof c.setItem?c.setItem(n,i.join("|")):c[n]=i.join("|"),"function"==typeof c.removeItem?c.removeItem("cs_file_"+e+t):delete c["cs_file_"+e+t]}catch(e){}}(e,t),!0)},read:function(e,t){if(l){var n=a.dir(e);if(!n||-1==d.indexOf(t,n));else{n=e;e=t;try{return"function"==typeof c.getItem?c.getItem("cs_file_"+n+e):c["cs_file_"+n+e]}catch(e){}return}}return null}})}},function(e,t){e.exports=function(e,t,n){var r;"undefined"!=typeof Image?((r=new Image).onload=function(){t&&t(200),r=null},r.onerror=function(){t&&t(),r=null},r.src=e):"function"==typeof setTimeout?t&&setTimeout(t,0):t&&t()}},function(e,t,n){var d=n(0),r=n(1).P;t._t=function(e){var t,n={};for(t in e){var r=e[t];n[t]=null==r?r:e[t]+""}return n},t.pt=function(e,t){var n,r=[];for(n in e)t&&!t.test(n)||!e.hasOwnProperty(n)||(r[r.length]=n);return r},t.ht=function(){return"undefined"!=typeof window&&"undefined"!=typeof document},t.gt=function(e,t,n,r){var i=d.h(e,1),a={start:t,end:n};if(!(a.end<=a.start)){for(var o=0;o<i.length;++o){var s=i[o];if(s.start<=a.start&&a.end<=s.end)break;if(s.start<=a.start&&a.start<=s.end&&s.end<=a.end)break;if(a.start<=s.start&&s.start<=a.end&&a.end<=s.end)break;if(a.end<=s.start)break}i.splice(o,0,a);for(var c=1;c<i.length;){var u=i[c],l=i[c-1];l.start<=u.start&&u.end<=l.end?i.splice(c,1):u.start<=l.start&&l.end<=u.end?i.splice(c-1,1):l.start<=u.start&&u.start<=l.end+r&&l.end<=u.end?i.splice(c-1,2,{start:l.start,end:u.end}):u.start<=l.start&&l.start-r<=u.end&&u.end<=l.end?i.splice(c-1,2,{start:u.start,end:l.end}):c++}}return i},t.yt=function(e){for(var t in r)if(r.hasOwnProperty(t)&&r[t]==e)return t},t.St=function(e){return e==r.IDLE||e==r.BUFFERING_BEFORE_PLAYBACK||e==r.SEEKING_BEFORE_PLAYBACK||e==r.PLAYBACK_NOT_STARTED},t.wt=function(e,t){for(var n="hash:",r=0;r<t.length;r++)e[t[r]]&&(n+=t[r]+":"+e[t[r]]+";");return n}},function(e,t,n){n={VERSION:"7.6.1.210506",bt:!0,It:5e3,Et:!0,Pt:n(25).STANDARD,At:["c1","c2","ca2","cb2","cc2","cd2","ns_site","ns_ap_an","ns_ap_pn","ns_ap_pv","c12","ca12","cb12","cc12","cd12","ns_ak","ns_ar","name","ns_ap_ni","ns_ap_ec","ns_ap_ev","ns_ap_device","ns_ap_id","ns_ap_csf","ns_ap_bi","ns_ap_pfm","ns_ap_pfv","ns_ap_ver","ns_ap_sv","ns_ap_bv","ns_ap_cv","ns_ap_smv","ns_type","cs_partner","cs_xcid","cs_impid","cs_proid","cs_dc_di","cs_dc_ci","cs_dc_ei","ns_ap_ui","ns_ap_gs","ns_ap_ie","ns_ts","ns_ap_cfg","ns_ap_env","ns_ap_ais","ns_ap_ut","ns_ap_er","ns_st_sv","ns_st_pv","ns_st_smv","ns_st_it","ns_st_id","ns_st_ec","ns_st_cn","ns_st_ev","ns_st_sp","ns_st_sc","ns_st_ppc","ns_st_apc","ns_st_spc","ns_st_dppc","ns_st_dapc","ns_st_dspc","ns_st_psq","ns_st_asq","ns_st_sq","ns_st_po","ns_st_lda","ns_st_ldw","ns_st_ldo","ns_st_hc","ns_st_hd","ns_st_mp","ns_st_mv","ns_st_cl","ns_st_sl","ns_st_pn","ns_st_tp","ns_st_ct","ns_st_ad","ns_st_li","ns_st_ty","ns_st_ci","ns_st_si","ns_ap_et","ns_ap_ar","cs_c12u","ca_cs_c12u","cb_cs_c12u","cc_cs_c12u","cd_cs_c12u","ns_ap_cs","ns_ap_fg","ns_ap_dft","ns_ap_dbt","ns_ap_dit","ns_ap_as","ns_ap_das","ns_ap_usage","ns_category","category","ns_radio","ns_st_pt","ns_st_ipt","ns_st_iap","ns_st_iet","ns_st_iupc","ns_st_iupa","ns_st_ilpc","ns_st_ilpa","ns_st_ibc","ns_st_ibt","ns_st_itpc","ns_st_icpc","ns_st_ae","ns_st_er","ns_st_cfg","ns_st_rcn","ns_st_cpo","ns_st_ui","c3","ca3","cb3","cc3","cd3","c4","ca4","cb4","cc4","cd4","c6","ca6","cb6","cc6","cd6","ns_st_bn","ns_st_tb","ns_st_an","ns_st_ta","ns_st_ce","ns_st_ia","ns_st_pu","ns_st_st","ns_st_stc","ns_st_sta","ns_st_pr","ns_st_tpr","ns_st_sn","ns_st_en","ns_st_ep","ns_st_tep","ns_st_dt","ns_st_ddt","ns_st_tdt","ns_st_tm","ns_st_dtm","ns_st_ttm","ns_st_ge","ns_st_tge","ns_st_cs","ns_st_ft","ns_st_amg","ns_st_ami","ns_st_amp","ns_st_amw","ns_st_amt","ns_st_ams","ns_st_cde","ns_st_cds","ns_st_cdc","ns_st_cda","ns_st_cdm","ns_st_cmt","ns_st_amd","ns_st_amo","ns_st_sr","ns_st_pl","ns_st_ca","ns_st_cp","ns_st_fee","ns_st_dskc","ns_st_dska","ns_st_skd","ns_st_dskt","ns_st_dpc","ns_ap_i1","ns_ap_i2","ns_ap_i3","ns_ap_i4","ns_ap_i5","ns_ap_i6","cs_ucfr","gdpr","gdpr_p1t","gdpr_li","gdpr_pcc","gdpr_purps","gdpr_consent","c5","c10","c11","c13","c14","c15","c16","ns_ap_install","ns_ap_updated","ns_ap_lastrun","ns_ap_ft","ns_ap_bt","ns_ap_it","ns_ap_res","ns_ap_sd","ns_ap_po","ns_ap_ot","ns_ap_lang","ns_ap_miss","ns_ap_jb","ns_ap_oc","ns_c","ns_st_cev","ns_st_lt","ns_st_br","ns_st_pbr","ns_st_rt","ns_st_prt","ns_st_vo","ns_st_pvo","ns_st_ws","ns_st_pws","ns_st_rp","ns_st_at","ns_st_pat","ns_st_vt","ns_st_pvt","ns_st_tt","ns_st_ptt","ns_st_cdn","ns_st_pcdn","ns_st_pb","ns_st_dpt","ns_st_ap","ns_st_dap","ns_st_et","ns_st_det","ns_st_upc","ns_st_dupc","ns_st_upa","ns_st_dupa","ns_st_lpc","ns_st_dlpc","ns_st_lpa","ns_st_dlpa","ns_st_bc","ns_st_dbc","ns_st_bt","ns_st_dbt","ns_st_bp","ns_st_dtpc","ns_st_dcpc","ns_st_skc","ns_st_ska","ns_st_skt","ns_st_pc","ns_st_pp","ns_st_pa","c7","c8","c9","ns_st_cu","ns_st_amc"]};e.exports=n},function(e,t){e.exports=function(e){var n=this;n.Dt=e,n.Ct={},n.Lt={},n.Tt=+new Date,n.setLabel=function(e,t){n.Lt[e]=t}}},function(e,t,n){var E=n(0),T=n(32),I=n(84),D=n(28),k=n(30),N=n(19),O=n(2).mn,B=n(26),L=n(27),M=n(87),R=n(88),x=n(41),V=n(33),U=n(89),F=n(43),j=n(90),G=n(11),Y=n(91),H=n(15),q=n(38),K=n(29),W=n(92),n=new function(){var u,a,l,n,d,i,o,r,s,c,p,f,h,_,g,m,C,v,y,A=this;function P(e){y.push(function(){l.Wt(e,w(),g)})}function b(e,t,n,r){var i;c&&_?e():h?y.push(e):n?(y.push(e),P(t),f=!0):(f||(i=t,y.push(function(){a.notifyEnterForeground(i)}),f=!0),r||P(t),y.push(e),h=!0)}function S(){C.$t()||C.Zt();for(var e=u.get(G.Xn,{}),t=g.getPublisherConfigurations(),n="a".charCodeAt(0)-1,r=0;r<t.length;++r){var i=t[r],a=i.getPublisherId(),o=d.ne(i.getPublisherSecret()),s=e[a],c="";n>="a".charCodeAt(0)&&(c="c"+String.fromCharCode(n)+"_"),n++,s&&s!=o&&l.te(c+"cs_c12u",s),e[a]=o,i.setPublisherUniqueDeviceId(o)}u.put(G.Xn,e)}function w(e){var t;if(e instanceof k)t=e;else{t=new k,"object"==typeof e&&t.addLabels(e);var n=g.getIncludedPublishers();if(0<n.length)for(var r=0;r<n.length;++r)t.addIncludedPublisher(n[r])}return 0<t.getIncludedPublishers().length&&0<g.getPartnerConfigurations().length&&t.addIncludedPublisher(T.ee),t}n=new R(function(){var e;g.Nt()||d.Ot(),((e=d.kt()).Rt||e.Mt)&&g.Ut(e.xt)}),_=h=f=p=c=!(s=!0),g=new T,C=new W,y=[],g.addListener(function(e){switch(e){case D.DISABLE:!function(){s&&(s=!1,p&&O.clearTimeout(v),_&&(r.stop(),K.Bt().Ft()),(c||p)&&(a.Vt(this),a.qt(this),a.Gt()),o)&&o.jt()}();break;case D.TIME_WINDOW_ELAPSED:l=new I(a,u,o,n,i,d,C),(r=new x(u)).Ht(A),S(),0<=g.getUsagePropertiesAutoUpdateInterval()&&a.Kt(g.getUsagePropertiesAutoUpdateInterval(),g.Jt()==L.FOREGROUND_ONLY),r.Yt(g.isKeepAliveMeasurementEnabled()),K.Bt().Xt(g),_=!0,u.zt();for(var t=0;t<y.length;++t)(0,y[t])();y=[];break;case D.PARTNER:case D.PUBLISHER:_&&(S(),u.zt());break;case D.OFFLINE_CACHE_MODE:break;case D.KEEP_ALIVE:_&&r.Yt(g.isKeepAliveMeasurementEnabled());break;case D.Qt:C.Yt(!1)}}),E.extend(A,{configuration:g,start:function(){var e,t,n,r;g.ie(),c||p||(p=!0,t=+new Date,m=new q(g),n=u=new M(m),(r=new j).re(n),r.oe(),o=new V(u,m),(n=new Y(m,u,o)).ue(),n.se(),C.ae(u),d=new F(u,C),s&&(i=new U(u,g),a=new B(u,t),C.$t()&&C.Zt(),a.fe(A),a.ce(A),h||(e=t,s&&b(function(){0==l.le()&&l.Wt(e,w(),g)},e,!1,!0),h=!0),c=!0,u.zt(),v=O.setTimeout(function(){v=null,g.de()},H.It)))},ve:function(e){var t;s&&b(function(){l.ve(t,w(e),g)},t=+new Date)},notifyDistributedContentViewEvent:function(e,t){var n;g.getPartnerConfiguration(e)&&((n=new N)._e(!1),n.addIncludedPublisher(T.ee),n.setLabel("ns_ap_ev","distributed_view"),n.setLabel("cs_dc_di",e),n.setLabel("cs_dc_ci",t),A.pe(n))},pe:function(e){var t;s&&b(function(){l.pe(t,w(e),g)},t=+new Date)},notifyUxActive:function(){var e;s&&b(function(){a.notifyUxActive(e)},e=+new Date)},notifyUxInactive:function(){var e;s&&b(function(){a.notifyUxInactive(e)},e=+new Date)},notifyEnterForeground:function(){var e;s&&b(function(){a.notifyEnterForeground(e)},e=+new Date,!0)},notifyExitForeground:function(){var e;s&&b(function(){a.notifyExitForeground(e)},e=+new Date,!0)},flushOfflineCache:function(){s&&c&&b(function(){o.flush(g,!0),o.he(),u.zt()},+new Date)},clearOfflineCache:function(){s&&c&&b(function(){o.jt(),o.he(),u.zt()},+new Date)},clearInternalData:function(){s&&c&&b(function(){u.clear(),u.zt()},+new Date)},ge:function(){return C},me:function(){l.ye(+new Date,w(),g),u.zt()},Se:function(e,t){s&&e==B.be.we&&(_?r.start(x.Ie):y.push(function(){r.start(x.Ie)}))},Ee:function(e,t){var n;s&&(n=function(){e==B.be.we&&(_?r.stop():y.push(function(){r.stop()}))},_?n():y.push(n))},Pe:function(e,t){},Ae:function(e,t){}})};e.exports=n},function(e,t){var n,r,i,a,o={De:function(){try{return"undefined"!=typeof document}catch(e){return!1}},Ce:function(){try{return"undefined"!=typeof navigator}catch(e){return!1}},On:function(){var e;return!!o.De()&&(e=!1,void 0!==document.hidden||void 0!==document.mozHidden||void 0!==document.msHidden||void 0!==document.webkitHidden||e)}};o.Le=o.De()?(void 0!==document.hidden?(n="hidden",r="visibilitychange",i="visibilityState"):void 0!==document.mozHidden?(n="mozHidden",r="mozvisibilitychange",i="mozVisibilityState"):void 0!==document.msHidden?(n="msHidden",r="msvisibilitychange",i="msVisibilityState"):void 0!==document.webkitHidden&&(n="webkitHidden",r="webkitvisibilitychange",i="webkitVisibilityState"),a={hidden:n,Te:r,state:i},function(){return a}):null,o.Rn=function(){var e;return!!o.De()&&!!o.On()&&(e=o.Le(),document[e.hidden])},o.kn=function(e){var t;o.De()&&o.On()&&(t=o.Le(),document.addEventListener(t.Te,e,!1))},o.Mn=function(e){var t;o.De()&&o.On()&&(t=o.Le(),document.removeEventListener(t.Te,e,!1))},o.Ne=function(){var e,t,n,r;return o.Ce()?(n=navigator.userAgent||"",r=navigator.appName||"",-1!=(t=n.indexOf("Opera"))||-1!=(t=n.indexOf("OPR/"))?r="Opera":-1!=(t=n.indexOf("Android"))?r="Android":-1!=(t=n.indexOf("Chrome"))?r="Chrome":-1!=(t=n.indexOf("Safari"))?r="Safari":-1!=(t=n.indexOf("Firefox"))?r="Firefox":-1!=(t=n.indexOf("IEMobile"))?r="Internet Explorer Mobile":"Microsoft Internet Explorer"==r||"Netscape"==r?r="Internet Explorer":(e=n.lastIndexOf(" ")+1)<(t=n.lastIndexOf("/"))?(r=n.substring(e,t)).toLowerCase()==r.toUpperCase()&&(r=navigator.appName):r="unknown",r):""},o.Oe=function(){var e,t,n,r;return o.Ce()?(t=navigator.userAgent||"",n=navigator.appName||"",r=navigator.appVersion?""+parseFloat(navigator.appVersion):"",-1!=(e=t.indexOf("Opera"))?(r=t.substring(e+6),-1!=(e=t.indexOf("Version"))&&(r=t.substring(e+8))):-1!=(e=t.indexOf("OPR/"))?r=t.substring(e+4):-1!=(e=t.indexOf("Android"))?r=t.substring(e+11):-1!=(e=t.indexOf("Chrome"))?r=t.substring(e+7):-1!=(e=t.indexOf("Safari"))?(r=t.substring(e+7),-1!=(e=t.indexOf("Version"))&&(r=t.substring(e+8))):-1!=(e=t.indexOf("Firefox"))?r=t.substring(e+8):"Microsoft Internet Explorer"==n?null!=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(t)&&(r=parseFloat(RegExp.$1)):"Netscape"==n?null!=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(t)&&(r=parseFloat(RegExp.$1)):r=t.lastIndexOf(" ")+1<(e=t.lastIndexOf("/"))?t.substring(e+1):"unknown",-1!=(n=(r=-1!=(n=(r=-1!=(n=(r=r.toString()).indexOf(";"))?r.substring(0,n):r).indexOf(" "))?r.substring(0,n):r).indexOf(")"))&&(r=r.substring(0,n)),t=parseInt(""+r,10),isNaN(t)?""+parseFloat(navigator.appVersion):r):""},o.Re=function(){return"undefined"==typeof window||(window.ActiveXObject,!0)},o.ht=function(){return"undefined"!=typeof window&&"undefined"!=typeof document},o.ke=function(){return!!o.De()&&"s"===document.location.href.charAt(4)},e.exports.On=o.On,e.exports.Le=o.Le,e.exports.Rn=o.Rn,e.exports.Ne=o.Ne,e.exports.Oe=o.Oe,e.exports.Re=o.Re,e.exports.ht=o.ht,e.exports.ke=o.ke,e.exports.kn=o.kn,e.exports.Mn=o.Mn},function(e,t,n){var r=n(0),i=n(30);function a(){var e=new i,t=[],n=!0;r.extend(this,e),r.extend(this,{Me:function(e){t=e},Ue:function(){return t},_e:function(e){n=e},xe:function(){return n}})}a.prototype=Object.create(i.prototype),e.exports=a},function(e,t,n){var s=n(0),r=n(56),i={We:function(e,t,n){return-1==e.indexOf("?")?e+="?":e+="&",e+i.Fe(t,n)},Be:function(e,t){return s.extend(e,i._t(t||{}))},_t:function(e){var t,n,r={};for(t in e)e.hasOwnProperty(t)&&(n=e[t],r[t]=null==n?n:e[t]+"");return r},Fe:function(e,t){var n=!1,r="";e=s.h(e);for(var i="undefined"!=typeof encodeURIComponent?encodeURIComponent:escape,a=0;a<t.length;++a){var o=t[a];null!=e[o]&&(n&&(r+="&"),n=!0,r+=i(o)+"="+i(e[o]),delete e[o])}for(o in e)null!=e[o]&&(n&&(r+="&"),n=!0,r+=i(o)+"="+i(e[o]));return r},Ve:function(e){return"unknown"==e?"unknown":r.qe(e)?"1":"0"}};e.exports=i},function(e,t){var i={indexOf:function(n,e){var r=-1;return i.forEach(e,function(e,t){e==n&&(r=t)}),r},forEach:function(e,t,n){try{if("function"==typeof t)if(n=void 0!==n?n:null,"number"!=typeof e.length||void 0===e[0]){var r,i=void 0!==e.__proto__;for(r in e)!e.hasOwnProperty(r)||i&&void 0!==e.__proto__[r]||"function"==typeof e[r]||t.call(n,e[r],r)}else for(var a=0,o=e.length;a<o;a++)t.call(n,e[a],a)}catch(e){}}};t.indexOf=i.indexOf,t.forEach=i.forEach},function(e,t){e.exports=require("os")},function(e,t){var r,n={};function a(e,t){var n=o(e[0],a=e[1],i=e[2],r=e[3],t[0],7,-680876936),r=o(r,n,a,i,t[1],12,-389564586),i=o(i,r,n,a,t[2],17,606105819),a=o(a,i,r,n,t[3],22,-1044525330);n=o(n,a,i,r,t[4],7,-176418897),r=o(r,n,a,i,t[5],12,1200080426),i=o(i,r,n,a,t[6],17,-1473231341),a=o(a,i,r,n,t[7],22,-45705983),n=o(n,a,i,r,t[8],7,1770035416),r=o(r,n,a,i,t[9],12,-1958414417),i=o(i,r,n,a,t[10],17,-42063),a=o(a,i,r,n,t[11],22,-1990404162),n=o(n,a,i,r,t[12],7,1804603682),r=o(r,n,a,i,t[13],12,-40341101),i=o(i,r,n,a,t[14],17,-1502002290),n=c(n,a=o(a,i,r,n,t[15],22,1236535329),i,r,t[1],5,-165796510),r=c(r,n,a,i,t[6],9,-1069501632),i=c(i,r,n,a,t[11],14,643717713),a=c(a,i,r,n,t[0],20,-373897302),n=c(n,a,i,r,t[5],5,-701558691),r=c(r,n,a,i,t[10],9,38016083),i=c(i,r,n,a,t[15],14,-660478335),a=c(a,i,r,n,t[4],20,-405537848),n=c(n,a,i,r,t[9],5,568446438),r=c(r,n,a,i,t[14],9,-1019803690),i=c(i,r,n,a,t[3],14,-187363961),a=c(a,i,r,n,t[8],20,1163531501),n=c(n,a,i,r,t[13],5,-1444681467),r=c(r,n,a,i,t[2],9,-51403784),i=c(i,r,n,a,t[7],14,1735328473),n=u(n,a=c(a,i,r,n,t[12],20,-1926607734),i,r,t[5],4,-378558),r=u(r,n,a,i,t[8],11,-2022574463),i=u(i,r,n,a,t[11],16,1839030562),a=u(a,i,r,n,t[14],23,-35309556),n=u(n,a,i,r,t[1],4,-1530992060),r=u(r,n,a,i,t[4],11,1272893353),i=u(i,r,n,a,t[7],16,-155497632),a=u(a,i,r,n,t[10],23,-1094730640),n=u(n,a,i,r,t[13],4,681279174),r=u(r,n,a,i,t[0],11,-358537222),i=u(i,r,n,a,t[3],16,-722521979),a=u(a,i,r,n,t[6],23,76029189),n=u(n,a,i,r,t[9],4,-640364487),r=u(r,n,a,i,t[12],11,-421815835),i=u(i,r,n,a,t[15],16,530742520),n=l(n,a=u(a,i,r,n,t[2],23,-995338651),i,r,t[0],6,-198630844),r=l(r,n,a,i,t[7],10,1126891415),i=l(i,r,n,a,t[14],15,-1416354905),a=l(a,i,r,n,t[5],21,-57434055),n=l(n,a,i,r,t[12],6,1700485571),r=l(r,n,a,i,t[3],10,-1894986606),i=l(i,r,n,a,t[10],15,-1051523),a=l(a,i,r,n,t[1],21,-2054922799),n=l(n,a,i,r,t[8],6,1873313359),r=l(r,n,a,i,t[15],10,-30611744),i=l(i,r,n,a,t[6],15,-1560198380),a=l(a,i,r,n,t[13],21,1309151649),n=l(n,a,i,r,t[4],6,-145523070),r=l(r,n,a,i,t[11],10,-1120210379),i=l(i,r,n,a,t[2],15,718787259),a=l(a,i,r,n,t[9],21,-343485551),e[0]=d(n,e[0]),e[1]=d(a,e[1]),e[2]=d(i,e[2]),e[3]=d(r,e[3])}function s(e,t,n,r,i,a){return t=d(d(t,e),d(r,a)),d(t<<i|t>>>32-i,n)}function o(e,t,n,r,i,a,o){return s(t&n|~t&r,e,t,i,a,o)}function c(e,t,n,r,i,a,o){return s(t&r|n&~r,e,t,i,a,o)}function u(e,t,n,r,i,a,o){return s(t^n^r,e,t,i,a,o)}function l(e,t,n,r,i,a,o){return s(n^(t|~r),e,t,i,a,o)}function d(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}n.Ge=(r="0123456789abcdef".split(""),function(e){for(var t=function(e){for(var t=e.length,n=[1732584193,-271733879,-1732584194,271733878],r=64;r<=e.length;r+=64)a(n,function(e){for(var t=[],n=0;n<64;n+=4)t[n>>2]=e.charCodeAt(n)+(e.charCodeAt(n+1)<<8)+(e.charCodeAt(n+2)<<16)+(e.charCodeAt(n+3)<<24);return t}(e.substring(r-64,r)));e=e.substring(r-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(r=0;r<e.length;r++)i[r>>2]|=e.charCodeAt(r)<<(r%4<<3);if(i[r>>2]|=128<<(r%4<<3),55<r)for(a(n,i),r=0;r<16;r++)i[r]=0;return i[14]=8*t,a(n,i),n}(e),n=0;n<t.length;n++)t[n]=function(e){for(var t="",n=0;n<4;n++)t+=r[e>>8*n+4&15]+r[e>>8*n&15];return t}(t[n]);return t.join("")}),e.exports=n.Ge},function(e,t){e.exports={DISABLED:4,LAN:3,MANUAL_FLUSH:2,ENABLED:1}},function(e,t){e.exports={STANDARD:1,LAN:2,CACHE:3}},function(e,t,n){var L=n(0),M=n(2).mn,R=n(11),n=n(27),x={je:2,He:3,we:4},V={Ke:1,Je:2,we:3};function r(r,e){var c,u,l,d,p,f,i,a,o,s,h,_,g,m,C,v,y,A,n,P,t,b,S=this,w=[],E=[];function T(e){if((t=u?V.Ke:l?V.Je:V.we)!=d){var t;if(d!=t){var n=d,r=e;switch(n){case V.we:break;case V.Je:case V.Ke:k()}for(var i=0;i<E.length;++i)E[i].Se(n,r);var a=t,o=e;switch(a){case V.we:break;case V.Je:p||D();break;case V.Ke:D(),f++}for(var s=0;s<E.length;++s)E[s].Ee(a,o);I(e,!0),d=t}}}function I(e,t){var n=e-i;switch(d){case V.Ke:a+=n,o+=n;break;case V.Je:s+=n,h+=n;break;case V.we:_+=n,g+=n}i=e,t&&(r.put(R.zn,i),r.put(R.Zn,f),r.put(R.nt,a),r.put(R.tt,s),r.put(R.et,_),r.put(R.it,o),r.put(R.rt,h),r.put(R.ot,g))}function D(){k(),0<n&&(t=M.setTimeout(function(){S.Ye(+new Date,!0),t=null,D(),r.zt()},n))}function k(){t&&(M.clearTimeout(t),t=null)}function N(e){if((t=l?x.je:u?x.He:x.we)!=c){var t;if(c!=t){var n=c,r=e;switch(n){case x.je:case x.He:m=r;break;case x.we:B(r)||(C+=r-v)}for(var i=0;i<w.length;++i)w[i].Pe(n,r);var a=t,o=e;switch(a){case x.je:case x.He:B(o)}for(var s=0;s<w.length;++s)w[s].Ae(a,o);O(e,!0),c=t}}}function O(e,t){var n=e-v;switch(c){case x.je:case x.He:C+=n,m=e}v=e,t&&(r.put(R.Qn,v),r.put(R.$n,m),r.put(R.ut,C),r.put(R.ft,A),r.put(R.at,y),r.put(R.st,P))}function B(e){var t=!1;return 18e5<e-m&&(A=y,r.put(R.ft,A),y=e,r.put(R.at,y),P++,t=!0),m=e,t}f=0,p=!1,d=V.we,c=x.we,l=u=!1,m=v=i=A=y=-1,P=n=C=_=a=s=g=h=o=0,i=r.get(R.zn,-1),v=r.get(R.Qn,-1),m=r.get(R.$n,-1),f=r.get(R.Zn,0),a=r.get(R.nt,0),s=r.get(R.tt,0),_=r.get(R.et,0),o=r.get(R.it,0),h=r.get(R.rt,0),g=r.get(R.ot,0),C=r.get(R.ut,0),P=r.get(R.st,0),b=e,A=r.get(R.ft,0),(y=r.get(R.at,-1))<0?(y=b,r.put(R.at,y),A=0,r.put(R.ft,A),m=y,P++):(B(b)||(C+=b-v,r.put(R.ut,C)),m=y),b=e,0<i&&(_+=e=b-i,r.put(R.et,_),g+=e,r.put(R.ot,g)),v=i=b,r.put(R.Qn,v),r.put(R.zn,i),r.put(R.$n,m),L.extend(S,{Xe:function(){return d},notifyUxActive:function(e){l||(l=!0,T(e),N(e),r.zt())},notifyUxInactive:function(e){l&&(l=!1,T(e),N(e),r.zt())},notifyEnterForeground:function(e){u||(u=!0,T(e),N(e),r.zt())},notifyExitForeground:function(e){u&&(u=!1,T(e),N(e),r.zt())},Ye:function(e,t){I(e,t),O(e,t)},Kt:function(e,t){n=1e3*e,p=t,(0<e&&(d==V.Ke||d==V.Je&&!t)?D:k)()},ze:function(e){var t=P;return(e=void 0===e?!0:e)&&(P=0,r.put(R.st,P)),t},Qe:function(e){var t=C;return(e=void 0===e?!0:e)&&(C=0,r.put(R.ut,C)),t},$e:function(e){var t=_;return(e=void 0===e?!0:e)&&(_=0,r.put(R.et,_)),t},Ze:function(e){var t=g;return(e=void 0===e?!0:e)&&(g=0),r.put(R.ot,g),t},ni:function(e){var t=s;return(e=void 0===e?!0:e)&&(s=0,r.put(R.tt,s)),t},ti:function(e){var t=a;return(e=void 0===e?!0:e)&&(a=0,r.put(R.nt,a)),t},ei:function(e){var t=o;return(e=void 0===e?!0:e)&&(o=0),r.put(R.it,o),t},ii:function(e){var t=f;return(e=void 0===e?!0:e)&&(f=0,r.put(R.Zn,f)),t},ri:function(e){var t=h;return(e=void 0===e?!0:e)&&(h=0),r.put(R.rt,h),t},oi:function(){return y},ui:function(){return A},fe:function(e){E.push(e)},Vt:function(e){e=E.indexOf(e);-1!=e&&E.splice(e,1)},ce:function(e){w.push(e)},qt:function(e){e=w.indexOf(e);-1!=e&&w.splice(e,1)},Gt:function(){k()}})}r.si=n.FOREGROUND_ONLY,r.ai=60,r.fi=x,r.be=V,e.exports=r},function(e,t){e.exports={DISABLED:2,FOREGROUND_AND_BACKGROUND:1,FOREGROUND_ONLY:0}},function(e,t){e.exports={PERSISTENT_LABELS:0,PARTNER:1,PUBLISHER:2,KEEP_ALIVE:3,LIVE_TRANSMISSION_MODE:4,OFFLINE_CACHE_MODE:5,DISABLE:6,TIME_WINDOW_ELAPSED:7,START_LABELS:8,LABEL_ORDER:9,Qt:10}},function(e,t,n){var r,_=n(0),g=n(2).mn,m={ci:1,li:2,di:3},C=+new Date;function i(){var n,t,r,i,a,o,s,c,u,l;function d(){s=g.cn(),n&&(h(),p())}function p(){var t=s?c:u;i=+new Date,a=i+t,n=g.setInterval(function(){var e=(i=+new Date)-a;a=i+t,Math.abs(e)>l&&f(0<e?m.di:i<r?m.li:m.ci)},t)}function f(e){for(var t=0;t<o.length;++t)o[t](e)}function h(){n&&(g.clearInterval(n),n=null)}_.extend(this,{Xt:function(e){e.vi()&&(c=e._i(),u=e.pi(),l=e.hi(),s=g.cn(),n||p(),t||(t=!0,g.ln(d)))},Ft:function(){h(),t&&(g.dn(d),t=!1)},gi:function(e){o.push(e)},mi:function(e){e=o.indexOf(e);-1!=e&&o.splice(e,1)},yi:function(e){var t;n?a<e&&l<e-a?t=m.di:e<r?t=m.li:e<i&&(t=m.ci):e<r&&(t=m.li),t&&(f(t),n)&&(h(),p()),r=e}}),n=null,r=C,s=!(t=!(o=[])),u=c=-1,l=1e3}i.Si=1e3,i.ENABLED=!0,i.wi=m,i.Bt=function(){return r=r||new i},e.exports=i},function(e,t,n){var i=n(0),a=n(7);e.exports=function(){var n={},t=[],r={};i.extend(this,{addLabels:function(e){a.Fn(n,e)},getLabels:function(){return n},setLabel:function(e,t){a.Wn(n,e,t)},getIncludedPublishers:function(){return t},addIncludedPublisher:function(e){t&&-1==t.indexOf(e)&&t.push(e)},addPublisherLabels:function(e,t){e&&(r[e]=r[e]||{},a.Fn(r[e],t))},setPublisherLabel:function(e,t,n){e&&(r[e]=r[e]||{},a.Wn(r[e],t,n))},getPublisherLabels:function(e){return r[e]||{}}})}},function(e,t,n){var u=n(0),l=n(7),d=n(52);function r(){var e,n,r,t,i,a=this;function o(e,t){null!=e&&s("ns_st_ct",(t?"ac":"vc")+e)}function s(e,t){l.Wn(n,e,t)}function c(e){delete n[e]}i=!(n={}),r={},e=new d,s("ns_st_li","0"),s("ns_st_ty","video"),u.extend(a,e),u.extend(a,{setMediaType:function(e){(t=e)==p.LIVE||t==p.USER_GENERATED_LIVE?s("ns_st_li","1"):s("ns_st_li","0"),o(t,i)},classifyAsAudioStream:function(e){s("ns_st_ty",(i=e=null==e?!0:e)?"audio":"video"),o(t,i)},classifyAsCompleteEpisode:function(e){(e=null==e?!0:e)?s("ns_st_ce","1"):c("ns_st_ce")},carryTvAdvertisementLoad:function(e){(e=null==e?!0:e)?s("ns_st_ia","1"):c("ns_st_ia")},setLength:function(e){s("ns_st_cl",e)},setTotalSegments:function(e){s("ns_st_tp",e)},setClipUrl:function(e){s("ns_st_cu",e)},setFeedType:function(e){s("ns_st_ft",e)},setVideoDimensions:function(e,t){s("ns_st_cs",(e=e||0)+"x"+(t=t||0))},setStack:function(e,t){r[e]=t},getStandardLabels:function(){return u.extend({},e.getStandardLabels(),n)},getMetadataLabels:function(){return u.extend({},a.getStandardLabels(),a.getCustomLabels())},getStacks:function(){return r}})}u.extend(r,d);var p={LONG_FORM_ON_DEMAND:"12",SHORT_FORM_ON_DEMAND:"11",LIVE:"13",USER_GENERATED_LONG_FORM_ON_DEMAND:"22",USER_GENERATED_SHORT_FORM_ON_DEMAND:"21",USER_GENERATED_LIVE:"23",BUMPER:"99",OTHER:"00"};r.ContentType=p,r.ContentFeedType={EAST_HD:"EASTHD",WEST_HD:"WESTHD",EAST_SD:"EASTSD",WEST_SD:"WESTSD",OTHER:"OTHER"},e.exports=r},function(e,t,n){var H=n(0),q=n(7),K=n(4),W=n(33),J=n(24),z=n(15),r=n(3),X=n(26),Q=n(38),$=n(28),Z=n(82),ee=n(42),te=n(39),ne=n(2),re=ne.mn,ie=n(29),ae=r.Sn;function oe(){var a,o,t,s,r,R,c,n,u,i,l,d,p,f,h,_,g,m,x,C,v,e,y,A,P,b,S,w,E,T,V,I,D,k,N,O,B,U,F,L=this;function j(){if(function(){if(0<y.length){for(var e=!1,t=0;t<f.length;++t){var n=f[t];if(-1!=y.indexOf(n.getPublisherId())){e=!0;break}}return e=!e&&0<h.length&&-1!=y.indexOf("21193409")?!0:e}return 1}()){var e;if(Y(),l){var t=l.split("?");if(l=t[0],t[1])for(var n=t[1].split("&"),r=0;r<n.length;r++){var i=n[r].split("=");c[i[0]]=i[1]||""}}else t=re.L,e=re.C,l=a?K.Nn(t)?t():t:K.Nn(e)?e():e;p&&p!=W.bi||(p=a?W.Ii:W.bi),0<h.length&&0==f.length&&G(),s=!0,M($.TIME_WINDOW_ELAPSED)}}function G(){var e;R||(R=!0,e=new ee({publisherId:T.getPublisherId(),publisherSecret:T.getPublisherSecret()}),f.push(e),M($.PUBLISHER))}function Y(){if(0!=f.length)for(var e=0;e<f.length;++e){var t=f[e];t.getPublisherId()!=T.getPublisherId()&&(a=t.isSecureTransmissionEnabled(),u=t.isKeepAliveMeasurementEnabled(),o=t.isHttpRedirectCachingEnabled())}if(0!=h.length)for(var n=1==f.length&&f[0].getPublisherId()==T.getPublisherId(),r=0;r<h.length;++r){var i=h[r];n&&i.isSecureTransmissionEnabled()&&(a=!0),u=i.isKeepAliveMeasurementEnabled(),o=i.isHttpRedirectCachingEnabled()}}function M(e){for(var t=C.slice(),n=0;n<t.length;++n)t[n](e)}H.extend(L,{ie:function(){ne.yn(),D=-1==D?re.an:D,k=-1==k?re.fn:k,g=g||re.F(),m=m||re.B()},addListener:function(e){K.Nn(e)&&C.push(e)},de:function(){!r&&(r=!0,0<h.length||0<f.length)&&j()},addClient:function(e){if(e instanceof te&&function(e){if(e.getPartnerId()){for(var t=0;t<h.length;++t)if(h[t].getPartnerId()==e.getPartnerId())return;h.push(e),G(),r&&(s?Y:j)(),M($.PARTNER)}}(e),e instanceof ee){var t=e;if(t.getPublisherId()&&t.getPublisherSecret()&&t.getPublisherId()!=oe.ee){for(var n=0;n<f.length;++n)if(f[n].getPublisherId()==t.getPublisherId())return;0<f.length&&f[f.length-1].getPublisherId()==T.getPublisherId()?f.splice(f.length-1,0,t):f.push(t),r&&(s?Y:j)(),M($.PUBLISHER)}}},Ei:function(){var e="";return(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e+(a?"1":"0")+(u?"1":"0"))+(o?"1":"0")+(t?"1":"0"))+(I?"1":"0")+(O?"1":"0"))+(_?"1":"0")+"-")+(i+"")+(d+""))+(w+"")+"-")+E.toString(16).toUpperCase()+"-")+A.toString(16).toUpperCase()+"-")+P.toString(16).toUpperCase()+"-")+S.toString(16).toUpperCase()+"-")+b.toString(16).toUpperCase()+"-")+(D/100).toString(16).toUpperCase()+"-")+(k/100).toString(16).toUpperCase()+"-")+(N/100).toString(16).toUpperCase()},Pi:function(e){for(var t=0;t<f.length;++t)if(f[t].getPublisherId()==e)return!0;return!1},Ai:function(e){for(var t=0;t<h.length;++t)if(h[t].getPartnerId()==e)return!0;return!1},getPartnerConfiguration:function(e){for(var t=0;t<h.length;++t){var n=h[t];if(n.getPartnerId()==e)return n}return null},getPublisherConfiguration:function(e){for(var t=0;t<f.length;++t){var n=f[t];if(n.getPublisherId()==e)return n}return null},Di:function(){for(var e=[],t=0;t<f.length;++t){var n=f[t];e.push(n.getPublisherId())}return e},getPublisherConfigurations:function(){return f},getPartnerConfigurations:function(){return h},getLabelOrder:function(){return x},setLabelOrder:function(e){e instanceof Array&&(x=H.h(e),M($.LABEL_ORDER))},Ci:function(){return l},setLiveEndpointUrl:function(e){s||(l=e+"")},Li:function(){return p},setOfflineFlushEndpointUrl:function(e){s||(p=e)},F:function(){return g},setApplicationName:function(e){s||(g=e)},setApplicationVersion:function(e){s||(m=e)},B:function(){return m},Ti:function(){return re.tn()},setPersistentLabel:function(e,t){q.Wn(c,e,t)&&M($.PERSISTENT_LABELS)},removeAllPersistentLabels:function(){c={},M($.PERSISTENT_LABELS)},removePersistentLabel:function(e){delete c[e],M($.PERSISTENT_LABELS)},getPersistentLabels:function(){return c},getPersistentLabel:function(e){return c[e]},containsPersistentLabel:function(e){return null!=c[e]},addPersistentLabels:function(e){q.Fn(c,e),M($.PERSISTENT_LABELS)},setStartLabel:function(e,t){q.Wn(n,e,t)&&M($.START_LABELS)},removeAllStartLabels:function(){n={},M($.START_LABELS)},removeStartLabel:function(e){delete n[e],M($.START_LABELS)},addStartLabels:function(e){q.Fn(n,e),M($.START_LABELS)},getStartLabels:function(){return n},Ni:function(e){return n[e]},containsStartLabel:function(e){return null!=n[e]},isKeepAliveMeasurementEnabled:function(){return u},isSecureTransmissionEnabled:function(){return a},isHttpRedirectCachingEnabled:function(){return o},setLiveTransmissionMode:function(e){e&&(i=e,M($.LIVE_TRANSMISSION_MODE))},Oi:function(){return i},enableImplementationValidationMode:function(){s||(t=!0)},Ri:function(){return t},setOfflineCacheMode:function(e){e&&(d=e,M($.OFFLINE_CACHE_MODE))},ki:function(){return d},setUsagePropertiesAutoUpdateMode:function(e){!e||s||(w=e)},Jt:function(){return w},setUsagePropertiesAutoUpdateInterval:function(e){s||(E=e)},getUsagePropertiesAutoUpdateInterval:function(){return E},setCacheMaxMeasurements:function(e){s||(A=e)},Mi:function(){return A},setCacheMaxFlushesInARow:function(e){s||(P=e)},Ui:function(){return P},setCacheMinutesToRetry:function(e){s||(b=e)},xi:function(){return b},setCacheMeasurementExpiry:function(e){s||(S=e)},Wi:function(){return S},isEnabled:function(){return e},Fi:function(){return s},disable:function(){e&&(e=!1,M($.DISABLE))},disableTcfIntegration:function(){_&&(_=!1,M($.Qt))},removeListener:function(e){K.Nn(e)&&-1!=(e=C.indexOf(e))&&C.splice(e,1)},Bi:function(){return L.getPublisherConfiguration("21193409")},setDebugEnabled:function(e){s||(V=e)},Vi:function(){return V},setSystemClockJumpDetectionEnabled:function(e){s||(I=e)},vi:function(){return I},setSystemClockJumpDetectionInterval:function(e){s||(e=100*Math.floor(e/100),D=e)},setSystemClockJumpDetectionAlternativeContextInterval:function(e){s||(e=100*Math.floor(e/100),k=e)},_i:function(){return D},pi:function(){return k},setSystemClockJumpDetectionPrecision:function(e){s||(e=100*Math.floor(e/100),N=e)},hi:function(){return N},setStorageWriteInterval:function(e){0!=B&&(e<Q.qi||e>Q.Gi)||(U=!0,B=e)},ji:function(){return U?B:re.M},addIncludedPublisher:function(e){-1==y.indexOf(e)&&y.push(e)},getIncludedPublishers:function(){return y},addCrossPublisherUniqueDeviceIdChangeListener:function(e){K.Nn(e)&&-1===v.indexOf(e)&&v.push(e)},removeCrossPublisherUniqueDeviceIdChangeListener:function(e){e=v.indexOf(e);-1!==e&&v.splice(e,1)},Ut:function(e){if("string"==typeof e)for(var t=0;t<v.length;t++)v[t](e)},enableChildDirectedApplicationMode:function(){s||(O=!0)},Nt:function(){return O},Hi:null}),r=s=R=!(e=!0),b=W.Ki,A=W.Ji,P=W.Yi,S=W.Xi,w=X.si,E=X.ai,c={},n={},x=z.At,y=[],T=new ee({publisherId:"21193409"}),i=z.Pt,d=J.ENABLED,u=T.isKeepAliveMeasurementEnabled(),C=[],v=[],h=[],V=!(_=!(t=!(o=!(a=!(f=[]))))),I=ie.ENABLED,k=D=-1,N=ie.Si,O=!1,B=Q.zi,U=!1,m=g=ae,F=new Z(L),L.Hi=F}oe.ee="21193409",e.exports=oe},function(e,t,n){var r=n(0),_=n(20),g=n(57),m=n(24),C=n(80),v=n(23),y=n(2).mn,A=n(9),P=n(11);function i(c,t){var u=this;var l=!1,d=[],p=null,f=c.get(P.qn,0),h=0,e=t.getCache();if(null!=e)try{var n=JSON.parse(e);n instanceof Array&&(d=n)}catch(e){}r.extend(u,{he:function(){y.O&&c.put(P.qn,f)},Zi:function(){var e;y.O&&(e=JSON.stringify(d),t.storeCache(e))},onSuccess:function(){l=!1,p=null,f=0,u.Zi()},onFailure:function(){l=!1,d=p.concat(d),p=null,u.Zi()},nr:function(e,t){y.O&&t.ki()!=m.DISABLED&&(d.length<=t.Mi()?d.push(e.getLabels()):f++)},tr:function(e){if(y.O){for(var t=[],n=0;n<e.length;++n)t.push(e[n].getLabels());d=t.concat(d)}},flush:function(e,t){if(!(!y.O||(t=t,r=(n=e).ki(),s=y.in(),r==m.DISABLED)||r==m.MANUAL_FLUSH&&!t||r==m.LAN&&(s==A.WWAN||s==A.BLUETOOTH||s==A.DISCONNECTED)||(r=60*(t=n).xi()*1e3,t.Ui()<(h=+new Date-c.get(P.Gn,-1)>r?0:h))||0==d.length||l)){l=!0;for(var n=(s=e).Li(),t,r=((t={}).c2=s.getPublisherConfigurations()[0].getPublisherId(),"JetportGotAMaskOfThe"+s.getPublisherConfigurations()[0].getPublisherSecret()+"S.D_K-"),r=v(r),r=(t.s=r,_.We(n,t,s.getLabelOrder())),n=s,i=+new Date-24*n.Wi()*60*60*1e3,a=0;a<d.length;){var o=d[a];parseInt(o.ns_ts)<i?(d.splice(a,1),f++):a++}p=d,d=[],h++,t=g.Qi(s,p,f),new C(r,t,u,s).$i()}var n,r,s},er:function(){return d.length},jt:function(){d=[]}})}i.Xi=31,i.Ji=2e3,i.bi="http://udm.scorecardresearch.com/offline",i.Ii="https://udm.scorecardresearch.com/offline",i.Yi=10,i.Ki=30,e.exports=i},function(e,t){t.ir=function(e,t){var n;"undefined"!=typeof atv&&"undefined"!=typeof XMLHttpRequest?((n=new XMLHttpRequest).open("GET",e,!0),n.onreadystatechange=function(){4==n.readyState&&(t&&t(n.status),n=null)},n.send()):"undefined"!=typeof atv&&"function"==typeof atv.setTimeout?t&&atv.setTimeout(t,0):t&&t()},t.rr=function(e,t,n){var r;"undefined"!=typeof atv&&"undefined"!=typeof XMLHttpRequest?((r=new XMLHttpRequest).open("POST",e,!0),r.onreadystatechange=function(){4===r.readyState&&(n&&n(r.status),r=null)},r.send(t)):"undefined"!=typeof atv&&"function"==typeof atv.setTimeout?n&&atv.setTimeout(n,0):n&&n()}},function(e,t){t.or=function(e,t){"undefined"!=typeof WinJS&&void 0!==WinJS.xhr?WinJS.xhr({url:e}).then(function(e){t&&t(e.status)},function(){t&&t()}):"function"==typeof setTimeout?t&&setTimeout(t,0):t&&t()},t.ur=function(e,t,n){"undefined"!=typeof WinJS&&void 0!==WinJS.xhr?WinJS.xhr({type:"post",url:e,data:t,headers:{"Content-type":"application/xml"}}).then(function(e){n&&n(e.status)},function(){n&&n()}):"function"==typeof setTimeout?n&&setTimeout(n,0):n&&n()}},function(e,t,n){var r=n(18),i=[],a=!1;function o(){for(var e=0;e<i.length;++e)i[e]()}e.exports={sr:function(e){i.push(e),a||r.ht()&&(window.addEventListener?(window.addEventListener("unload",o,!1),a=!0):window.attachEvent&&(window.attachEvent("onunload",o),a=!0))},ar:function(e){for(var t=0;t<i.length;++t)if(i[t]==e){i.splice(t,1);break}0==i.length&&r.ht()&&(window.removeEventListener?(window.removeEventListener("unload",o,!1),a=!1):window.detachEvent&&(window.detachEvent("onunload",o),a=!1))}}},function(e,t,n){var r=n(0),i=n(5),a=n(4),o=n(18),s=n(3),c=n(13),u=n(6).Un,l=n(6).xn,d=n(8),p=n(12),f=n(10),h=n(36),_="undefined"!=typeof document&&document||void 0,g=s.Sn,m=s.wn,n=r.extend({},i,{D:"html5",T:function(){return("undefined"!=typeof Image?c:u).apply(this,arguments)},N:l,Storage:d,R:f,k:p,O:!0,M:6e4,F:function(){return _&&a.Cn(_.title)&&_.title||g},V:function(){return this.j()+ +new Date+~~(1e3*Math.random())},G:function(){return"72"},j:function(){return"undefined"!=typeof window&&a.Cn(window.navigator)&&a.Dn(window.navigator.platform,"")||""},H:function(){return a.Dn(o.Ne()+" "+o.Oe(),"")},J:function(){return"html"},Y:function(){return"5"},X:function(){"undefined"!=typeof window&&window.screen&&window.screen.width&&(e=window.screen.width),"undefined"!=typeof window&&window.screen&&window.screen.width&&(t=window.screen.height);var e,t,n=1;return"undefined"!=typeof window&&window.devicePixelRatio&&(n=window.devicePixelRatio),0<e&&0<t?(e*=n)+"x"+t*n:m},Z:function(){"undefined"!=typeof window&&window.innerWidth&&(e=window.innerWidth),"undefined"!=typeof window&&window.innerHeight&&(t=window.innerHeight);var e,t,n=1;return"undefined"!=typeof window&&window.devicePixelRatio&&(n=window.devicePixelRatio),0<e&&0<t?(e*=n)+"x"+t*n:m},nn:function(){return"undefined"!=typeof window&&a.Cn(window.navigator)&&a.Dn(window.navigator.language,"")||g},vn:function(e){h.sr(e)},_n:function(e){h.ar(e)}});e.exports=n},function(e,t,n){var l=n(0),d=n(2).mn,p=n(81);function r(t){var n,r,i,a,o,s;function c(){i&&(i=!1,n.storeProperties(r)),o&&(o=!1,n.storeCache(a))}function u(){var e;-1==s&&(0==(e=t.ji())?c():s=d.setTimeout(function(){s=-1,c()},e))}l.extend(this,{storeProperties:function(e){r=e,i=!0,u()},getProperties:function(){return i?r:n.getProperties()},storeCache:function(e){a=e,o=!0,u(),n.storeCache(e)},getCache:function(){return o?a:n.getCache()}}),n="function"==typeof d.Storage?new d.Storage(t):new p,a=r="",o=i=!1,s=-1}r.qi=6e4,r.Gi=3e5,r.zi=0,e.exports=r},function(e,t,n){var a=n(0),o=n(40);e.exports=function(n){var e,t,r;function i(e,t){return n&&null!=n[e]?n[e]:t}e=new o(n=n||{}),a.extend(this,e),a.extend(this,{getPartnerId:function(){return t},getExternalClientId:function(){return r}}),t=i("partnerId",""),r=i("externalClientId","")}},function(e,t,n){var s=n(0),c=n(7),u=n(15),l=n(41);e.exports=function(n){var t,r,e,i,a;function o(e,t){return n&&null!=n[e]?n[e]:t}s.extend(this,{addPersistentLabels:function(e){c.Fn(r,e)},setPersistentLabel:function(e,t){c.Wn(r,e,t)},removeAllPersistentLabels:function(){r={}},removePersistentLabel:function(e){delete r[e]},getStartLabels:function(){return t},getPersistentLabels:function(){return r},containsPersistentLabel:function(e){return null!=r[e]},containsStartLabel:function(e){return null!=t[e]},getPersistentLabel:function(e){return r[e]},isKeepAliveMeasurementEnabled:function(){return e},isSecureTransmissionEnabled:function(){return i},isHttpRedirectCachingEnabled:function(){return a}}),e=l.ENABLED,i=u.Et,a=u.bt,r={},t=o("startLabels",t={}),r=o("persistentLabels",r),e=o("keepAliveMeasurement",e),i=o("secureTransmission",i),a=o("httpRedirectCaching",a)}},function(e,t,n){var s=n(0),c=n(2).mn,u=n(11);function r(n){var t,r,i=this,a=!0,o=!1;s.extend(i,{start:function(e){i.stop(),a&&(o=!0,t=c.setTimeout(function(){var e,t;a&&(e=n.get(u.Gn,0),t=+new Date-e,0<e)&&86399e3<t&&r&&r.me(),o&&(0==(e=n.get(u.Gn,0))?i.start(3e3):(t=864e5-(+new Date-e),i.start(t)))},e))},stop:function(){o&&(o=!1,c.clearTimeout(t),t=null)},Yt:function(e){a=e},Ht:function(e){r=e}})}r.ENABLED=!0,r.Ie=3e3,e.exports=r},function(e,t,n){var c=n(0),u=n(40),l=n(43);e.exports=function t(n){var e,r,i,a,o;function s(e,t){return n&&null!=n[e]?n[e]:t}n=c.h(n||{}),r=s("publisherId",void 0),o=s("publisherUniqueDeviceIdListener"),i=l.cr(r),a=null,e=new u(n),c.extend(this,e),c.extend(this,{getPublisherId:function(){return r},getPublisherSecret:function(){return i},getPublisherUniqueDeviceId:function(){return a},setPublisherUniqueDeviceId:function(e){a=e,"function"==typeof o&&o(e)},copy:function(e){return new t(e=c.extend(n,e))}})}},function(e,t,n){var c=n(0),u=n(2).mn,l=n(11),d=n(23),p=n(83);function r(t,r){var n=null,i=null,a=!0,o=!1,s={};c.extend(this,{Ot:function(){var e="",e=(r.$t()?e=(u.W()||"null").split(" "):r.Zt(),e[0]&&"null"!=e[0]?e[0]:null);null==e?s={xt:i=n=null,Rt:!1,Mt:a}:(i||(n=t.get(l.Jn,null),i=t.get(l.Yn,null)),i?"none"==e&&"none"==i||!a&&"none"==i||"none"!=e&&d(e)==n||(o=!0,i=a&&"none"!=e?(n=d(e),p(e)):(n=null,"none"),t.put(l.Yn,i),null==n?t.remove(l.Jn):t.put(l.Jn,n)):(i="none"==e?(n=null,"none"):(n=d(e),p(e)),t.put(l.Yn,i),null==n?t.remove(l.Jn):t.put(l.Jn,n)),a=!(s={xt:i,Rt:o,Mt:a}))},kt:function(){return s},he:function(){},ne:function(e){var t,n=r.$t()?(t=u.V(),u.G()):(r.Zt(),t=+new Date+~~(1e3*Math.random()),72);return d(t+e)+"-cs"+n}})}r.cr=function(e){return d("zutphen2011comScore@"+e)},e.exports=r},function(e,t,n){var r=n(0);e.exports=function(){var t,n={};r.extend(this,{lr:function(e){return null!=n[e]},dr:function(e){return n[e]},addLabels:function(e){r.extend(n,e)},setLabel:function(e,t){n[e]=t+""},vr:function(){return"start"==n.ns_ap_ev},getLabels:function(){return n},setLiveEndpointUrl:function(e){t=e},Ci:function(){return t}})}},function(e,t,n){var s=n(1).I,c=n(0),u=n(16);function r(t){var e,n,r,i=this;function a(){var e=new u(s.KEEPALIVE);t.pr()._r(e),i.start()}function o(){null!=r&&(t.pr().hr().clearTimeout(r),r=null)}c.extend(i,{start:function(){e&&(o(),r=t.pr().hr().setTimeout(a,n))},stop:function(){e&&o()}}),e=t.getConfiguration().gr,n=t.getConfiguration().mr}r.yr=12e5,r.Sr=6e4,r.ENABLED=!0,e.exports=r},function(e,t,n){var l=n(0);function r(t){var n,a,r,i,e,o,s=this;function c(){e++,i=0,s.resume(),t.pr().wr()}function u(){null!=r&&(t.pr().hr().clearTimeout(r),r=null)}l.extend(this,{br:function(){return e},Ir:function(e){var t=0;if(null!=a)for(var n=0;n<a.length;n++){var r=a[n],i=r.Er;if(!i||e<i){t=r.interval;break}}return t},resume:function(){var e;n&&(u(),0<(e=s.Ir(t.Dr().Ar().Pr()+(+new Date-t.Dr().Ar().Cr())))&&(e=0<i?i:e,o=+new Date+e,r=t.pr().hr().setTimeout(c,e)),i=0)},pause:function(){var e;n&&(u(),e=s.Ir(t.Dr().Ar().Pr()+(+new Date-t.Dr().Ar().Cr())),i=e-(t.Dr().Ar().Pr()+(+new Date-t.Dr().Ar().Cr()))%e)},reset:function(){n&&(u(),e=i=0)},Lr:function(e){return null==r?-1:o-e}}),e=i=0,n=t.getConfiguration().Tr,a=l.h(t.getConfiguration().Nr)}r.ENABLED=!0,r.Or=[{Er:6e4,interval:1e4},{Er:null,interval:6e4}],r.Rr=function(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;++n){var r=e[n],i=t[n];if(r.Er!=i.Er)return!1;if(r.interval!=i.interval)return!1}return!0},e.exports=r},function(e,t,n){var R=n(0),x=n(4),V=n(14),U=n(48),F=n(49).kr,j=n(1).P,G=n(1).I,Y=n(3),H=n(50),q=H.AdvertisementType,K=n(31),W=n(53),J=n(113),z=n(16);function r(l){var d,p,f,n,r,i,a,t,h,o,s,_,c,u,g,m,C,v,y,A,P,b,S,w,E,T,I,D,k,N,O,B,e,L,M=this;R.extend(this,{Mr:function(){var e=p,t=new K,n=W.wt(t);p=new W(l,t,n),W.Mr(e,p)},addLabels:function(e){null!=e&&R.extend(t,e)},getLabels:function(){return t},setLabel:function(e,t){var n={};n[e]=t,M.addLabels(n)},dr:function(e){return t[e]},Ar:function(){return p},Fn:function(e,t){e.ns_st_pa=r+(isNaN(i)?0:t-i)+"",e.ns_st_pp=C+"",e.ns_st_sp=v+"",e.ns_st_bp=y+"",c||(e.ns_st_pb="1"),p.Ur()&&(e.ns_st_ppc=u+"",e.ns_st_dppc=u-g+"",e.ns_st_psq=m+""),e.ns_st_sc=P+"",R.extend(e,a)},xr:function(){v++},Wr:function(){C++},Fr:function(e){var t;isNaN(i)||(t=M.Pr(),t+=e-i,M.Br(t),i=NaN)},Vr:function(e){var t;isNaN(n)||(t=M.qr(),t+=e-n,M.Gr(t),n=NaN)},qr:function(){return y},Gr:function(e){y=e},Pr:function(){return r},jr:function(e){n=e},Hr:function(){return n},Br:function(e){r=e},Kr:function(e){i=e},Cr:function(){return i},Jr:function(){return C},Yr:function(e){C=e},Xr:function(){return s},zr:function(e,t,n){var r;p.Qr(p.$r()),p.Zr(p.no()),!D||e!=j.IDLE&&e!=j.PLAYBACK_NOT_STARTED&&e!=j.BUFFERING_BEFORE_PLAYBACK&&e!=j.SEEKING_BEFORE_PLAYBACK&&t!=j.PLAYING?r=e==j.IDLE?(t=d.to(),!(U.eo(p.dr("ns_st_ad"))||k&&1==E)&&o[p.io()]&&t&&t.io()==p.io()?p.ro():0):e==j.PLAYING?p.oo(n):p.ro():(r=T,D=!1),p.uo(r),p.so(n)},ao:function(e,t,n){var r=p.fo();p.Qr(p.$r()),p.Zr(p.no()),t=p.co()?e==j.IDLE||e==j.BUFFERING_BEFORE_PLAYBACK||e==j.SEEKING_BEFORE_PLAYBACK||e==j.PLAYBACK_NOT_STARTED||t==j.PLAYING?(r=N?(N=!1,I):p.lo(n),p.do(n,r)):e==j.PLAYING?(r=p.vo(n),p._o(n)):(r=p.lo(n),p.do(n,r)):(N&&(N=!1,r=I),p.po()-r),p.uo(t),p.so(n),p.ho(r),p.mo(n)},yo:function(){var e=d.to(),e=U.eo(p.dr("ns_st_ad"))?1:k?E:o[p.io()]&&o[p.io()]&&e&&e.io()==p.io()?p.So()?p.wo():p.wo()+1:1;p.bo(e),k=!1},Io:function(){d.Eo(p),f&&d.Eo(f);var e,t=p.Po();_<t&&(_=t),U.eo(p.dr("ns_st_ad"))&&(t=V.wt(p.getLabels(),F),e=parseInt(p.dr("ns_st_an")),(null==S[t]||S[t]<e)&&(S[t]=e),w[p.io()]=B,p.lr("ns_st_rcn"))&&(t=parseInt(p.dr("ns_st_rcn")),_<t)&&(_=t),h&&(M.xr(),M.Ao(0),h=!1),s=!0},Do:function(){o[p.io()]=!0,U.eo(p.dr("ns_st_ad"))||(1==p.wo()?O[p.io()]=1:(null==O[p.io()]&&(O[p.io()]=0),O[p.io()]++));for(var e=0;e<b.length;++e)b[e]()},Co:function(e){b.push(e)},Lo:function(){return u},To:function(){u++},No:function(e){c=e},Ao:function(e){m=e},Oo:function(){m++},Ro:function(){return a.ns_st_id},ko:function(e){e<0||(a.ns_st_ca=e+"")},Mo:function(e){e<1||(a.ns_st_cp=e+"")},setMediaPlayerName:function(e){e&&(a.ns_st_mp=e+"")},setMediaPlayerVersion:function(e){e&&(a.ns_st_mv=e+"")},setImplementationId:function(e){e&&(a.cs_impid=e+"")},loopPlaybackSession:function(){for(var e in o){var t;o.hasOwnProperty(e)&&((t=d.Ar(e))&&(t.Qr(0),t.Uo(0),t.xo(!1),t.setDvrWindowLength(0),t.ho(0)),o[e]=!1)}M.startFromSegment(1),p.Wo(!0),h=!0},startFromSegment:function(e){E=e,k=!0},startFromPosition:function(e){T=e,D=!0},startFromDvrWindowOffset:function(e){I=e,N=!0},Fo:function(e){p.Ur()&&(g=parseInt(e.ns_st_ppc)),A=!1},Bo:function(e){var t,n,r,i,a,o,s,c,u;l.qo().Vo("setMetadata",e),e&&(e instanceof K||e instanceof H)?(t=e.getMetadataLabels(),l.qo().Go("Passed labels:",t),U.eo(t.ns_st_ad)&&(null==t.ns_st_bn&&((u=null!=(u=t.ns_st_ct)?u.slice(2):null)==q.ON_DEMAND_PRE_ROLL||u==q.BRANDED_ON_DEMAND_PRE_ROLL||u==q.ON_DEMAND_POST_ROLL||u==q.BRANDED_ON_DEMAND_POST_ROLL?t.ns_st_bn="1":u!=q.ON_DEMAND_MID_ROLL&&u!=q.BRANDED_ON_DEMAND_MID_ROLL||(u="",(u=e instanceof H&&e.getRelatedContentMetadata()?W.wt(e.getRelatedContentMetadata().getMetadataLabels()):u)&&null!=O[u]?t.ns_st_bn=O[u]:t.ns_st_bn="1")),null==t.ns_st_an&&(u=V.wt(t,F),c=1,null!=S[u]&&(c=S[u]+1),t.ns_st_an=c+""),null==t.ns_st_rcn)&&(u="",u=(u=e instanceof H&&e.getRelatedContentMetadata()?W.wt(e.getRelatedContentMetadata().getMetadataLabels()):u)?d.jo(u)?d.Ar(u).Po():null==t.ns_st_cn?_+2:parseInt(t.ns_st_cn)+1:0,t.ns_st_rcn=u+""),c=W.wt(t),n="",e instanceof H&&e.getRelatedContentMetadata()&&(n=W.wt(e.getRelatedContentMetadata().getMetadataLabels())),c!=(r=p).io()||k||D||h||null!=t.ns_st_pn?((a=l.Xo().Yo())!=j.IDLE&&(l.qo().Go("Ending the current Clip. It was in state:",V.yt(a)),(s=new z(G.END)).Lt.ns_st_ae="1",l.pr().zo(s)),d.jo(c)?((i=d.Ar(c)).Qo(),i.Ho(),i.Ko(),i.addLabels(t)):(i=new W(l,t,c),null==t.ns_st_cn?i.$o(_+1):i.$o(parseInt(t.ns_st_cn))),e instanceof H&&e.getRelatedContentMetadata()?(s=e.getRelatedContentMetadata().getMetadataLabels(),c=W.wt(s),d.jo(c)?f=d.Ar(c):(f=new W(l,s,c)).$o(i.Po()+1)):f=null,U.eo(i.dr("ns_st_ad"))&&(o=!n||!d.jo(n)||(o=null!=(o=i.dr("ns_st_ct"))?o.slice(2):null)==q.ON_DEMAND_PRE_ROLL||o==q.BRANDED_ON_DEMAND_PRE_ROLL?0:d.Ar(n).$r(),i.Zo("ns_st_cpo",o+"")),M.Jo(e,i),h&&i.Wo(!0),p=i,B=n,A||P++,A=!0,l.getConfiguration().nu&&(a==j.PLAYING?(l.qo().Go("Resuming the new Asset."),(o=new z(G.PLAY)).Lt.ns_st_ae="1",l.pr().zo(o)):a!=j.BUFFERING_DURING_PLAYBACK&&a!=j.PAUSED_DURING_BUFFERING||(l.qo().Go("Starting buffering the new Asset."),l.pr().zo(new z(G.BUFFER)),l.pr().tu()))):(l.qo().Go("Updating existing asset labels with the newly provided ones:",t),r.Ho(),r.Ko(),r.addLabels(t),M.Jo(e,r))):l.qo().Go("Ignoring API call. An AssetMetadata object was expected and received instead:",e)},Jo:function(e,t){if(e instanceof H){var n,r,i,a,o=e.getStacks(),s=e.getRelatedContentMetadata()?e.getRelatedContentMetadata().getStacks():null,c=[];for(n in o)o.hasOwnProperty(n)&&(i=o[n],r=s&&s[n]||null,c.push(n),i=i.getMetadataLabels(r),t.eu(n,i));if(s)for(var u in s)s.hasOwnProperty(u)&&-1==c.indexOf(u)&&(a=s[u],t.eu(u,a.getMetadataLabels()))}else{var l,d,p=e.getStacks();for(l in p)p.hasOwnProperty(l)&&(d=p[l],t.eu(l,d.getMetadataLabels()))}}}),d=new J,e=(new K).getMetadataLabels(),L=W.wt(e),p=new W(l,e,L),f=null,(a={}).ns_st_id=x.uuid(),a.ns_st_mp=Y.Sn,a.ns_st_mv=Y.Sn,h=!(t={}),i=n=NaN,c=s=!(o={}),A=!(y=m=C=g=u=_=r=0),b=[],S={},w={},I=T=0,N=k=D=!(E=-(P=v=1)),O={},B=null}r.iu=function(e,t,n){for(var r=t.Ar(),i=t.getLabels(),a={},o=0;n&&o<n.length;o++)i.hasOwnProperty(n[o])&&(a[n[o]]=i[n[o]]);e.Dr().addLabels(a),W.Mr(r,e.Dr().Ar(),n)},r.ru=!0,e.exports=r},function(e,t){var n={eo:function(e,t){return t=t||!1,e?"0"!=e:t},ou:function(e,t){return null==e||isNaN(e)?t||0:parseInt(e)},uu:function(e,t){var n=Number(e);return null==e||isNaN(n)?t||0:n},toString:function(e){if(void 0===e)return"undefined";if("string"==typeof e)return e;if(e instanceof Array)return e.join(",");var t,n="";for(t in e)e.hasOwnProperty(t)&&(n+=t+":"+e[t]+";");return n||e.toString()}};e.exports.eo=n.eo,e.exports.ou=n.ou,e.exports.uu=n.uu,e.exports.toString=n.toString},function(e,t){e.exports={su:["ns_st_ci","ns_st_pu","ns_st_pr","ns_st_sn","ns_st_en","ns_st_ep","ns_st_st","ns_st_ty","ns_st_ct","ns_st_li","ns_st_ad","ns_st_bn","ns_st_tb","ns_st_an","ns_st_ta","c3","c4","c6","ns_st_tpr","ns_st_tep","ns_st_stc","ns_st_sta","ns_st_amg","ns_st_ami","ns_st_amt","ns_st_dt","ns_st_tm","ns_st_ddt","ns_st_dtm","ns_st_tdt","ns_st_ttm"],kr:["ns_st_ci","ns_st_pu","ns_st_pr","ns_st_sn","ns_st_en","ns_st_ep","ns_st_st","ns_st_ty","ns_st_ct","ns_st_li","ns_st_ad","ns_st_bn","ns_st_tb","ns_st_ta","c3","c4","c6","ns_st_tpr","ns_st_tep","ns_st_stc","ns_st_sta","ns_st_dt","ns_st_tm","ns_st_ddt","ns_st_dtm","ns_st_tdt","ns_st_ttm"]}},function(e,t,n){var u=n(0),l=n(7),d=n(51),p=n(31);function r(){var r,n,t,i,a,o=this,e=new d,s=["ns_st_ct","ns_st_li","ns_st_ty","ns_st_cl","ns_st_fee","ns_st_cs","ns_st_cu"];function c(e,t){l.Wn(a,e,t)}r=null,i=!(n={}),a={},c("ns_st_li","0"),c("ns_st_ty","video"),c("ns_st_ad","1"),c("ns_st_tp","1"),u.extend(o,e),u.extend(o,{setRelatedContentMetadata:function(e){e instanceof p||(e=null),r=e},getRelatedContentMetadata:function(){return r},setMediaType:function(e){null!=e&&(c("ns_st_ct",(i?"aa":"va")+(t=e)),e="1",t==f.ON_DEMAND_PRE_ROLL||t==f.BRANDED_ON_DEMAND_PRE_ROLL?e="pre-roll":t==f.ON_DEMAND_MID_ROLL||t==f.BRANDED_ON_DEMAND_MID_ROLL?e="mid-roll":t!=f.ON_DEMAND_POST_ROLL&&t!=f.BRANDED_ON_DEMAND_POST_ROLL||(e="post-roll"),c("ns_st_ad",e),c("ns_st_li",t==f.LIVE||t==f.BRANDED_DURING_LIVE?"1":"0"))},classifyAsAudioStream:function(e){i=e=null==e?!0:e,null==t?delete a.ns_st_ct:c("ns_st_ct",(i?"aa":"va")+t),c("ns_st_ty",i?"audio":"video")},setVideoDimensions:function(e,t){c("ns_st_cs",(e=e||0)+"x"+(t=t||0))},setLength:function(e){c("ns_st_cl",e)},setBreakNumber:function(e){c("ns_st_bn",e)},setTotalBreaks:function(e){c("ns_st_tb",e)},setNumberInBreak:function(e){c("ns_st_an",e)},setTotalInBreak:function(e){c("ns_st_ta",e)},setClipUrl:function(e){c("ns_st_cu",e)},setServer:function(e){c("ns_st_ams",e)},setCallToActionUrl:function(e){c("ns_st_amc",e)},setDeliveryType:function(e){c("ns_st_amd",e)},setOwner:function(e){c("ns_st_amo",e)},setStack:function(e,t){n[e]=t},getStacks:function(){return n},getStandardLabels:function(){return u.extend({},e.getStandardLabels(),a)},getMetadataLabels:function(){var e={};if(r){var t,n=r.getStandardLabels();for(t in n)n.hasOwnProperty(t)&&-1==s.indexOf(t)&&(e[t]=n[t])}return u.extend(e,o.getStandardLabels(),r?r.getCustomLabels():null,o.getCustomLabels())}})}var f={ON_DEMAND_PRE_ROLL:"11",ON_DEMAND_MID_ROLL:"12",ON_DEMAND_POST_ROLL:"13",LIVE:"21",BRANDED_ON_DEMAND_PRE_ROLL:"31",BRANDED_ON_DEMAND_MID_ROLL:"32",BRANDED_ON_DEMAND_POST_ROLL:"33",BRANDED_AS_CONTENT:"34",BRANDED_DURING_LIVE:"35",OTHER:"00"};r.AdvertisementType=f,r.AdvertisementDeliveryType={NATIONAL:"national",LOCAL:"local",SYNDICATION:"syndication"},r.AdvertisementOwner={DISTRIBUTOR:"distributor",ORIGINATOR:"originator",MULTIPLE:"mp",NONE:"none"},e.exports=r},function(e,t,n){var i=n(0),a=n(7),o=n(14);e.exports=function(){var n,t;function r(e,t){a.Wn(n,e,t)}n={},t={},i.extend(this,{setFee:function(e){r("ns_st_fee",e)},setUniqueId:function(e){r("ns_st_ami",e)},setTitle:function(e){r("ns_st_amt",e)},setServerCampaignId:function(e){r("ns_st_amg",e)},setPlacementId:function(e){r("ns_st_amp",e)},setSiteId:function(e){r("ns_st_amw",e)},addCustomLabels:function(e){t=o._t(e="object"!=typeof e?{}:e)},getCustomLabels:function(){return t},getStandardLabels:function(){return n},getMetadataLabels:function(){return i.extend({},n,t)}})}},function(e,t,n){var i=n(0),a=n(7),o=n(14),r=n(112);function s(){var n,t;function r(e,t){a.Wn(n,e,t)}n={},t={},i.extend(this,{setUniqueId:function(e){r("ns_st_ci",e)},setPublisherName:function(e){r("ns_st_pu",e)},setProgramTitle:function(e){r("ns_st_pr",e)},setEpisodeTitle:function(e){r("ns_st_ep",e)},setEpisodeSeasonNumber:function(e){r("ns_st_sn",e)},setEpisodeNumber:function(e){r("ns_st_en",e)},setGenreName:function(e){r("ns_st_ge",e)},setGenreId:function(e){r("ns_st_tge",e)},setDateOfProduction:function(e,t,n){r("ns_st_dt",c(e,t,n))},setTimeOfProduction:function(e,t){r("ns_st_tm",u(e,t))},setDateOfDigitalAiring:function(e,t,n){r("ns_st_ddt",c(e,t,n))},setTimeOfDigitalAiring:function(e,t){r("ns_st_dtm",u(e,t))},setDateOfTvAiring:function(e,t,n){r("ns_st_tdt",c(e,t,n))},setTimeOfTvAiring:function(e,t){r("ns_st_ttm",u(e,t))},setStationTitle:function(e){r("ns_st_st",e)},setStationCode:function(e){r("ns_st_stc",e)},setProgramId:function(e){r("ns_st_tpr",e)},setEpisodeId:function(e){r("ns_st_tep",e)},setFee:function(e){r("ns_st_fee",e)},setPlaylistTitle:function(e){r("ns_st_pl",e)},setNetworkAffiliate:function(e){r("ns_st_sta",e)},setDeliveryMode:function(e){r("ns_st_cde",e)},setDeliverySubscriptionType:function(e){r("ns_st_cds",e)},setDeliveryComposition:function(e){r("ns_st_cdc",e)},setDeliveryAdvertisementCapability:function(e){r("ns_st_cda",e)},setDistributionModel:function(e){r("ns_st_cdm",e)},setMediaFormat:function(e){r("ns_st_cmt",e)},setDictionaryClassificationC3:function(e){r("c3",e)},setDictionaryClassificationC4:function(e){r("c4",e)},setDictionaryClassificationC6:function(e){r("c6",e)},addCustomLabels:function(e){t=o._t(e="object"!=typeof e?{}:e)},getStandardLabels:function(){return n},getCustomLabels:function(){return t},getMetadataLabels:function(){return i.extend({},n,t)}})}function c(e,t,n){return r.au(4,e)+"-"+r.au(2,t)+"-"+r.au(2,n)}function u(e,t){return r.au(2,e)+":"+r.au(2,t)}s.ContentDeliveryMode={LINEAR:"linear",ON_DEMAND:"ondemand"},s.ContentDeliverySubscriptionType={TRADITIONAL_MVPD:"mvpd_auth",VIRTUAL_MVPD:"virtualmvpd",SUBSCRIPTION:"svod",ADVERTISING:"avod",TRANSACTIONAL:"tvod",PREMIUM:"pvod"},s.ContentDeliveryComposition={CLEAN:"clean",EMBED:"embedded"},s.ContentDeliveryAdvertisementCapability={NONE:"none",DYNAMIC_LOAD:"dai",DYNAMIC_REPLACEMENT:"dar",LINEAR_1DAY:"lai-c1",LINEAR_2DAY:"lai-c2",LINEAR_3DAY:"lai-c3",LINEAR_4DAY:"lai-c4",LINEAR_5DAY:"lai-c5",LINEAR_6DAY:"lai-c6",LINEAR_7DAY:"lai-c7"},s.ContentDistributionModel={TV_AND_ONLINE:"to",EXCLUSIVELY_ONLINE:"eo"},s.ContentMediaFormat={FULL_CONTENT_GENERIC:"fc",FULL_CONTENT_EPISODE:"fc01",FULL_CONTENT_MOVIE:"fc02",FULL_CONTENT_PODCAST:"fc03",PARTIAL_CONTENT_GENERIC:"pc",PARTIAL_CONTENT_EPISODE:"pc01",PARTIAL_CONTENT_MOVIE:"pc02",PARTIAL_CONTENT_PODCAST:"pc03",PREVIEW_GENERIC:"pv",PREVIEW_EPISODE:"pv01",PREVIEW_MOVIE:"pv02",EXTRA_GENERIC:"ec",EXTRA_EPISODE:"ec01",EXTRA_MOVIE:"ec02"},e.exports=s},function(e,t,n){var ke=n(0),Ne=n(14),r=n(49).su;function i(t,e,c){e=e||{},c=c||"";var f,u,h,n,r,j,d,_,g,m,G,C,p,v,y,Y,H,q,A,i,P,K,W,J,z,X,b,S,w,E,Q,$,Z,ee,te,ne,re,ie,T,I,D,k,ae,oe,se,ce,a,N,ue,o,le,O,de,pe,B,fe,L,he,M,_e,R,x,s,ge,V,me,Ce,ve,ye,U,Ae,Pe,be,Se,we,F,Ee,Te,Ie,l=this;function De(e){var t,n,r,i={},a=[];for(t in e)e.hasOwnProperty(t)&&(n=e[t],2<=t.length)&&"c"==t[0]&&t[1].charCodeAt(0)>="a".charCodeAt(0)&&t[1].charCodeAt(0)<="z".charCodeAt(0)&&"p"!=t[1]&&"s"!=t[1]&&(r=t[1],3<t.length&&"_"==t[2]?((i[r]=i[r]||{})[t.substring(3,t.length)]=n,a.push(t)):3==t.length&&"0"<=t[2]&&t[2]<="9"&&((i[r]=i[r]||{})["c"+t[2]]=n,a.push(t)));for(var o,s=0;s<a.length;++s)delete e[a[s]];for(o in i){var c=i[o],u=c.c2;u&&(delete c.c2,l.eu(u,c))}}ke.extend(l,{eu:function(e,t){r[e]=r[e]||{},ke.extend(r[e],t)},Ko:function(){r={}},getStacks:function(){return r},io:function(){return u},fu:function(e){b=e},cu:function(){return b},Zo:function(e,t){h[e]=t},lu:function(e){return h[e]},du:function(e){return null!=h[e]},addLabels:function(e){De(e),ke.extend(n,e)},getLabels:function(){return n},setLabel:function(e,t){n[e]=t},Ho:function(){n={}},dr:function(e){return n[e]},lr:function(e){return null!=n[e]},Po:function(){return parseInt(l.lu("ns_st_cn"))},$o:function(e){l.Zo("ns_st_cn",e+"")},bo:function(e){Ee=e,Te=!0},wo:function(){return Ee},So:function(){return Te},Fn:function(e,t,n){var r=parseInt(e.ns_st_po),i=n&&F<0&&0<C-r?P+C-r:n&&0<F&&0<r-C?P+r-C:P,a=(e.ns_st_ap=i+"",e.ns_st_dap=i-K+"",e.ns_st_iap=i-W+"",e.ns_st_pt=_+(isNaN(g)?0:t-g)+"",e.ns_st_dpt=_+(isNaN(g)?0:t-g)-m+"",e.ns_st_ipt=_+(isNaN(g)?0:t-g)-G+"",e.ns_st_et=v+(isNaN(y)?0:t-y)+"",e.ns_st_det=v+(isNaN(y)?0:t-y)-Y+"",e.ns_st_iet=v+(isNaN(y)?0:t-y)-J+"",e.ns_st_bt=T+"",e.ns_st_dbt=T+(isNaN(I)?0:t-I)-D+"",e.ns_st_ibt=T+(isNaN(I)?0:t-I)-se+"",S),o=w;n&&(a=Ne.gt(S,F<0?r:E,F<0?E:r,b),o=Ne.gt(w,F<0?r:E,F<0?E:r,b));for(var s,c=0,u=0,l=0;l<a.length;l++)c+=s=Math.abs(a[l].end-a[l].start),u<s&&(u=s);for(var d=0,p=0,l=0;l<o.length;l++)d+=s=Math.abs(o[l].end-o[l].start),p<s&&(p=s);e.ns_st_upc=c+"",e.ns_st_dupc=c-Q+"",e.ns_st_iupc=c-$+"",e.ns_st_lpc=u+"",e.ns_st_dlpc=u-Z+"",e.ns_st_ilpc=u-X+"",e.ns_st_upa=d+"",e.ns_st_dupa=d-ee+"",e.ns_st_iupa=d-te+"",e.ns_st_lpa=p+"",e.ns_st_dlpa=p-ne+"",e.ns_st_ilpa=p-z+"",e.ns_st_pc=B+"",e.ns_st_dpc=B-fe+"",e.ns_st_skc=L+"",e.ns_st_dskc=L-he+"",e.ns_st_bc=k+"",e.ns_st_dbc=k-ae+"",e.ns_st_ibc=k-oe+"",e.ns_st_skt=N+"",e.ns_st_dskt=N-ue+"",e.ns_st_ska=O+"",e.ns_st_dska=O-de+"",f&&(e.ns_st_spc=M+"",e.ns_st_dspc=M-re+"",e.ns_st_apc=_e+"",e.ns_st_dapc=_e-ie+"",e.ns_st_sq=R+"",e.ns_st_asq=x+""),e.ns_st_dtpc=U-Ae+"",e.ns_st_itpc=U-Pe+"",e.ns_st_dcpc=V-me+"",e.ns_st_icpc=V-Ce+"",e.ns_st_rt=F+"",e.ns_st_ldw=q,e.ns_st_ldo=A,e.ns_st_pn=Ee+"",e.ns_st_lda=j?"1":"0",ke.extend(e,h)},Fo:function(e){m=parseInt(e.ns_st_pt),K=parseInt(e.ns_st_ap),Y=parseInt(e.ns_st_et),D=parseInt(e.ns_st_bt),Q=parseInt(e.ns_st_upc),Z=parseInt(e.ns_st_lpc),ee=parseInt(e.ns_st_upa),ne=parseInt(e.ns_st_lpa),fe=parseInt(e.ns_st_pc),he=parseInt(e.ns_st_skc),ae=parseInt(e.ns_st_bc),ue=parseInt(e.ns_st_skt),de=parseInt(e.ns_st_ska),f&&(re=parseInt(e.ns_st_spc),ie=parseInt(e.ns_st_apc)),Ae=U,me=V,l.vu(0)},_u:function(e){G=parseInt(e.ns_st_pt),$=parseInt(e.ns_st_upc),te=parseInt(e.ns_st_upa),W=parseInt(e.ns_st_ap),J=parseInt(e.ns_st_et),z=parseInt(e.ns_st_lpa),X=parseInt(e.ns_st_lpc),se=parseInt(e.ns_st_bt),oe=parseInt(e.ns_st_bc),Pe=U,Ce=V},pu:function(){return l.lu("ns_st_vt")},hu:function(e){l.Zo("ns_st_vt",e+"")},gu:function(){return l.lu("ns_st_at")},mu:function(e){l.Zo("ns_st_at",e+"")},yu:function(){return l.lu("ns_st_tt")},Su:function(e){l.Zo("ns_st_tt",e+"")},wu:function(){return l.lu("ns_st_cdn")},bu:function(e){l.Zo("ns_st_cdn",e+"")},Wr:function(){B++},Iu:function(){L++},xr:function(){R++},Eu:function(){return R},uo:function(e){s=e},so:function(e){ge=e},no:function(){return ge},$r:function(){return s},qr:function(){return T},Gr:function(e){T=e},Vr:function(e){var t;isNaN(I)||(t=l.qr(),t+=e-I,l.Gr(t),I=NaN)},Pu:function(e){E=parseInt(e)},Au:function(){return E},Du:function(e){isNaN(E)||isNaN(e)||(S=Ne.gt(S,F<0?e:E,F<0?E:e,b),w=Ne.gt(w,F<0?e:E,F<0?E:e,b),E=NaN)},Cu:function(e){var t=w;null!=e&&(t=Ne.gt(w,F<0?s:E,F<0?E:s,b)),be||Se||(1<t.length||0==t.length||0<t[0].start-b?be=!0:3e3<=t[0].end-t[0].start&&(Se=!0,U++)),ve||ye||(1<t.length||0==t.length||0<t[0].start-b?ve=!0:t[0].end-t[0].start>=Ie&&(ye=!0,V++))},Lu:function(){return v},Tu:function(e){v=e},Nu:function(e){var t;isNaN(y)||(t=l.Lu(),t+=e-y,l.Tu(t),y=NaN)},Ou:function(){return y},Ru:function(e){y=e},Fr:function(e){isNaN(g)||(_+=e-g,g=NaN)},Pr:function(){return _},oo:function(e){return C+Math.floor((e-p)*F/100)},_o:function(e){return C+Math.floor((e-i)*F/100)},do:function(e,t){return C+A-t+e-i},vo:function(e){return A+Math.floor((e-i)*(1-F/100))},lo:function(e){return A+e-i},Qr:function(e){C=e},Zr:function(e){p=e},ku:function(){return p},ro:function(){return C},Cr:function(){return g},Kr:function(e){g=e},Mu:function(e){m=e},Hr:function(){return I},jr:function(e){I=e},Jr:function(){return B},Yr:function(e){B=e},Uu:function(){return L},xu:function(e){L=e},Wu:function(e){ce=e},Fu:function(){return ce},Bu:function(e){le=e},Vu:function(){return le},co:function(){return d},xo:function(e){d=e},qu:function(e){f=e},Ur:function(){return f},Gu:function(e){a=e},ju:function(){return a},Hu:function(e){var t;isNaN(a)||(t=l.Ku(),t+=e-a,l.Ju(t),a=NaN)},Ku:function(){return N},Ju:function(e){N=e},Yu:function(e){pe=e},Xu:function(){return pe},zu:function(e){o=e},Qu:function(){return o},$u:function(e){O=e},Zu:function(){return O},ns:function(e){var t,n=l.Zu();n+=Math.abs(e-o),l.$u(n),o==e?t=0:e<o?t=-1:o<e&&(t=1),l.vu(t),o=0},ts:function(){return parseInt(l.lu("ns_st_skd"))},vu:function(e){l.Zo("ns_st_skd",e+"")},es:function(){he=L=de=O=ue=N=Y=v=J=R=fe=B=oe=ae=k=se=D=T=G=m=_=0,Te=!1},rs:function(){M++},os:function(){_e++},us:function(){z=ne=te=ee=W=K=P=0,ye=ve=Se=be=!(w=[])},ss:function(e){M=e},Uo:function(e){H=e},as:function(){return M},fs:function(){return H},cs:function(){return k},ls:function(){k++},ds:function(){return D},Ao:function(e){x=e},Oo:function(){x++},vs:function(){return x},_s:function(){return we},Wo:function(e){we=e},ps:function(){return F},hs:function(e){F=e},gs:function(e){F<0&&0<C-e?P+=C-e:0<F&&0<e-C&&(P+=e-C)},setDvrWindowLength:function(e){q=e},po:function(){return q},ho:function(e){A=e},mo:function(e){i=e},ms:function(){return i},fo:function(){return A},ys:function(e){j=e},Ss:function(){return j},Qo:function(){we=!1}}),h={ns_st_cl:"0",ns_st_tp:"0",ns_st_cn:"1",ns_st_skd:"0",ns_st_ci:"0",ns_st_cn:"1",c3:"*null",c4:"*null",c6:"*null",ns_st_st:"*null",ns_st_pu:"*null",ns_st_pr:"*null",ns_st_ep:"*null",ns_st_sn:"*null",ns_st_en:"*null",ns_st_ct:"*null"},r={},De(e),n=e,d=j=f=!1,S=[],a=I=E=i=y=ge=g=NaN,Pe=Ae=U=Ce=me=V=x=R=_e=M=he=L=fe=B=de=O=ue=N=pe=o=se=oe=ae=k=D=T=ie=re=ne=te=ee=Z=$=Q=X=z=J=W=K=P=A=q=G=Y=H=s=v=m=C=_=0,we=Se=be=ye=ve=le=ce=!(w=[]),F=100,Te=!(Ee=1),u=c,b=t.getConfiguration().ws,Ie=t.getConfiguration().bs}i.wt=function(e){return null==e.ns_st_cn?Ne.wt(e,r):e.ns_st_cn+""},i.Mr=function(e,t,n){for(var r=e.getLabels(),i={},a=0;n&&a<n.length;++a)r.hasOwnProperty(n[a])&&(i[n[a]]=r[n[a]]);t.addLabels(i),t.fu(e.cu())},i.Is=500,i.Es=500,i.Ps=3e3,e.exports=i},function(e,t,n){n=n(55);e.exports=n},function(e,t,n){var r=n(0),i=n(17),a=n(30),o=n(9),s=n(15),c=n(2),u=n(94),n=new function(){r.extend(this,{StreamingAnalytics:u,PlatformAPIs:c.gn.PlatformApis,PlatformApi:c.gn,ConnectivityType:o,EventInfo:a,configuration:i.configuration.Hi,version:s.VERSION,start:function(){i.start()},notifyHiddenEvent:function(e){i.ve(e)},notifyViewEvent:function(e){i.pe(e)},notifyDistributedContentViewEvent:function(e,t){i.notifyDistributedContentViewEvent(e,t)},notifyUxActive:function(){i.notifyUxActive()},notifyUxInactive:function(){i.notifyUxInactive()},notifyEnterForeground:function(){i.notifyEnterForeground()},notifyExitForeground:function(){i.notifyExitForeground()},flushOfflineCache:function(){i.flushOfflineCache()},clearOfflineCache:function(){i.clearOfflineCache()},clearInternalData:function(){i.clearInternalData()}})};e.exports=n},function(e,t){e.exports={qe:function(e){return!(null==e||""==e||"0"==e)}}},function(e,t,n){var l=n(2).mn,d=n(23);e.exports={Qi:function(e,t,n){(r={}).c12=(e=e).getPublisherConfigurations()[0].getPublisherUniqueDeviceId(),r.c1="19",r.ns_ap_pn=l.K(),r.ns_ap_an=e.F(),r.ns_ap_device=l.j();var r,i,a=r,o="",o=(o+='<?xml version="1.0" encoding="UTF-8" ?>\n<events ')+('t="'+ +new Date+'" ');for(i in a)o+=i+'="'+a[i]+'" ';o+='dropped="'+n+'" ';for(var s=[],c="",u=0;u<t.length;++u)c+="    "+function(e,t,n){var r,i=e.ns_ts,a="undefined"!=typeof encodeURIComponent?encodeURIComponent:escape,o="",s=!1;for(r in e)null==t[r]&&"ns_ts"!=r&&(s&&(o+="&"),s=!0,o+=a(r)+"="+a(e[r]));return n.push(o),'<event t="'+i+'">'+o+"</event>"}(t[u],a,s)+"\n";return(o=(o+='md5="'+d(s.join(""))+'" ')+">\n"+c)+"</events>"}}},function(e,t,n){var r=n(0);e.exports=function(e){r.extend(this,{PlatformApis:e.PlatformApis,setPlatformAPI:e.setPlatformApi,setPlatformApi:e.setPlatformApi})}},function(e,t){e.exports={SmartTV:0,Netcast:1,Cordova:2,Trilithium:3,AppleTV:4,Chromecast:5,Xbox:6,webOS:7,tvOS:8,nodejs:9,html5:10,JSMAF:11,Skeleton:12,WebBrowser:13}},function(e,t,n){var r=n(0),i=n(5),a=n(4),o=n(3),s=n(6).Un,c=n(61),u=n(62),l=n(63),d=n(9),p=o.Sn,f=o.wn,h=null,_=null,g=null;function m(){var e;null==h&&(e=function(){if("object"!=typeof sf||"object"!=typeof sf.core||"function"!=typeof sf.core.sefplugin)return null;var e=sf.core.sefplugin("NNAVI");if("function"!=typeof e.Open||"function"!=typeof e.Execute)return null;e.Open("Network","1.001","Network");var t=e.Execute("GetMAC","0");return a.Pn(t)&&(t=e.Execute("GetMAC","1"),a.Pn(t))?(e=e.Execute("GetDeviceID"),a.Pn(e)?null:e):t}(),g=null!=e?(_="31",h=e):(h=+new Date+~~(1e3*Math.random()),_="72",null))}n=r.extend({},i,{D:"smarttv",T:s,N:null,Storage:c,O:!0,R:u,k:l,M:6e4,W:function(){return m(),g},B:function(){return"undefined"!=typeof sf&&a.Cn(sf.env)&&a.Cn(sf.env.getAppVersion)&&sf.env.getAppVersion()||p},V:function(){return m(),h},G:function(){return _},j:function(){return"undefined"!=typeof sf&&a.Cn(sf.core)&&a.Cn(sf.core.getEnvValue)&&sf.core.getEnvValue("modelid")||p},H:function(){return"2.0.0"},J:function(){var e;if("undefined"!=typeof sf&&a.Cn(sf.env)&&a.Cn(sf.env.getProductType)&&a.Cn(sf.env.PRODUCTTYPE_TV)&&a.Cn(sf.env.PRODUCTTYPE_MONITOR)&&a.Cn(sf.env.PRODUCTTYPE_BD))return(e=[])[sf.env.PRODUCTTYPE_TV]="samsung-smarttv-tv",e[sf.env.PRODUCTTYPE_MONITOR]="samsung-smarttv-monitor",e[sf.env.PRODUCTTYPE_BD]="samsung-smarttv-bd",e[sf.env.getProductType()]},Y:function(){return"undefined"!=typeof sf&&a.Cn(sf.env)&&a.Cn(sf.env.getFirmwareVer)&&sf.env.getFirmwareVer().version},X:function(){var e;return"undefined"!=typeof sf&&a.Cn(sf.env)&&a.Cn(sf.env.getScreenSize)?(e=sf.env.getScreenSize()).width+"x"+e.height:f},nn:function(){if("undefined"!=typeof sf&&a.Cn(sf.env)&&a.Cn(sf.env.getLanguageCode))return sf.env.getLanguageCode()},in:function(){if("object"!=typeof sf||"object"!=typeof sf.core||"function"!=typeof sf.core.sefplugin)return d.UNKNOWN;var e=sf.core.sefplugin("NETWORK");if("function"!=typeof e.Open||"function"!=typeof e.Execute)return d.UNKNOWN;e.Open("Network","1.001","Network");e=e.Execute("GetActiveType");return 0===e?d.ETHERNET:1===e?d.WIFI:d.UNKNOWN}});e.exports=n},function(e,t,n){var r,i,a,o,s=n(0);e.exports=function(e){a="undefined"!=typeof FileSystem?new FileSystem:null,o="undefined"!=typeof curWidget?curWidget.id:null,"undefined"!=typeof sf?r=i=function(e,t){sf.core.localData(e,t)}:(r=function(e,t){$.sf.setData(e,void 0===t?null:t)},i=function(e){return $.sf.getData(e)}),null==a||void 0===a.isValidCommonPath||a.isValidCommonPath(o)||a.createCommonDir(o),s.extend(this,{storeProperties:function(e){try{r("cs_settings",e)}catch(e){}},getProperties:function(){try{return i("cs_settings")}catch(e){}},storeCache:function(e){try{t=e,n=o+"/cs_cache_dir",a.isValidCommonPath(n)||a.createCommonDir(n),(n=a.openCommonFile(n+"/cs_cache_dir_single","w")).writeLine(t),a.closeCommonFile(n)}catch(e){}var t,n},getCache:function(){try{return t=o+"/cs_cache_dir",a.isValidCommonPath(t)&&(t=a.openCommonFile(t+"/cs_cache_dir_single","r"))?(e=t.As(),a.closeCommonFile(t),e):null}catch(e){}var e,t}})}},function(e,t,n){var r,i,a=n(0);"undefined"!=typeof sf?i=r=function(e,t){sf.core.localData(e,t)}:(i=function(e,t){$.sf.setData(e,void 0===t?null:t)},r=function(e){return $.sf.getData(e)}),e.exports=function(){a.extend(this,{get:function(e){return r("cs_"+e)},set:function(e,t){i("cs_"+e,t)},has:function(e){return void 0!==r("cs_"+e)},remove:function(e){i("cs_"+e,null)},clear:function(){}})}},function(e,t,n){var o,r,i=n(21),a=n(0),s=null,c=null,u={},l=!1;function d(){s="undefined"!=typeof FileSystem?new FileSystem:null,c="undefined"!=typeof curWidget?curWidget.id:null,"undefined"!=typeof sf&&(r=o=function(e,t){sf.core.localData(e,t)}),null==s||void 0===s.isValidCommonPath||s.isValidCommonPath(c)||s.createCommonDir(c),l=!0}function p(e){return e.replace(/^\s+|\s+$/g,"")}function f(e,t){var n=u[e];n?n.push(t):n=u[e]=[t],r("cs_dir_"+e,n.join("|"))}function h(e,t){var n=u[e],t=i.indexOf(t,n);0<=t&&(n.splice(t,1),r("cs_dir_"+e,0===n.length?null:n.join("|")))}e.exports=function(){a.extend(this,{dir:function(e){if(l||d(),s.isValidCommonPath(c+"/"+e)){var t=u[e];if(!t){if(!(t=o("cs_dir_"+e)))return null;t=u[e]=t.split("|")}for(var n=t.slice(),r=0,i=n.length;r<i;r++){var a=t[r];s.isValidCommonPath(c+"/"+e+"/"+a)||h(e,a)}return n}return null},append:function(e,t,n){l||d();var r=c+"/"+e,e=(s.isValidCommonPath(r)||s.createCommonDir(r),s.isValidCommonPath(r+"/"+t)||f(e,t),s.openCommonFile(r+"/"+t,"a"));e.writeLine(p(n)),s.closeCommonFile(e)},write:function(e,t,n){l||d();var r=c+"/"+e,e=(s.isValidCommonPath(r)||s.createCommonDir(r),s.isValidCommonPath(r+"/"+t)||f(e,t),s.openCommonFile(r+"/"+t,"w"));e.writeLine(p(n)),s.closeCommonFile(e)},deleteFile:function(e,t){l||d();var n=c+"/"+e;return!!s.isValidCommonPath(n)&&(h(e,t),s.deleteCommonFile(n+"/"+t))},read:function(e,t){l||d();var n=c+"/"+e;if(!s.isValidCommonPath(n))return null;var r=s.openCommonFile(n+"/"+t,"r");if(r){for(var i,a=[];i=r.readLine();)a.push(i);return s.closeCommonFile(r),a.join("\n")}return h(e,t),""}})}},function(e,t,n){var r=n(0),i=n(5),a=n(4),o=n(3),s=n(13),c=n(6).Un,u=n(8),l=n(10),d=n(9),p=o.Sn,f=o.wn,h=null,_=null,g=null;function m(){var e;null==h&&(e=function(){if("undefined"!=typeof ns_&&a.Cn(ns_.netcastDevice)){if(a.Cn(ns_.netcastDevice.net_macAddress)&&a.An(ns_.netcastDevice.net_macAddress))return ns_.netcastDevice.net_macAddress;if(a.Cn(ns_.netcastDevice.serialNumber)&&a.An(ns_.netcastDevice.serialNumber))return ns_.netcastDevice.serialNumber}return null}(),g=null!=e?(_="31",h=e):(h=+new Date+~~(1e3*Math.random()),_="72",null))}n=r.extend({},i,{D:"netcast",T:function(){return("undefined"!=typeof Image?s:c).apply(this,arguments)},N:null,Storage:u,R:l,O:!1,M:6e4,W:function(){return m(),g},V:function(){return m(),h},G:function(){return _},j:function(){return"undefined"!=typeof ns_&&a.Cn(ns_.netcastDevice)&&a.Cn(ns_.netcastDevice.modelName)&&ns_.netcastDevice.modelName||p},H:function(){return"undefined"!=typeof ns_&&a.Cn(ns_.netcastDevice)&&a.Dn(ns_.netcastDevice.version,p)||p},J:function(){return"undefined"!=typeof ns_&&a.Cn(ns_.netcastDevice)?"lg-ott"+a.Dn(ns_.netcastDevice.platform,p):p},Y:function(){if("undefined"!=typeof ns_&&a.Cn(ns_.netcastDevice)){if(a.Cn(ns_.netcastDevice.version))return ns_.netcastDevice.version;if(a.Cn(ns_.netcastDevice.hwVersion))return ns_.netcastDevice.hwVersion;if(a.Cn(ns_.netcastDevice.swVersion))return ns_.netcastDevice.swVersion}return p},X:function(){if("undefined"!=typeof ns_&&a.Cn(ns_.netcastDevice)&&a.Cn(ns_.netcastDevice.osdResolution))switch(ns_.netcastDevice.osdResolution){case 0:return"640x480";case 1:return"720x576";case 2:return"1280x720";case 3:return"1920x1080";case 4:return"1366x768"}return f},nn:function(){return"undefined"!=typeof ns_&&a.Cn(ns_.netcastDevice)&&a.Dn(ns_.netcastDevice.tvLanguage2,a.Dn(window.navigator.language))||p},in:function(){if(void 0!==ns_.netcastDevice){if(0===ns_.netcastDevice.networkType)return d.ETHERNET;if(1===ns_.netcastDevice.networkType)return d.WIFI}return p}});e.exports=n},function(e,t,n){var s,c,u,r=n(0),i=n(5),a=n(3),o=n(13),l=n(6).xn,d=n(8),p=n(12),f=n(10),h=n(9),_=a.Sn,g=a.wn,n=r.extend({},i,{D:"webos",T:o,N:l,Storage:d,R:f,k:p,O:!0,M:6e4,U:function(e,t){function n(){0==--o&&e()}var r,i,a,o=3;a=n,webOS.service.request("luna://com.webos.service.tv.systemproperty",{method:"getSystemInfo",parameters:{keys:["modelName","firmwareVersion","UHD","sdkVersion"]},onSuccess:function(e){e.returnValue&&(s=e),a()},onFailure:function(){a()}}),i=n,webOS.service.request("luna://com.webos.settingsservice",{method:"getSystemSettings",parameters:{category:"option"},onSuccess:function(e){e.returnValue&&(c=e),i()},onFailure:function(){i()}}),r=n,webOS.service.request("luna://com.webos.service.connectionmanager",{method:"getStatus",onSuccess:function(e){e.returnValue&&(u=e),r()},onFailure:function(){r()}})},W:function(){return"undefined"!=typeof webOS&&webOS.device&&webOS.device.serialNumber&&"Unknown"!=webOS.device.serialNumber?webOS.device.serialNumber:null},V:function(){return+new Date+~~(1e3*Math.random())},G:function(){return"72"},j:function(){return s&&s.modelName?s.modelName:_},H:function(){return s&&s.sdkVersion?s.sdkVersion:_},J:function(){return"webOS"},Y:function(){return"undefined"!=typeof webOS&&webOS.device?webOS.device.platformVersion:_},X:function(){var e=0,t=("undefined"!=typeof webOS&&webOS.device?e=webOS.device.screenWidth:"undefined"!=typeof window&&window.screen&&(e=window.screen.availWidth),0);return"undefined"!=typeof webOS&&void 0!==webOS.device?t=webOS.device.screenHeight:"undefined"!=typeof window&&window.screen&&(t=window.screen.availHeight),0<e&&0<t?e+"x"+t:g},nn:function(){return c&&c.locales&&(c.locales.UI||c.locales.TV)||_},in:function(){if(u&&(u.wired||u.wifi)){if("connected"===u.wired.state&&"yes"===u.wired.onInternet)return h.ETHERNET;if("connected"===u.wifi.state&&"yes"===u.wifi.onInternet)return h.WIFI}return h.UNKNOWN}});e.exports=n},function(e,t,n){var r=n(0),i=n(5),a=n(4),o=n(3),s=n(13),c=n(6).Un,u=n(6).xn,l=n(8),d=n(12),n=n(10),p=o.Sn,f=o.wn,h=null,_=null,g=null;function m(){var e;null==h&&(e="undefined"!=typeof device&&a.Cn(device.uuid)&&0<device.uuid.length?device.uuid:null,g=null!=e?(_="31",h=e):(h=+new Date+~~(1e3*Math.random()),_="72",null))}o=r.extend({},i,{D:"cordova",T:function(){return("undefined"!=typeof Image?s:c).apply(this,arguments)},N:u,Storage:l,O:!0,R:n,k:d,M:6e4,W:function(){return m(),g},V:function(){return m(),h},G:function(){return _},j:function(){return"undefined"!=typeof device&&a.Cn(device.model)||p},H:function(){return"undefined"!=typeof device&&a.Cn(device.cordova)&&device.cordova||p},J:function(){return"undefined"!=typeof device&&a.Cn(device.platform)&&"cordova"+device.platform||"cordova"},Y:function(){return"undefined"!=typeof device&&a.Cn(device.version)||p},X:function(){var e="undefined"!=typeof window&&a.Cn(window.screen)&&a.Cn(window.screen.availWidth)&&window.screen.availWidth||0,t="undefined"!=typeof window&&a.Cn(window.screen)&&a.Cn(window.screen.availHeight)&&window.screen.availHeight||0;return 0<e&&0<t?e+"x"+t:f},nn:function(){return"undefined"!=typeof window&&a.Cn(window.navigator)&&a.Cn(window.navigator.language)&&window.navigator.language||p}});e.exports=o},function(e,t,n){var r=n(0),i=n(5),a=n(4),o=n(3),s=n(68),c=n(8),n=n(10),u=o.Sn,l=o.wn,d=null,p=null,f=null;function h(){var e;null==d&&(e=a.An(engine.stats.device.id)?engine.stats.device.id:a.An(engine.stats.network.mac)?engine.stats.network.mac:null,f=null!=e?(p="31",d=e):(d=+new Date+~~(1e3*Math.random()),p="72",null))}o=r.extend({},i,{D:"trilithium",T:s,N:null,Storage:c,R:n,O:!1,M:6e4,W:function(){return h(),f},F:function(){return a.An(engine.stats.application.name)?engine.stats.application.name:u},B:function(){return a.An(engine.stats.application.version)?engine.stats.application.version:u},V:function(){return h(),d},G:function(){return p},j:function(){return a.Dn(engine.stats.device.platform,u)},J:function(){return"trilithium"},Y:function(){return a.Dn(engine.stats.device.version,u)},X:function(){return"undefined"!=typeof screen&&void 0!==screen.height&&void 0!==screen.width?screen.height+"x"+screen.width:l}});e.exports=o},function(e,t){e.exports=function(e,t){"undefined"!=typeof engine?(engine.createHttpClient().createRequest("GET",e,null).start(),t&&setTimeout(t,0)):"function"==typeof setTimeout?t&&setTimeout(t,0):t&&t()}},function(e,t,n){var r=n(4),i=n(3),a=n(34).ir,o=n(34).rr,s=n(70),n=n(71),c=i.Sn,u=i.wn,l=null,d=null,p=null;function f(){null==l&&(d="undefined"!=typeof atv&&void 0!==atv.device&&atv.device.idForVendor?(l=r.Dn(atv.device.idForVendor,""),"62"):(l=+new Date+~~(1e3*Math.random()),"72"),p=null)}e.exports={D:"atv",T:a,N:o,Storage:s,R:n,O:!1,M:6e4,W:function(){return f(),p},F:function(){return c},B:function(){return c},V:function(){return f(),l},G:function(){return d},j:function(){return"Apple TV"},H:function(){return"undefined"!=typeof atv&&void 0!==atv.device&&r.Dn(atv.device.softwareVersion,c)},K:function(){return"js"},J:function(){return"atv"},Y:function(){return"undefined"!=typeof atv&&void 0!==atv.device&&r.Dn(atv.device.softwareVersion,c)},X:function(){return void 0!==atv.device&&void 0!==atv.device.screenFrame&&void 0!==atv.device.screenFrame.height&&void 0!==atv.device.screenFrame.width?atv.device.screenFrame.height+"x"+atv.device.screenFrame.width:u},nn:function(){return"undefined"!=typeof atv&&void 0!==atv.device&&r.Dn(atv.device.language,"")},setTimeout:function(e,t){return"undefined"!=typeof atv&&void 0!==atv.setTimeout&&atv.setTimeout(e,t)},setInterval:function(e,t){return"undefined"!=typeof atv&&void 0!==atv.setInterval&&atv.setInterval(e,t)},clearTimeout:function(e){return"undefined"!=typeof atv&&void 0!==atv.clearTimeout&&atv.clearTimeout(e)},clearInterval:function(e){return"undefined"!=typeof atv&&void 0!==atv.clearInterval&&atv.clearInterval(e)}}},function(e,t,n){var r=n(0);e.exports=function(e){var t="undefined"!=typeof atv&&void 0!==atv.localStorage&&atv.localStorage||null;r.extend(this,{storeProperties:function(e){if(t)try{"function"==typeof t.setItem?t.setItem("cs_settings",e):t&&(t.Bn=e)}catch(e){}},getProperties:function(){if(!t)return null;try{return"function"==typeof t.getItem?t.getItem("cs_settings"):t?t.Bn:void 0}catch(e){}},storeCache:function(e){if(t)try{"function"==typeof t.setItem?t.setItem("cs_cache",e):t&&(t.Vn=e)}catch(e){}},getCache:function(){if(!t)return null;try{return"function"==typeof t.getItem?t.getItem("cs_cache"):t?t.Vn:void 0}catch(e){}}})}},function(e,t,n){var r=n(0);e.exports=function(){var n="undefined"!=typeof atv&&void 0!==atv.localStorage&&atv.localStorage||null;r.extend(this,{get:function(e){return n&&e&&n.getItem("cs_"+e)||null},set:function(e,t){n&&e&&(n["cs_"+e]=t)},remove:function(e){n&&e&&n.removeItem("cs_"+e)},clear:function(){}})}},function(e,t,n){var r=n(0),i=n(5),a=n(3),o=n(35).or,s=n(35).ur,c=n(8),u=n(12),l=n(10),d=n(9),p=a.Sn,f=a.wn,h=null,_=null,g=null,m=!1,C=!1,v=!1;function y(){var e,t=null;"undefined"!=typeof Windows&&Windows&&Windows.Xbox&&Windows.Xbox.ApplicationModel&&Windows.Xbox.ApplicationModel.Core&&Windows.Xbox.ApplicationModel.Core.CoreApplicationContext&&Windows.Xbox.ApplicationModel.Core.CoreApplicationContext.currentUser&&null!=(e=Windows.Xbox.ApplicationModel.Core.CoreApplicationContext.currentUser)&&!e.Ds&&e.Cs&&(t=Windows.Xbox.ApplicationModel.Core.CoreApplicationContext.currentUser.xboxUserId),g=t}n=r.extend({},i,{D:"xbox",T:o,N:s,Storage:c,R:l,k:u,O:!0,M:6e4,W:function(){return v||("undefined"!=typeof Windows&&Windows&&Windows.Xbox&&Windows.Xbox.ApplicationModel&&Windows.Xbox.ApplicationModel.Core&&Windows.Xbox.ApplicationModel.Core.CoreApplicationContext&&Windows.Xbox.ApplicationModel.Core.CoreApplicationContext.addEventListener("currentuserchanged",function(){C=!0}),y(),v=!0),C&&y(),g},F:function(){var e=p;return e="undefined"!=typeof Windows&&Windows&&Windows.ApplicationModel&&Windows.ApplicationModel.Package&&Windows.ApplicationModel.Package.current&&Windows.ApplicationModel.Package.current.id&&Windows.ApplicationModel.Package.current.id.name?Windows.ApplicationModel.Package.current.id.name:e},B:function(){var e,t=p;return t="undefined"!=typeof Windows&&Windows&&Windows.ApplicationModel&&Windows.ApplicationModel.Package&&Windows.ApplicationModel.Package.current&&Windows.ApplicationModel.Package.current.id&&Windows.ApplicationModel.Package.current.id.version?(e=Windows.ApplicationModel.Package.current.id.version).major+"."+e.minor+"."+e.build+"."+e.revision:t},V:function(){return m||function(){_=(h="undefined"!=typeof Windows&&Windows&&Windows.Xbox&&Windows.Xbox.System&&Windows.Xbox.System.Console&&Windows.Xbox.System.Console.applicationSpecificDeviceId?Windows.Xbox.System.Console.applicationSpecificDeviceId:this.j()+ +new Date+~~(1e3*Math.random()),"72"),m=!0}(),h},G:function(){return _},j:function(){return"xbox one"},H:function(){var t=p;return"undefined"!=typeof navigator&&navigator&&navigator.userAgent&&navigator.userAgent.split(";").filter(function(e){return-1!=e.indexOf("Windows NT")}).forEach(function(e){t=e.substr(e.indexOf("Windows NT")+11,e.length-1)}),t},K:function(){return"xbox"},J:function(){return"winjs"},Y:function(){var t=p;return"undefined"!=typeof Windows&&Windows&&Windows.ApplicationModel&&Windows.ApplicationModel.Package&&Windows.ApplicationModel.Package.current&&Windows.ApplicationModel.Package.current.dependencies&&Windows.ApplicationModel.Package.current.dependencies.filter(function(e){return e&&e.id&&e.id.name&&-1!=e.id.name.indexOf("WinJS")&&e.id.version}).forEach(function(e){t=e.id.version.major+"."+e.id.version.minor+"."+e.id.version.build+"."+e.id.version.revision}),t},X:function(){var e,t=f;return t="undefined"!=typeof Windows&&Windows&&Windows.Xbox&&Windows.Xbox.Graphics&&Windows.Xbox.Graphics.Display&&Windows.Xbox.Graphics.Display.DisplayConfiguration&&Windows.Xbox.Graphics.Display.DisplayConfiguration.getForCurrentView&&Windows.Xbox.Graphics.Display.DisplayConfiguration.getForCurrentView()&&Windows.Xbox.Graphics.Display.DisplayConfiguration.getForCurrentView().currentDisplayMode&&Windows.Xbox.Graphics.Display.DisplayConfiguration.getForCurrentView().currentDisplayMode.rawWidth&&Windows.Xbox.Graphics.Display.DisplayConfiguration.getForCurrentView().currentDisplayMode.rawHeight?(e=Windows.Xbox.Graphics.Display.DisplayConfiguration.getForCurrentView().currentDisplayMode).rawWidth+"x"+e.rawHeight:t},Z:function(){var e=f;return e="undefined"!=typeof window&&window.innerWidth&&window.innerHeight?window.innerWidth+"x"+window.innerHeight:e},nn:function(){var e=p;return e="undefined"!=typeof Windows&&Windows&&Windows.System&&Windows.System.UserProfile&&Windows.System.UserProfile.GlobalizationPreferences&&Windows.System.UserProfile.GlobalizationPreferences.languages?Windows.System.UserProfile.GlobalizationPreferences.languages.getAt(0):e},tn:function(){var e=p;return e="undefined"!=typeof Windows&&Windows&&Windows.ApplicationModel&&Windows.ApplicationModel.Package&&Windows.ApplicationModel.Package.current&&Windows.ApplicationModel.Package.current.id&&Windows.ApplicationModel.Package.current.id.name?Windows.ApplicationModel.Package.current.id.name:e},setPlatformAPI:function(){},en:function(){var e="unknown";if("undefined"!=typeof Windows&&Windows&&Windows.ApplicationModel&&Windows.ApplicationModel.Package&&Windows.ApplicationModel.Package.current&&Windows.ApplicationModel.Package.current.id&&Windows.ApplicationModel.Package.current.id.architecture)switch(Windows.ApplicationModel.Package.current.id.architecture){case 5:e="arm";break;case 11:e="neutral";break;case 9:e="x64";break;case 0:e="x86"}return e},in:function(){var e=d.UNKNOWN;if("undefined"!=typeof Windows&&Windows&&Windows.Networking&&Windows.Networking.Connectivity&&Windows.Networking.Connectivity.NetworkInformation&&Windows.Networking.Connectivity.NetworkInformation.getInternetConnectionProfile&&Windows.Networking.Connectivity.NetworkInformation.getInternetConnectionProfile()&&Windows.Networking.Connectivity.NetworkInformation.getInternetConnectionProfile().networkAdapter&&Windows.Networking.Connectivity.NetworkInformation.getInternetConnectionProfile().networkAdapter.ianaInterfaceType)switch(Windows.Networking.Connectivity.NetworkInformation.getInternetConnectionProfile().networkAdapter.ianaInterfaceType){case 6:e=d.ETHERNET;break;case 71:e=d.WIFI}return e}});e.exports=n},function(e,t,n){var r=n(0),i=n(5),a=n(4),o=n(18),s=n(3),c=n(13),u=n(6).xn,l=n(8),d=n(12),p=n(10),f=n(36),h=s.Sn,_=s.wn,n=r.extend({},i,{D:"chromecast",T:c,N:u,Storage:l,R:p,k:d,O:!0,M:6e4,F:function(){return void 0===ns_.crm?h:ns_.crm.getApplicationData().name},V:function(){return+new Date+~~(1e3*Math.random())},G:function(){return"72"},j:function(){return"chromecast"},H:function(){return cast.receiver.VERSION+"-"+a.Dn(o.Ne()+" "+o.Oe(),h)},J:function(){return"html"},Y:function(){return"5"},X:function(){var e="undefined"!=typeof window&&a.Cn(window.screen)&&a.Cn(window.screen.availWidth)?window.screen.availWidth:0,t="undefined"!=typeof window&&a.Cn(window.screen)&&a.Cn(window.screen.availHeight)?window.screen.availHeight:0;return 0<e&&0<t?e+"x"+t:_},nn:function(){return"undefined"!=typeof window&&a.Cn(window.navigator)&&a.Dn(window.navigator.language,"")||h},vn:function(e){f.sr(e)},_n:function(e){f.ar(e)}});e.exports=n},function(e,t,n){var r=n(0),i=n(5),a=n(4),o=n(3),s=n(6).Un,c=n(6).xn,u=n(8),l=n(12),n=n(10),d=o.wn,p=null,f=null,h=null;function _(){null==p&&(f=a.Pn(Device.vendorIdentifier)?(p=+new Date+~~(1e3*Math.random()),"72"):(p=Device.vendorIdentifier,"62"),h=p)}o=r.extend({},i,{D:"tvos",T:s,N:c,Storage:u,O:!0,R:n,k:l,M:6e4,W:function(){return _(),h},F:function(){return Device.appIdentifier},B:function(){return Device.appVersion},V:function(){return _(),p},G:function(){return f},j:function(){return Device.productType},H:function(){return Device.systemVersion},J:function(){return"tvos"},Y:function(){return Device.systemVersion},X:function(){return d},nn:function(){return Settings.language},tn:function(){return Device.appIdentifier}});e.exports=o},function(e,t,n){var r=n(0),i=n(5),a=n(4),o=n(3),s=n(6).Un,c=n(6).xn,u=n(8),l=n(10),d=n(12),p=n(9),f=o.Sn,h=o.wn,_=null,g=null,m=null;function C(){null==_&&(m="undefined"!=typeof jsmaf&&a.Cn(jsmaf.hardwareId)?(g="31",_=jsmaf.hardwareId):(_=+new Date+~~(1e3*Math.random()),g="72",null))}n=r.extend({},i,{D:"jsmaf",T:s,N:c,Storage:u,O:!0,R:l,k:d,M:6e4,W:function(){return C(),m},V:function(){return C(),_},G:function(){return C(),g},j:function(){return"undefined"!=typeof jsmaf&&a.Cn(jsmaf.platform)?jsmaf.platform:f},J:function(){return"jsmaf"},Y:function(){return"undefined"!=typeof jsmaf&&a.Cn(jsmaf.version)?jsmaf.version:f},X:function(){return"undefined"!=typeof jsmaf&&a.Cn(jsmaf.screenWidth)&&a.Cn(jsmaf.screenHeight)?jsmaf.screenWidth+"x"+jsmaf.screenHeight:h},nn:function(){return"undefined"!=typeof jsmaf&&a.Cn(jsmaf.locale)?jsmaf.locale:f},setTimeout:function(e,t){return jsmaf.setTimeout(e,t)},setInterval:function(e,t){return jsmaf.setInterval(e,t)},clearTimeout:function(e){return jsmaf.clearTimeout(e)},clearInterval:function(e){return jsmaf.clearInterval(e)},en:function(){var e;return"undefined"!=typeof jsmaf&&a.Cn(jsmaf.platform)||(e=f),"ps3"==jsmaf.platform?e="cell":"ps4"==jsmaf.platform?e="ps4":"vita"==jsmaf.platform&&(e="vita"),e},in:function(){return"undefined"!=typeof jsmaf&&"connected"==jsmaf.networkStatus&&a.Cn(jsmaf.connectionType)?"wired"==jsmaf.connectionType?p.ETHERNET:"wireless"==jsmaf.connectionType?p.WIFI:"phone"==jsmaf.connectionType?p.WWAN:p.UNKNOWN:p.UNKNOWN}});e.exports=n},function(e,t,c){var n=c(0),r=c(5),i=c(4),a=c(3).Sn,o=null,s=null,u=null;function l(){null==o&&(o=+new Date+~~(1e3*Math.random()),s="72",u=null)}function d(i,a){var o=this,s=0;o.send=function(e){var t,n=e.match(/^https/)?c(77):c(78),r=(r=a,t=c(22),{headers:{"User-Agent":(r.F()||"unknown")+"/"+(r.B()||"unknown")+" ("+(t.platform()||"unknown")+"; "+(t.arch()||"unknown")+"; "+(t.type()||"unknown")+"/"+(t.release||"unknown")+") node.js/"+process.version}});n.get(e,r,function(e){var t=e.statusCode;(302==t||301==t)&&s<20&&e.headers&&e.headers.location?(s++,o.send(e.headers.location)):i(t)}).on("error",function(){i()})}}n=n.extend({},r,{D:"nodejs",T:function(e,t,n){new d(t,n).send(e)},N:null,Storage:null,O:!1,W:function(){return l(),u},V:function(){return l(),o},G:function(){return s},H:function(){var e=c(22);return[e.type(),e.platform(),e.release()].join(";")},en:function(){return c(22).arch()||a},J:function(){return"nodejs"},Y:function(){return"undefined"==typeof process||i.Pn(process.version)?a:process.version}});e.exports=n},function(e,t){e.exports=require("https")},function(e,t){e.exports=require("http")},function(e,t,n){var r=n(0),i=n(37),r=r.extend({},i,{D:"webbrowser",C:function(){return n(17).ge().$t()?"http://b.scorecardresearch.com/p":"http://b.scorecardresearch.com/p2"},L:function(){return n(17).ge().$t()?"https://sb.scorecardresearch.com/p":"https://sb.scorecardresearch.com/p2"},Storage:null,R:null,k:null,O:!1,J:function(){return"webbrowser"},un:function(e){var t;"undefined"!=typeof document&&(e.c7=(t=document).URL,e.c8=t.title,e.c9=t.referrer,e.ns_c=t.characterSet||t.defaultCharset||"")},pn:!0});e.exports=r},function(e,t,n){var a=n(0),o=n(2).mn;e.exports=function(e,t,n,r){function i(e){200==e||r.isHttpRedirectCachingEnabled()&&(302==e||301==e)?n.onSuccess():n.onFailure()}a.extend(this,{$i:function(){o.N?o.N(e,t,i):i()}})}},function(e,t,n){var r=n(0);e.exports=function(){r.extend(this,{storeProperties:function(){},getProperties:function(){return null},storeCache:function(){},getCache:function(){return null}})}},function(e,t,n){var r=n(0),i=n(39),a=n(42),o=n(25),s=n(24),c=n(27);e.exports=function(e){r.extend(this,{setLiveTransmissionMode:e.setLiveTransmissionMode,setOfflineCacheMode:e.setOfflineCacheMode,enableImplementationValidationMode:e.enableImplementationValidationMode,getPartnerConfigurations:e.getPartnerConfigurations,getPublisherConfigurations:e.getPublisherConfigurations,setLabelOrder:e.setLabelOrder,getLabelOrder:e.getLabelOrder,setApplicationName:e.setApplicationName,setApplicationVersion:e.setApplicationVersion,addStartLabels:e.addStartLabels,setStartLabel:e.setStartLabel,removeStartLabel:e.removeStartLabel,removeAllStartLabels:e.removeAllStartLabels,isEnabled:e.isEnabled,addPersistentLabels:e.addPersistentLabels,setPersistentLabel:e.setPersistentLabel,removePersistentLabel:e.removePersistentLabel,removeAllPersistentLabels:e.removeAllPersistentLabels,getPartnerConfiguration:e.getPartnerConfiguration,getPublisherConfiguration:e.getPublisherConfiguration,disable:e.disable,disableTcfIntegration:e.disableTcfIntegration,addListener:e.addListener,removeListener:e.removeListener,addClient:e.addClient,setDebugEnabled:e.setDebugEnabled,setSystemClockJumpDetectionEnabled:e.setSystemClockJumpDetectionEnabled,setSystemClockJumpDetectionInterval:e.setSystemClockJumpDetectionInterval,setSystemClockJumpDetectionAlternativeContextInterval:e.setSystemClockJumpDetectionAlternativeContextInterval,setSystemClockJumpDetectionPrecision:e.setSystemClockJumpDetectionPrecision,setLiveEndpointUrl:e.setLiveEndpointUrl,setOfflineFlushEndpointUrl:e.setOfflineFlushEndpointUrl,setCacheMaxMeasurements:e.setCacheMaxMeasurements,setCacheMaxFlushesInARow:e.setCacheMaxFlushesInARow,setCacheMinutesToRetry:e.setCacheMinutesToRetry,setCacheMeasurementExpiry:e.setCacheMeasurementExpiry,setUsagePropertiesAutoUpdateMode:e.setUsagePropertiesAutoUpdateMode,setUsagePropertiesAutoUpdateInterval:e.setUsagePropertiesAutoUpdateInterval,setStorageWriteInterval:e.setStorageWriteInterval,addIncludedPublisher:e.addIncludedPublisher,addCrossPublisherUniqueDeviceIdChangeListener:e.addCrossPublisherUniqueDeviceIdChangeListener,removeCrossPublisherUniqueDeviceIdChangeListener:e.removeCrossPublisherUniqueDeviceIdChangeListener,enableChildDirectedApplicationMode:e.enableChildDirectedApplicationMode,PartnerConfiguration:i,PublisherConfiguration:a,LiveTransmissionMode:o,CacheMode:s,UsagePropertiesAutoUpdateMode:c})}},function(e,t,n){var R=n(3),n={};n.encrypt=function(){function o(e,t){if(-1===(e=n.indexOf(e.charAt(t))))throw new Error;return e}var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function m(e,t,n){null!=e&&("number"==typeof e?this.Ls(e,t,n):null==t&&"string"!=typeof e?this.Ts(e,256):this.Ts(e,t))}function C(){return new m(null)}m.prototype.Ns=function(e,t,n,r,i,a){for(var o=16383&t,s=t>>14;0<=--a;){var c=16383&this[e],u=this[e++]>>14,l=s*c+u*o;i=((c=o*c+((16383&l)<<14)+n[r]+i)>>28)+(l>>14)+s*u,n[r++]=268435455&c}return i},m.prototype.Os=28,m.prototype.Rs=268435455,m.prototype.ks=1<<28,m.prototype.Ms=Math.pow(2,52),m.prototype.Us=24,m.prototype.xs=4;for(var r=[],e="0".charCodeAt(0),t=0;t<=9;++t)r[e++]=t;for(e="a".charCodeAt(0),t=10;t<36;++t)r[e++]=t;for(e="A".charCodeAt(0),t=10;t<36;++t)r[e++]=t;function c(e){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e)}function u(e,t){e=r[e.charCodeAt(t)];return null==e?-1:e}function g(e){var t=C();return t.Ws(e),t}function v(e){var t,n=1;return 0!=(t=e>>>16)&&(e=t,n+=16),0!=(t=e>>8)&&(e=t,n+=8),0!=(t=e>>4)&&(e=t,n+=4),0!=(t=e>>2)&&(e=t,n+=2),0!=(t=e>>1)&&(e=t,n+=1),n}function y(e){this.o=e}function A(e){this.o=e,this.Fs=e.Bs(),this.Vs=32767&this.Fs,this.qs=this.Fs>>15,this.Gs=(1<<e.Os-15)-1,this.js=2*e._}function i(e,t){return e&t}function a(e,t){return e|t}function s(e,t){return e^t}function l(e,t){return e&~t}function d(){}function p(e){return e}function P(e){this.r2=C(),this.Hs=C(),m.ONE.Ks(2*e._,this.r2),this.Js=this.r2.Ys(e),this.o=e}y.prototype.Xs=function(e){return e.s<0||0<=e.zs(this.o)?e.Qs(this.o):e},y.prototype.$s=function(e){return e},y.prototype.reduce=function(e){e.Zs(this.o,null,e)},y.prototype.na=function(e,t,n){e.ta(t,n),this.reduce(n)},y.prototype.ea=function(e,t){e.ia(t),this.reduce(t)},A.prototype.Xs=function(e){var t=C();return e.abs().Ks(this.o._,t),t.Zs(this.o,null,t),e.s<0&&0<t.zs(m.ZERO)&&this.o.ra(t,t),t},A.prototype.$s=function(e){var t=C();return e.oa(t),this.reduce(t),t},A.prototype.reduce=function(e){for(;e._<=this.js;)e[e._++]=0;for(var t=0;t<this.o._;++t){var n=32767&e[t],r=n*this.Vs+((n*this.qs+(e[t]>>15)*this.Vs&this.Gs)<<15)&e.Rs;for(e[n=t+this.o._]+=this.o.Ns(0,r,e,t,0,this.o._);e[n]>=e.ks;)e[n]-=e.ks,e[++n]++}e.ua(),e.sa(this.o._,e),0<=e.zs(this.o)&&e.ra(this.o,e)},A.prototype.na=function(e,t,n){e.ta(t,n),this.reduce(n)},A.prototype.ea=function(e,t){e.ia(t),this.reduce(t)},m.prototype.oa=function(e){for(var t=this._-1;0<=t;--t)e[t]=this[t];e._=this._,e.s=this.s},m.prototype.Ws=function(e){this._=1,this.s=e<0?-1:0,0<e?this[0]=e:e<-1?this[0]=e+DV:this._=0},m.prototype.Ts=function(e,t){var n;if(16==t)n=4;else if(8==t)n=3;else if(256==t)n=8;else if(2==t)n=1;else if(32==t)n=5;else{if(4!=t)return void this.aa(e,t);n=2}this._=0,this.s=0;for(var r=e.length,i=!1,a=0;0<=--r;){var o=8==n?255&e[r]:u(e,r);o<0?"-"==e.charAt(r)&&(i=!0):(i=!1,0==a?this[this._++]=o:a+n>this.Os?(this[this._-1]|=(o&(1<<this.Os-a)-1)<<a,this[this._++]=o>>this.Os-a):this[this._-1]|=o<<a,(a+=n)>=this.Os&&(a-=this.Os))}8==n&&0!=(128&e[0])&&(this.s=-1,0<a)&&(this[this._-1]|=(1<<this.Os-a)-1<<a),this.ua(),i&&m.ZERO.ra(this,this)},m.prototype.ua=function(){for(var e=this.s&this.Rs;0<this._&&this[this._-1]==e;)--this._},m.prototype.Ks=function(e,t){for(var n=this._-1;0<=n;--n)t[n+e]=this[n];for(n=e-1;0<=n;--n)t[n]=0;t._=this._+e,t.s=this.s},m.prototype.sa=function(e,t){for(var n=e;n<this._;++n)t[n-e]=this[n];t._=Math.max(this._-e,0),t.s=this.s},m.prototype.fa=function(e,t){for(var n=e%this.Os,r=this.Os-n,i=(1<<r)-1,a=Math.floor(e/this.Os),o=this.s<<n&this.Rs,s=this._-1;0<=s;--s)t[s+a+1]=this[s]>>r|o,o=(this[s]&i)<<n;for(s=a-1;0<=s;--s)t[s]=0;t[a]=o,t._=this._+a+1,t.s=this.s,t.ua()},m.prototype.ca=function(e,t){t.s=this.s;var n=Math.floor(e/this.Os);if(n>=this._)t._=0;else{var r=e%this.Os,i=this.Os-r,a=(1<<r)-1;t[0]=this[n]>>r;for(var o=n+1;o<this._;++o)t[o-n-1]|=(this[o]&a)<<i,t[o-n]=this[o]>>r;0<r&&(t[this._-n-1]|=(this.s&a)<<i),t._=this._-n,t.ua()}},m.prototype.ra=function(e,t){for(var n=0,r=0,i=Math.min(e._,this._);n<i;)r+=this[n]-e[n],t[n++]=r&this.Rs,r>>=this.Os;if(e._<this._){for(r-=e.s;n<this._;)r+=this[n],t[n++]=r&this.Rs,r>>=this.Os;r+=this.s}else{for(r+=this.s;n<e._;)r-=e[n],t[n++]=r&this.Rs,r>>=this.Os;r-=e.s}t.s=r<0?-1:0,r<-1?t[n++]=this.ks+r:0<r&&(t[n++]=r),t._=n,t.ua()},m.prototype.ta=function(e,t){var n=this.abs(),r=e.abs(),i=n._;for(t._=i+r._;0<=--i;)t[i]=0;for(i=0;i<r._;++i)t[i+n._]=n.Ns(0,r[i],t,i,0,n._);t.s=0,t.ua(),this.s!=e.s&&m.ZERO.ra(t,t)},m.prototype.ia=function(e){for(var t=this.abs(),n=e._=2*t._;0<=--n;)e[n]=0;for(n=0;n<t._-1;++n){var r=t.Ns(n,t[n],e,2*n,0,1);(e[n+t._]+=t.Ns(n+1,2*t[n],e,2*n+1,r,t._-n-1))>=t.ks&&(e[n+t._]-=t.ks,e[n+t._+1]=1)}0<e._&&(e[e._-1]+=t.Ns(n,t[n],e,2*n,0,1)),e.s=0,e.ua()},m.prototype.Zs=function(e,t,n){var r=e.abs();if(!(r._<=0)){var i=this.abs();if(i._<r._)null!=t&&t.Ws(0),null!=n&&this.oa(n);else{null==n&&(n=C());var a=C(),o=this.s,e=e.s,s=this.Os-v(r[r._-1]),c=(0<s?(r.fa(s,a),i.fa(s,n)):(r.oa(a),i.oa(n)),a._),u=a[c-1];if(0!=u){var r=u*(1<<this.Us)+(1<c?a[c-2]>>this.xs:0),l=this.Ms/r,d=(1<<this.Us)/r,p=1<<this.xs,f=n._,h=f-c,_=null==t?C():t;for(a.Ks(h,_),0<=n.zs(_)&&(n[n._++]=1,n.ra(_,n)),m.ONE.Ks(c,_),_.ra(a,a);a._<c;)a[a._++]=0;for(;0<=--h;){var g=n[--f]==u?this.Rs:Math.floor(n[f]*l+(n[f-1]+p)*d);if((n[f]+=a.Ns(0,g,n,h,0,c))<g)for(a.Ks(h,_),n.ra(_,n);n[f]<--g;)n.ra(_,n)}null!=t&&(n.sa(c,t),o!=e)&&m.ZERO.ra(t,t),n._=c,n.ua(),0<s&&n.ca(s,n),o<0&&m.ZERO.ra(n,n)}}}},m.prototype.Bs=function(){var e,t;return this._<1||0==(1&(e=this[0]))?0:0<(t=(t=(t=(t=(t=3&e)*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.ks)%this.ks)?this.ks-t:-t},m.prototype.la=function(){return 0==(0<this._?1&this[0]:this.s)},m.prototype.exp=function(e,t){if(4294967295<e||e<1)return m.ONE;var n,r=C(),i=C(),a=t.Xs(this),o=v(e)-1;for(a.oa(r);0<=--o;)t.ea(r,i),0<(e&1<<o)?t.na(i,a,r):(n=r,r=i,i=n);return t.$s(r)},m.prototype.toString=function(e){if(this.s<0)return"-"+this.da().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.va(e);t=2}var n,r=(1<<t)-1,i=!1,a="",o=this._,s=this.Os-o*this.Os%t;if(0<o--)for(s<this.Os&&0<(n=this[o]>>s)&&(i=!0,a=c(n));0<=o;)s<t?(n=(this[o]&(1<<s)-1)<<t-s,n|=this[--o]>>(s+=this.Os-t)):(n=this[o]>>(s-=t)&r,s<=0&&(s+=this.Os,--o)),(i=0<n?!0:i)&&(a+=c(n));return i?a:"0"},m.prototype.da=function(){var e=C();return m.ZERO.ra(this,e),e},m.prototype.abs=function(){return this.s<0?this.da():this},m.prototype.zs=function(e){var t=this.s-e.s;if(0!=t)return t;var n=this._;if(0!=(t=n-e._))return this.s<0?-t:t;for(;0<=--n;)if(0!=(t=this[n]-e[n]))return t;return 0},m.prototype._a=function(){return this._<=0?0:this.Os*(this._-1)+v(this[this._-1]^this.s&this.Rs)},m.prototype.Qs=function(e){var t=C();return this.abs().Zs(e,null,t),this.s<0&&0<t.zs(m.ZERO)&&e.ra(t,t),t},m.prototype.pa=function(e,t){t=new(e<256||t.la()?y:A)(t);return this.exp(e,t)},m.ZERO=g(0),m.ONE=g(1),d.prototype.Xs=p,d.prototype.$s=p,d.prototype.na=function(e,t,n){e.ta(t,n)},d.prototype.ea=function(e,t){e.ia(t)},P.prototype.Xs=function(e){var t;return e.s<0||e._>2*this.o._?e.Qs(this.o):e.zs(this.o)<0?e:(t=C(),e.oa(t),this.reduce(t),t)},P.prototype.$s=function(e){return e},P.prototype.reduce=function(e){for(e.sa(this.o._-1,this.r2),e._>this.o._+1&&(e._=this.o._+1,e.ua()),this.Js.ha(this.r2,this.o._+1,this.Hs),this.o.ga(this.Hs,this.o._+1,this.r2);e.zs(this.r2)<0;)e.ma(1,this.o._+1);for(e.ra(this.r2,e);0<=e.zs(this.o);)e.ra(this.o,e)},P.prototype.na=function(e,t,n){e.ta(t,n),this.reduce(n)},P.prototype.ea=function(e,t){e.ia(t),this.reduce(t)};var f,h=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],_=(1<<26)/h[h.length-1];function b(){this.t=0,this.ya=0,this.Sa=[]}function S(){var e=(new Date).getTime();E[T++]^=255&e,E[T++]^=e>>8&255,E[T++]^=e>>16&255,E[T++]^=e>>24&255,256<=T&&(T-=256)}if(m.prototype.wa=function(e){return Math.floor(Math.LN2*this.Os/Math.log(e))},m.prototype.va=function(e){if(null==e&&(e=10),0==this.ba()||e<2||36<e)return"0";var t=this.wa(e),n=Math.pow(e,t),r=g(n),i=C(),a=C(),o="";for(this.Zs(r,i,a);0<i.ba();)o=(n+a.Ia()).toString(e).substr(1)+o,i.Zs(r,i,a);return a.Ia().toString(e)+o},m.prototype.aa=function(e,t){this.Ws(0);for(var n=this.wa(t=null==t?10:t),r=Math.pow(t,n),i=!1,a=0,o=0,s=0;s<e.length;++s){var c=u(e,s);c<0?"-"==e.charAt(s)&&0==this.ba()&&(i=!0):(o=t*o+c,++a>=n&&(this.Ea(r),this.ma(o,0),o=a=0))}0<a&&(this.Ea(Math.pow(t,a)),this.ma(o,0)),i&&m.ZERO.ra(this,this)},m.prototype.Ls=function(e,t,n){if("number"==typeof t)if(e<2)this.Ws(1);else for(this.Ls(e,n),this.Pa(e-1)||this.Aa(m.ONE.shiftLeft(e-1),a,this),this.la()&&this.ma(1,0);!this.Da(t);)this.ma(2,0),this._a()>e&&this.ra(m.ONE.shiftLeft(e-1),this);else{var n=[],r=7&e;n.length=1+(e>>3),t.Ca(n),0<r?n[0]&=(1<<r)-1:n[0]=0,this.Ts(n,256)}},m.prototype.Aa=function(e,t,n){for(var r,i=Math.min(e._,this._),a=0;a<i;++a)n[a]=t(this[a],e[a]);if(e._<this._){for(r=e.s&this.Rs,a=i;a<this._;++a)n[a]=t(this[a],r);n._=this._}else{for(r=this.s&this.Rs,a=i;a<e._;++a)n[a]=t(r,e[a]);n._=e._}n.s=t(this.s,e.s),n.ua()},m.prototype.La=function(e,t){e=m.ONE.shiftLeft(e);return this.Aa(e,t,e),e},m.prototype.Ta=function(e,t){for(var n=0,r=0,i=Math.min(e._,this._);n<i;)r+=this[n]+e[n],t[n++]=r&this.Rs,r>>=this.Os;if(e._<this._){for(r+=e.s;n<this._;)r+=this[n],t[n++]=r&this.Rs,r>>=this.Os;r+=this.s}else{for(r+=this.s;n<e._;)r+=e[n],t[n++]=r&this.Rs,r>>=this.Os;r+=e.s}t.s=r<0?-1:0,0<r?t[n++]=r:r<-1&&(t[n++]=this.ks+r),t._=n,t.ua()},m.prototype.Ea=function(e){this[this._]=this.Ns(0,e-1,this,0,0,this._),++this._,this.ua()},m.prototype.ma=function(e,t){if(0!=e){for(;this._<=t;)this[this._++]=0;for(this[t]+=e;this[t]>=this.ks;)this[t]-=this.ks,++t>=this._&&(this[this._++]=0),++this[t]}},m.prototype.ga=function(e,t,n){var r,i=Math.min(this._+e._,t);for(n.s=0,n._=i;0<i;)n[--i]=0;for(r=n._-this._;i<r;++i)n[i+this._]=this.Ns(0,e[i],n,i,0,this._);for(r=Math.min(e._,t);i<r;++i)this.Ns(0,e[i],n,i,0,t-i);n.ua()},m.prototype.ha=function(e,t,n){var r=n._=this._+e._- --t;for(n.s=0;0<=--r;)n[r]=0;for(r=Math.max(t-this._,0);r<e._;++r)n[this._+r-t]=this.Ns(t-r,e[r],n,0,0,this._+r-t);n.ua(),n.sa(1,n)},m.prototype.Na=function(e){if(e<=0)return 0;var t=this.ks%e,n=this.s<0?e-1:0;if(0<this._)if(0==t)n=this[0]%e;else for(var r=this._-1;0<=r;--r)n=(t*n+this[r])%e;return n},m.prototype.Oa=function(e){var t=this.Ra(m.ONE),n=t.ka();if(n<=0)return!1;var r=t.Ma(n);(e=e+1>>1)>h.length&&(e=h.length);for(var i=C(),a=0;a<e;++a){i.Ws(h[Math.floor(Math.random()*h.length)]);var o=i.Ua(r,this);if(0!=o.zs(m.ONE)&&0!=o.zs(t)){for(var s=1;s++<n&&0!=o.zs(t);)if(0==(o=o.pa(2,this)).zs(m.ONE))return!1;if(0!=o.zs(t))return!1}}return!0},m.prototype.clone=function(){var e=C();return this.oa(e),e},m.prototype.Ia=function(){if(this.s<0){if(1==this._)return this[0]-this.ks;if(0==this._)return-1}else{if(1==this._)return this[0];if(0==this._)return 0}return(this[1]&(1<<32-this.Os)-1)<<this.Os|this[0]},m.prototype.xa=function(){return 0==this._?this.s:this[0]<<24>>24},m.prototype.Wa=function(){return 0==this._?this.s:this[0]<<16>>16},m.prototype.ba=function(){return this.s<0?-1:this._<=0||1==this._&&this[0]<=0?0:1},m.prototype.Fa=function(){var e=this._,t=[];t[0]=this.s;var n,r=this.Os-e*this.Os%8,i=0;if(0<e--)for(r<this.Os&&(n=this[e]>>r)!=(this.s&this.Rs)>>r&&(t[i++]=n|this.s<<this.Os-r);0<=e;)r<8?(n=(this[e]&(1<<r)-1)<<8-r,n|=this[--e]>>(r+=this.Os-8)):(n=this[e]>>(r-=8)&255,r<=0&&(r+=this.Os,--e)),0!=(128&n)&&(n|=-256),0==i&&(128&this.s)!=(128&n)&&++i,(0<i||n!=this.s)&&(t[i++]=n);return t},m.prototype.Ba=function(e){return 0==this.zs(e)},m.prototype.min=function(e){return this.zs(e)<0?this:e},m.prototype.max=function(e){return 0<this.zs(e)?this:e},m.prototype.Va=function(e){var t=C();return this.Aa(e,i,t),t},m.prototype.qa=function(e){var t=C();return this.Aa(e,a,t),t},m.prototype.Ga=function(e){var t=C();return this.Aa(e,s,t),t},m.prototype.ja=function(e){var t=C();return this.Aa(e,l,t),t},m.prototype.Ha=function(){for(var e=C(),t=0;t<this._;++t)e[t]=this.Rs&~this[t];return e._=this._,e.s=~this.s,e},m.prototype.shiftLeft=function(e){var t=C();return e<0?this.ca(-e,t):this.fa(e,t),t},m.prototype.Ma=function(e){var t=C();return e<0?this.fa(-e,t):this.ca(e,t),t},m.prototype.ka=function(){for(var e,t,n=0;n<this._;++n)if(0!=this[n])return n*this.Os+(e=this[n],t=void 0,0==e?-1:((t=0)==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t));return this.s<0?this._*this.Os:-1},m.prototype.Ka=function(){for(var e=0,t=this.s&this.Rs,n=0;n<this._;++n)e+=function(e){for(var t=0;0!=e;)e&=e-1,++t;return t}(this[n]^t);return e},m.prototype.Pa=function(e){var t=Math.floor(e/this.Os);return t>=this._?0!=this.s:0!=(this[t]&1<<e%this.Os)},m.prototype.Ja=function(e){return this.La(e,a)},m.prototype.Ya=function(e){return this.La(e,l)},m.prototype.Xa=function(e){return this.La(e,s)},m.prototype.add=function(e){var t=C();return this.Ta(e,t),t},m.prototype.Ra=function(e){var t=C();return this.ra(e,t),t},m.prototype.multiply=function(e){var t=C();return this.ta(e,t),t},m.prototype.Ys=function(e){var t=C();return this.Zs(e,t,null),t},m.prototype.za=function(e){var t=C();return this.Zs(e,null,t),t},m.prototype.Qa=function(e){var t=C(),n=C();return this.Zs(e,t,n),[t,n]},m.prototype.Ua=function(e,t){var n=e._a(),r=g(1);if(n<=0)return r;var i=n<18?1:n<48?3:n<144?4:n<768?5:6,a=new(n<8?y:t.la()?P:A)(t),o=[],s=3,c=i-1,u=(1<<i)-1;if(o[1]=a.Xs(this),1<i){var l=C();for(a.ea(o[1],l);s<=u;)o[s]=C(),a.na(l,o[s-2],o[s]),s+=2}for(var d,p,f=e._-1,h=!0,_=C(),n=v(e[f])-1;0<=f;){for(c<=n?d=e[f]>>n-c&u:(d=(e[f]&(1<<n+1)-1)<<c-n,0<f&&(d|=e[f-1]>>this.Os+n-c)),s=i;0==(1&d);)d>>=1,--s;if((n-=s)<0&&(n+=this.Os,--f),h)o[d].oa(r),h=!1;else{for(;1<s;)a.ea(r,_),a.ea(_,r),s-=2;0<s?a.ea(r,_):(p=r,r=_,_=p),a.na(_,o[d],r)}for(;0<=f&&0==(e[f]&1<<n);)a.ea(r,_),p=r,r=_,_=p,--n<0&&(n=this.Os-1,--f)}return a.$s(r)},m.prototype.$a=function(e){var t=e.la();if(this.la()&&t||0==e.ba())return m.ZERO;for(var n=e.clone(),r=this.clone(),i=g(1),a=g(0),o=g(0),s=g(1);0!=n.ba();){for(;n.la();)n.ca(1,n),t?(i.la()&&a.la()||(i.Ta(this,i),a.ra(e,a)),i.ca(1,i)):a.la()||a.ra(e,a),a.ca(1,a);for(;r.la();)r.ca(1,r),t?(o.la()&&s.la()||(o.Ta(this,o),s.ra(e,s)),o.ca(1,o)):s.la()||s.ra(e,s),s.ca(1,s);0<=n.zs(r)?(n.ra(r,n),t&&i.ra(o,i),a.ra(s,a)):(r.ra(n,r),t&&o.ra(i,o),s.ra(a,s))}return 0!=r.zs(m.ONE)?m.ZERO:0<=s.zs(e)?s.Ra(e):s.ba()<0&&(s.Ta(e,s),s.ba()<0)?s.add(e):s},m.prototype.pow=function(e){return this.exp(e,new d)},m.prototype.Za=function(e){var t=this.s<0?this.da():this.clone(),n=e.s<0?e.da():e.clone(),r=(t.zs(n)<0&&(e=t,t=n,n=e),t.ka()),e=n.ka();if(e<0)return t;for(0<(e=r<e?r:e)&&(t.ca(e,t),n.ca(e,n));0<t.ba();)0<(r=t.ka())&&t.ca(r,t),0<(r=n.ka())&&n.ca(r,n),0<=t.zs(n)?(t.ra(n,t),t.ca(1,t)):(n.ra(t,n),n.ca(1,n));return 0<e&&n.fa(e,n),n},m.prototype.Da=function(e){var t,n=this.abs();if(1==n._&&n[0]<=h[h.length-1]){for(t=0;t<h.length;++t)if(n[0]==h[t])return!0;return!1}if(n.la())return!1;for(t=1;t<h.length;){for(var r=h[t],i=t+1;i<h.length&&r<_;)r*=h[i++];for(r=n.Na(r);t<i;)if(r%h[t++]==0)return!1}return n.Oa(e)},m.prototype.nf=function(){var e=C();return this.ia(e),e},b.prototype.init=function(e){for(var t,n,r=0;r<256;++r)this.Sa[r]=r;for(r=t=0;r<256;++r)t=t+this.Sa[r]+e[r%e.length]&255,n=this.Sa[r],this.Sa[r]=this.Sa[t],this.Sa[t]=n;this.t=0,this.ya=0},b.prototype.next=function(){var e;return this.t=this.t+1&255,this.ya=this.ya+this.Sa[this.t]&255,e=this.Sa[this.t],this.Sa[this.t]=this.Sa[this.ya],this.Sa[this.ya]=e,this.Sa[e+this.Sa[this.t]&255]},null==E){for(var w,E=[],T=0;T<256;)w=Math.floor(65536*Math.random()),E[T++]=w>>>8,E[T++]=255&w;T=0,S()}function I(){}function D(e,t){return new m(e,t)}function k(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}I.prototype.Ca=function(e){for(var t=0;t<e.length;++t)e[t]=function(){if(null==f){for(S(),(f=new b).init(E),T=0;T<E.length;++T)E[T]=0;T=0}return f.next()}()},k.prototype.tf=function(e){return e.pa(this.e,this.n)},k.prototype.ef=function(e,t){null!=e&&null!=t&&0<e.length&&0<t.length?(this.n=D(e,16),this.e=parseInt(t,16)):alert("Invalid RSA public key")},k.prototype.encrypt=function(e){var e=function(e,t){if(t<e.length+11)return alert("Message too long for RSA"),null;for(var n=[],r=e.length-1;0<=r&&0<t;){var i=e.charCodeAt(r--);i<128?n[--t]=i:127<i&&i<2048?(n[--t]=63&i|128,n[--t]=i>>6|192):(n[--t]=63&i|128,n[--t]=i>>6&63|128,n[--t]=i>>12|224)}n[--t]=0;for(var a=new I,o=[];2<t;){for(o[0]=0;0==o[0];)a.Ca(o);n[--t]=o[0]}return n[--t]=2,n[--t]=0,new m(n)}(e,this.n._a()+7>>3);return null==e||null==(e=this.tf(e))?null:0==(1&(e=e.toString(16)).length)?e:"0"+e},k.prototype.if=function(e){if(null==this.p||null==this.q)return e.Ua(this.d,this.n);for(var t=e.Qs(this.p).Ua(this.dmp1,this.p),n=e.Qs(this.q).Ua(this.dmq1,this.q);t.zs(n)<0;)t=t.add(this.p);return t.Ra(n).multiply(this.coeff).Qs(this.p).multiply(this.q).add(n)},k.prototype.rf=function(e,t,n){null!=e&&null!=t&&0<e.length&&0<t.length?(this.n=D(e,16),this.e=parseInt(t,16),this.d=D(n,16)):alert("Invalid RSA private key")},k.prototype.uf=function(e,t,n,r,i,a,o,s){null!=e&&null!=t&&0<e.length&&0<t.length?(this.n=D(e,16),this.e=parseInt(t,16),this.d=D(n,16),this.p=D(r,16),this.q=D(i,16),this.dmp1=D(a,16),this.dmq1=D(o,16),this.coeff=D(s,16)):alert("Invalid RSA private key")},k.prototype.af=function(e,t){var n=new I,r=e>>1;this.e=parseInt(t,16);for(var i=new m(t,16);;){for(;this.p=new m(e-r,1,n),0!=this.p.Ra(m.ONE).Za(i).zs(m.ONE)||!this.p.Da(10););for(;this.q=new m(r,1,n),0!=this.q.Ra(m.ONE).Za(i).zs(m.ONE)||!this.q.Da(10););this.p.zs(this.q)<=0&&(a=this.p,this.p=this.q,this.q=a);var a=this.p.Ra(m.ONE),o=this.q.Ra(m.ONE),s=a.multiply(o);if(0==s.Za(i).zs(m.ONE)){this.n=this.p.multiply(this.q),this.d=i.$a(s),this.dmp1=this.d.Qs(a),this.dmq1=this.d.Qs(o),this.coeff=this.q.$a(this.p);break}}},k.prototype.decrypt=function(e){e=D(e,16),e=this.if(e);if(null==e)return null;for(var t=this.n._a()+7>>3,n=e.Fa(),r=0;r<n.length&&0==n[r];)++r;if(n.length-r!=t-1||2!=n[r])return null;for(++r;0!=n[r];)if(++r>=n.length)return null;for(var i="";++r<n.length;){var a=255&n[r];a<128?i+=String.fromCharCode(a):191<a&&a<224?(i+=String.fromCharCode((31&a)<<6|63&n[r+1]),++r):(i+=String.fromCharCode((15&a)<<12|(63&n[r+1])<<6|63&n[r+2]),r+=2)}return i};var N="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function O(e){for(var t,n="",r=0;r+3<=e.length;r+=3)t=parseInt(e.substring(r,r+3),16),n+=N.charAt(t>>6)+N.charAt(63&t);for(r+1==e.length?(t=parseInt(e.substring(r,r+1),16),n+=N.charAt(t<<2)):r+2==e.length&&(t=parseInt(e.substring(r,r+2),16),n+=N.charAt(t>>2)+N.charAt((3&t)<<4));0<(3&n.length);)n+="=";return n}k.prototype.ff=function(e){e=this.cf(e);var t,n,r=this.lf(),i=0,a=null,o=null;for(n in r)r.hasOwnProperty(n)&&((a=r[n]).hasOwnProperty("offset")&&(i+=2*a.offset),t="string"==typeof a.length?this[a.length]:a.length,t*=2,o=e.substr(i,t),a.hasOwnProperty("type")&&("int"==a.type?o=parseInt(o,16):"bigint"==a.type&&(o=D(o,16))),i+=t,this[n]=o)},k.prototype.df=function(e){var t="";e=function(e){var t,n,r=(e=""+e).length;if(0===r)return e;if(r%4!=0)throw new Error;t=0,"="===e.charAt(r-1)&&(t=1,"="===e.charAt(r-2)&&(t=2),r-=4);for(var i=[],a=0;a<r;a+=4)n=o(e,a)<<18|o(e,a+1)<<12|o(e,a+2)<<6|o(e,a+3),i.push(String.fromCharCode(n>>16,n>>8&255,255&n));switch(t){case 1:n=o(e,a)<<18|o(e,a+1)<<12|o(e,a+2)<<6,i.push(String.fromCharCode(n>>16,n>>8&255));break;case 2:n=o(e,a)<<18|o(e,a+1)<<12,i.push(String.fromCharCode(n>>16))}return i.join("")}(e);for(var n=0;n<e.length;++n){var r=e.charCodeAt(n).toString(16);t+=r=1===r.length?"0"+r:r}return t},k.prototype.cf=function(e){var t=(e=e.replace(/^\s+|\s+$/g,"")).split(/\r?\n/);return e=(t="-----BEGIN"==t[0].substring(0,10)?t.slice(1,t.length-1):t).join(""),this.df(e)},k.prototype.vf=function(){var e,t="",n=this.lf(),r=null,i=null,a=0;for(e in n)n.hasOwnProperty(e)&&(r=n[e])._f&&((i=this[e].toString(16)).length%2&&(i="0"+i),r.hasOwnProperty("padded")&&r.pf&&(i="00"+i),(a=(a=i.length/2).toString(16)).length%2&&(a="0"+a),r.hasOwnProperty("extraspace")&&(t+=a),t+=a,t+=i,t+="02");return t.slice(0,-2)},k.prototype.hf=function(e,t){return e&&(t="(.{1,"+(t=t||64)+"})( +|$\n?)|(.{1,"+t+"})",e.match(new RegExp(t,"g")).join("\n"))},k.prototype.gf=function(){var e="-----BEGIN RSA PRIVATE KEY-----\n",t="3082025e02010002";return t+=this.vf(),(e+=this.hf(O(t))+"\n")+"-----END RSA PRIVATE KEY-----"},k.prototype.mf=function(){var e="-----BEGIN PUBLIC KEY-----\n",t="30819f300d06092a864886f70d010101050003818d0030818902";return t+=this.vf(),(e+=this.hf(O(t))+"\n")+"-----END PUBLIC KEY-----"};function B(e){k.call(this),e&&this.ff(e)}function L(e){k.call(this),e&&("string"==typeof e?this.ff(e):e.hasOwnProperty("n")&&e.hasOwnProperty("e")&&(this.n=e.n,this.e=e.e))}function M(){this.Sf=null,this.wf=null}((B.prototype=new k).constructor=B).prototype.lf=function(){return{header:{length:4},versionlength:{length:1,offset:1,type:"int"},version:{length:"versionlength",type:"int"},n_length:{length:1,offset:2,type:"int"},n:{length:"n_length",type:"bigint",_f:!0,pf:!0,yf:!0},e_length:{length:1,offset:1,type:"int"},e:{length:"e_length",type:"int",_f:!0},d_length:{length:1,offset:2,type:"int"},d:{length:"d_length",type:"bigint",_f:!0,pf:!0,yf:!0},p_length:{length:1,offset:1,type:"int"},p:{length:"p_length",type:"bigint",_f:!0,pf:!0},q_length:{length:1,offset:1,type:"int"},q:{length:"q_length",type:"bigint",_f:!0,pf:!0},dmp1_length:{length:1,offset:1,type:"int"},dmp1:{length:"dmp1_length",type:"bigint",_f:!0},dmq1_length:{length:1,offset:1,type:"int"},dmq1:{length:"dmq1_length",type:"bigint",_f:!0,pf:!0},coeff_length:{length:1,offset:1,type:"int"},coeff:{length:"coeff_length",type:"bigint",_f:!0,pf:!0}}},((L.prototype=new k).constructor=L).prototype.lf=function(){return{header:{length:25},n_length:{length:1,offset:2,type:"int"},n:{length:"n_length",type:"bigint",_f:!0,pf:!0,yf:!0},e_length:{length:1,offset:1,type:"int"},e:{length:"e_length",type:"int",_f:!0}}};return M.prototype.bf=function(e){this.Sf=new B(e),this.wf=new L(this.Sf)},M.prototype.If=function(e){this.wf=new L(e)},M.prototype.decrypt=function(e){return!!this.Sf&&this.Sf.decrypt(function(e){for(var t,n="",r=0,i=0;i<e.length&&"="!=e.charAt(i);++i){var a=N.indexOf(e.charAt(i));a<0||(r=0==r?(n+=c(a>>2),t=3&a,1):1==r?(n+=c(t<<2|a>>4),t=15&a,2):2==r?(n=(n+=c(t))+c(a>>2),t=3&a,3):(n=(n+=c(t<<2|a>>4))+c(15&a),0))}return 1==r&&(n+=c(t<<2)),n}(e))},M.prototype.encrypt=function(e){var t=this.wf||this.Sf;return!!t&&O(t.encrypt(e))},M.prototype.gf=function(){return this.Sf||(this.Sf=new B,this.Sf.af(1024,"010001"),this.wf=new L(this.Sf)),this.Sf.gf()},M.prototype.mf=function(){return this.wf||(this.wf=new L,this.wf.af(1024,"010001")),this.wf.mf()},function(e){var t=new M;return t.If(R.bn),t.encrypt(e)}}(),e.exports=n.encrypt},function(e,t,n){var r=n(0),I=n(20),s=n(44),D=n(2).mn,k=n(85),N=n(86),O=n(26),B=n(15),L=n(9),M=n(25),R=n(11),x=n(19);e.exports=function(g,m,l,C,a,d,p){var v,f,y,A,P,b,S,w,E,T;function o(e,t,n,r){if(h=n,function(e){var t=h.getIncludedPublishers();if(0==t.length)return 1;for(var n=0;n<t.length;++n)if(e.Pi(t[n]))return 1}(_=r)&&((_=+new Date)<P?(S=b=0,w=P=_,m.put(R.ct,S),m.put(R.lt,w)):(1e3<_-P&&(b=0,P=_),1e3<_-w&&(S=0,w=_,m.put(R.ct,S),m.put(R.lt,w))),b<20)&&S<6e3&&(b++,S++,m.put(R.ct,S),1)){m.put(R.Gn,+new Date),g.Ye(t,!0),_=e;var i=t,a=n,o=r;0==v&&_.vr()&&(y=+new Date,A++,m.put(R.dt,A),_.setLabel("ns_ap_csf","1"),_.setLabel("ns_ap_cfg",o.Ei())),v++,_.setLabel("ns_ts",i+""),_.setLabel("ns_ap_ec",v+""),_.setLabel("ns_ap_cs",A+""),_.setLabel("ns_ap_id",y+""),g.Xe()==O.be.Ke?_.setLabel("name","foreground"):g.Xe()==O.be.Je||g.Xe()==O.be.we?_.setLabel("name","background"):_.setLabel("name","Application"),a instanceof x&&!a.xe()||(s=o,i=i,(c=_).setLabel("ns_ap_fg",g.ii()+""),c.setLabel("ns_ap_ft",g.ei(c.vr())+""),c.setLabel("ns_ap_dft",g.ti()+""),c.setLabel("ns_ap_bt",g.ri(c.vr())+""),c.setLabel("ns_ap_dbt",g.ni()+""),c.setLabel("ns_ap_it",g.Ze(c.vr())+""),c.setLabel("ns_ap_dit",g.$e()+""),c.setLabel("ns_ap_as",g.ze()+""),c.setLabel("ns_ap_das",g.Qe()+""),c.setLabel("ns_ap_ut",1e3*s.getUsagePropertiesAutoUpdateInterval()+""),c.setLabel("ns_ap_usage",i-g.oi()+"")),(s=_).setLabel("c1","19"),s.setLabel("ns_ap_smv","6.4"),s.setLabel("ns_ap_bv",B.VERSION),s.setLabel("ns_ap_sv",B.VERSION);var s,c=_,i,u=(i=o).getPartnerConfigurations();if(0!=i.getPartnerConfigurations().length){for(var l="",d="",p=0;p<u.length;++p){var f=u[p];l+=f.getPartnerId()+",",d+=f.getExternalClientId()+","}l=l.substring(0,l.length-1),d=d.substring(0,d.length-1),c.setLabel("cs_partner",l),c.setLabel("cs_xcid",d)}_.addLabels(E),_.addLabels(a.getLabels()),N.Mf(_,a,_.getLabels(),o),E={},T.push({event:e,timestamp:t,Ef:n,configuration:r}),C.Uf()}var h,_}function h(e,t){l.flush(t),l.he(),m.zt()}function _(e,t){l.nr(e,t),l.he(),l.Zi(),m.zt()}r.extend(this,{le:function(){return v},ye:function(e,t,n){var r;o(((r=new s).setLabel("ns_type","hidden"),r.setLabel("ns_ap_ev","keep-alive"),r.setLabel("ns_ap_oc",l.er()+""),r),e,t,n)},Wt:function(e,t,n){var r,i;o(((r=new s).setLabel("ns_type","view"),r.setLabel("ns_ap_ev","start"),r.setLabel("ns_ap_gs",a.xf()+""),r.setLabel("ns_ap_install",a.Wf()+""),0<(i=g.ui())&&r.setLabel("ns_ap_lastrun",i+""),a.Ff()&&r.setLabel("ns_ap_updated",a.Bf()+""),r),e,t,n)},ve:function(e,t,n){var r;o(((r=new s).setLabel("ns_type","hidden"),r.setLabel("ns_ap_ev","hidden"),r),e,t,n)},pe:function(e,t,n){var r;o(((r=new s).setLabel("ns_type","view"),r.setLabel("ns_ap_ev","view"),r),e,t,n)},te:function(e,t){E[e]=t+"",m.put(R.vt,E)}}),v=0,f=[],A=m.get(R.dt,0),w=P=-1,S=b=0,E=m.get(R.vt,{}),T=[],C.addListener(function(){for(var e=0;e<T.length;e++){var t=T[e],n=(u=c=s=o=a=i=r=n=void 0,t.event),r=(t.timestamp,t.Ef,t.configuration);(a=n).setLabel("ns_ap_pn",D.K()),a.setLabel("ns_ap_pv",D.Y()),a.setLabel("ns_ap_pfm",D.J()),a.setLabel("ns_ap_pfv",D.H()),a.setLabel("ns_ap_device",D.j()),a.setLabel("ns_ap_lang",D.nn()),a.setLabel("ns_ap_ar",D.en()),a.setLabel("ns_radio",function(){switch(D["in"]()){case L.EMULATOR:return"emu";case L.WIFI:return"wlan";case L.WWAN:return"wwan";case L.ETHERNET:return"eth";case L.BLUETOOTH:return"bth";default:return"unknown"}}()),a.vr()&&a.setLabel("ns_ap_jb",I.Ve(D.rn()));var i=r,a=((a=n).setLabel("ns_ap_an",i.F()),a.setLabel("ns_ap_res",D.Z()),a.setLabel("ns_ap_po","0x0"),a.setLabel("ns_ap_sd",D.X()),a.setLabel("ns_ap_ver",i.B()),a.setLabel("ns_ap_bi",i.Ti()),function(e){if(p.isEnabled()){var t,n,r,i=p.Pf();if(i)i.Af?e.addLabels({cs_cmp_nc:"1"}):(n={gdpr:"0",gdpr_p1t:"",gdpr_li:"",gdpr_purps:"",gdpr_pcc:"",cs_cmp_id:i.cmpId,cs_cmp_sv:i.cmpVersion,cs_cmp_nc:i.Df?"1":"0"},i.Cf&&(n.gdpr="1",i.Lf)?(n.gdpr_li=i.Tf?"1":"0",n.gdpr_pcc=i.Nf,t=i.Of&&i.purposeOneTreatment?(n.gdpr_p1t="1",!0):(n.gdpr_p1t="0",i.consents[1]),i.Rf&&(r=[],t&&r.push(1),i.consents[7]&&r.push(7),i.consents[8]&&r.push(8),i.consents[9]&&r.push(9),i.consents[10]&&r.push(10),n.gdpr_purps=r.join(",")),e.addLabels(n)):e.addLabels(n))}}(n),n);(i=d.kt()).xt&&a.setLabel("ns_ak",i.xt),i.Rt&&a.setLabel("ns_ap_ni","1");(i=n).setLabel("ns_ap_env","0-0-2"),D.un(i.getLabels()),f.push(n);var o=r,a=D.in(),i=o.Oi(),s=!1;a!=L.DISCONNECTED&&i!=M.CACHE&&(i!=M.LAN||a!=L.WWAN&&a!=L.BLUETOOTH)||(s=!0);for(var c=0;c<f.length;++c){var u=f[c];s?l.nr(u,o):(u=new k(u,h,_,o),o.Ri()&&D.sn("Comscore: "+u.kf()),u.$i())}l.Zi(),f=[],m.zt()}T=[]})}},function(e,t,n){var c=n(0),u=n(2).mn,l=n(20);e.exports=function(t,n,r,i){var e,a,o;function s(e){(200==e||i.isHttpRedirectCachingEnabled()&&(302==e||301==e)?n:r)(t,i)}4096<(e=l.We(i.Ci(),t.getLabels(),i.getLabelOrder())).length&&0<e.indexOf("&")&&(a=e.substring(0,4088).lastIndexOf("&"),o=encodeURIComponent(e.substring(a+1)),e=e.substring(0,a)+"&ns_cut="+o),4096<e.length&&(e=e.substring(0,4096)),c.extend(this,{$i:function(){u.T?u.T(e,s,i):s()},kf:function(){return e}})}},function(e,t,n){var b=n(32),S=n(0),w=n(19),E=n(2).mn,r="a".charCodeAt(0);function T(e,t){var n;return 0==t?e:(t=String.fromCharCode(r+t-1),n=(n=e.match(/^[cC](\d|[12]\d)$/))&&n[1]?n[1]:"",String(n?"c"+t+n:"c"+t+"_"+e))}e.exports={Mf:function(e,t,n,r){for(var i,a={},o=e.vr(),s=[],c=[],u=t.getIncludedPublishers(),l=r.getPublisherConfigurations(),d=0;d<l.length;++d){var p=l[d],f=p.getPublisherId();f==b.ee||0!=u.length&&-1==u.indexOf(f)||(s.push(p),c.push(f))}(0==u.length||-1!=u.indexOf(b.ee))&&0<r.getPartnerConfigurations().length&&(i=function(e){for(var t={},n={},r=e.getPartnerConfigurations(),i=0;i<r.length;++i){var a=r[i];S.extend(t,a.getPersistentLabels()),S.extend(n,a.getStartLabels())}return e.Bi().copy({persistentLabels:t,startLabels:n})}(r),s.push(i),c.push(i.getPublisherId()));for(var h=[],_=0;_<s.length;++_){var g=s[_];if(26<=_)break;var m={};if(m.c2=g.getPublisherId(),m.c12=g.getPublisherUniqueDeviceId(),E.pn&&(m.c12=E.hn),S.extend(m,n),S.extend(m,r.getPersistentLabels()),S.extend(m,g.getPersistentLabels()),S.extend(m,t.getLabels()),o&&S.extend(m,r.getStartLabels()),S.extend(m,t.getPublisherLabels(g.getPublisherId())),o&&S.extend(m,g.getStartLabels()),0==_)h=function(e,t,n){var r,i=[];for(r in e.getPersistentLabels())i.push(r);if(n)for(r in e.getStartLabels())i.push(r);var n=t.getPublisherLabels(e.getPublisherId()),a=t.getLabels();for(r in n)r in a||i.push(r);return i}(g,t,o),S.extend(a,m);else{for(d=0;d<h.length;++d){var C=h[d];C in m||(m[C]="*null")}for(var v in m)v in a&&a[v]==m[v]||(a[T(v,_)]=m[v])}}if(t instanceof w)for(var y=t.Ue(),d=0;d<y.length;++d){var A=y[d];if(26<=_)break;if(-1==c.indexOf(A)){var P=t.getPublisherLabels(A);for(v in a[T("c2",_)]=A,P)v in a&&a[v]==P[v]||(a[T(v,_)]=P[v]);_++}}e.addLabels(a)}}},function(e,t,n){var i=n(0);e.exports=function(t){var n,r,e=t.getProperties();try{(n=JSON.parse(e))&&"object"==typeof n||(n={})}catch(e){n={}}r=!1,i.extend(this,{put:function(e,t){n[e]=t,r=!0},get:function(e,t){return e in n?n[e]:t},remove:function(e){delete n[e],r=!0},contains:function(e){return e in n},clear:function(){n={}},zt:function(){var e;r&&(e=JSON.stringify(n),t.storeProperties(e)),r=!1}})}},function(e,t,n){var a=n(0),o=n(2).mn;e.exports=function(t){var n,r;function e(){if(r){r=!1,t();for(var e=0;e<n.length;e++)n[e]()}}function i(){r=r&&!1}n=[],a.extend(this,{addListener:function(e){n.push(e)},Uf:function(){r||(r=!0,o.U(e,i))}})}},function(e,t,n){var c=n(0),u=n(11);e.exports=function(e,t){var n,r,i,a,o,s=-1;a=i=!1,s=e.get(u.Hn,-1),n=e.get(u.Kn,-1),r=e.get(u.jn,null),e.put(u.jn,t.B()),o=+new Date,-1==s?(n=s=o,e.put(u.Hn,s),e.put(u.Kn,n),i=!0):r&&r!=t.B()&&(n=o,e.put(u.Kn,n),e.put(u.dt,0),a=!0),c.extend(this,{Bf:function(){return r},xf:function(){return s},Wf:function(){return n},Ff:function(){return a},Vf:function(){return i}})}},function(e,t,n){var i=n(0),r=n(11),a=n(2).mn,o=["previousVersion","AppName","AppVersion","vid","exitCode","q_dcc","q_dcf","runs","accumulatedActiveUserSessionTime","accumulatedUserSessionTime","activeUserSessionCount","userSessionCount","userInteractionCount","lastActiveUserSessionTimestamp","lastUserInteractionTimestamp","lastUserSessionTimestamp"],s={CACHE_DROPPED_MEASUREMENTS:r.qn,lastApplicationAccumulationTimestamp:r.zn,lastSessionAccumulationTimestamp:r.Qn,lastApplicationSessionTimestamp:r.$n,foregroundTransitionsCount:r.Zn,accumulatedForegroundTime:r.nt,accumulatedBackgroundTime:r.tt,accumulatedInactiveTime:r.et,totalForegroundTime:r.it,totalBackgroundTime:r.rt,totalInactiveTime:r.ot,accumulatedApplicationSessionTime:r.ut,applicationSessionCountKey:r.st,genesis:r.at,previousGenesis:r.ft,installId:r.Kn,firstInstallId:r.Hn,currentVersion:r.jn,coldStartCount:r.dt,crossPublisherIdHashed:r.Jn,crossPublisherId:r.Yn};e.exports=function(){var r="function"==typeof a.R?new a.R:null;i.extend(this,{re:function(e){if(r)for(var t in s){var n=r.get(t);null!=n&&e.put(s[t],n)}},oe:function(){if(r){for(var e in s)r.remove(e);for(var t=0;t<o.length;++t)r.remove(o[t]);r.clear()}}})}},function(e,t,n){var o=n(0),s=n(44),c=n(2).mn,u="cache_dir",l="undefined"!=typeof encodeURIComponent?decodeURIComponent:unescape;e.exports=function(e,t,n){function i(){return a&&a.dir(u)||[]}var r="function"==typeof c.R?new c.R:null,a="function"==typeof c.k?new c.k:null;o.extend(this,{ue:function(){var e=function(e){for(var t=[],n=0;n<e.length;++n){var r=function(e){for(var t=e.split("&"),n=new s,r=0;r<t.length;++r){var i=t[r].split("="),a=l(i[0]),i=l(i[1]);n.setLabel(a,i)}return n}(e[n]);t.push(r)}return t}(function(){for(var e=i(),t=[],n=0;n<e.length;++n){r=e[n];var r=a&&(r=a.read(u,r))?r.split("\n"):[],t=t.concat(r)}return t}());n.tr(e)},se:function(){for(var e,t=i(),n=0;n<t.length;++n)e=t[n],a&&(a.deleteFile(u,e),r)&&r.remove(e)}})}},function(e,t,n){var i=n(0),a=n(93),o=n(11);e.exports=function(){var t,n,r=this;i.extend(r,{Yt:function(e){n=e},isEnabled:function(){return n},ae:function(e){t=e},$t:function(){var e;return!(n&&(e=r.Pf())&&!e.Af&&e.Cf)||!!e.Lf&&!!e.Rf&&(e.Of&&e.purposeOneTreatment||e.consents[1])},Pf:function(){return a.qf()},Zt:function(){t.remove(o.Xn),t.remove(o.Jn),t.remove(o.Yn)}}),n=!0}},function(e,t,n){"use strict";Object.defineProperty(t,"v",{value:!0}),t.qf=void 0;var a=[1,7,8,9,10],r=!1;t.qf=function(){try{var e=function(){try{var t;if("function"==typeof __tcfapi)return __tcfapi("getTCData",2,function(e){t=e}),t||(r=!0),t}catch(e){}}();if(!e&&!r)return!1;if(e)return e.gdprApplies?{Af:!1,cmpId:e.cmpId,cmpVersion:e.cmpVersion,Df:r,Cf:!0,Lf:!0,Of:e.isServiceSpecific,purposeOneTreatment:e.purposeOneTreatment,Tf:e.vendor.legitimateInterests[77],Rf:e.vendor.consents[77],consents:function(e){var t={};if(e)for(var n=0,r=a;n<r.length;n++){var i=r[n];t[i]=e.purpose.consents[i]}return t}(e),Nf:e.publisherCC||""}:{Af:!1,cmpId:e.cmpId,cmpVersion:e.cmpVersion,Df:r,Cf:!1}}catch(e){}return{Af:!0,Df:!0}}},function(e,t,n){var r=n(0),i=n(14),a=n(95),o=n(1).I,s=n(1).P,c=n(16),u=n(119),l=n(31),d=n(120),p=n(50),f=n(121),n=n(122);function h(e){var n,t=this;r.extend(t,{configuration:null,extendedAnalytics:null,createPlaybackSession:function(){n.Gf().qo().Vo("createPlaybackSession");var e=n.Gf().Xo().Yo();e!=s.IDLE&&(n.Gf().qo().Go("Ending the current Clip. It was in state:",i.yt(e)),t.notifyEnd()),n.Gf().Dr().Xr()&&n.iu()},addListener:function(e){n.addListener(e)},removeListener:function(e){n.removeListener(e)},addMeasurementListener:function(e){n.addMeasurementListener(e)},removeMeasurementListener:function(e){n.removeMeasurementListener(e)},setDvrWindowLength:function(e){n.Gf().Dr().Ar().setDvrWindowLength(e),n.Gf().Dr().Ar().ys(!0)},startFromDvrWindowOffset:function(e){n.Gf().Dr().startFromDvrWindowOffset(e),n.Gf().Dr().Ar().ys(!0)},setMediaPlayerName:function(e){n.Gf().Dr().setMediaPlayerName(e)},setMediaPlayerVersion:function(e){n.Gf().Dr().setMediaPlayerVersion(e)},setImplementationId:function(e){n.Gf().Dr().setImplementationId(e)},setProjectId:function(e){n.setProjectId(e+"")},startFromSegment:function(e){n.Gf().qo().Vo("startFromSegment",e),n.Gf().Dr().startFromSegment(e)},startFromPosition:function(e){n.Gf().qo().Vo("startFromPosition",e),n.Gf().Dr().startFromPosition(e)},loopPlaybackSession:function(){n.Gf().qo().Vo("loopPlaybackSession"),n.Gf().Dr().loopPlaybackSession()},setMetadata:function(e){n.Gf().Dr().Bo(e)},getPlaybackSessionId:function(){n.Gf().Dr().Ro()},notifyPlay:function(){n.Gf().qo().Vo("notifyPlay");var e=new c(o.PLAY);n.zo(e)},notifyPause:function(){n.Gf().qo().Vo("notifyPause");var e=new c(o.PAUSE);n.zo(e)},notifyEnd:function(){n.Gf().qo().Vo("notifyEnd");var e=new c(o.END);n.zo(e)},notifyBufferStart:function(){n.Gf().qo().Vo("notifyBufferStart");var e=new c(o.BUFFER);n.zo(e)},notifyBufferStop:function(){n.Gf().qo().Vo("notifyBufferStop");var e=new c(o.BUFFER_STOP);n.zo(e)},notifySeekStart:function(){n.Gf().qo().Vo("notifySeekStart");var e=new c(o.SEEK_START);n.zo(e)},notifyChangePlaybackRate:function(e){n.Gf().qo().Vo("notifyChangePlaybackRate");var e=Math.floor(100*e),t=new c(o.PLAYBACK_RATE);t.Lt.ns_st_rt=e+"",n._r(t)}}),n=new a(e),t.configuration=n.jf,t.extendedAnalytics=new u(n.Gf()),n.Gf().qo().log("New StreamingAnalytics instance with configuration",e)}h.PlayerEvents=o,h.InternalStates=s,h.WindowState=n,h.ContentMetadata=l,h.StackedContentMetadata=d,h.AdvertisementMetadata=p,h.StackedAdvertisementMetadata=f,e.exports=h},function(e,r,t){var s=t(96),c=t(97),u=t(98),l=t(99),F=t(100),j=t(101),G=t(102),Y=t(103),H=t(104),q=t(105),K=t(106),W=t(107),J=t(108),z=t(14),X=t(109),Q=t(0),$=t(21),Z=t(29),ee=t(4),te=t(110),ne=t(111),re=t(16),ie=t(47),ae=t(1).P,oe=t(1).I,se=t(1).A,ce=t(45),ue=t(46),le=t(115),de=t(116),_e=t(117),pe=t(3),fe=t(17),he=t(2).mn,ge=t(19),me=t(118);function n(e){var S,w,E,d,p,f,h,_,g,m,C,v,y,A,P,b,t,n,T,I,r,i,a,D,k,N,O,B,L,M,R=this;function x(e){var t=S.Xo().Yo();if(t==ae.IDLE||t==ae.PLAYBACK_NOT_STARTED||t==ae.BUFFERING_BEFORE_PLAYBACK||t==ae.SEEKING_BEFORE_PLAYBACK){if(e==oe.PLAY)return 1}else if(t==ae.PLAYING){if(e==oe.END||e==oe.AD_SKIP||e==oe.SEEK_START||e==oe.PAUSE)return 1}else if(t==ae.PAUSED||t==ae.BUFFERING_DURING_PAUSE||t==ae.SEEKING_DURING_PLAYBACK||t==ae.SEEKING_DURING_BUFFERING||t==ae.SEEKING_DURING_PAUSE){if(e==oe.END||e==oe.AD_SKIP||e==oe.PLAY)return 1}else if(t==ae.BUFFERING_DURING_PLAYBACK){if(e==oe.PAUSE_ON_BUFFERING||e==oe.END||e==oe.AD_SKIP||e==oe.SEEK_START||e==oe.PAUSE||e==oe.PLAY)return 1}else if(t==ae.BUFFERING_DURING_SEEKING){if(e==oe.END||e==oe.AD_SKIP||e==oe.PAUSE||e==oe.PLAY)return 1}else if(t==ae.PAUSED_DURING_BUFFERING&&(e==oe.END||e==oe.AD_SKIP||e==oe.BUFFER_STOP||e==oe.PLAY))return 1}function V(e){(M=e)==Z.wi.li?(R.Hf("1"),S.qo().Go("System clock jump detected","to the far past")):M==Z.wi.di?(R.Hf("3"),S.qo().Go("System clock jump detected","to the future")):(R.Hf("2"),S.qo().Go("System clock jump detected","to the near past"))}function U(){R.zo(new re(oe.END))}function o(){E=fe.configuration.Di()}Q.extend(R,{jf:null,Hf:function(e){-1==B.indexOf(e)&&B.push(e)},wr:function(){var e=new re(oe.HEARTBEAT),t=(e.setLabel("ns_st_hc",S.Kf().br()),S.Dr()),n=t.Ar(),r=isNaN(I)?T:I,i=(I=e.Tt,Z.Bt().yi(e.Tt),!1),r=(M&&(i=!(M=null),e.Tt=r),n.ro()),a=n.ku(),o=n.$r(),s=n.no(),c=n.fo(),u=n.ms(),l=(n.Ss()?t.ao(ae.PLAYING,null,e.Tt):t.zr(ae.PLAYING,null,e.Tt),n.$r()),e=(n.Cu(e),R.Fn(oe.HEARTBEAT,e));S.Dr().Ar()._u(e.Jf),S.Yf().dispatchEvent(e),n.Qr(r),n.Zr(a),n.uo(o),n.so(s),n.ho(c),n.mo(u),i&&(n.Qr(l),n.Zr(I),t.Kr(I-parseInt(e.Jf.ns_st_dpt)),n.Kr(I-parseInt(e.Jf.ns_st_dpt)),n.Ru(I-parseInt(e.Jf.ns_st_det)))},Fn:function(e,t){var n=t.Tt,r=S.Dr(),i={};i.ns_ts=n+"",i.ns_st_ev=oe.toString(e),i.ns_st_mp="js_api",i.ns_st_mv="7.6.1.210506",i.ns_st_ub="0",i.ns_st_br="0",i.ns_st_pn="1",i.ns_st_tp="0",i.ns_st_it=se.toString(se.g),i.ns_st_sv="7.6.1.210506",i.ns_st_smv="6.4",i.ns_type="hidden",i.ns_st_ec=S.Yf().le()+"",i.ns_st_cfg=w.Xf(),i.ns_st_hd=S.Kf().Lr(n),i.ns_st_po=r.Ar().$r()+"",0<B.length&&(i.ns_ap_ie=B.join(";")),r.Fn(i,n),r.Ar().Fn(i,n,e==oe.HEARTBEAT),Q.extend(i,t.Lt),Q.extend(i,O);for(var a=Q.h(N),o=0;o<a.length;++o)a[o](i);var s={},c=(Q.extend(s,i),Q.extend(s,w.getLabels()),new ge),u=(c._e(!1),w.zf()),l=w.Qf,d=r.Ar(),p=d.getStacks();if(0<l.length)for(var f=0;f<l.length;++f){var h=l[f];-1!=E.indexOf(h)&&c.addIncludedPublisher(h)}else for(f=0;f<E.length;++f){var _=E[f];c.addIncludedPublisher(_)}var g,m=[];for(g in u){var C,v=u[g];0<l.length&&-1==l.indexOf(g)||(Q.extend(C={},s),Q.extend(C,v.getLabels()),Q.extend(C,d.getLabels()),p[g]&&Q.extend(C,p[g]),Q.extend(C,t.Ct),c.addPublisherLabels(g,C),m.push(g))}var y,A=[];for(y in p){var P,b=p[y];-1==m.indexOf(y)&&(Q.extend(P={},b),Q.extend(P,t.Ct),c.addPublisherLabels(y,P),A.push(y))}return c.Me(A),Q.extend(s,d.getLabels()),Q.extend(s,t.Ct),c.addLabels(s),new me(e,c,i)},zo:function(e){var t=S.Xo().Yo();if(w.nu){if(D&&t==ae.BUFFERING_BEFORE_PLAYBACK&&e.Dt==oe.BUFFER_STOP)return S.qo().Go("Resume to PLAY from state:",z.yt(t)),(a=new re(oe.PLAY)).Tt=e.Tt,a.Lt.ns_st_ae="1",R.zo(a),void(D=!1);D=D&&!1}var n,r,i=S.Xo().$f(e.Dt);if(null!=i&&i!=t){L&&z.St(t)&&!z.St(i)?he.vn(U):L&&!z.St(t)&&z.St(i)&&he._n(U);var a=S.Dr(),o=a.Ar(),s=isNaN(I)?T:I,c=(I=e.Tt,Z.Bt().yi(e.Tt),!1);M&&(c=!(M=null),e.Tt=s),t==ae.IDLE&&o.lr("ns_st_pn")&&a.startFromSegment(parseInt(o.dr("ns_st_pn"))),o.Ss()?a.ao(t,i,e.Tt):a.zr(t,i,e.Tt),t==ae.IDLE&&a.yo(),s=e,n=S.Xo().Yo(),s.Dt==oe.AD_SKIP&&!s.Lt.hasOwnProperty("ns_st_ui")&&x(s.Dt)?s.Lt.ns_st_ui="skip":s.Dt==oe.SEEK_START&&!s.Lt.hasOwnProperty("ns_st_ui")&&x(s.Dt)&&(s.Lt.ns_st_ui="seek"),r=s.Dt,n==ae.IDLE?r==oe.BUFFER?d.Zf(s):r==oe.SEEK_START?d.nc(s):r==oe.PLAY&&d.tc(s):n==ae.PLAYBACK_NOT_STARTED?r==oe.END||r==oe.AD_SKIP?f.ec(s):r==oe.SEEK_START?f.nc(s):r==oe.PLAY?f.tc(s):r==oe.BUFFER&&f.Zf(s):n==ae.PLAYING?r==oe.END||r==oe.AD_SKIP?h.ec(s):r==oe.BUFFER?h.Zf(s):r==oe.SEEK_START?h.nc(s):r==oe.PAUSE&&h.ic(s):n==ae.PAUSED?r==oe.END||r==oe.AD_SKIP?p.ec(s):r==oe.PLAY?p.tc(s):r==oe.BUFFER?b.rc(s):r==oe.SEEK_START&&b.oc(s):n==ae.BUFFERING_BEFORE_PLAYBACK?r==oe.END||r==oe.AD_SKIP?_.ec(s):r==oe.BUFFER_STOP?_.uc(s):r==oe.SEEK_START?_.nc(s):r==oe.PAUSE?_.ic(s):r==oe.PLAY&&_.tc(s):n==ae.BUFFERING_DURING_PLAYBACK?r==oe.PAUSE_ON_BUFFERING?g.sc(s):r==oe.BUFFER_STOP?b.ac(s):r==oe.END||r==oe.AD_SKIP?g.ec(s):r==oe.SEEK_START?g.nc(s):r==oe.PAUSE?g.ic(s):r==oe.PLAY&&b.ac(s):n==ae.BUFFERING_DURING_SEEKING?r==oe.END||r==oe.AD_SKIP?m.ec(s):r==oe.PAUSE?m.ic(s):r==oe.PLAY?m.tc(s):r==oe.BUFFER_STOP&&b.fc(s):n==ae.BUFFERING_DURING_PAUSE?r==oe.END||r==oe.AD_SKIP?C.cc(s):r==oe.PAUSE?C.ic(s):r==oe.PLAY?C.tc(s):r==oe.SEEK_START?b.oc(s):r==oe.BUFFER_STOP&&b.fc(s):n==ae.SEEKING_BEFORE_PLAYBACK?r==oe.END||r==oe.AD_SKIP?y.ec(s):r==oe.PAUSE?y.ic(s):r==oe.PLAY?y.tc(s):r==oe.BUFFER&&b.rc(s):n==ae.SEEKING_DURING_PLAYBACK?r==oe.END||r==oe.AD_SKIP?P.ec(s):r==oe.PLAY?P.tc(s):r==oe.BUFFER?b.rc(s):r==oe.PAUSE&&b.lc(s):n==ae.SEEKING_DURING_BUFFERING?r==oe.PAUSE?A.ic(s):r==oe.BUFFER?b.rc(s):r==oe.PLAY?b.dc(s):r==oe.END||r==oe.AD_SKIP?b.vc(s):r==oe.BUFFER_STOP&&b._c(s):n==ae.PAUSED_DURING_BUFFERING?r==oe.END||r==oe.AD_SKIP?v.ec(s):r==oe.BUFFER_STOP?v.pc(s):r==oe.SEEK_START?v.nc(s):r==oe.PAUSE?v.ic(s):r==oe.PLAY&&v.pc(s):n==ae.SEEKING_DURING_PAUSE&&(r==oe.BUFFER?b.rc(s):r==oe.PLAY?b.dc(s):r==oe.PAUSE?b.lc(s):r==oe.END||r==oe.AD_SKIP?b.vc(s):r==oe.BUFFER_STOP&&b._c(s)),x(r)&&S.Dr().No(!0),S.Xo().zo(e.Dt,e.Tt),i==ae.IDLE?Z.Bt().mi(V):t==ae.IDLE&&Z.Bt().gi(V),c&&(o.Qr(o.$r()),o.Zr(I),i!=ae.IDLE&&i!=ae.PLAYBACK_NOT_STARTED&&i!=ae.SEEKING_BEFORE_PLAYBACK&&i!=ae.BUFFERING_BEFORE_PLAYBACK&&o.Ru(I),i!=ae.BUFFERING_BEFORE_PLAYBACK&&i!=ae.BUFFERING_DURING_PAUSE&&i!=ae.BUFFERING_DURING_PLAYBACK&&i!=ae.BUFFERING_DURING_SEEKING&&i!=ae.PAUSED_DURING_BUFFERING||(a.jr(I),o.jr(I)),i==ae.PLAYING&&(a.Kr(I),o.Kr(I)),i!=ae.SEEKING_BEFORE_PLAYBACK&&i!=ae.SEEKING_DURING_BUFFERING&&i!=ae.SEEKING_DURING_PAUSE&&i!=ae.SEEKING_DURING_PLAYBACK&&i!=ae.BUFFERING_DURING_SEEKING||o.Gu(I)),S.qo().log("Transition from",z.yt(t),"to",z.yt(i),"due to event:",oe.toString(e.Dt));for(var u=0,l=k.length;u<l;u++)k[u](t,i,e.Lt)}else S.qo().Go("Ignored event:",oe.toString(e.Dt),"during state",z.yt(t),e.Lt)},_r:function(e){var t=e.Dt,n=e.Lt,r=S.Xo().Yo();if(t!=oe.LOAD&&t!=oe.ENGAGE||r==ae.IDLE){var i,a,o,s,c=!0,u=!1,l=!0;switch(t==oe.ERROR&&null==n.ns_st_er&&(n.ns_st_er=pe.Sn),t==oe.TRANSFER&&null==n.ns_st_rp&&(n.ns_st_rp=pe.Sn),t!=oe.PLAYBACK_RATE||0!=(p=parseInt(n.ns_st_rt))&&!isNaN(p)||(l=!1,R.Hf("6"),n.ns_st_rt=S.Dr().Ar().ps()+""),t==oe.VOLUME&&((p=parseInt(n.ns_st_vo))<0||isNaN(p))&&(l=!1,R.Hf("7"),n.ns_st_vo=O.ns_st_vo),t){case oe.BIT_RATE:i="ns_st_br",a="ns_st_pbr";break;case oe.PLAYBACK_RATE:i="ns_st_rt",a="ns_st_prt";break;case oe.VOLUME:i="ns_st_vo",a="ns_st_pvo";break;case oe.WINDOW_STATE:i="ns_st_ws",a="ns_st_pws";break;case oe.AUDIO:i="ns_st_at",a="ns_st_pat";break;case oe.VIDEO:i="ns_st_vt",a="ns_st_pvt";break;case oe.SUBS:i="ns_st_tt",a="ns_st_ptt";break;case oe.CDN:i="ns_st_cdn",a="ns_st_pcdn";break;default:c=!1}var d,p=S.Dr(),f=p.Ar();if(c&&i in n)switch(s=n[i],t){case oe.BIT_RATE:case oe.VOLUME:case oe.WINDOW_STATE:i in O&&(o=O[i],u=s==(n[a]=o)+""),O[i]=n[i];break;case oe.AUDIO:case oe.VIDEO:case oe.SUBS:case oe.CDN:f.du(i)&&(o=f.lu(i),u=s==(n[a]=o)+""),f.Zo(i,n[i]);break;case oe.PLAYBACK_RATE:o=f.ps(),n[a]=o+""}c&&r!=ae.PLAYING&&r!=ae.BUFFERING_DURING_PLAYBACK||c&&u&&l?(t==oe.PLAYBACK_RATE&&f.hs(parseInt(n.ns_st_rt)),S.qo().Go("No measurement send for the pseudo-event:",oe.toString(t),"during state",z.yt(r),n)):(l=isNaN(I)?T:I,d=(I=e.Tt,Z.Bt().yi(e.Tt),!1),l=(M&&(d=!(M=null),e.Tt=l),f.Ss()?p.ao(r,null,e.Tt):p.zr(r,null,e.Tt),r==ae.IDLE&&p.yo(),f.$r()),e=(p.Io(),r!=ae.IDLE&&r!=ae.PLAYBACK_NOT_STARTED&&r!=ae.SEEKING_BEFORE_PLAYBACK&&r!=ae.BUFFERING_BEFORE_PLAYBACK&&(f.Nu(e.Tt),f.Ru(e.Tt)),r==ae.PLAYING&&(p.Fr(e.Tt),p.Kr(e.Tt),f.Fr(e.Tt),f.Kr(e.Tt),f.gs(l),f.Du(l),f.Cu(),f.Pu(l),S.Kf().pause(),S.Kf().resume()),r!=ae.BUFFERING_BEFORE_PLAYBACK&&r!=ae.BUFFERING_DURING_PAUSE&&r!=ae.BUFFERING_DURING_PLAYBACK&&r!=ae.BUFFERING_DURING_SEEKING||(p.Vr(e.Tt),p.jr(e.Tt),f.Vr(e.Tt),f.jr(e.Tt)),R.Fn(t,e)),f.Fo(e.Jf),f._u(e.Jf),p.Fo(e.Jf),S.Yf().dispatchEvent(e),t==oe.PLAYBACK_RATE&&f.hs(parseInt(n.ns_st_rt)),d&&(f.Qr(l),f.Zr(I),r==ae.PLAYING&&(p.Kr(I),f.Kr(I)),r!=ae.IDLE&&r!=ae.PLAYBACK_NOT_STARTED&&r!=ae.SEEKING_BEFORE_PLAYBACK&&r!=ae.BUFFERING_BEFORE_PLAYBACK&&f.Ru(I),r!=ae.BUFFERING_BEFORE_PLAYBACK&&r!=ae.BUFFERING_DURING_PAUSE&&r!=ae.BUFFERING_DURING_PLAYBACK&&r!=ae.BUFFERING_DURING_SEEKING&&r!=ae.PAUSED_DURING_BUFFERING||(p.jr(I),f.jr(I)),r!=ae.SEEKING_BEFORE_PLAYBACK&&r!=ae.SEEKING_DURING_BUFFERING&&r!=ae.SEEKING_DURING_PAUSE&&r!=ae.SEEKING_DURING_PLAYBACK&&r!=ae.BUFFERING_DURING_SEEKING||f.Gu(I)))}else S.qo().Go("Ignored pseudo-event:",oe.toString(t),"during state",z.yt(r),n)},addListener:function(e){k.push(e)},removeListener:function(e){k.splice($.indexOf(e,k),1)},addMeasurementListener:function(e){ee.Nn(e)&&N.push(e)},removeMeasurementListener:function(e){e=N.indexOf(e);-1!=e&&N.splice(e,1)},hr:function(){return he},hc:function(){return t},gc:function(e){t=e},mc:function(){return n},setLoadTimeOffset:function(e){n=e},yc:function(){return T},Sc:function(){return i},wc:function(){return L},bc:function(e){R.Ic(),a=R.hr().setTimeout(function(){var e=new re(oe.PAUSE_ON_BUFFERING);R.zo(e)},r)},Ic:function(){null!=a&&(R.hr().clearTimeout(a),a=null)},tu:function(){D=!0},Gf:function(){return S},iu:function(e){var t=S.Dr();S.Ec(new ie(S)),S.Dr().Co(o),ie.iu(S,t,e),B=[]},Pc:function(){S.Kf().reset()},setProjectId:function(e){O.cs_proid=e}}),S=new X(R),w=new ne(e||{}),R.jf=new te(w),S.Ac(w),S.Dc(fe),S.Cc(new ce(S)),S.Lc(new ue(S)),S.Tc(new le(w,fe)),S.Yf().Nc(function(){E=fe.configuration.Di()}),S.Oc(new _e),S.Rc(new de("STA",S.kc().configuration.Vi())),S.Ec(new ie(S)),S.Dr().Co(o),E=[],d=new s(S),p=new c(S),f=new u(S),h=new l(S),_=new F(S),g=new j(S),m=new G(S),C=new Y(S),v=new H(S),y=new q(S),A=new K(S),P=new W(S),b=new J(S),t=!1,n=0,T=+new Date,i=!0,B=[],k=[],N=[],O={ns_st_vo:"100"},M=null,i=(e=w).Mc,r=e.Uc,L=e.xc}n.Wc=500,n.Fc=!0,n.Bc=!0,e.exports=n},function(e,t,n){var r=n(0),o=n(1).I;e.exports=function(a){r.extend(this,{Zf:function(e){var t=a.Dr(),n=t.Ar(),e=e.Tt;t.Io(),t.Do(),n.Fu()&&n.Ju(n.Xu()),t.jr(e),n.jr(e),n.Ru(e)},nc:function(e){var t=a.Dr(),n=t.Ar(),r=n.$r(),e=e.Tt;t.Io(),t.Do(),n.Fu()&&n.Ju(n.Xu()),n.Iu(),n.Wu(!0),n.Bu(!0),n.zu(r),n.Gu(e),n.Ru(e)},tc:function(e){var t=a.Dr(),n=t.Ar(),r=n.$r(),i=e.Tt,r=(t.Io(),t.Do(),!n._s()&&0!=t.Lo()||(t.To(),n.Wo(!1)),n.Fu()&&(n.Ju(n.Xu()),n.ns(r),n.Wu(!1)),t.Oo(),n.qu(!0),n.xo(!0),n.rs(),(0==n.fs()||n.wo()<=n.fs())&&(n.Uo(n.wo()),n.os(),n.Ao(0),n.us()),n.Oo(),n.xr(),t.Kr(i),n.Kr(i),n.Ru(i),n.Pu(r),a.pr().hc()||(e.Lt.ns_st_lt=a.pr().mc()+i-a.pr().yc()+"",a.pr().gc(!0)),a.Kf().resume(),a.Vc().start(),a.pr().Fn(o.PLAY,e));n.Fo(r.Jf),n._u(r.Jf),t.Fo(r.Jf),a.Yf().dispatchEvent(r)}})}},function(e,t,n){var r=n(0),o=n(1).I;e.exports=function(a){r.extend(this,{ec:function(e){var t=a.Dr(),n=t.Ar(),r=e.Tt,e=(a.pr().Pc(),a.Vc().stop(),n.Nu(r),a.pr().Fn(o.END,e));n.Fo(e.Jf),n._u(e.Jf),t.Fo(e.Jf),a.Yf().dispatchEvent(e),n.Fu()&&n.Vu()&&(n.Yu(r-n.ju()),n.Wu(!1)),n.es(),n.qu(!1)},tc:function(e){var t=a.Dr(),n=t.Ar(),r=n.$r(),i=e.Tt,i=(t.Oo(),n.Fu()&&(n.Vu()&&(n.Hu(i),n.Bu(!1)),n.ns(r),n.Wu(!1)),n.xr(),n.Oo(),t.Kr(i),n.Kr(i),n.Nu(i),n.Ru(i),n.Pu(r),a.Kf().resume(),a.Vc().start(),a.pr().Fn(o.PLAY,e));n.Fo(i.Jf),n._u(i.Jf),t.Fo(i.Jf),a.Yf().dispatchEvent(i)}})}},function(e,t,n){var r=n(0),o=n(1).I;e.exports=function(a){r.extend(this,{ec:function(e){var t=a.Dr().Ar(),e=e.Tt;t.Fu()&&t.Vu()&&(t.Yu(e-t.ju()),t.Bu(!1)),t.Nu(e),t.es(),t.qu(!1)},nc:function(e){var t=a.Dr().Ar(),n=t.$r(),e=e.Tt;t.Fu()?t.Gu(e):t.Iu(),t.Fu()||(t.Wu(!0),t.Bu(!0),t.zu(n),t.Gu(e))},tc:function(e){var t=a.Dr(),n=t.Ar(),r=n.$r(),i=e.Tt,r=(n.Fu()&&(n.ns(r),n.Wu(!1)),!n._s()&&0!=t.Lo()||(t.To(),n.Wo(!1)),t.Oo(),n.qu(!0),n.xo(!0),n.rs(),(0==n.fs()||n.wo()<=n.fs())&&(n.Uo(n.wo()),n.os(),n.Ao(0),n.us()),n.Oo(),n.xr(),t.Kr(i),n.Kr(i),n.Nu(i),n.Ru(i),n.Pu(r),a.pr().hc()||(e.Lt.ns_st_lt=a.pr().mc()+i-a.pr().yc()+"",a.pr().gc(!0)),a.Kf().resume(),a.Vc().start(),a.pr().Fn(o.PLAY,e));n.Fo(r.Jf),n._u(r.Jf),t.Fo(r.Jf),a.Yf().dispatchEvent(r)},Zf:function(e){var t=a.Dr(),n=t.Ar(),e=e.Tt;t.jr(e),n.jr(e)}})}},function(e,t,n){var r=n(0),o=n(1).I;e.exports=function(a){r.extend(this,{ec:function(e){var t=a.Dr(),n=t.Ar(),r=n.$r(),i=e.Tt,i=(a.pr().Pc(),a.Vc().stop(),t.Fr(i),n.Fr(i),n.gs(r),n.Nu(i),n.Du(r),n.Cu(),a.pr().Fn(o.END,e));n.Fo(i.Jf),n._u(i.Jf),t.Fo(i.Jf),a.Yf().dispatchEvent(i),n.es(),n.qu(!1)},Zf:function(e){var t=a.Dr(),n=t.Ar(),r=n.$r(),i=e.Tt;a.Kf().pause(),a.Vc().stop(),t.Fr(i),n.Fr(i),n.gs(r),n.Du(r),n.Cu(),a.pr().Sc()&&a.pr().bc(e),n.ls(),t.jr(i),n.jr(i),n.Nu(i),n.Ru(i)},nc:function(e){var t=a.Dr(),n=t.Ar(),r=n.$r(),i=e.Tt,r=(a.Kf().pause(),a.Vc().stop(),t.Fr(i),n.Fr(i),n.gs(r),n.Du(r),n.Cu(),n.Iu(),n.Wu(!0),n.Bu(!0),n.zu(r),n.Gu(i),n.Nu(i),n.Ru(i),t.Wr(),n.Wr(),a.pr().Fn(o.PAUSE,e));n.Fo(r.Jf),n._u(r.Jf),t.Fo(r.Jf),a.Yf().dispatchEvent(r)},ic:function(e){var t=a.Dr(),n=t.Ar(),r=n.$r(),i=e.Tt,r=(a.Kf().pause(),a.Vc().stop(),t.Fr(i),n.Fr(i),n.gs(r),n.Du(r),n.Cu(),n.Nu(i),n.Ru(i),t.Wr(),n.Wr(),a.pr().Fn(o.PAUSE,e));n.Fo(r.Jf),n._u(r.Jf),t.Fo(r.Jf),a.Yf().dispatchEvent(r)}})}},function(e,t,n){var r=n(0),o=n(1).I;e.exports=function(a){r.extend(this,{ec:function(e){var t=a.Dr(),n=t.Ar(),e=e.Tt;t.Vr(e),n.Vr(e),n.Fu()&&n.Vu()&&n.Yu(e-n.ju()),n.Nu(e),n.es(),n.qu(!1)},uc:function(e){var t=a.Dr(),n=t.Ar(),e=e.Tt;t.Vr(e),n.Vr(e),n.Fu()&&n.Vu()&&(n.Hu(e),n.Bu(!1))},nc:function(e){var t=a.Dr(),n=t.Ar(),r=n.$r(),e=e.Tt;t.Vr(e),n.Vr(e),n.Fu()?n.Vu()||(n.Gu(e),n.Bu(!0)):n.Iu(),n.Fu()||(n.Wu(!0),n.Bu(!0),n.zu(r),n.Gu(e))},ic:function(e){var t=a.Dr(),n=t.Ar(),e=e.Tt;t.Vr(e),n.Vr(e),n.Fu()&&n.Vu()&&(n.Hu(e),n.Bu(!1))},tc:function(e){var t=a.Dr(),n=t.Ar(),r=n.$r(),i=e.Tt,r=(t.Vr(i),n.Vr(i),n.Fu()&&(n.Vu()&&(n.Hu(i),n.Bu(!1)),n.ns(r),n.Wu(!1)),n.qu(!0),n.xo(!0),!n._s()&&0!=t.Lo()||(t.To(),n.Wo(!1)),t.Oo(),n.qu(!0),n.rs(),n.xr(),t.Kr(i),n.Kr(i),n.Nu(i),n.Ru(i),n.Pu(r),(0==n.fs()||n.wo()<=n.fs())&&(n.Uo(n.wo()),n.os(),n.Ao(0),n.us()),n.Oo(),a.pr().hc()||(e.Lt.ns_st_lt=a.pr().mc()+i-a.pr().yc()+"",a.pr().gc(!0)),a.Kf().resume(),a.Vc().start(),a.pr().Fn(o.PLAY,e));n.Fo(r.Jf),n._u(r.Jf),t.Fo(r.Jf),a.Yf().dispatchEvent(r)}})}},function(e,t,n){var r=n(0),o=n(1).I;e.exports=function(a){r.extend(this,{sc:function(e){var t=a.Dr(),n=t.Ar(),r=e.Tt,e=(a.pr().Ic(),n.Nu(r),n.Ru(r),t.Vr(r),n.Vr(r),t.Wr(),n.Wr(),a.pr().Fn(o.PAUSE,e));n.Fo(e.Jf),n._u(e.Jf),t.Fo(e.Jf),a.Yf().dispatchEvent(e),t.jr(r),n.jr(r)},ec:function(e){var t=a.Dr(),n=t.Ar(),r=e.Tt,r=(a.pr().Ic(),a.pr().Pc(),a.Vc().stop(),t.Vr(r),n.Vr(r),n.Nu(r),a.pr().Fn(o.END,e));n.Fo(r.Jf),n._u(r.Jf),t.Fo(r.Jf),a.Yf().dispatchEvent(r),n.es(),n.qu(!1)},nc:function(e){var t=a.Dr(),n=t.Ar(),r=n.$r(),i=e.Tt,r=(a.pr().Ic(),a.Kf().pause(),a.Vc().stop(),n.Nu(i),n.Ru(i),t.Vr(i),n.Vr(i),n.Iu(),n.Wu(!0),n.Bu(!0),n.zu(r),n.Gu(i),t.Wr(),n.Wr(),a.pr().Fn(o.PAUSE,e));n.Fo(r.Jf),n._u(r.Jf),t.Fo(r.Jf),a.Yf().dispatchEvent(r)},ic:function(e){var t=a.Dr(),n=t.Ar(),r=e.Tt,r=(a.pr().Ic(),n.Nu(r),n.Ru(r),t.Vr(r),n.Vr(r),t.Wr(),n.Wr(),a.pr().Fn(o.PAUSE,e));n.Fo(r.Jf),n._u(r.Jf),t.Fo(r.Jf),a.Yf().dispatchEvent(r)}})}},function(e,t,n){var r=n(0),o=n(1).I;e.exports=function(a){r.extend(this,{ec:function(e){var t=a.Dr(),n=t.Ar(),r=e.Tt,e=(a.pr().Pc(),a.Vc().stop(),a.pr().Ic(),t.Vr(r),n.Vr(r),n.Nu(r),a.pr().Fn(o.END,e));n.Fo(e.Jf),n._u(e.Jf),t.Fo(e.Jf),a.Yf().dispatchEvent(e),n.Fu()&&n.Vu()&&(n.Yu(r-n.ju()),n.Bu(!1)),n.es(),n.qu(!1)},ic:function(e){var t=a.Dr(),n=t.Ar(),e=e.Tt;t.Vr(e),n.Vr(e),t.Wr(),n.Wr(),n.Fu()&&n.Vu()&&(n.Hu(e),n.Bu(!1)),n.Nu(e),n.Ru(e)},tc:function(e){var t=a.Dr(),n=t.Ar(),r=n.$r(),i=e.Tt,i=(t.Oo(),n.Oo(),n.xr(),t.Vr(i),n.Vr(i),n.Fu()&&(n.Vu()&&(n.Hu(i),n.Bu(!1)),n.ns(r),n.Wu(!1)),n.Nu(i),n.Ru(i),t.Kr(i),n.Kr(i),n.Pu(r),a.Kf().resume(),a.Vc().start(),a.pr().Fn(o.PLAY,e));n.Fo(i.Jf),n._u(i.Jf),t.Fo(i.Jf),a.Yf().dispatchEvent(i)}})}},function(e,t,n){var r=n(0),o=n(1).I;e.exports=function(a){r.extend(this,{cc:function(e){var t=a.Dr(),n=t.Ar(),r=e.Tt,e=(a.pr().Pc(),a.Vc().stop(),t.Vr(r),n.Vr(r),n.Nu(r),a.pr().Fn(o.END,e));n.Fo(e.Jf),n._u(e.Jf),t.Fo(e.Jf),a.Yf().dispatchEvent(e),n.Fu()&&n.Vu()&&(n.Yu(r-n.ju()),n.Bu(!1)),n.es(),n.qu(!1)},ic:function(e){var t=a.Dr(),n=t.Ar(),e=e.Tt;t.Vr(e),n.Vr(e),n.Nu(e),n.Ru(e)},tc:function(e){var t=a.Dr(),n=t.Ar(),r=n.$r(),i=e.Tt,i=(t.Oo(),n.Oo(),n.xr(),t.Vr(i),n.Vr(i),n.Fu()&&(n.Vu()&&(n.Hu(i),n.Bu(!1)),n.ns(r),n.Wu(!1)),n.Nu(i),n.Ru(i),t.Kr(i),n.Kr(i),n.Pu(r),a.Kf().resume(),a.Vc().start(),a.pr().Fn(o.PLAY,e));n.Fo(i.Jf),n._u(i.Jf),t.Fo(i.Jf),a.Yf().dispatchEvent(i)}})}},function(e,t,n){var r=n(0),o=n(1).I;e.exports=function(a){r.extend(this,{ec:function(e){var t=a.Dr(),n=t.Ar(),r=e.Tt,r=(a.pr().Pc(),a.Vc().stop(),t.Vr(r),n.Vr(r),n.Nu(r),n.Fu()&&n.Vu()&&(n.Yu(r-n.ju()),n.Bu(!1)),a.pr().Fn(o.END,e));n.Fo(r.Jf),n._u(r.Jf),t.Fo(r.Jf),a.Yf().dispatchEvent(r),n.es(),n.qu(!1)},nc:function(e){var t=a.Dr(),n=t.Ar(),r=n.$r(),e=e.Tt;t.Vr(e),n.Vr(e),n.Fu()?n.Vu()||(n.Gu(e),n.Bu(!0)):n.Iu(),n.Fu()||(n.Wu(!0),n.Bu(!0),n.zu(r),n.Gu(e)),n.Nu(e),n.Ru(e)},ic:function(e){var t=a.Dr(),n=t.Ar(),e=e.Tt;t.Vr(e),n.Vr(e),n.Nu(e),n.Ru(e)},pc:function(e){var t=a.Dr(),n=t.Ar(),r=n.$r(),i=e.Tt,i=(t.Oo(),n.Oo(),t.Vr(i),n.Vr(i),n.xr(),t.Kr(i),n.Kr(i),n.Nu(i),n.Ru(i),n.Pu(r),a.Kf().resume(),a.Vc().start(),a.pr().Fn(o.PLAY,e));n.Fo(i.Jf),n._u(i.Jf),t.Fo(i.Jf),a.Yf().dispatchEvent(i)}})}},function(e,t,n){var r=n(0),o=n(1).I;e.exports=function(a){r.extend(this,{ec:function(e){var t=a.Dr().Ar(),e=e.Tt;t.Fu()&&t.Vu()&&(t.Yu(e-t.ju()),t.Bu(!1)),t.Nu(e),t.es(),t.qu(!1)},ic:function(e){var t=a.Dr().Ar(),e=e.Tt;t.Fu()&&t.Vu()&&(t.Hu(e),t.Bu(!1))},tc:function(e){var t=a.Dr(),n=t.Ar(),r=n.$r(),i=e.Tt,r=(n.Fu()&&(n.Vu()&&(n.Hu(i),n.Bu(!1)),n.ns(r),n.Wu(!1)),!n._s()&&0!=t.Lo()||(t.To(),n.Wo(!1)),t.Oo(),n.qu(!0),n.xo(!0),n.rs(),(0==n.fs()||n.wo()<=n.fs())&&(n.Uo(n.wo()),n.os(),n.Ao(0),n.us()),n.Oo(),n.xr(),t.Kr(i),n.Kr(i),n.Nu(i),n.Ru(i),n.Pu(r),a.pr().hc()||(e.Lt.ns_st_lt=a.pr().mc()+i-a.pr().yc()+"",a.pr().gc(!0)),a.Kf().resume(),a.Vc().start(),a.pr().Fn(o.PLAY,e));n.Fo(r.Jf),n._u(r.Jf),t.Fo(r.Jf),a.Yf().dispatchEvent(r)}})}},function(e,t,n){var i=n(0);e.exports=function(r){i.extend(this,{ic:function(e){var t=r.Dr(),n=t.Ar(),e=e.Tt;t.Wr(),n.Wr(),n.Fu()&&n.Vu()&&(n.Hu(e),n.Bu(!1)),n.Nu(e),n.Ru(e)}})}},function(e,t,n){var r=n(0),o=n(1).I;e.exports=function(a){r.extend(this,{ec:function(e){var t=a.Dr(),n=t.Ar(),r=e.Tt,e=(a.pr().Pc(),a.Vc().stop(),n.Nu(r),a.pr().Fn(o.END,e));n.Fo(e.Jf),n._u(e.Jf),t.Fo(e.Jf),a.Yf().dispatchEvent(e),n.Fu()&&n.Vu()&&(n.Yu(r-n.ju()),n.Bu(!1)),n.es(),n.qu(!1)},tc:function(e){var t=a.Dr(),n=t.Ar(),r=n.$r(),i=e.Tt,r=(t.Oo(),n.Oo(),n.xr(),n.Fu()&&(n.Vu()&&(n.Hu(i),n.Bu(!1)),n.ns(r),n.Wu(!1)),n.Nu(i),n.Ru(i),t.Kr(i),n.Kr(i),n.Pu(r),a.pr().hc()||(e.Lt.ns_st_lt=a.pr().mc()+i-a.pr().yc()+"",a.pr().gc(!0)),a.Kf().resume(),a.Vc().start(),a.pr().Fn(o.PLAY,e));n.Fo(r.Jf),n._u(r.Jf),t.Fo(r.Jf),a.Yf().dispatchEvent(r)}})}},function(e,t,n){var r=n(0),o=n(1).I;e.exports=function(a){r.extend(this,{oc:function(e){var t=a.Dr().Ar(),n=t.$r(),e=e.Tt;t.Fu()?t.Vu()||(t.Gu(e),t.Bu(!0)):t.Iu(),t.Fu()||(t.Wu(!0),t.Bu(!0),t.zu(n),t.Gu(e)),t.Nu(e),t.Ru(e)},rc:function(e){var t=a.Dr(),n=t.Ar(),e=e.Tt;t.jr(e),n.jr(e),n.Nu(e),n.Ru(e)},dc:function(e){var t=a.Dr(),n=t.Ar(),r=n.$r(),i=e.Tt,i=(t.Oo(),n.Oo(),n.Fu()&&(n.Vu()&&(n.Hu(i),n.Bu(!1)),n.ns(r),n.Wu(!1)),n.xr(),t.Kr(i),n.Kr(i),n.Nu(i),n.Ru(i),n.Pu(r),a.Kf().resume(),a.Vc().start(),a.pr().Fn(o.PLAY,e));n.Fo(i.Jf),n._u(i.Jf),t.Fo(i.Jf),a.Yf().dispatchEvent(i)},fc:function(e){var t=a.Dr(),n=t.Ar(),e=e.Tt;t.Vr(e),n.Vr(e),n.Nu(e),n.Ru(e)},lc:function(e){var t=a.Dr().Ar(),e=e.Tt;t.Fu()&&t.Vu()&&(t.Hu(e),t.Bu(!1)),t.Nu(e),t.Ru(e)},vc:function(e){var t=a.Dr(),n=t.Ar(),r=e.Tt,e=(a.pr().Pc(),a.Vc().stop(),n.Nu(r),a.pr().Fn(o.END,e));n.Fo(e.Jf),n._u(e.Jf),t.Fo(e.Jf),a.Yf().dispatchEvent(e),n.Fu()&&n.Vu()&&(n.Yu(r-n.ju()),n.Bu(!1)),n.es(),n.qu(!1)},_c:function(e){var t=a.Dr().Ar(),e=e.Tt;t.Fu()&&t.Vu()&&(t.Hu(e),t.Bu(!1)),t.Nu(e),t.Ru(e)},ac:function(e){var t=a.Dr(),n=t.Ar(),r=n.$r(),e=e.Tt;a.pr().Ic(),t.Vr(e),n.Vr(e),t.Kr(e),n.Kr(e),n.Pu(r),n.Nu(e),n.Ru(e),a.Kf().resume(),a.Vc().start()}})}},function(e,t,n){var u=n(0);e.exports=function(e){var t,n,r,i,a,o,s,c;u.extend(this,{kc:function(){return n},pr:function(){return e},getConfiguration:function(){return t},Yf:function(){return r},Xo:function(){return i},Kf:function(){return a},Vc:function(){return o},Dr:function(){return s},qo:function(){return c},Ac:function(e){t=e},Dc:function(e){n=e},Cc:function(e){o=e},Lc:function(e){a=e},Tc:function(e){r=e},Oc:function(e){i=e},Ec:function(e){s=e},Rc:function(e){c=e}})}},function(e,t,n){var r=n(0);e.exports=function(e){r.extend(this,{addLabels:e.addLabels,setLabel:e.setLabel,removeLabel:e.removeLabel,removeAllLabels:e.removeAllLabels,getStreamingPublisherConfiguration:e.getStreamingPublisherConfiguration})}},function(e,t,n){var o=n(0),s=n(7),c=n(45),u=n(46),l=n(47),d=n(53),p=n(114),f={Mc:"pauseOnBuffering",Uc:"pauseOnBufferingInterval",xc:"exitEndEvent",gr:"keepAliveMeasurement",mr:"keepAliveInterval",Tr:"heartbeatMeasurement",Nr:"heartbeatIntervals",Qf:"includedPublishers",nu:"autoResumeStateOnAssetChange",ws:"playbackIntervalMergeTolerance",labels:"labels",bs:"customStartMinimumPlayback"};e.exports=function(e){var t,n=this,r="",i={};for(t in n.Mc=!0,n.Uc=500,n.xc=!0,n.gr=c.ENABLED,n.mr=c.yr,n.Tr=u.ENABLED,n.Nr=u.Or,n.Qf=[],n.nu=l.ru,n.ws=d.Is,n.labels={},n.bs=d.Ps,f){var a=e[f[t]];null!=a&&(n[t]=a)}n.mr=n.mr<c.Sr?c.Sr:n.mr,n.Uc=n.Uc<300?300:n.Uc,n.ws=n.ws<d.Es?d.Es:n.ws,n.mr=1e3*Math.floor(n.mr/1e3),n.Uc=100*Math.floor(n.Uc/100),n.ws=100*Math.floor(n.ws/100),n.bs=1e3*Math.floor(n.bs/1e3),r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r+=n.Mc?"1":"0")+(n.gr?"1":"0"))+(n.Tr?"1":"0"))+(n.nu?"1":"0"))+(n.xc?"1":"0"))+(u.Rr(n.Nr,u.Or)?"0":"1"))+(0<n.Qf.length?"1":"0"))+(n.ws!=d.Is?"1":"0"))+(n.bs!=d.qc?"1":"0"))+"-"+(n.Uc/100).toString(16))+"-"+(n.mr/1e3).toString(16))+"-"+(n.bs/1e3).toString(16))+"-"+(n.ws/100).toString(16),n.Xf=function(){return r},o.extend(n,{getLabels:function(){return n.labels},addLabels:function(e){s.Fn(n.labels,e)},setLabel:function(e,t){s.Wn(n.labels,e,t)},removeLabel:function(e){delete n.labels[e]},removeAllLabels:function(){n.labels={}},getStreamingPublisherConfiguration:function(e){return i[e]=i[e]||new p,i[e]},zf:function(){return i}})}},function(e,t){var n={Gc:function(e){return e.replace(/&#x([0-9A-Fa-f]{2})/g,function(){return String.fromCharCode(parseInt(arguments[1],16))})},au:function(e,t){t+="";return Array(e).join("0").substring(0,Math.max(e-t.length,0))+t}};e.exports=n},function(e,t,n){var i=n(0),a=n(48);e.exports=function(){var n=null,r={};i.extend(this,{Eo:function(e){var t=e.io();r[t]=e,a.eo(e.dr("ns_st_ad"))||(n=e)},jo:function(e){return!!r[e]},Ar:function(e){return r[e]},to:function(){return n}})}},function(e,t,n){var r=n(0),i=n(7);e.exports=function(){var n;r.extend(this,{setLabel:function(e,t){i.Wn(n,e,t)},removeLabel:function(e){delete n[e]},addLabels:function(e){i.Fn(n,e)},removeAllLabels:function(){n={}},getLabels:function(){return n}}),n={}}},function(e,t,n){var d=n(0),p=n(1).I,f=n(28);e.exports=function(a,o){var e,s,c,t,n=this;function u(){for(var e=0;e<s.length;++e){var t=s[e];o.ve(t)}s=[]}function l(e){switch(e){case f.TIME_WINDOW_ELAPSED:t=!0,i()&&r();break;case f.PUBLISHER:t&&i()&&r()}}function r(){for(var e=0;e<c.length;++e)c[e]();o.configuration.removeListener(l);for(var t=o.configuration.Di(),e=0;e<s.length;++e)for(var n=s[e],r=0;r<t.length;r++){var i=t[r];0<a.Qf.length&&-1==a.Qf.indexOf(i)||n.addIncludedPublisher(i)}u()}function i(){var e=o.configuration.Di();if(0==a.Qf.length)return 1;for(var t=0;t<e.length;++t)if(-1!=a.Qf.indexOf(e[t]))return 1}d.extend(this,{dispatchEvent:function(e){e.jc!=p.HEARTBEAT&&n.Hc(),s.push(e.Ef),t&&i()&&u()},Nc:function(e){c.push(e)},le:function(){return e},Hc:function(){e++}}),e=1,s=[],c=[],(t=o.configuration.Fi())&&i()||o.configuration.addListener(l)}},function(e,t){e.exports=function(n,a){function t(e){e=e||[];var t=["comScore",+new Date];return n&&t.push(n),e=Array.prototype.slice.call(e),t.concat(e)}function r(e){var t,n,r;if("boolean"==typeof a||!a)return a;if(r=e.join(" "),!(a instanceof Array&&0<a.length)){if("object"!=typeof a)return 1;var i=!1;if(a.hide instanceof Array)for(t=0;t<a.hide.length;++t)if((n=a.hide[t])instanceof RegExp&&n.test(r)){i=!0;break}if(a.show instanceof Array)for(t=0;t<a.show.length;++t)if((n=a.show[t])instanceof RegExp&&n.test(r))return 1;return!i&&!a.show}for(t=0;t<a.length;++t)if((n=a[t])instanceof RegExp&&n.test(r))return 1}this.log=function(){var e=t(arguments);"undefined"!=typeof console&&"function"==typeof console.log&&r(e)&&console.log.apply(console,e)},this.warn=function(){var e=t(arguments);"undefined"!=typeof console&&"function"==typeof console.warn&&r(e)&&console.warn.apply(console,e)},this.error=function(){var e=t(arguments);"undefined"!=typeof console&&"function"==typeof console.error&&r(e)&&console.error.apply(console,e)},this.Vo=function(e){for(var t=["API call to:",e],n=1;n<arguments.length;++n)t.push("arg"+n+":",arguments[n]);this.log.apply(this,t)},this.Go=function(){var e=["Trace log:"];e.push.apply(e,Array.prototype.slice.call(arguments)),this.log.apply(this,e)},this.Kc=function(e,t){e=["Deprecated API:",e,"is deprecated and will be eventually removed."];t&&e.push("Use",t,"instead."),this.warn.apply(this,e)}}},function(e,t,n){var o=n(1).P,s=n(0),c=n(1).I;e.exports=function(e){var n,r,i,a=this;s.extend(a,{$f:function(e){if(i==o.IDLE){if(e==c.PLAY)return o.PLAYING;if(e==c.SEEK_START)return o.SEEKING_BEFORE_PLAYBACK;if(e==c.BUFFER)return o.BUFFERING_BEFORE_PLAYBACK}else if(i==o.PLAYBACK_NOT_STARTED){if(e==c.PLAY)return o.PLAYING;if(e==c.SEEK_START)return o.SEEKING_BEFORE_PLAYBACK;if(e==c.BUFFER)return o.BUFFERING_BEFORE_PLAYBACK;if(e==c.END||e==c.AD_SKIP)return o.IDLE}else if(i==o.PLAYING){if(e==c.END||e==c.AD_SKIP)return o.IDLE;if(e==c.BUFFER)return o.BUFFERING_DURING_PLAYBACK;if(e==c.PAUSE)return o.PAUSED;if(e==c.SEEK_START)return o.SEEKING_DURING_PLAYBACK}else if(i==o.PAUSED){if(e==c.END||e==c.AD_SKIP)return o.IDLE;if(e==c.BUFFER)return o.BUFFERING_DURING_PAUSE;if(e==c.PLAY)return o.PLAYING;if(e==c.SEEK_START)return o.SEEKING_DURING_PAUSE}else if(i==o.BUFFERING_BEFORE_PLAYBACK){if(e==c.END||e==c.AD_SKIP)return o.IDLE;if(e==c.PAUSE||e==c.BUFFER_STOP)return o.PLAYBACK_NOT_STARTED;if(e==c.PLAY)return o.PLAYING;if(e==c.SEEK_START)return o.SEEKING_BEFORE_PLAYBACK}else if(i==o.BUFFERING_DURING_PLAYBACK){if(e==c.END||e==c.AD_SKIP)return o.IDLE;if(e==c.PLAY||e==c.BUFFER_STOP)return o.PLAYING;if(e==c.PAUSE_ON_BUFFERING)return o.PAUSED_DURING_BUFFERING;if(e==c.SEEK_START)return o.SEEKING_DURING_BUFFERING;if(e==c.PAUSE)return o.PAUSED}else if(i==o.BUFFERING_DURING_SEEKING){if(e==c.END||e==c.AD_SKIP)return o.IDLE;if(e==c.PLAY)return o.PLAYING;if(e==c.BUFFER_STOP)return o.SEEKING_DURING_PLAYBACK;if(e==c.PAUSE)return o.PAUSED}else if(i==o.BUFFERING_DURING_PAUSE){if(e==c.END||e==c.AD_SKIP)return o.IDLE;if(e==c.PLAY)return o.PLAYING;if(e==c.SEEK_START)return o.SEEKING_DURING_PAUSE;if(e==c.BUFFER_STOP||e==c.PAUSE)return o.PAUSED}else if(i==o.SEEKING_BEFORE_PLAYBACK){if(e==c.END||e==c.AD_SKIP)return o.IDLE;if(e==c.PAUSE)return o.PLAYBACK_NOT_STARTED;if(e==c.PLAY)return o.PLAYING;if(e==c.BUFFER)return o.BUFFERING_BEFORE_PLAYBACK}else if(i==o.SEEKING_DURING_PLAYBACK){if(e==c.END||e==c.AD_SKIP)return o.IDLE;if(e==c.PLAY)return o.PLAYING;if(e==c.PAUSE)return o.PAUSED;if(e==c.BUFFER)return o.BUFFERING_DURING_SEEKING}else if(i==o.SEEKING_DURING_BUFFERING){if(e==c.END||e==c.AD_SKIP)return o.IDLE;if(e==c.PLAY)return o.PLAYING;if(e==c.PAUSE||e==c.BUFFER_STOP)return o.PAUSED;if(e==c.BUFFER)return o.BUFFERING_DURING_SEEKING}else if(i==o.SEEKING_DURING_PAUSE){if(e==c.END||e==c.AD_SKIP)return o.IDLE;if(e==c.PLAY)return o.PLAYING;if(e==c.PAUSE||e==c.BUFFER_STOP)return o.PAUSED;if(e==c.BUFFER)return o.BUFFERING_DURING_PAUSE}else if(i==o.PAUSED_DURING_BUFFERING){if(e==c.END||e==c.AD_SKIP)return o.IDLE;if(e==c.SEEK_START)return o.SEEKING_DURING_BUFFERING;if(e==c.PAUSE)return o.PAUSED;if(e==c.PLAY||e==c.BUFFER_STOP)return o.PLAYING}return null},Yo:function(){return i},zo:function(e,t){e=a.$f(e);i!=e&&(r=i,i=e,n=t)},Jc:function(){return r},Yc:function(){return n}}),i=o.IDLE,r=null,n=NaN}},function(e,t){e.exports=function(e,t,n){this.jc=e,this.Ef=t,this.Jf=n}},function(e,t,n){var o=n(0),s=n(7),c=n(1).I,u=n(16);e.exports=function(n){var r=n.pr();function i(e,t){e=new u(e);return s.Fn(e.Ct,t||{}),e}function a(e,t,n,r){e=i(e,r);return null!=n&&e.setLabel(t,n+""),e}o.extend(this,{setLoadTimeOffset:function(e){n.qo().Vo("setLoadTimeOffset",e),r.setLoadTimeOffset(e)},setPlaybackSessionExpectedLength:function(e){n.qo().Vo("setPlaybackSessionExpectedLength",e),r.Gf().Dr().ko(e)},setPlaybackSessionExpectedNumberOfItems:function(e){n.qo().Vo("setPlaybackSessionExpectedNumberOfItems",e),r.Gf().Dr().Mo(e)},notifySkipAd:function(e){n.qo().Vo("notifySkipAd",e);e=i(c.AD_SKIP,e);r.zo(e)},notifyLoad:function(e){n.qo().Vo("notifyLoad",e);e=i(c.LOAD,e);r._r(e)},notifyEngage:function(e){n.qo().Vo("notifyEngage",e);e=i(c.ENGAGE,e);r._r(e)},notifyCallToAction:function(e){n.qo().Vo("notifyCallToAction",e);e=i(c.CTA,e);r._r(e)},notifyDrmFail:function(e){n.qo().Vo("notifyDrmFail",e);e=i(c.DRM_FAILED,e);r._r(e)},notifyDrmApprove:function(e){n.qo().Vo("notifyDrmApprove",e);e=i(c.DRM_APPROVED,e);r._r(e)},notifyDrmDeny:function(e){n.qo().Vo("notifyDrmDeny",e);e=i(c.DRM_DENIED,e);r._r(e)},notifyCustomEvent:function(e,t){n.qo().Vo("notifyCustomEvent",e,t);t=i(c.CUSTOM,t);t.setLabel("ns_st_cev",e+""),r._r(t)},notifyChangeBitrate:function(e,t){n.qo().Vo("notifyChangeBitrate",e,t);e=a(c.BIT_RATE,"ns_st_br",e,t);r._r(e)},notifyChangeVolume:function(e,t){n.qo().Vo("notifyChangeVolume",e,t);e=Math.floor(100*e),e=a(c.VOLUME,"ns_st_vo",e,t);r._r(e)},notifyChangeWindowState:function(e,t){n.qo().Vo("notifyChangeWindowState",e,t);e=a(c.WINDOW_STATE,"ns_st_ws",e,t);r._r(e)},notifyChangeAudioTrack:function(e,t){n.qo().Vo("notifyChangeAudioTrack",e,t);e=a(c.AUDIO,"ns_st_at",e,t);r._r(e)},notifyChangeVideoTrack:function(e,t){n.qo().Vo("notifyChangeVideoTrack",e,t);e=a(c.VIDEO,"ns_st_vt",e,t);r._r(e)},notifyChangeSubtitleTrack:function(e,t){n.qo().Vo("notifyChangeSubtitleTrack",e,t);e=a(c.SUBS,"ns_st_tt",e,t);r._r(e)},notifyChangeCdn:function(e,t){n.qo().Vo("notifyChangeCdn",e,t);e=a(c.CDN,"ns_st_cdn",e,t);r._r(e)},notifyError:function(e,t){r.Gf().qo().Vo("notifyError",e,t);e=a(c.ERROR,"ns_st_er",e,t);r._r(e)},notifyTransferPlayback:function(e,t){r.Gf().qo().Vo("notifyTransferPlayback",e,t);e=a(c.TRANSFER,"ns_st_rp",e,t);r._r(e)}})}},function(e,t,n){var r=n(0),i=n(52);function a(){var e=new i;r.extend(this,e)}r.extend(a,i),e.exports=a},function(e,t,n){var r=n(0),i=n(51);function a(){var n=this,e=new i;r.extend(n,e),r.extend(n,{getMetadataLabels:function(e){var t={};return e&&r.extend(t,e.getStandardLabels()),r.extend(t,n.getStandardLabels()),e&&r.extend(t,e.getCustomLabels()),r.extend(t,n.getCustomLabels()),t}})}r.extend(a,i),e.exports=a},function(e,t){e.exports={NORMAL:"norm",FULL_SCREEN:"full",MINIMIZED:"min",MAXIMIZED:"max"}}],r={},i.o=n,i.c=r,i.d=function(e,t,n){i.u(e,t)||Object.defineProperty(e,t,{l:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"v",{value:!0})},i._=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.v)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{l:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(e){var t=e&&e.v?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.u=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=54);function i(e){var t;return(r[e]||(t=r[e]={t:e,i:!1,exports:{}},n[e].call(t.exports,t,t.exports,i),t.i=!0,t)).exports}var n,r}),window.CBC||(window.CBC={}),(CBC=CBC||window.CBC).APP||(CBC.APP={}),CBC.APP.AB||(CBC.APP.AB={}),CBC.APP.ANA||(CBC.APP.ANA={}),CBC.APP.ANA.ABTESTSCONFIG||(CBC.APP.ANA.ABTESTSCONFIG={}),CBC.APP.ANA.SURVEYCONFIG||(CBC.APP.ANA.SURVEYCONFIG={}),CBC.APP.ANA.DISPATCHERS||(CBC.APP.ANA.DISPATCHERS={}),CBC.APP.ANA.DISPATCHERS.Adobe||(CBC.APP.ANA.DISPATCHERS.Adobe={}),CBC.APP.ANA.DISPATCHERS.DAL||(CBC.APP.ANA.DISPATCHERS.DAL={}),CBC.APP.ANA.DISPATCHERS.FBPIXEL||(CBC.APP.ANA.DISPATCHERS.FBPIXEL={}),CBC.APP.ANA.DISPATCHERS.MirRoar||(CBC.APP.ANA.DISPATCHERS.MirRoar={}),CBC.APP.ANA.DISPATCHERS.DAL||(CBC.APP.ANA.DISPATCHERS.DAL={}),CBC.APP.ANA.ER||(CBC.APP.ANA.ER={}),CBC.APP.ANA.FORMATTERS||(CBC.APP.ANA.FORMATTERS={}),CBC.APP.ANA.FORMATTERS.Adobe||(CBC.APP.ANA.FORMATTERS.Adobe={}),CBC.APP.ANA.FORMATTERS.Common||(CBC.APP.ANA.FORMATTERS.Common={}),CBC.APP.ANA.FORMATTERS.Comscore||(CBC.APP.ANA.FORMATTERS.Comscore={}),CBC.APP.ANA.FORMATTERS.DAL||(CBC.APP.ANA.FORMATTERS.DAL={}),CBC.APP.ANA.FORMATTERS.MirRoar||(CBC.APP.ANA.FORMATTERS.MirRoar={}),CBC.APP.ANA.FORMATTERS.DAL||(CBC.APP.ANA.FORMATTERS.DAL={}),CBC.APP.ANA.LIBRARY||(CBC.APP.ANA.LIBRARY={}),CBC.APP.ANA.LIBRARY.FBPIXEL||(CBC.APP.ANA.LIBRARY.FBPIXEL={}),CBC.APP.ANA.LIBRARY.SENTRY||(CBC.APP.ANA.LIBRARY.SENTRY={}),CBC.APP.ANA.LinkTracker||(CBC.APP.ANA.LinkTracker={}),CBC.APP.ANA.SEARCHDEFAULT||(CBC.APP.ANA.SEARCHDEFAULT={}),CBC.APP.ANA.VALIDATORS||(CBC.APP.ANA.VALIDATORS={}),CBC.APP.ANA.VALIDATORS.Adobe||(CBC.APP.ANA.VALIDATORS.Adobe={}),CBC.APP.ANA.VALIDATORS.Common||(CBC.APP.ANA.VALIDATORS.Common={}),CBC.APP.ANA.VALIDATORS.DAL||(CBC.APP.ANA.VALIDATORS.DAL={}),CBC.APP.ANA.VALIDATORS.FBPIXEL||(CBC.APP.ANA.VALIDATORS.FBPIXEL={}),CBC.APP.ANA.VALIDATORS.MirRoar||(CBC.APP.ANA.VALIDATORS.MirRoar={}),CBC.APP.ANA.VALIDATORS.DAL||(CBC.APP.ANA.VALIDATORS.DAL={}),CBC.APP.ANA.VARS||(CBC.APP.ANA.VARS={}),CBC.APP.COMSCORE||(CBC.APP.COMSCORE={}),CBC.APP.CXENSE||(CBC.APP.CXENSE={}),CBC.APP.DMP||(CBC.APP.DMP={}),CBC.APP.DMP.LOTAME||(CBC.APP.DMP.LOTAME={}),CBC.APP.PubSub||(CBC.APP.PubSub={}),CBC.APP.readJS||(CBC.APP.readJS={}),CBC.APP.SC||(CBC.APP.SC={}),CBC.APP.SC.DTM||(CBC.APP.SC.DTM={}),CBC.APP.SC.DTM.DATA||(CBC.APP.SC.DTM.DATA={}),CBC.APP.SC.DTM.formatted||(CBC.APP.SC.DTM.formatted={}),CBC.APP.SC.EventTracker||(CBC.APP.SC.EventTracker={}),CBC.APP.SC.LOCALGEO||(CBC.APP.SC.LOCALGEO={}),CBC.APP.SC.masterSwitch||(CBC.APP.SC.masterSwitch={}),CBC.APP.SC.metadataAllowlist||(CBC.APP.SC.metadataAllowlist={}),CBC.APP.SC.PageTracker||(CBC.APP.SC.PageTracker={}),CBC.APP.SC.Pillar||(CBC.APP.SC.Pillar={}),CBC.APP.SC.Subscribers||(CBC.APP.SC.Subscribers={}),CBC.APP.SC.UTIL||(CBC.APP.SC.UTIL={}),CBC.APP.SC.VideoHeartbeat||(CBC.APP.SC.VideoHeartbeat={}),CBC.APP.SC.VideoHeartbeatVars||(CBC.APP.SC.VideoHeartbeatVars={}),CBC.APP.versions||(CBC.APP.versions={}),window.CBCRC||(window.CBCRC={}),(CBCRC=CBCRC||window.CBCRC).ANA||(CBCRC.ANA={}),CBCRC.ANA.DATALAYER||(CBCRC.ANA.DATALAYER={}),CBCRC.ANA.MEDIA||(CBCRC.ANA.MEDIA={}),CBC.APP.versions["cbc-stats-top"]="3.11.0",CBC.APP.version||(CBC.APP.version=function(){return{"cbc-stats-top.js":CBC.APP.versions["cbc-stats-top"],"cbc-stats-bottom.js":CBC.APP.versions["cbc-stats-bottom"]}});var CryptoJS=CryptoJS||function(s){function n(){}var e={},t=e.lib={},r=t.Base={extend:function(e){n.prototype=this;var t=new n;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),(t.init.prototype=t).$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},c=t.WordArray=r.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||a).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes;if(e=e.sigBytes,this.clamp(),r%4)for(var i=0;i<e;i++)t[r+i>>>2]|=(n[i>>>2]>>>24-i%4*8&255)<<24-(r+i)%4*8;else if(65535<n.length)for(i=0;i<e;i+=4)t[r+i>>>2]=n[i>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var e=this.words,t=this.sigBytes;e[t>>>2]&=4294967295<<32-t%4*8,e.length=s.ceil(t/4)},clone:function(){var e=r.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(4294967296*s.random()|0);return new c.init(t,e)}}),i=e.enc={},a=i.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++){var i=t[r>>>2]>>>24-r%4*8&255;n.push((i>>>4).toString(16)),n.push((15&i).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new c.init(n,t/2)}},o=i.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++)n.push(String.fromCharCode(t[r>>>2]>>>24-r%4*8&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new c.init(n,t)}},u=i.Utf8={stringify:function(e){try{return decodeURIComponent(escape(o.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return o.parse(unescape(encodeURIComponent(e)))}},l=t.BufferedBlockAlgorithm=r.extend({reset:function(){this._data=new c.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=u.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(e){var t=this._data,n=t.words,r=t.sigBytes,i=this.blockSize,a=r/(4*i),a=e?s.ceil(a):s.max((0|a)-this._minBufferSize,0),r=s.min(4*(e=a*i),r);if(e){for(var o=0;o<e;o+=i)this._doProcessBlock(n,o);o=n.splice(0,e),t.sigBytes-=r}return new c.init(o,r)},clone:function(){var e=r.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),d=(t.Hasher=l.extend({cfg:r.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(n){return function(e,t){return new n.init(t).finalize(e)}},_createHmacHelper:function(n){return function(e,t){return new d.HMAC.init(n,t).finalize(e)}}}),e.algo={});return e}(Math),getObjectValuesForOverwriting=(!function(){var e=CryptoJS,t=e.lib,i=t.Base,a=t.WordArray;(e=e.x64={}).Word=i.extend({init:function(e,t){this.high=e,this.low=t}}),e.WordArray=i.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,n=[],r=0;r<t;r++){var i=e[r];n.push(i.high),n.push(i.low)}return a.create(n,this.sigBytes)},clone:function(){for(var e=i.clone.call(this),t=e.words=this.words.slice(0),n=t.length,r=0;r<n;r++)t[r]=t[r].clone();return e}})}(),!function(s){for(var e=CryptoJS,c=(t=e.lib).WordArray,r=t.Hasher,n=e.x64.Word,t=e.algo,l=[],d=[],p=[],i=1,a=0,o=0;o<24;o++){l[i+5*a]=(o+1)*(o+2)/2%64;var u=(2*i+3*a)%5,i=a%5,a=u}for(i=0;i<5;i++)for(a=0;a<5;a++)d[i+5*a]=a+(2*i+3*a)%5*5;for(i=1,a=0;a<24;a++){for(var f,h=u=o=0;h<7;h++)1&i&&((f=(1<<h)-1)<32?u^=1<<f:o^=1<<f-32),i=128&i?i<<1^113:i<<1;p[a]=n.create(o,u)}for(var _=[],i=0;i<25;i++)_[i]=n.create();t=t.SHA3=r.extend({cfg:r.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new n.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var n=this._state,r=this.blockSize/2,i=0;i<r;i++){var a=16711935&((a=e[t+2*i])<<8|a>>>24)|4278255360&(a<<24|a>>>8),o=16711935&((o=e[t+2*i+1])<<8|o>>>24)|4278255360&(o<<24|o>>>8),s=n[i];s.high^=o,s.low^=a}for(r=0;r<24;r++){for(i=0;i<5;i++){for(var c=a=0,u=0;u<5;u++)a^=(s=n[i+5*u]).high,c^=s.low;(s=_[i]).high=a,s.low=c}for(i=0;i<5;i++)for(o=(a=_[(i+1)%5]).high,u=a.low,a=(s=_[(i+4)%5]).high^(o<<1|u>>>31),c=s.low^(u<<1|o>>>31),u=0;u<5;u++)(s=n[i+5*u]).high^=a,s.low^=c;for(o=1;o<25;o++)i=(s=n[o]).high,s=s.low,c=(u=l[o])<32?(a=i<<u|s>>>32-u,s<<u|i>>>32-u):(a=s<<u-32|i>>>64-u,i<<u-32|s>>>64-u),(s=_[d[o]]).high=a,s.low=c;for(i=n[0],(s=_[0]).high=i.high,s.low=i.low,i=0;i<5;i++)for(u=0;u<5;u++)(s=n[o=i+5*u]).high=(a=_[o]).high^~(o=_[(i+1)%5+5*u]).high&(c=_[(i+2)%5+5*u]).high,s.low=a.low^~o.low&c.low;(s=n[0]).high^=(i=p[r]).high,s.low^=i.low}},_doFinalize:function(){var e=(r=this._data).words,t=8*r.sigBytes,n=32*this.blockSize;e[t>>>5]|=1<<24-t%32,e[(s.ceil((1+t)/n)*n>>>5)-1]|=128,r.sigBytes=4*e.length,this._process();for(var r=this._state,t=(e=this.cfg.outputLength/8)/8,n=[],i=0;i<t;i++){var a=(o=r[i]).high,o=o.low,a=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8);n.push(16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8)),n.push(a)}return new c.init(n,e)},clone:function(){for(var e=r.clone.call(this),t=e._state=this._state.slice(0),n=0;n<25;n++)t[n]=t[n].clone();return e}}),e.SHA3=r._createHelper(t),e.HmacSHA3=r._createHmacHelper(t)}(Math),CBC.APP.SC.DTM.formatted={adobe:{},chartbeat:{},comscore:{},cxense:{},DAL:{},googlecloud:{},lotame:{},raw:{}},CBC.APP.SC.state={},CBC.APP.SC.state.referrer={},CBC.APP.SC.UTIL=function(){"use strict";var e,t,c=[],n={console:!1};return{init:function(e){},getElementById:function(e){var t=document.getElementById(e);return{el:t,tags:function(e){return t.getElementsByTagName(e)}}},typecheck:function(e){return{element:!!e.nodeType,array:!(!e.length||!e.pop),function:e instanceof Function,object:e instanceof Object,string:"string"==typeof e,number:"number"==typeof e,boolean:"boolean"==typeof e,undefined:void 0===e}},getAnchor:function(e){return this.findParentTag(e,"a")},addListener:function(e){var t,n,r,i,a,o,s=e.element;return!!this.typecheck(s).element&&(t=e.preventDefault,n=e.stopPropagation,r=e.obj,i=e.params,a=e.callback,e=e.type,c.push({type:e,element:s,callback:a,localCallback:o=function(e){e=CBC.APP.SC.UTIL.getEventObject(e),t&&e.preventDefault(),n&&e.stopPropagation(),r&&i?a.call(r,e,i):r?a.call(r,e):i?a.call(s,e,i):a.call(s,e)}}),s.addEventListener?(s.addEventListener(e,o,!1),!0):s.attachEvent?s.attachEvent("on"+e,o):void(s["on"+e]=o))},getEventObject:function(e){return{originalEvent:e=e||window.event,target:e.target||e.srcElement,charCode:e.charCode||e.keyCode,type:e.type,layerX:e.layerX||e.offsetX,layerY:e.layerY||e.offsetY,clientX:e.clientX,clientY:e.clientY,fromElement:"mouseover"===e.type?e.fromElement||e.relatedTarget:null,toElement:"mouseout"===e.type?e.toElement||e.relatedTarget:null,preventDefault:function(){this.originalEvent.preventDefault?this.originalEvent.preventDefault():this.originalEvent.returnValue=!1},stopPropagation:function(){this.originalEvent.stopPropagation?this.originalEvent.stopPropagation():this.originalEvent.cancelBubble=!0}}},stripHTML:function(e){var t;return e=50<(e=(e=/<img .*?(\/>|>)/i.test(e)?(t=/<img .*?(?:\/>|>)/i.exec(e)[0],/alt="[^"]+?"/.test(t)?/alt="(.*?)"/i.exec(t)[1]:/src="(.*\/|)(.*?)"/i.exec(t)[2]):(e=e.replace(/<.*?>/g,"")).replace("/&amp;/i","")).replace(/["]/g,"")).length?e.substr(0,50):e},findParentTag:function(e,t){if(e.nodeName===t.toUpperCase())return e;for(;"BODY"!==e.nodeName&&(e=e.parentNode)&&e.nodeName!==t.toUpperCase(););return e&&"BODY"!==e.nodeName?e:null},debug:function(e){Boolean(CBC.APP.SC.DEBUG)&&"undefined"!=typeof console&&"function"==typeof console.log&&console.log(e)},debugListeners:function(){for(var e=0;e<c.length;e++)console.log(c[e])},arrayFromArguments:function(e){for(var t=[],n=0;n<e.length;n++)t[n]=e[n];return t},checkPropertyExistence:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=t.split("."),i=e;if(void 0!==i){for(var a=0;a<r.length;++a)if(void 0===(i=i[r[a]]))return;return i&&(n.allowObjects||"object"!==_typeof(i))?i:void 0}},dropInvalidObjectProperties:function(n){if(Array.isArray(n)){n=n.filter(function(e){return e||0===e||!1===e}).filter(function(e){return"function"!=typeof e});for(var e=0;e<n.length;++e)"object"===_typeof(n[e])&&(n[e]=window.CBC.APP.SC.UTIL.dropInvalidObjectProperties(n[e]))}else Object.entries(n).forEach(function(e){var e=_slicedToArray(e,2),t=e[0],e=e[1];"object"===_typeof(e)&&null!==e&&(n[t]=window.CBC.APP.SC.UTIL.dropInvalidObjectProperties(n[t]))}),n=Object.entries(n).filter(function(e){e=_slicedToArray(e,2),e[0],e=e[1];return!(null==e||"function"==typeof e)}).filter(function(e){e=_slicedToArray(e,2),e[0],e=e[1];return e&&"object"!==_typeof(e)||0===e||!1===e||Array.isArray(e)&&e.length||"object"===_typeof(e)&&Object.keys(e).length}).reduce(function(e,t){var t=_slicedToArray(t,2),n=t[0],t=t[1];return Object.assign(e,_defineProperty({},n,t))},{});return n},mediaCustomContextDataObjectGenerate:function(e,t,n){if("object"===_typeof(e=e||{})&&!Array.isArray(e)&&"object"===_typeof(t)&&!Array.isArray(t))for(var r in t){var i;"keywords"!==r&&(i="",n.push(r),{}.hasOwnProperty.call(t,r)&&("object"===_typeof(t[r])?Array.isArray(t[r])?(i=t[r].join(","),e[n.join(".")]=i):null===t[r]?e[n.join(".")]=null:e=this.mediaCustomContextDataObjectGenerate(e,t[r],n):(i=t[r],e[n.join(".")]=i)),n.pop())}return e},deepMergeObjs:function(e,t){if("object"===_typeof(e=e||{})&&!Array.isArray(e)&&"object"===_typeof(t)&&!Array.isArray(t))for(var n in t)!{}.hasOwnProperty.call(t,n)||("object"===_typeof(t[n])?Array.isArray(t[n])?Array.isArray(e[n])?e[n]=e[n].concat(t[n]):e[n]=JSON.parse(JSON.stringify(t[n])):e[n]=this.deepMergeObjs(e[n],t[n]):e[n]=t[n]);return e},queryStringToObj:function(e){for(var t=e.split(/[;&]/),n={},r=0;r<t.length;r++){var i=t[r].split("="),a=unescape(i[0].toLowerCase()),i=unescape(i[1]).replace(/\+/g," ");0<a.length&&0<i.length&&(n[a]=i)}return n},getRadioPopupParams:function(){var e={},t={cbc_radio_one:"radio1",cbc_radio_2:"radio2"},n=window.location.href.match("(#/?|\\?)(.*$)"),r="contentarea=radio";return(e=n&&2<n.length?this.queryStringToObj(n[2]):e).networkkey&&(r+="&subsection1="+(t[e.networkkey]||e.networkkey)),r=r+"&subsection2=liveradio"+"&contenttype=page"},isExternallyHosted:function(){var e=document.location.pathname;return!!(e=window.spoofed_pathname?window.spoofed_pathname:e).toLowerCase().match(/^\/g\/stats\/ext.html/g)},makeRequest:function(e,t,n,r,i,a,o,s){var c=new XMLHttpRequest;c.open(e,encodeURI(t)),a&&(c.withCredentials=!0),o&&Object.keys(o).forEach(function(e){c.setRequestHeader(e,o[e])}),s&&s.timeout&&(c.timeout=s.timeout,c.ontimeout=s.cb),c.onload=function(){200===c.status||201===c.status?r.success(c,i):(r.failure(c,i),console&&console.log("Request failed.  Returned status of "+c.status))},c.send(n)},makeGETRequest:function(e,t,n,r,i,a){this.makeRequest("GET",e,void 0,t,n,r,i,a)},makePOSTRequest:function(e,t,n,r,i,a,o){this.makeRequest("POST",e,t,n,r,i,a,o)},makePUTRequest:function(e,t,n,r,i,a,o){this.makeRequest("PUT",e,t,n,r,i,a,o)},setCookie:function(e,t,n,r){var i=new Date,n=(i.setTime(i.getTime()+864e5*n),"expires="+i.toUTCString()),i=void 0!==r?";domain="+r:"";document.cookie=e+"="+encodeURIComponent(t)+";"+n+";path=/"+i},getCookie:function(e){for(var t=e+"=",n=decodeURIComponent(document.cookie).split(";"),r=0;r<n.length;r++){for(var i=n[r];" "===i.charAt(0);)i=i.substring(1);if(0===i.indexOf(t))return i.substring(t.length,i.length)}return"cbc_visitor"===e&&(CBC.APP.ANA.VARS.shouldUseClientID||CBC.APP.ANA.VARS.UieSuccess)?this.getCookie("cbc_external_visitor")?this.getCookie("cbc_external_visitor"):CBC.APP.ANA.VARS.cbcVisitorID||CBC.APP.SC.UTIL.setClientSideVisitorID():""},expireCookie:function(e,t){this.setCookie(e,"value",0,t)},getUuid:function(){function e(e){var t=65535&Math.floor(65536*(1+Math.random()));for("M"===e&&(t=4095&t|16384),t=(t="N"===e?16383&t|32768:t).toString(16);t.length<4;)t="0"+t;return t}return e()+e()+"-"+e()+"-"+e("M")+"-"+e("N")+"-"+e()+e()+e()},getCBCVisitorOrPlusCookieValue:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{isCbcPlus:!1};function t(e){e=window.CBC.APP.SC.UTIL.getQueryStringParameterValue(e);return e||""}var n="",r=new RegExp("radio-canada.ca".replace(/\./g,"\\.")+"$"),i=e.isCbcPlus?"cp":"cv";return r.test(window.location.hostname)?(n=t(i))?e.isCbcPlus||CBC.APP.SC.UTIL.setCookie("cbc_external_visitor",n,365):n=CBC.APP.SC.UTIL.getCookie(e.isCbcPlus?"cbc_plus":"cbc_visitor"):n=(n=window.CBC.APP.SC.UTIL.getCookie(e.isCbcPlus?"cbc_plus":"cbc_visitor"))||t(i),n},requiredExists:function(){},concatSubsections:function(){for(var e,t=CBC.APP.SC.DTM.DATA,n={},r=[],i=0;i<5;i++)"string"==typeof t["subsection"+(i+1)]&&r.push(t["subsection"+(i+1)]),"string"==typeof r[i]&&(e=r.slice(0,i+1),n["subsection"+(i+1)]=t.contentarea+":"+e.join(":"));return n},sendDataToUIE:(t=_asyncToGenerator(_regeneratorRuntime().mark(function e(t){var n;return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,CBC.APP.SC.UTIL.createUIEPayload(t);case 3:if((n=e.sent)["cbc:gem_id"]||n["cbc:adestra_id"]){e.next=6;break}return e.abrupt("return",!1);case 6:n&&this.makePUTRequest(window.CBC.APP.SC.masterSwitch.idexchange.endpoint+"ids",JSON.stringify(n),{success:function(e,t){CBC.APP.SC.UTIL.console("sendDataToUIE: Success!")},failure:function(e,t){CBC.APP.SC.UTIL.console("sendDataToUIEs: Failure!")}},"",!0),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),CBC.APP.SC.UTIL.console("sendDataToUIE: "+e.t0);case 12:case"end":return e.stop()}},e,this,[[0,9]])})),function(e){return t.apply(this,arguments)}),removeGemID:function(e){var t;return e.user&&e.user.id&&e.user.id.gem?(delete(t=e).user.id.gem,0===Object.keys(t.user).length?delete t.user:0===Object.keys(t.user.id).length&&delete t.user.id,t):e},removeCBCPlusID:function(){try{CBC.APP.SC.masterSwitch&&CBC.APP.SC.masterSwitch.switches.idexchange&&CBC.APP.SC.masterSwitch.idexchange&&CBC.APP.SC.masterSwitch.idexchange.endpoint&&this.makePOSTRequest(CBC.APP.SC.masterSwitch.idexchange.endpoint+"logout","",{success:function(e,t){CBC.APP.SC.UTIL.console("setCBCPlusID: logout success!"),CBC.APP.PubSub.publish("UIEAlert"),CBC.APP.SC.UTIL.console("After successfully removing the 'cbc_plus' cookie, the UIEAlert is published.")},failure:function(e,t){CBC.APP.SC.UTIL.console("setCBCPlusID: logout failure! Error: "+e.responseText)}},"",!0)}catch(e){CBC.APP.SC.UTIL.console("setCBCPlusID: "+e)}},setReferrerPillar:function(){var e=CBC.APP.SC.UTIL.getCookie("referrerPillar"),e=(CBC.APP.SC.DTM.formatted.raw.referrer.pillar=e||"noreferrer",CBC.APP.SC.DTM.DATA.pillar||"legacy");CBC.APP.SC.UTIL.setCookie("referrerPillar",e,365,".cbc.ca")},getReferringDepartment:function(){return CBC.APP.SC.UTIL.getCookie("referringDepartment")},setReferringDepartment:function(e){CBC.APP.SC.UTIL.setCookie("referringDepartment",e,365,".cbc.ca")},validateDepartment:function(){var e=CBC.APP.SC.DTM.formatted.raw.department;if(e){var t=CBC.APP.SC.UTIL.getMetadataAllowlist(),n=t.metadata.allowlist.department.level1,r=t.metadata.allowlist.department.level2,t=t.metadata.allowlist.department.level3,n=Object.keys(n),i=Object.keys(r),a=Object.keys(t),o=e.level1?CBC.APP.SC.UTIL.normalize(e.level1):"",s=e.level2?CBC.APP.SC.UTIL.normalize(e.level2):"",c=e.level3?CBC.APP.SC.UTIL.normalize(e.level3):"";if(e.level1&&-1===n.indexOf(o))return CBC.APP.SC.UTIL.reportMetadataExceptionForStats(CBC.APP.SC.UTIL.formatValidationException("Department Level 1",o),CBC.APP.SC.DTM.formatted.raw),!1;if(e.level2){if(-1===i.indexOf(s))return CBC.APP.SC.UTIL.reportMetadataExceptionForStats(CBC.APP.SC.UTIL.formatValidationException("Department Level 2",s),CBC.APP.SC.DTM.formatted.raw),!1;if(!(-1!==r[s].indexOf(o)))return CBC.APP.SC.UTIL.reportMetadataExceptionForStats(CBC.APP.SC.UTIL.formatValidationException("Department Level 2 under Department Level 1",s),CBC.APP.SC.DTM.formatted.raw),!1}if(e.level3){if(-1===a.indexOf(c))return CBC.APP.SC.UTIL.reportMetadataExceptionForStats(CBC.APP.SC.UTIL.formatValidationException("Department Level 3",c),CBC.APP.SC.DTM.formatted.raw),!1;if(!(-1!==t[c].indexOf(s)))return CBC.APP.SC.UTIL.reportMetadataExceptionForStats(CBC.APP.SC.UTIL.formatValidationException("Department Level 3 under Department Level 2",c),CBC.APP.SC.DTM.formatted.raw),!1}return!0}return!1},initReferringDepartmentStatus:function(){CBC.APP.SC.state.referrer.department||(CBC.APP.SC.state.referrer.department={}),CBC.APP.SC.state.referrer.department.STREAMED="",CBC.APP.SC.state.referrer.department.WATCHED=""},getReferringDepartmentStatus:function(){return CBC.APP.SC.state.referrer.department},setReferringDepartmentStatus:function(e,t){/^(STREAMED|WATCHED)?/.test(e.toUpperCase())&&(CBC.APP.SC.state.referrer.department[e.toUpperCase()]=t)},setFormattedLayer:function(){var t,e=CBC.APP.SC.UTIL.getMetadataAllowlist(),n=(CBC.APP.SC.DTM.formatted.raw=JSON.parse(JSON.stringify(CBC.APP.SC.DTM.DATA)),CBC.APP.SC.DTM.formatted.raw.referrer?"string"==typeof CBC.APP.SC.DTM.formatted.raw.referrer?(n=CBC.APP.SC.DTM.formatted.raw.referrer,CBC.APP.SC.DTM.formatted.raw.referrer={},CBC.APP.SC.DTM.formatted.raw.refererr.url=n):CBC.APP.SC.DTM.formatted.raw.referrer.url=CBC.APP.SC.DTM.formatted.raw.referrer.url||this.getReferrer(document):(CBC.APP.SC.DTM.formatted.raw.referrer={},CBC.APP.SC.DTM.formatted.raw.referrer.url=this.getReferrer(document)),new RegExp("^\\d{2}\\/\\d{2}\\/\\d{4} \\d{2}:\\d{2}:\\d{2}$"));if(CBC.APP.SC.DTM.formatted.raw.publishedTime&&n.test(CBC.APP.SC.DTM.formatted.raw.publishedTime)&&(i=new Date(CBC.APP.SC.DTM.formatted.raw.publishedTime.replace(/(\d{2})\/(\d{2})\/(\d{4})/,"$3-$2-$1").replace(/\s+/,"T").concat("Z")),CBC.APP.SC.DTM.formatted.raw.publishedTime=i.getTime()),CBC.APP.SC.DTM.formatted.raw.updatedTime&&n.test(CBC.APP.SC.DTM.formatted.raw.updatedTime)&&(i=new Date(CBC.APP.SC.DTM.formatted.raw.updatedTime.replace(/(\d{2})\/(\d{2})\/(\d{4})/,"$3-$2-$1").replace(/\s+/,"T").concat("Z")),CBC.APP.SC.DTM.formatted.raw.updatedTime=i.getTime()),/^https?:\/\/(gem|watch).*/.test(document.location.href)&&"object"===_typeof(CBC.APP.SC.DTM.formatted.raw.title)&&void 0!==CBC.APP.SC.DTM.formatted.raw.subsection4&&(CBC.APP.SC.DTM.formatted.raw.titleObject=JSON.parse(JSON.stringify(CBC.APP.SC.DTM.formatted.raw.title)),CBC.APP.SC.DTM.formatted.raw.title=CBC.APP.SC.DTM.formatted.raw.subsection4),void 0===CBC.APP.SC.DTM.formatted.raw.contentid&&("string"==typeof CBC.APP.SC.DTM.formatted.raw.url?CBC.APP.SC.DTM.formatted.raw.contentid=this.getContentID(CBC.APP.SC.DTM.formatted.raw.url):CBC.APP.SC.DTM.formatted.raw.contentid=this.getContentID(document.location.href),""===CBC.APP.SC.DTM.formatted.raw.contentid)&&delete CBC.APP.SC.DTM.formatted.raw.contentid,CBC.APP.SC.DTM.formatted.raw.embedtypes&&e.metadata.allowlist.content.embedded.media&&(t=e.metadata.allowlist.content.embedded.media,(n=this.sanitizeArray(CBC.APP.SC.DTM.formatted.raw.embedtypes).filter(function(e){return t[e]})).sort(),CBC.APP.SC.DTM.formatted.raw.embedtypes=n.join("-")),CBC.APP.SC.DTM.formatted.raw.sponsor){var r,i=this.cleanString(CBC.APP.SC.DTM.formatted.raw.sponsor.name),a={};for(r in e.metadata.allowlist.sponsor.name)a[this.cleanString(r)]=e.metadata.allowlist.sponsor.name[r];a[i]?CBC.APP.SC.DTM.formatted.raw.sponsor.name=i:(CBC.APP.SC.UTIL.reportMetadataExceptionForStats(CBC.APP.SC.UTIL.formatValidationException("Sponsor Name",i),CBC.APP.SC.DTM.formatted.raw),delete CBC.APP.SC.DTM.formatted.raw.sponsor)}if(CBC.APP.SC.DTM.formatted.raw.partner){var o,n=this.cleanString(CBC.APP.SC.DTM.formatted.raw.partner.name),s={};for(o in e.metadata.allowlist.partner.name)s[this.cleanString(o)]=e.metadata.allowlist.partner.name[o];s[n]?CBC.APP.SC.DTM.formatted.raw.partner.name=n:(CBC.APP.SC.UTIL.reportMetadataExceptionForStats(CBC.APP.SC.UTIL.formatValidationException("Partner Name",n),CBC.APP.SC.DTM.formatted.raw),delete CBC.APP.SC.DTM.formatted.raw.partner)}this.setReferrerPillar();var c=this.getReferringDepartment().split(":");if(""!=c[0]){CBC.APP.SC.DTM.formatted.raw.referrer.department={};for(var u=0;u<c.length;++u)CBC.APP.SC.DTM.formatted.raw.referrer.department["level"+(u+1)]=c[u]}else CBC.APP.SC.DTM.formatted.raw.referrer.department={level1:"noreferrer"};this.validateDepartment()?(n=[(i=CBC.APP.SC.DTM.formatted.raw.department).level1,i.level2,i.level3],this.setReferringDepartment(n.filter(function(e){return e}).join(":"))):this.setReferringDepartment("noreferrer"),CBC.APP.SC.LOCALGEO&&CBC.APP.SC.LOCALGEO.geo&&(CBC.APP.SC.DTM.formatted.raw.geo=CBC.APP.SC.DTM.formatted.raw.geo||{},CBC.APP.SC.DTM.formatted.raw.geo.timezone=CBC.APP.SC.LOCALGEO.geo.timezone||void 0,CBC.APP.SC.DTM.formatted.raw.geo.country=CBC.APP.SC.LOCALGEO.geo.country||void 0,CBC.APP.SC.DTM.formatted.raw.geo.city=CBC.APP.SC.LOCALGEO.geo.city||void 0,CBC.APP.SC.DTM.formatted.raw.geo.region=CBC.APP.SC.LOCALGEO.geo.region||void 0),CBC.APP.SC.DTM.formatted.raw.contentcms&&(CBC.APP.SC.DTM.formatted.raw.contentcms=this.normalize(CBC.APP.SC.DTM.formatted.raw.contentcms),e.metadata.allowlist.content.cms[CBC.APP.SC.DTM.formatted.raw.contentcms]||(CBC.APP.SC.UTIL.reportMetadataExceptionForStats(CBC.APP.SC.UTIL.formatValidationException("Content CMS",CBC.APP.SC.DTM.formatted.raw.contentcms),CBC.APP.SC.DTM.formatted.raw),delete CBC.APP.SC.DTM.formatted.raw.contentcms)),CBC.APP.SC.DTM.formatted.raw.appname?(CBC.APP.SC.DTM.formatted.raw.appname=this.normalize(CBC.APP.SC.DTM.formatted.raw.appname),CBC.APP.ANA.VALIDATORS.Common.validateAppName(CBC.APP.SC.DTM.formatted.raw.appname)||CBC.APP.SC.DTM.formatted.raw.pillar&&((i=CBC.APP.SC.UTIL.determineAppName(CBC.APP.SC.DTM.formatted.raw.pillar,window))?CBC.APP.SC.DTM.formatted.raw.appname=i:(CBC.APP.SC.UTIL.reportMetadataExceptionForStats(CBC.APP.SC.UTIL.formatValidationException("App Name",i),CBC.APP.SC.DTM.formatted.raw),delete CBC.APP.SC.DTM.formatted.raw.appname))):(n=CBC.APP.SC.UTIL.determineAppName(CBC.APP.SC.DTM.formatted.raw.pillar,window))&&(CBC.APP.SC.DTM.formatted.raw.appname=n),CBC.APP.SC.DTM.formatted.raw.keywords=this.standardizeKeywordsData(CBC.APP.SC.DTM.formatted.raw.keywords);for(var i=JSON.parse(JSON.stringify(CBC.APP.SC.DTM.formatted.raw)),n=(void 0!==i.sponsor&&void 0===i.sponsor.name&&delete i.sponsor,CBC.APP.SC.UTIL.sanitizeObject(JSON.parse(JSON.stringify(i)))),n=(CBC.APP.SC.DTM.formatted.adobe=JSON.parse(JSON.stringify(n)),CBC.APP.SC.DTM.formatted.chartbeat=JSON.parse(JSON.stringify(i)),CBC.APP.SC.DTM.formatted.comscore=JSON.parse(JSON.stringify(i)),CBC.APP.SC.DTM.formatted.DAL=JSON.parse(JSON.stringify(n)),CBC.APP.SC.DTM.formatted.harmonizedAdobe=JSON.parse(JSON.stringify(i)),CBC.APP.SC.DTM.formatted.lotame=JSON.parse(JSON.stringify(i)),CBC.APP.SC.DTM.formatted.MirRoar=JSON.parse(JSON.stringify(n)),JSON.parse(JSON.stringify(i))),l=["blogarchivetitle","contentarea","contenttype","hierarchy","pillar","spa","syndicate","title"],d=0;d<l.length;d+=1)"string"==typeof CBC.APP.SC.DTM.formatted.adobe[l[d]]&&(CBC.APP.SC.DTM.formatted.adobe[l[d]]=this.normalize(CBC.APP.SC.DTM.formatted.adobe[l[d]].replace(/\+/g,"-").replace(/[^a-zA-Z0-9-_ .$]/g,"")));for(var p=["author","keywords"],f=0;f<p.length;f+=1)"string"==typeof CBC.APP.SC.DTM.formatted.adobe[p[f]]&&(CBC.APP.SC.DTM.formatted.adobe[p[f]]=this.normalize(CBC.APP.SC.DTM.formatted.adobe[p[f]].replace(/, /g,",")));for(var h=["subsection1","subsection2","subsection3","subsection4"],_=0;_<h.length;_+=1)"string"==typeof CBC.APP.SC.DTM.formatted.adobe[h[_]]&&(CBC.APP.SC.DTM.formatted.adobe[h[_]]=this.normalize(CBC.APP.SC.DTM.formatted.adobe[h[_]],"_"));var g=["name","position"];if(CBC.APP.SC.DTM.formatted.adobe.feature)for(var m=0;m<g.length;m+=1)CBC.APP.SC.DTM.formatted.adobe.feature[g[m]]&&"string"==typeof CBC.APP.SC.DTM.formatted.adobe.feature[g[m]]&&(CBC.APP.SC.DTM.formatted.adobe.feature[g[m]]=this.normalize(CBC.APP.SC.DTM.formatted.adobe.feature[g[m]].replace(/\+/g,"-").replace(/[^a-zA-Z0-9-_ .$]/g,"")));var C=["level1","level2","level3"];if(CBC.APP.SC.DTM.formatted.adobe.department)for(var v=0;v<C.length;v+=1)CBC.APP.SC.DTM.formatted.adobe.department[C[v]]&&"string"==typeof CBC.APP.SC.DTM.formatted.adobe.department[C[v]]&&(CBC.APP.SC.DTM.formatted.adobe.department[C[v]]=this.normalize(CBC.APP.SC.DTM.formatted.adobe.department[C[v]].replace(/\+/g,"-").replace(/[^a-zA-Z0-9-_ .$]/g,"")));if(CBC.APP.SC.DTM.formatted.adobe.referrer.department)for(var y=0;y<C.length;y+=1)CBC.APP.SC.DTM.formatted.adobe.referrer.department[C[y]]&&"string"==typeof CBC.APP.SC.DTM.formatted.adobe.referrer.department[C[y]]&&(CBC.APP.SC.DTM.formatted.adobe.referrer.department[C[y]]=this.normalize(CBC.APP.SC.DTM.formatted.adobe.referrer.department[C[y]].replace(/\+/g,"-").replace(/[^a-zA-Z0-9-_ .$]/g,"")));void 0!==CBC.APP.SC.DTM.formatted.raw&&(void 0!==CBC.APP.SC.DTM.formatted.raw.url&&(CBC.APP.SC.DTM.formatted.chartbeat.url=CBC.APP.SC.DTM.formatted.raw.url.replace("cbc.ca/beta/","cbc.ca/")),void 0!==CBC.APP.SC.DTM.formatted.raw.authors)&&(CBC.APP.SC.DTM.formatted.chartbeat.authors=CBC.APP.SC.DTM.formatted.raw.authors.toLowerCase().replace(/, /g,",").replace(/\s/g,"-")),void 0!==CBC.APP.SC.DTM.formatted.raw&&CBC.APP.SC.syndicate&&(i=(i=CBC.APP.SC.syndicate).replace(/\s/g,"-").toLowerCase(),CBC.APP.SC.DTM.formatted.comscore.syndicate=i);i="object"===_typeof(n.keywords)?CBC.APP.SC.UTIL.formatKeywordsData(n.keywords):{};function A(e){return"string"==typeof e?e.toLowerCase():""}CBC.APP.SC.DTM.formatted.cxense={authors:n.authors,contentarea:A(n.contentarea),contentcms:n.contentcms,contentid:n.contentid,contenttype:A(n.contenttype),embedtypes:n.embedtypes,experimentsContent:n.experiments?n.experiments.content:"",keywords:"string"==typeof n.keywords?n.keywords:"",keywordsCollections:i.collections,keywordsCompany:i.company,keywordsLocation:i.location,keywordsOrganization:i.organization,keywordsPerson:i.person,keywordsSubject:i.subject,mediaDuration:n.media?n.media.duration:"",mediaId:n.media?n.media.id:"",mediaLiveondemand:n.media?n.media.liveondemand:"",mediaSport:n.media?n.media.sport:"",mediaShow:n.media?n.media.show:"",mediaAudiovideo:n.media?n.media.audiovideo:"",partnerName:n.partner?n.partner.name:"",pillar:n.pillar,publishedTime:n.publishedTime,sponsorName:n.sponsor?n.sponsor.name:"",socialCommentsEnabled:n.social&&n.social.comments?n.social.comments.enabled:"",socialCommentsLoaded:n.social&&n.social.comments?n.social.comments.loaded:"",socialCommentsTotal:n.social&&n.social.comments?n.social.comments.total:"",subsection1:A(n.subsection1),subsection2:A(n.subsection2),subsection3:A(n.subsection3),subsection4:A(n.subsection4),title:n.title,updatedTime:n.updatedTime,url:n.url,wordcount:n.wordcount},Object.keys(CBC.APP.SC.DTM.formatted.cxense).forEach(function(e){void 0!==CBC.APP.SC.DTM.formatted.cxense[e]&&""!==CBC.APP.SC.DTM.formatted.cxense[e]&&"(not specified)"!==CBC.APP.SC.DTM.formatted.cxense[e]||delete CBC.APP.SC.DTM.formatted.cxense[e]}),CBC.APP.ANA.FORMATTERS.ESS.generateGoogleCloudPayload(),"object"===_typeof(CBC.APP.SC.DTM.DATA.keywords)&&this.setGoogleCloudContentTags(JSON.stringify(CBC.APP.SC.DTM.DATA.keywords))},sanitizeObject:function(r,i){var a=this;return Object.entries(r).forEach(function(e){var e=_slicedToArray(e,2),t=e[0],e=e[1],n=i?i+"."+t:t;"string"==typeof e&&'[\n    "authors",\n    "experiments.content", \n    "keywords"\n]'.includes(n)?r[t]=a.normalize(e.replace(/, /g,",")).replace(/[^0-9A-Za-z/_$.+\-,\s]/g,"").replace(/\+/g,"-"):"string"!=typeof e||'[\n    "content.url",\n    "copy_videoid",\n    "copy_videoname",\n    "copy_videoplayername",\n    "referrer.url",\n    "url",\n    "videourl",\n    "videopage"\n]'.includes(n)?"object"===_typeof(e)&&(r[t]=a.sanitizeObject(e,n)):r[t]=a.cleanString(e)}),r},sanitizeArray:function(e){var t=this;return e.map(function(e){return t.cleanString(e)})},getContentID:function(e){e=/-[\d]\.[\d]+$/.exec(e);return"object"===_typeof(e)&&null!==e&&0<e.length?e[0].substr(1):""},getGemID:function(){return CBC.APP.SC.DTM.DATA.user&&CBC.APP.SC.DTM.DATA.user.id&&CBC.APP.SC.DTM.DATA.user.id.gem?CBC.APP.SC.DTM.DATA.user.id.gem:null},getReferrer:function(e){var t=e.referrer;return 0<CBC.APP.ANA.FORMATTERS.Adobe.getVal("pageviewcount")&&(t=CBC.APP.SC.state.referrer.url),CBC.APP.SC.state.referrer.url=e.location.href,t},clearDataLayer:function(){CBC.APP.SC.DTM.DATA={},this.clearFormattedDataLayer()},clearFormattedDataLayer:function(){CBC.APP.SC.DTM.formatted={adobe:{},chartbeat:{},comscore:{},cxense:{},DAL:{},googlecloud:{},lotame:{},raw:{}}},normalize:function(e,t){return e.replace(/\s+/g,t=void 0===t?"-":t).toLowerCase()},sanitize:function(e){return e.replace(/[\W_]+/g,"")},cleanString:function(e){if(void 0!==e)return e=e.replace(/[^0-9A-Za-z/_$.+\-\s]/g,"").trim(),window.CBC.APP.SC.UTIL.normalize(e).replace(/\+/g,"-")},trimDashes:function(e){return e.replace(/^-+|-+$/g,"")},splitQuery:function(e,t,n){for(var r={},i=e.split("&"),a=0;a<i.length;a++){var o=i[a].split("="),s=o[0],c=o[1];if(t){if(!t[o[0]])continue;s=t[o[0]]}n&&n[o[1]]&&(c=n[o[1]]),r[s]=c}return r},getUserTier:function(){var e=CBC.APP.SC.UTIL.getCBCVisitorOrPlusCookieValue({isCbcPlus:!0})?"authenticated":"free";return e=void 0!==CBC.APP.SC.DTM.DATA&&"premium"===CBC.APP.SC.DTM.DATA.userTier?"premium":e},convertTier:function(e){var t="authenticated",n="premium";return new Map([["1","free"],[2,t],["2",t],["authenticated",t],[3,n],["3",n],["premium",n]]).get(e)||"free"},getCBCUserProperties:function(){var e=this.getCookie("cbclocal");if(e)return this.splitQuery(e,{radio:"location.radio",news:"location.news",tv:"location.tv",region:"location.region",weather:"location.weather"},void 0)},getPolopolyDimension:function(e,t){for(var n=JSON.parse(e),r={},i=0;i<n.length;i++){var a=n[i];r[a.name]=[];for(var o=0;o<a.entities.length;o++){var s=a.entities[o];r[a.name].push(t(s.name))}}return r},setGoogleCloudContentTags:function(e){e=(0,this.getPolopolyDimension)(e,this.sanitize);"object"===_typeof(CBC.APP.SC.DTM.formatted.googlecloud.content)&&(e.Person&&(CBC.APP.SC.DTM.formatted.googlecloud.content.tags.person=e.Person),e.Location&&(CBC.APP.SC.DTM.formatted.googlecloud.content.tags.location=e.Location),e.Subject&&(CBC.APP.SC.DTM.formatted.googlecloud.content.tags.subject=e.Subject),e.Company)&&(CBC.APP.SC.DTM.formatted.googlecloud.content.tags.company=e.Company)},sendVisitorUserIDs:function(e){this.makePUTRequest(window.CBC.APP.SC.masterSwitch.idexchange.endpoint+"ids",JSON.stringify(e),{success:function(e,t){console.log("sendVisitorUserIDs: Success!")},failure:function(e,t){console.log("sendVisitorUserIDs: Failure!")}},"",!0)},createUIEPayload:function(a){var o=this;return new Promise(function(e,t){var n,r,i;void 0!==window.CBC.APP.SC.masterSwitch&&void 0!==window.CBC.APP.SC.masterSwitch.switches&&void 0!==window.CBC.APP.SC.masterSwitch.switches.idexchange&&window.CBC.APP.SC.masterSwitch.switches.idexchange&&window.CBC.APP.SC.masterSwitch.idexchange.endpoint?(n={},r=0,i=setInterval(function(){10<r&&(clearInterval(i),e(!1)),r++,a&&a.user&&a.user.id&&(a.user.id.gem&&(n["cbc:gem_id"]=[a.user.id.gem.toString()]),a.user.id.adestra)&&(n["cbc:adestra_id"]=[a.user.id.adestra.toString()]),n["@context"]={cbc:CBC.APP.SC.masterSwitch.idexchange.context},window.s_cbc_sitecatalyst.visitor.getMarketingCloudVisitorID()&&(n["cbc:adobe_id"]=[window.s_cbc_sitecatalyst.visitor.getMarketingCloudVisitorID().toString()]),o.getCookie("cX_P")&&(n["cbc:cxense_id"]=[o.getCookie("cX_P").toString()]),o.getCookie("lr-user-uid")&&(n["cbc:loginradius_id"]=[o.getCookie("lr-user-uid").toString()]),CBC.APP.DMP&&CBC.APP.DMP.LOTAME&&CBC.APP.DMP.LOTAME.profileId&&(n["cbc:lotame_id"]=[CBC.APP.DMP.LOTAME.profileId.toString()]),window.viafoura&&window.viafoura.users&&window.viafoura.users.current&&window.viafoura.users.current().id&&(n["cbc:viafoura_id"]=[window.viafoura.users.current().id.toString()]),["cbc:adobe_id","cbc:viafoura_id","cbc:lotame_id","cbc:cxense_id"].some(function(e){return n[e]})&&(clearInterval(i),e(n))},500)):e(!1)})},setDefaultValue:function(e,t){return t=null==t?"":t,null==e?t:e},getLocationHref:function(e){return e.location.href},getLocationHost:function(e){return e.location.host},getDoNotTrackValue:function(){return!!(window.navigator.doNotTrack&&"unspecified"!==window.navigator.doNotTrack||window.doNotTrack)},getCookiesEnabledValue:function(){return!!window.navigator.cookieEnabled},getQueryStringFromURL:function(e){return e&&e.location?e.location.search:""},determineAppName:function(e,t){var n=this.getLocationHost(t),r=this.getLocationHref(t),t=CBC.APP.SC.UTIL.getQueryStringFromURL(t),i=CBC.APP.SC.DTM&&CBC.APP.SC.DTM.DATA&&CBC.APP.SC.DTM.DATA.url?CBC.APP.SC.DTM.DATA.url:"",a="feed"===e?"ocelot":!1;return"listen"===e&&(-1<r.indexOf("cbc.ca/listen")||-1<i.indexOf("cbc.ca/listen")?a="listen-web-app":(-1<n.indexOf("cbcmusic")||-1<i.indexOf("cbcmusic"))&&(a="music-web-app")),"watch"===e&&(-1<n.indexOf("gem.cbc.ca")||-1<n.indexOf("gem.qa.nm.cbc.ca")||-1<i.indexOf("gem.cbc.ca")||-1<i.indexOf("gem.qa.nm.cbc.ca")||-1<n.indexOf("watch.cbc.ca")||-1<n.indexOf("watch.qa.nm.cbc.ca")||-1<i.indexOf("watch.cbc.ca")||-1<i.indexOf("watch.qa.nm.cbc.ca"))&&(a="ott-web-app"),"lwf"===e&&(-1<n.indexOf("radio-canada.ca")||-1<i.indexOf("radio-canada.ca"))&&(a="sso-web-app"),(-1<n.indexOf("responsive.cbc.ca")||-1<n.indexOf("cbchelp.cbc.ca")||-1<i.indexOf("responsive.cbc.ca")||-1<i.indexOf("cbchelp.cbc.ca"))&&(a="zendesk"),(-1<n.indexOf("cbc.ca")||-1<i.indexOf("cbc.ca")||this.isExternallyHosted())&&!/^(feed|watch|listen|)$/.test(e)&&(a=a||"cbcca-web"),a=-1<t.indexOf("webview=true")&&-1<t.indexOf("appname=")&&(r=this.queryStringToObj(t.substring(1)),CBC.APP.SC.UTIL.getMetadataAllowlist().metadata.allowlist.webviewapps[r.appname])?r.appname:a},determineWebViewFeatureName:function(e){var e=CBC.APP.SC.UTIL.getQueryStringFromURL(e),t=!1;return t=-1<e.indexOf("webview=true")&&-1<e.indexOf("featurename=")?CBC.APP.SC.UTIL.queryStringToObj(e.substring(1)).featurename||t:t},formatKeywordsString:function(e){var t={},e=e.split(",").map(function(e){if(e.trim())return e.trim().replace(/[\s+]+/g,"-").toLowerCase().replace(/[^0-9A-za-z_\-$.]/g,"")}).filter(function(e){return void 0!==e});return t.tag=e,t},formatKeywordsData:function(e){var t,n={};for(t in e)Array.isArray(e[t])&&e[t].forEach(function(e){var t="generic"==e.type?"tag":e.type;n[t]||(n[t]=[]),e.name&&!n[t].includes(e.name)?n[t].push(e.name):e.path&&!n[t].includes(e.path)&&n[t].push(e.path)});return n},standardizeKeywordsData:function(e){if("object"===_typeof(e)&&0<e.length&&"object"===_typeof(e[0].entities)){var a,o={tags:[],concepts:[]},t=_createForOfIteratorHelper(e);try{for(t.s();!(a=t.n()).done;)!function(){var e=a.value,t=e.name.toLowerCase(),n="tags",r=t;switch(t){case"person":case"company":case"organization":case"location":case"collections":break;case"tag":r="generic";break;case"subject":n="concepts";break;case"default":return}var i="tags"===n?"name":"path";e.entities.forEach(function(e){o[n].push(_defineProperty({type:r},i,e.name))})}()}catch(e){t.e(e)}finally{t.f()}return this.reportMetadataExceptionForStats("Converting legacy Keywords to new structure",CBC.APP.SC.DTM.DATA),o}return e},generateAdCampaignList:function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=2<arguments.length?arguments[2]:void 0,e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:6,i=new Date(r),a=i.getFullYear(),o=i.getMonth(),i=i.getDate(),a=new Date(a,o,i),s=(a.setMonth(a.getMonth()-e),a.getTime()),n=n||{},o=Object.keys(n);return 0<o.length?o.forEach(function(e){n[t]=r,n[e]<s&&delete n[e]}):n[t]=r,n},uniqueArray:function(e){for(var t=e.concat(),n=0;n<t.length;++n)for(var r=n+1;r<t.length;++r)t[n]===t[r]&&t.splice(r--,1);return t},populateScannedMetadata:function(e,t){var n={},r=this.getAnchor(e);if(r){var i=r.href.match(/(?:)\.cbc(music)?\.ca\/([^/]+)/),a=r.href,r=r.getAttribute("data-contentid");if(i&&a&&r&&"number"==typeof t)return n.content={area:/^\.cbcmusic\.ca\//.test(i)?"music":i[0].trim().replace(/\.cbc(music)?\.ca\//,""),title:e.textContent,url:a,type:"headline",id:r,cms:"polopoly"},n.time={engaged:t},n.referrer={url:document.URL},n.app={name:"ocelot",pillar:"feed"},n}return!1},sendScanned:function(e,t){e=this.populateScannedMetadata(e,t);return CBC.APP.SC.EventTracker.trackEvent("SCANNED",e),e},populateOTTMediaMetadata:function(e){var t=e.content&&e.content.media?e.content.media:{},n=CBC.APP.SC.DTM.formatted.DAL,r={app:{name:"ott-web-app",pillar:"watch"},content:{media:{audiovideo:t.audiovideo||"",liveondemand:t.liveondemand||"",type:t.type||"",genre:t.genre||"",show:t.show||"",sport:t.sport||"",region:t.region||"",publishedtime:t.airdate&&"nan"!==t.airdate?t.airdate:"",seasonnumber:t.seasonnumber&&"nan"!==t.seasonnumber?t.seasonnumber:"",episodenumber:t.episodenumber&&"nan"!==t.episodenumber?t.episodenumber:"",length:t.length||""},area:t.contentarea||"",cms:e.content.cms||"ibm-cloud-video",id:n.contentid||e.content.id,tier:this.convertTier(n.contenttier),title:t.streamtitle||"",url:n.url},referrer:{url:n.referrer.url,pillar:n.referrer.pillar},user:{tier:this.convertTier(n.userTier)}};if(e.content&&e.content.keywords&&(r.content.keywords=JSON.parse(JSON.stringify(e.content.keywords))),t.partnername){var i,a=CBC.APP.SC.UTIL.getMetadataAllowlist(),n=CBC.APP.SC.UTIL.cleanString(t.partnername),o={};for(i in a.metadata.allowlist.partner.name)o[CBC.APP.SC.UTIL.cleanString(i)]=a.metadata.allowlist.partner.name[i];o[n]&&(r.content.partner={},r.content.partner.name=n)}if(t.sponsorname){var s,c=CBC.APP.SC.UTIL.getMetadataAllowlist(),n=CBC.APP.SC.UTIL.cleanString(t.sponsorname),u={};for(s in c.metadata.allowlist.sponsor.name)u[CBC.APP.SC.UTIL.cleanString(s)]=c.metadata.allowlist.sponsor.name[s];u[n]&&(r.sponsor={},r.sponsor.name=t.sponsorname)}return e.feature&&(r.feature={},e.feature.name&&(r.feature.name=e.feature.name),e.feature.position)&&(r.feature.position=e.feature.position),""===CBC.APP.SC.UTIL.getReferringDepartmentStatus().STREAMED&&(CBC.APP.SC.UTIL.setReferringDepartmentStatus("STREAMED",r.content.id),r.referrer.department={},r.referrer.department.level1=CBC.APP.SC.DTM.formatted.DAL.referrer.department.level1||"",r.referrer.department.level2=CBC.APP.SC.DTM.formatted.DAL.referrer.department.level2||"",r.referrer.department.level3=CBC.APP.SC.DTM.formatted.DAL.referrer.department.level3||"",Object.keys(r.referrer.department).forEach(function(e){""===r.referrer.department[e]&&delete r.referrer.department[e]})),Object.keys(r.content.media).forEach(function(e){""===r.content.media[e]&&delete r.content.media[e]}),Object.keys(r.content).forEach(function(e){""===r.content[e]&&delete r.content[e]}),r},getQueryStringParameterValue:function(e,t){if("string"!=typeof e)return CBC.APP.SC.UTIL.console("getQueryStringParameterValue: invalid parameterName"),!1;void 0===t&&(t=window.location.search);e=new RegExp(e+"=([^&\\s]*)"),t=t.match(e);return null===t?(CBC.APP.SC.UTIL.console("getQueryStringParameterValue: parameter does not exist"),null):t[1]},getMetadataAllowlist:function(){return CBC.APP.SC.metadataAllowlist||(CBC.APP.SC.metadataAllowlist={metadata:{allowlist:{}}}),CBC.APP.SC.metadataAllowlist},setCBCPlusIDPromise:function(){return new Promise(function(r,i){CBC.APP.SC.UTIL.createUIEPayload().then(function(n){try{CBC.APP.SC.masterSwitch&&CBC.APP.SC.masterSwitch.switches.idexchange&&CBC.APP.SC.masterSwitch.idexchange&&CBC.APP.SC.masterSwitch.idexchange.endpoint&&CBC.APP.SC.UTIL.makePOSTRequest(CBC.APP.SC.masterSwitch.idexchange.endpoint+"login",JSON.stringify(n),{success:function(e,t){CBC.APP.SC.UTIL.debug("setCBCPlusID: login success!"),CBC.APP.SC.UTIL.sendVisitorUserIDsPromise(n).then(function(e){r(!0)}).catch(function(){CBC.APP.SC.UTIL.debug("error in create sendVisitorUserIDsPromise")})},failure:function(e,t){CBC.APP.SC.UTIL.debug("setCBCPlusID: login failure! Error: "+e.responseText),i("UIE failure")}},"",!0)}catch(e){CBC.APP.SC.UTIL.debug("setCBCPlusID: "+e),i(e)}})})},setCBCVisitorIDPromise:function(){return new Promise(function(r,i){CBC.APP.SC.UTIL.createUIEPayload().then(function(n){try{CBC.APP.SC.masterSwitch&&CBC.APP.SC.masterSwitch.switches&&CBC.APP.SC.masterSwitch.switches.idexchange&&CBC.APP.SC.masterSwitch.idexchange&&CBC.APP.SC.masterSwitch.idexchange.endpoint?CBC.APP.SC.UTIL.makeGETRequest(CBC.APP.SC.masterSwitch.idexchange.endpoint+"current_user",{success:function(e,t){CBC.APP.SC.UTIL.debug("setCBCVisitorID: current_user success!"),CBC.APP.SC.UTIL.sendVisitorUserIDsPromise(n).then(function(e){CBC.APP.ANA.VARS.UieSuccess=!0,r(!0)}).catch(function(){var e="error in create sendVisitorUserIDsPromise";CBC.APP.SC.UTIL.debug(e),CBC.APP.ANA.VARS.shouldUseClientID=!0,i(e)})},failure:function(e,t){CBC.APP.SC.UTIL.debug("setCBCVisitorID: current_user failure! Error: "+e.responseText),CBC.APP.ANA.VARS.shouldUseClientID=!0,i("CBCVisitorID Error")}},"",!0):(CBC.APP.ANA.VARS.shouldUseClientID=!0,i("Visitor Promise ID has not been set"))}catch(e){CBC.APP.SC.UTIL.debug("setCBCVisitorID: "+e),CBC.APP.ANA.VARS.shouldUseClientID=!0,i(e)}})})},sendVisitorUserIDsPromise:function(e){return new Promise(function(n,r){CBC.APP.SC.UTIL.makePUTRequest(window.CBC.APP.SC.masterSwitch.idexchange.endpoint+"ids",JSON.stringify(e),{success:function(e,t){n(!0)},failure:function(e,t){r(!1)}},"",!0)})},setClientSideVisitorID:function(){return CBC.APP.ANA.VARS.cbcVisitorID=CBC.APP.SC.UTIL.getUuid(),CBC.APP.SC.UTIL.setCookie("cbc_visitor",CBC.APP.ANA.VARS.cbcVisitorID,365,".cbc.ca"),CBC.APP.SC.UTIL.setCookie("cbc_external_visitor",CBC.APP.ANA.VARS.cbcVisitorID,365),CBC.APP.ANA.VARS.cbcVisitorID},returnURL:function(){return window.location.href},console:(e=function(){this.inDebugMode()&&console.log(arguments)},r.toString=function(){return e.toString()},r),inDebugMode:function(){return window.location.href.match(/statsDebug=true/)?n.console=!0:n.console=!1,n.console},masterSwitchMetaPromise:function(){return new Promise(function(t,n){var e="//www.cbc.ca/network/includes/stats/master-switch.json";CBC.APP.SC.UTIL.makeGETRequest(e,{success:function(e){CBC.APP.SC.masterSwitch=JSON.parse(e.responseText),t(CBC.APP.SC.masterSwitch)},failure:function(e){n(e.failure.message)}},{success:{uri:e},failure:{message:"unable to communicate"}})})},getEpochTime:function(){var e=new Date;return Math.round(e.getTime()/1e3)},loadScript:function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]&&arguments[3],i=document.createElement("script");i.type="text/javascript",n&&(i.async=!0),i.readyState?i.onreadystatechange=function(){"loaded"!==i.readyState&&"complete"!==i.readyState||(i.onreadystatechange=null,t&&t())}:i.onload=function(){t&&t()},i.src=e,r&&0<(n=document.querySelectorAll('script[src="'+e+'"]')).length&&n.forEach(function(e){return e.remove()}),document.getElementsByTagName("head")[0].appendChild(i)},formatValidationException:function(e,t){return'Metadata Validation Failed - "'.concat(t,'" is not one of the valid ').concat(e,".")},isIOSWebviewPrivate:function(){var e=new URLSearchParams(CBC.APP.SC.UTIL.getQueryStringFromURL(document)),t="ios_a_p",n=window.CBC.APP.SC.UTIL.getCookie(t);if("true"===e.get("webview")){if("true"===e.get(t))return CBC.APP.SC.UTIL.setCookie(t,"true",1,".cbc.ca"),!0;n&&CBC.APP.SC.UTIL.expireCookie(t,".cbc.ca")}else if("true"===n)return!0;return!1},reportMetadataExceptionForStats:function(e){CBC.APP.SC.UTIL.console("Analytics Error: "+e)}};function r(){return e.apply(this,arguments)}}(),CBC.APP.ANA.ER=function(){function i(e){CBC.APP.SC.DEBUG&&"undefined"!=typeof console&&"function"==typeof console.log&&console.log(e)}return{TAG_TYPES:{error:{VAL:"VALIDATION",API:"API_CALL",EXC:"EXCEPTION",MISC:"MISC"},tracking:{PAGE:"PAGE_TRACKING",MEDIA:"MEDIA_TRACKING",EVENT:"EVENT_TRACKING"}},report:function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r={error:n.errorType,tracking:n.trackingType,eventName:n.eventName};new Promise(function(n){try{CBC.APP.SC.masterSwitch.switches.exceptionreporting&&n(!0),n(!1)}catch(e){var t="//www.cbc.ca/network/includes/stats/master-switch.json";CBC.APP.SC.UTIL.makeGETRequest(t,{success:function(e){JSON.parse(e.responseText).switches.exceptionreporting&&n(!0)},failure:function(e,t){i("ERROR: Unable to talk to config URL: "+t.failure.uri),n(!1)}},{success:{uri:t},failure:{uri:t}},0,0,{timeout:2e3,cb:function(){i("ERROR: AJAX request for //www.cbc.ca/network/includes/stats/master-switch.json timed out."),n(!1)}})}}).then(function(e){e?CBC.APP.ANA.LIBRARY.SENTRY.report(t,n.signalPayload,Object.assign(r,n.additionalTags)):i("Sentry is off ")})}}}(),CBCRC.ANA.DATALAYER=function(){function l(e,t){for(var n=t.split("."),r=e,i=0;i<n.length;i++){if(void 0===r[n[i]])return;r=r[n[i]]}return r}function d(e,t){var n='[\n    "browser.url",\n    "referrer.id",\n    "url",\n    "user.subscription.ids"\n]\n'.includes(e);if(n||"string"!=typeof t){if(!n&&Array.isArray(t))for(var r=0;r<t.length;r++)t[r]=d(e,t[r])}else t=t.replace(/([\s]+|\+)/g,"-").replace(/[^0-9A-Za-zÀ-ÿ_\-|:$.]/g,"").toLowerCase();return t}var t=["mediaAdBreakCompleted","mediaAdBreakStarted","mediaBufferCompleted","mediaBufferStarted","mediaChapterStarted","mediaChapterCompleted","mediaCompleted","mediaPaused","mediaPlayStarted","mediaSeekStarted","mediaSeekCompleted","mediaSessionCompleted","mediaSessionStarted"];return{getJSONValue:l,mapEventToVerb:function(e){var t=void 0;switch(e){case"pageLoaded":t=void 0!==l(CBC.APP.SC.DTM.DATA,"url")&&void 0!==l(CBC.APP.SC.DTM.DATA,"referrer.id")&&l(CBC.APP.SC.DTM.DATA,"url")===l(CBC.APP.SC.DTM.DATA,"referrer.id")?"LOADED MORE":"LOADED";break;case"castDeviceConnected":t="CAST-DEVICE CONNECTED";break;case"registered":t="REGISTERED";break;case"userSignedIn":t="SIGNED IN";break;case"userSignedOut":t="SIGNED OUT";break;case"userSubscribed":t="SUBSCRIBED";break;case"userUnsubscribed":t="UNSUBSCRIBED";break;default:return}return t},mapMetaData:function(e){for(var t={},n=JSON.parse('{\n    "appname": "app.name",\n    "appVersion": "app.version",\n    "browser.ad_blocking": "browser.ad_blocking",\n    "browser.screenwidth": "browser.screenwidth",\n    "browser.screenheight": "browser.screenheight",\n    "browser.type": "browser.type",\n    "browser.version": "browser.version",\n    "content.channel": "cms.content.channel",\n    "content.family_friendly": "cms.content.family_friendly",\n    "content.format": "cms.content.format",\n    "content.genre.level1": "cms.content.genre.level1",\n    "content.genre.level2": "cms.content.genre.level2",\n    "content.network": "cms.content.network",\n    "content.principal_audience": "cms.content.principal_audience",\n    "content.related_ids": "cms.content.related_ids",\n    "content.string": "cms.content.string",\n    "content.subject_theme.level1":\n        "cms.content.subject_theme.level1",\n    "content.subject_theme.level2":\n        "cms.content.subject_theme.level2",\n    "content.subject_theme.level3":\n        "cms.content.subject_theme.level3",\n    "contentcms": "cms.content.cms",\n    "contentid": "cms.content.id",\n    "contenttier": "cms.content.tier",\n    "contenttype": "cms.content.type",\n    "department.level1": "cms.department.level1",\n    "department.level2": "cms.department.level2",\n    "department.level3": "cms.department.level3",\n    "department.level4": "cms.department.level4",\n    "department.level5": "cms.department.level5",\n    "device.id": "device.id",\n    "device.manufacturer.name": "device.manufacturer.name",\n    "device.manufacturer.version": "device.manufacturer.version",\n    "device.offline": "device.offline",\n    "device.os.name": "device.os.name",\n    "device.os.nametype": "device.os.nametype",\n    "device.type": "device.type",\n    "feature.additionalinfo": "feature.additionalinfo",\n    "feature.instance": "feature.instance",\n    "feature.itemname": "feature.itemname",\n    "feature.name": "feature.name",\n    "feature.position": "feature.position",\n    "feature.projectname": "feature.projectname",\n    "feature.tagmanager.name": "feature.tagmanager.name",\n    "feature.value": "feature.value",\n    "geo.city": "device.geo.city",\n    "geo.country": "device.geo.country",\n    "geo.region": "device.geo.region",\n    "geo.timezone": "device.geo.timezone",\n    "media.brand": "cms.content.media.brand",\n    "media.episode": "cms.content.media.episode",\n    "media.media_title": "cms.content.media.media_title",\n    "media.season": "cms.content.media.season",\n    "osVersion": "device.os.version",\n    "other.ab_test.version": "other.ab_test.version",\n    "other.analytics.version": "other.analytics.version",\n    "page.name": "page.name",\n    "push.device.id": "push.device.id",\n    "referrer.id": "referrer.id",\n    "referrer.name": "referrer.name",\n    "referrer.type": "referrer.type",\n    "sponsor.name": "sponsor.name",\n    "structure.server.domain": "structure.server.domain",\n    "timestamp.clientside": "timestamp.clientside",\n    "timestamp.serverside": "timestamp.serverside",\n    "title": "cms.content.title",\n    "url": "browser.url",\n    "user.id": "user.id",\n    "user.plan.ids": "user.plan.ids",\n    "user.subscription.ids": "user.subscription.ids",\n    "user.tier.ids": "user.tier.ids",\n    "user.tracking.code": "user.tracking.code"\n}'),r=0;r<Object.keys(n).length;r++){u=c=s=o=a=i=void 0;var i=t,a=Object.keys(n)[r],o=l(e,Object.values(n)[r]);if(void 0!==o)for(var s=a.split("."),c=i,u=0;u<s.length;u++)void 0===c[s[u]]&&(c[s[u]]={}),u<s.length-1?c=c[s[u]]:c[s[u]]=d(a,o)}return t},push:function(e){try{CBC.APP.PubSub.turnOn()}catch(e){console.log("There has been an error: "+e)}if(t.includes(e.event))return CBC.APP.PubSub.publish(e.event,e),e},sanitizeDataElement:d,validateMediaProperties:function(n,a,r,o,s){var e,t,c="MEDIAOBJ_VALIDATION_FAILED",u={name:void 0,message:void 0,returnCode:void 0},l=["mediaAdBreakStarted","mediaChapterStarted","mediaSessionStarted"].includes(n)?n.toUpperCase():"MEDIAOTHER";return void 0===s&&(s="MEDIASESSIONSTARTED"===l?(t=!1,void 0!==(e=window.CBC.APP.SC.UTIL.checkPropertyExistence(a,"cms.content.media.liveondemand"))&&(t=["LINEAR","LIVE","ONDEMAND","ALL_STREAM_TYPES"].includes(e.toUpperCase().replace("-",""))),t?e.toUpperCase().replace("-",""):((t=new Error("1: Missing mandatory property at: cms.content.media.liveondemand")).name="NOT FOUND",window.CBC.APP.ANA.ER.report(t,a,[window.CBC.APP.ANA.ER.TAG_TYPES.error.VAL,window.CBC.APP.ANA.ER.TAG_TYPES.tracking.MEDIA,"mediaSessionStarted"]),"ONDEMAND")):"ALL_STREAM_TYPES"),Object.entries(r).forEach(function(e){var i,e=_slicedToArray(e,2),t=e[0],e=e[1];o.push(t),"object"===_typeof(e)&&(e.mediaSessionStarted||e.mediaChapterStarted||e.mediaAdBreakStarted||e.mediaOther)?(i=!1,Object.entries(e).forEach(function(e){var t,n,e=_slicedToArray(e,2),r=e[0],e=e[1];i||(n=(t=e.streamTypes.map(function(e){return e.toUpperCase().replace("-","")})).includes("ALL_STREAM_TYPES"),i=r.toUpperCase()===l&&e.mandatory&&(t.includes(s.toUpperCase().replace("-",""))||n)),e.allowlistLocation&&(t=void 0!==(r=window.CBC.APP.SC.UTIL.checkPropertyExistence(window.CBC.APP.SC.metadataAllowlist.metadata.allowlist,e.allowlistLocation,{allowObjects:!0}))?Object.keys(r):[],n=window.CBC.APP.SC.UTIL.checkPropertyExistence(a,o[o.length-1]),0<t.length)&&!t.includes(n)&&(r=e.allowlistLocation.split(".").slice(-1),a[r])&&delete a[r]}),i&&(!{}.hasOwnProperty.call(a,t)&&u.name!==c?(u.name=c,u.message="1: Missing mandatory property at: "+o.join("."),u.returnCode=1):"object"!==_typeof(a[t])||Array.isArray(a[t])||u.name===c||(u.name=c,u.message="2: Found object when mandatory value was expected at: "+o.join("."),u.returnCode=2))):"object"===_typeof(e)&&Array.isArray(e)||"object"!==_typeof(e)?(u.name=c,u.message="3: Invalid mapping artifact located at: "+o.join("."),u.returnCode=3):(e="object"!==_typeof(a[t])||Array.isArray(a[t])?{}:a[t],(e=window.CBCRC.ANA.DATALAYER.validateMediaProperties(n,e,r[t],o,s)).returnCode&&u.name!==c&&(u.name=e.name,u.message=e.message,u.returnCode=e.returnCode)),o.pop()}),u.name!==c&&(u.name="MEDIAOBJ_VALIDATION_SUCCESS",u.message="0: Payload successfully validated",u.returnCode=0),u}}}(),CBC.APP.ANA.FORMATTERS.Common=function(){"use strict";function n(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:void 0;return"function"!=typeof n?t||e||n:n(e,t)}return{setPayloadProperty:n,formatAuthenticated:function(e,t){return t||"boolean"==typeof t?Boolean(t):Boolean(e)},formatAuthors:function(e,t){e=n(e,t);return e&&Array.isArray(e)?e:e&&"string"==typeof e?e.split(","):void 0},formatEmbeddedTypes:function(e,t){return e?{media:e}:void 0},formatKeywords:function(e,t){return t||(e&&"object"===_typeof(e)?CBC.APP.SC.UTIL.formatKeywordsData(e):"string"==typeof e?e:void 0)},formatEpisodeSeasonNumber:function(e,t){var n,r="nan";return e&&t&&/^(E|S)$/i.test(t)&&(n=/^E$/i.test(t)?/^(E|e)?[0-9]+$/:/^(S|s)?[0-9]+$/,t=/^E$/i.test(t)?"e":"s",n.test(e))&&(1===(r=e.toString().toLowerCase()).length?r="".concat(t,"0").concat(r):2===r.length&&r.charAt(0)===t?r="".concat(t,"0").concat(r.charAt(1)):r.charAt(0)!==t&&(r="".concat(t).concat(r))),r},formatGeoTimezone:function(e,t){t=t||e;return t&&t.timezone?{geo:{timezone:t.timezone}}:void 0},formatTimeEngaged:function(e,t){return"number"==typeof t&&0<t?{engaged:t}:void 0},formatUserInterests:function(e,t){var n={},t=t?JSON.parse(JSON.stringify(t)):{};return t.explicit&&(n.explicit={},Array.isArray(t.explicit.yes)&&t.explicit.yes.length&&(n.explicit.yes=t.explicit.yes.map(function(e){return e.toLowerCase()})),Array.isArray(t.explicit.no))&&t.explicit.no.length&&(n.explicit.no=t.explicit.no.map(function(e){return e.toLowerCase()})),t.implicit&&(n.implicit={},Array.isArray(t.implicit.yes)&&t.implicit.yes.length&&(n.implicit.yes=t.implicit.yes.map(function(e){return e.toLowerCase()})),Array.isArray(t.implicit.no))&&t.implicit.no.length&&(n.implicit.no=t.implicit.no.map(function(e){return e.toLowerCase()})),Object.keys(n).length?n:void 0},mUP:function(e,t,n){return CBC.APP.PubSub.publish("IDENTIFY",{method:e,property:t,value:n}),t}}}(),CBC.APP.ANA.FORMATTERS.Adobe=function(){"use strict";function e(){a.channel="misc",a.subsection=[],a.pageurl="",a.searchprefix="",a.separator=":",a.index="index",a.contenttype="page",a.pagetype="",a.pagetitle="",a.scqs={},a.directory="",a.pageName=null,a.hier1=null}var r=CBC.APP.SC.UTIL,i=null,a={pageviewcount:0};e();return{checkFeatureAttributionInDTM:function(){return!!(CBC.APP.SC.DTM&&CBC.APP.SC.DTM.formatted&&CBC.APP.SC.DTM.formatted.adobe&&CBC.APP.SC.DTM.formatted.adobe.feature&&(CBC.APP.SC.DTM.formatted.adobe.feature.name||CBC.APP.SC.DTM.formatted.adobe.feature.position||CBC.APP.SC.DTM.formatted.adobe.feature.instance))&&(CBC.APP.SC.DTM.formatted.adobe.feature.name&&(i.prop22=CBC.APP.SC.DTM.formatted.adobe.feature.name,i.eVar83="D=c22"),CBC.APP.SC.DTM.formatted.adobe.feature.position&&(i.prop24=CBC.APP.SC.DTM.formatted.adobe.feature.position,i.eVar84="D=c24"),CBC.APP.SC.DTM.formatted.adobe.feature.instance&&(i.prop23=CBC.APP.SC.DTM.formatted.adobe.feature.instance,i.eVar85="D=c23"),!0)},checkEmbeddedMedia:function(){CBC.APP.SC.DTM&&CBC.APP.SC.DTM.formatted&&CBC.APP.SC.DTM.formatted.adobe&&["story","segment","blogentry"].includes(CBC.APP.SC.DTM.DATA.contenttype)&&(i.prop16=CBC.APP.SC.DTM.formatted.adobe.embedtypes)},clearVariables:function(){try{a={pageviewcount:a.pageviewcount},e(),r.console("before clearing variables",s_cbc_sitecatalyst),delete window.s_cbc_sitecatalyst.pageName,window.s_cbc_sitecatalyst.clearVars(),r.console("after clearing variables",s_cbc_sitecatalyst)}catch(e){console.log(e)}},exitSPA:function(){a.pageviewcount=0},formatSignal:function(e){var t;if((i=s_cbc_sitecatalyst).prop36=(window.self!==window.top).toString(),a.scqs=JSON.parse(JSON.stringify(CBC.APP.SC.DTM.formatted.adobe)),a.scqs.storytitle&&(a.scqs.title=a.scqs.storytitle,CBC.APP.SC.storyTitle=a.scqs.storytitle.toLowerCase().replace(/\s/g,"-")),a.pagetitle||(a.pagetitle=a.scqs.pagetitle||""),a.scqs.publishedTime&&(a.scqs.pubdate=a.scqs.publishedTime),this.setTimeVars(),this.setOsAppVars(),this.setSearchPrefix(),this.setAdHierarchy(),this.setFromMetaTags(),this.getUrl(),a.scqs.spa&&0<a.pageviewcount?this.setReferrer(a.scqs.referrer.url):this.setReferrer(document.referrer),a.scqs.referrer&&a.scqs.referrer.pillar?i.prop53=a.scqs.referrer.pillar:i.prop53="noreferrer",a.scqs.referrer&&a.scqs.referrer.department?(t=a.scqs.referrer.department,i.prop65=[t.level1,t.level2,t.level3].filter(function(e){return e}).join(":"),i.prop65="noreferrer"===i.prop65?"noreferrer":i.prop65):i.prop65="noreferrer",e.linkTrackObj){var n,r=e.linkTrackObj;for(n in r)i[n]=r[n]}return this.setWordCount(),this.setStrategicPillar(),this.setCMFAppId(),this.setUserJourney(),this.setUserTier(),this.setDateVars(),this.setSponsor(),this.setContentPartner(),this.detectAdBlocker(),this.checkCbcIdCookieExists(),this.checkHTTPSstatus(document.location.href),this.checkFeatureAttributionInDTM(),this.checkEmbeddedMedia(),this.setCBCPlusID(),this.parseStatsVars(),++a.pageviewcount,!0},getVal:function(e){return a[e]},setCampaign:function(){var e=CBC.APP.SC.UTIL.getQueryStringParameterValue("utm_source",window.location.href),t=CBC.APP.SC.UTIL.getQueryStringParameterValue("utm_medium",window.location.href),n=CBC.APP.SC.UTIL.getQueryStringParameterValue("utm_campaign",window.location.href),r=CBC.APP.SC.UTIL.getQueryStringParameterValue("utm_term",window.location.href),i=CBC.APP.SC.UTIL.getQueryStringParameterValue("utm_content",window.location.href),a=CBC.APP.SC.UTIL.getQueryStringParameterValue("cmp",window.location.href);return e||t||n||r||i?"UTM|".concat(e,"|").concat(t,"|").concat(n,"|").concat(r,"|").concat(i):a||void 0},setTimeVars:function(){var e=this.getTimeVars();void 0!==e.var9&&(i.prop9=e.var9),void 0!==e.var10&&(i.prop10=e.var10)},getTimeVars:function(){function e(e){return"number"==typeof e?("0"+e).slice(-2):null}var t={},n=new Date,r=(r=n)&&"function"==typeof r.getTimezoneOffset?-r.getTimezoneOffset()/60:null,i=n.getDay(),a=0===i||6===i?"weekend":"weekday",o="0".concat(n.getHours()).slice(-2),s=30<n.getMinutes()?"30":"00";return t.var9="".concat((n=n)&&"function"==typeof n.getHours?e(n.getHours())+e(n.getMinutes()):null,"|").concat(r),t.var10="".concat(a,"|").concat(["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][i],"|").concat(o).concat(s),t},setOsAppVars:function(){var e=this.getOsAppVars();void 0!==e.var60&&(i.prop60=e.var60),void 0!==e.var61&&(i.prop61=e.var61),void 0!==e.var62&&(i.prop62=e.var62),void 0!==e.var63&&(i.prop63=e.var63),void 0!==e.var64&&(i.prop64=e.var64)},getOsAppVars:function(){var e={};return CBC.APP.SC.DTM.formatted&&CBC.APP.SC.DTM.formatted.adobe&&CBC.APP.SC.DTM.formatted.adobe.appname?e.var60=CBC.APP.SC.DTM.formatted.adobe.appname:e.var60="cbcca-web",e.var61="osVersion",e.var62="os",e.var63="web",e.var64="3.11.0",e.var64=a.scqs.appVersion||e.var64,void 0!==window.Detectizr&&void 0!==window.Detectizr.os&&("undefined"!==window.Detectizr.os.name&&(e.var62="ott-web-app"===e.var60?window.Detectizr.os.name+"|"+e.var60:window.Detectizr.os.name),"undefined"!==window.Detectizr.os.version)&&(e.var61=window.Detectizr.os.version),e},setSearchPrefix:function(){a.searchprefix=0<window.location.port.length?"cbc.ca:".concat(window.location.port,"/"):"cbc.ca/"},setAdHierarchy:function(){a.scqs.hierarchy?i.prop65=a.scqs.hierarchy:CBC.Metadata&&CBC.Metadata.hierarchy&&(i.prop65=CBC.Metadata.hierarchy)},setFromMetaTags:function(){var e=document.getElementsByTagName("META");if("string"==typeof a.scqs.keywords)i.list1=a.scqs.keywords.replace(/, /g,",").replace(/\s/g,"-").toLowerCase();else if("object"===_typeof(a.scqs.keywords))i.list1=this.parseKeywords(a.scqs.keywords);else for(var t=0;t<e.length;++t)"keywords"===e[t].name&&(i.list1=e[t].content.replace(/, /g,",").replace(/\s/g,"-").toLowerCase());i.list2=a.scqs.authors?a.scqs.authors.replace(/, /g,",").replace(/\s/g,"-").toLowerCase():void 0,a.scqs.experiments&&a.scqs.experiments.content&&(i.list3=CBC.APP.SC.UTIL.trimDashes(a.scqs.experiments.content.trim())),a.scqs.syndicate?i.prop66=r.normalize(a.scqs.syndicate):CBC.APP.SC.syndicate?i.prop66=r.normalize(CBC.APP.SC.syndicate):i.prop66="cbcca-web"},getUrl:function(){var e,t="",t=CBC.APP.SC.url||(a.scqs.url?decodeURIComponent(a.scqs.url):window.location.href);r.isExternallyHosted()||-1!==(e=(t=-1!==(e=t.indexOf("#"))?t.substring(0,e):t).indexOf("?"))&&(t=t.substring(0,e)),a.pageurl=t},setReferrer:function(e){return void 0!==e&&""!==e&&(i.prop57=e,i.eVar57="D=c57",!0)},setWordCount:function(){CBC.APP.SC.DTM.formatted.adobe.wordcount&&["story","segment","blogentry"].includes(CBC.APP.SC.DTM.DATA.contenttype)&&(i.prop7=CBC.APP.SC.DTM.formatted.adobe.wordcount)},setStrategicPillar:function(){Object.getOwnPropertyNames(CBC.APP.SC.Pillar).length||(CBC.APP.SC.Pillar={pillar:{available:["feed","listen","watch","legacyee"],url:{default:"legacy","cbc.ca/listen":"listen","cbcmusic.ca":"listen","watch.cbc.ca":"watch","gem.cbc.ca":"watch","watch.qa.nm.cbc.ca":"watch","gem.qa.nm.cbc.ca":"watch"}}});var e=CBC.APP.SC.Pillar.pillar;if(i.prop67=e.url.default,a.scqs.pillar&&-1<e.available.indexOf(a.scqs.pillar))i.prop67=r.sanitize(a.scqs.pillar);else if(!CBC.APP.SC.QueryString&&!window.scstats&&CBC.APP.SC.DTM.DATA.pillar&&-1<e.available.indexOf(CBC.APP.SC.DTM.DATA.pillar))i.prop67=r.sanitize(CBC.APP.SC.DTM.DATA.pillar);else for(var t in e.url)if({}.hasOwnProperty.call(e.url,t)&&-1<a.pageurl.indexOf(t)){i.prop67=e.url[t],CBC.APP.SC.DTM.DATA.pillar=e.url[t],a.scqs.pillar=e.url[t];break}},setCMFAppId:function(){a.scqs.cmfAppId&&(i.prop69=a.scqs.cmfAppId)},setUserJourney:function(){var e=CBC.APP.SC.Pillar.pillar.url.default;void 0!==a.scqs.pillar&&a.scqs.pillar!==e?e=a.scqs.pillar:i.prop67!==e&&(e=i.prop67),void 0!==a.scqs.syndicate&&"cbcca-web"!==a.scqs.syndicate?e=a.scqs.syndicate:"cbcca-web"!==i.prop66&&(e=i.prop66),i.prop35="".concat(e,":").concat(a.scqs.contentarea,":").concat(a.scqs.contenttype)},setUserTier:function(){i.prop58=CBC.APP.SC.UTIL.getUserTier()},setDateVars:function(){var e=this.getDateVars();void 0!==e.var13&&(i.prop13=e.var13)},getDateVars:function(){var e,t,n={};return/^(index|bio)$/i.test(a.scqs.contenttype)||((e=new RegExp("^\\d+$")).test(CBC.APP.SC.publishedTime)?t=CBC.APP.SC.publishedTime:a.scqs.pubdate&&e.test(a.scqs.pubdate)?t=a.scqs.pubdate:void 0!==a.scqs.pubdate&&(t="Incorrect date format received: ".concat(a.scqs.pubdate)),n.var13=t),n},setSponsor:function(){a.scqs.sponsor&&a.scqs.sponsor.name&&(i.prop51=a.scqs.sponsor.name)},setContentPartner:function(){a.scqs.partner&&a.scqs.partner.name&&(i.prop52=a.scqs.partner.name)},detectAdBlocker:function(){var e=Boolean(!CBC.APP.SC.ads).toString();i.prop68=e,i.eVar68=e},checkCbcIdCookieExists:function(){r.getCookie("CBC_ID")?(r.expireCookie("CBC_ID"),i.prop73="true"):i.prop73="false"},checkHTTPSstatus:function(e){return new RegExp(/^https:\/\//).test(e)?(i.prop74="yes",!0):!(i.prop74="no")},setCBCPlusID:function(){var e=r.getCBCVisitorOrPlusCookieValue({isCbcPlus:!0});e&&(i.eVar8=e)},parseStatsVars:function(){a.scqs.contentarea?a.channel=a.scqs.contentarea:a.scqs.contentArea&&(a.channel=a.scqs.contentArea),i.channel=a.channel,a.subsection=[],a.scqs.contenttype&&(a.contenttype=a.scqs.contenttype),i.prop4=a.contenttype;for(var e=1;e<=5;++e)a.scqs["subsection".concat(e)]&&a.subsection.push(a.scqs["subsection".concat(e)]);a.scqs.contentid&&(i.prop6=a.scqs.contentid),this.setContentVars(),i.pageName=this.setPageName(),i.hier1=a.hier1,this.setSubsectionVars(),i.prop14=this.removeDomain(a.pageurl),i.eVar14=a.pageurl,i.prop15=this.getUserSegmentation(),this.registerPageView()},setContentVars:function(){var e,t,n,r;a.scqs.author&&(i.prop25=a.scqs.author),a.scqs.title&&a.scqs.pubdate&&a.scqs.contentid&&(e="",(n=(t=new Date(parseInt(a.scqs.pubdate))).getUTCDate())<10&&(n="0".concat(n)),(r=t.getUTCMonth()+1)<10&&(r="0".concat(r)),e="".concat(t.getUTCFullYear(),"/").concat(r,"/").concat(n,"/").concat(a.scqs.contentid),i.prop27="".concat(e,":").concat(a.scqs.title)),a.scqs.section&&(i.prop26=a.scqs.section,a.subsection.push(a.scqs.section)),a.scqs.sitename&&(i.prop26=a.scqs.sitename),a.scqs.postdate&&(i.prop28=a.scqs.postdate)},removeDomain:function(e){return e.replace(/https?:\/\/.*?cbc(music)?\.ca(:.*?)*\//,"")},setSubsectionVars:function(){for(var e,t=0;t<3;t++)a.subsection[t]&&(e=a.subsection.slice(0,t+1),i["prop".concat(t+1)]="".concat(a.channel,":").concat(e.join(":")))},copyPropsToEvars:function(){i.prop1&&!i.eVar1&&(i.eVar1="D=c1"),i.prop2&&!i.eVar2&&(i.eVar2="D=c2"),i.prop3&&!i.eVar3&&(i.eVar3="D=c3"),i.prop4&&!i.eVar4&&(i.eVar4="D=c4"),i.prop5&&!i.eVar5&&(i.eVar5="D=c5"),i.prop6&&!i.eVar6&&(i.eVar6="D=c6"),i.prop7&&!i.eVar7&&(i.eVar7="D=c7"),i.prop9&&!i.eVar9&&(i.eVar9="D=c9"),i.prop10&&!i.eVar10&&(i.eVar10="D=c10"),i.pageName&&!i.eVar11&&(i.eVar11="D=pageName"),i.channel&&!i.eVar12&&(i.eVar12="D=ch"),i.prop13&&!i.eVar13&&(i.eVar13="D=c13"),i.prop15&&!i.eVar15&&(i.eVar15="D=c15"),i.prop16&&!i.eVar16&&(i.eVar16="D=c16"),i.prop17&&!i.eVar17&&(i.eVar17="D=c17"),i.prop18&&!i.eVar18&&(i.eVar18="D=c18"),i.prop25&&!i.eVar25&&(i.eVar25="D=c25"),i.prop26&&!i.eVar26&&(i.eVar26="D=c26"),i.prop27&&!i.eVar27&&(i.eVar27="D=c27"),i.prop28&&!i.eVar28&&(i.eVar28="D=c28"),i.prop35&&!i.eVar35&&(i.eVar35="D=c35"),i.prop36&&!i.eVar36&&(i.eVar36="D=c36"),i.prop37&&!i.eVar37&&(i.eVar37="D=c37"),i.prop40&&!i.eVar40&&(i.eVar40="D=c40"),i.prop41&&!i.eVar41&&(i.eVar41="D=c41"),i.prop42&&!i.eVar42&&(i.eVar42="D=c42"),i.prop44&&!i.eVar44&&(i.eVar44="D=c44"),i.prop45&&!i.eVar45&&(i.eVar45="D=c45"),i.prop46&&!i.eVar46&&(i.eVar46="D=c46"),i.prop47&&!i.eVar47&&(i.eVar47="D=c47"),i.prop48&&!i.eVar48&&(i.eVar48="D=c48"),i.prop51&&!i.eVar51&&(i.eVar51="D=c51"),i.prop52&&!i.eVar52&&(i.eVar52="D=c52"),i.prop53&&!i.eVar53&&(i.eVar53="D=c53"),i.prop58&&!i.eVar58&&(i.eVar58="D=c58"),i.prop60&&!i.eVar60&&(i.eVar60="D=c60"),i.prop61&&!i.eVar61&&(i.eVar61="D=c61"),i.prop62&&!i.eVar62&&(i.eVar62="D=c62"),i.prop63&&!i.eVar63&&(i.eVar63="D=c63"),i.prop64&&!i.eVar64&&(i.eVar64="D=c64"),i.prop65&&!i.eVar65&&(i.eVar65="D=c65"),i.prop66&&!i.eVar66&&(i.eVar66="D=c66"),i.prop67&&!i.eVar67&&(i.eVar67="D=c67"),i.prop69&&!i.eVar69&&(i.eVar69="D=c69"),i.prop70&&!i.eVar70&&(i.eVar70="D=c70"),i.prop73&&!i.eVar73&&(i.eVar73="D=c73")},buildPageName:function(){var e=a.subsection.join(a.separator),t=[];(t=0<arguments.length?r.arrayFromArguments(arguments):t)[0]&&r.typecheck(t[0]).array&&0<t[0].length&&(t=t[0]),0<a.subsection.length&&t.splice(0,0,e),t.splice(0,0,a.channel);for(var n=t.length;0<=n;--n)if(t[n]&&void 0!==a.scqs.contentid&&t[n]===i.prop5&&a.scqs.contenttype){t[n]="".concat(a.scqs.contentid,"-").concat(t[n]);break}return(this.objEmpty(a.scqs)&&!a.directory?"misc:".concat(a.pageurl.replace(/:/g,"-")):t.join(a.separator)).toLowerCase().replace(/\s/g,"-")},getPageName:function(){return a.pageName},setPageName:function(){return"page"!==a.contenttype?["authorbio","bio","blogentry","episode","feature","image","link","longform","media","photogallery","recipe","riding","segment","story","stub"].includes(a.contenttype)&&a.scqs.title?this.handleStory():"videoclip"!==a.contenttype&&"audioclip"!==a.contenttype||!a.scqs.title?"error"===a.contenttype?this.handleErrorPage():"index"===a.contenttype?this.handleIndexPage():this.handleOtherContent():this.handleVideoClip():"page"===a.contenttype&&this.handleGenericPage(),a.pageName},setTitle:function(){a.scqs.title&&!i.prop5&&(a.scqs.title=a.scqs.title.replace(/\//g,"-"),i.prop5=a.scqs.title)},handleStory:function(){CBC.APP.SC.storyTitle&&(i.prop5=CBC.APP.SC.storyTitle),a.scqs.title=a.scqs.title.replace(/\//g,"-").replace(/\s/g,"-").toLowerCase(),i.prop5||(i.prop5=a.scqs.title),a.pageName=this.buildPageName(a.contenttype,a.scqs.title),i.prop11="D=pageName",a.hier1=this.getHierarchy()},handleVideoClip:function(){this.setTitle(),a.pageName=this.buildPageName(a.contenttype,a.scqs.title),a.hier1=this.getHierarchy()},handleErrorPage:function(){i.pageType="errorPage",a.pageName=this.buildPageName(),a.hier1=this.getHierarchy()},handleIndexPage:function(){a.pageName=this.buildPageName("index"),a.hier1=this.getHierarchy()},handleOtherContent:function(){a.contenttype?(a.pageName=this.buildPageName(a.contenttype),"audioclip"===a.contenttype&&this.setTitle()):a.pageName=this.buildPageName(),a.hier1=this.getHierarchy()},handleGenericPage:function(){var e=[],t=(this.objEmpty(a.scqs)&&a.directory&&(e.push(a.directory),""!==(t=this.getSubFoldersPath(a.directory)))&&e.push(t),this.getCurrentFile());"cbc"===t||"web"===t||a.scqs.filename||e.push(t),a.pageName=0<e.length?this.buildPageName(e):this.buildPageName(),a.hier1=this.getHierarchy(a.directory)},getHierarchy:function(e){var t;return 0===a.subsection.length?a.channel:(t=a.subsection.join(","),t="".concat(a.channel,",").concat(t),e&&(t+=",".concat(e)),t)},registerPageView:function(){this.copyPropsToEvars(),i.campaign||(i.campaign=CBC.APP.ANA.FORMATTERS.Adobe.setCampaign()),i.campaign=i.getValOnce(i.campaign,"s_campaign",0),i.hbx_lt="auto",i.events=i.apl(i.events,"event2",",",2),i.prop71="undefined"!=typeof Visitor?"VisitorAPI Present":"VisitorAPI Missing",CBC.APP.ANA.DISPATCHERS.Adobe.dispatch(i)},getSubFoldersPath:function(e){var t=a.pageurl,e=new RegExp(e+"\\/(.*)\\/"),t=t.match(e);return t&&2===t.length?t[1].replace("/",a.separator):""},getCurrentFile:function(){var e=a.pageurl.match(/.*\/([^?#]*)/)[1];return""!==e?e:"index.html"},objEmpty:function(e){for(var t in e)if("function"!=typeof e[t])return!1;return!0},getUserSegmentation:function(){var e=this.isLoggedIn()?"loggedin":"anonymous",t=this.isCommentor()?" | commentor":"";return"".concat(e).concat(t)},isLoggedIn:function(){return CBC.APP.SC.PageTracker.isLoggedIn()},isCommentor:function(){return CBC.APP.SC.PageTracker.isCommentor()},parseKeywords:function(e){var t,n=[];if("object"!==_typeof(e))return"";for(t in e)e[t].forEach(function(e){var t="generic"===e.type?"tag":e.type;e.name?n.push("".concat(t,":").concat(e.name)):e.path&&n.push("".concat(t,":").concat(e.path))});return n.join(",").toLowerCase().replace(/\s/g,"-")}}}(),CBC.APP.ANA.FORMATTERS.DAL=function(){"use strict";function t(e,t){return""===(n=t)||null===n||Array.isArray(n)&&!n.length||"object"===_typeof(n)&&!Object.keys(n).length?void 0:t;var n}function n(e){return JSON.parse(JSON.stringify(e,t))}var u=function(e){var t=e.datalayerSource,n=e.eventPropertySource,e=e.callBackOrDefaultValue;return CBC.APP.ANA.FORMATTERS.Common.setPayloadProperty(t,n,void 0===e?void 0:e)},l=function(e,t){return CBC.APP.ANA.FORMATTERS.Common.formatAuthors(e,t)},d=function(e,t){var n=CBC.APP.SC.UTIL.getMetadataAllowlist().metadata.allowlist,r=n.content.cms,i=Object.keys(r).filter(function(e){return r[e]}),a=n.app.pillar,n=Object.keys(a).filter(function(e){return a[e]});return t&&i.includes(t)?t:e&&i.includes(e)?e:(t=CBC.APP.SC.DTM.formatted.DAL,["index","page"].includes(t.contenttype)&&"listen"!==t.pillar?null:"feed"===t.pillar?(i=/cbc.ca\/player\/play/i).test(document.location.href)||i.test(t.url)?"mpx":"newsletter"===t.contenttype?"alan":"polopoly":"listen"===t.pillar?"collections"===t.subsection2&&"cbc-music-playlists"===t.subsection1?"scoop":"cbc-music-playlists"===t.subsection1?"neuro":null!==new Date(t.title).toJSON()?"broadcast-schedule-api":"programguide"===t.contenttype?"program-guide":"audio-db":"watch"===t.pillar?"ott-cms":"legacyee"===t.pillar?"expression-engine":["legacy","lwf"].includes(t.pillar)?"polopoly":t.pillar&&n.includes(t.pillar)?"indeterminate":[t.contentarea,t.contenttype].includes("programguide")?"program-guide":"polopoly")},p=function(e,t){return e?[e]:null},f=function(e,t){return CBC.APP.ANA.FORMATTERS.Common.formatUserInterests(e,t)},h=function(){var e,t={Android:"Android","Apple iPhone":"iPhone",Windows:"Windows",Mac:"Macintosh","Chromium Os":"CrOS",Tizen:"Tizen",Linux:"Linux"},n=navigator.userAgent.toLowerCase();for(e in t)if(n.includes(t[e].toLowerCase()))return"Mac"===e&&1<navigator.maxTouchPoints?"Apple Ipad":e;return null},_=function(e){var t,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",r=navigator.userAgent.toLowerCase(),i=r.indexOf(e.toLowerCase());return-1===i?[e,"Unknown"]:(t="Unknown",-1!==(i=r.slice(i).split(" ")[0]).indexOf("/")?t=(t=i.split("/")[1]).split(".")[0]:0<n.length&&-1!==i.indexOf(n)&&(i=r.indexOf(n)+n.length,t=r.slice(i).split(" ")[0].split(".")[0]),[e,t])},g=function(){return CBC.APP.SC.UTIL.getCBCVisitorOrPlusCookieValue({isCbcPlus:!1})},m=function(){var e=CBC.APP.SC.UTIL.getCookie("cbc-session"),e=parseInt(e,10);return isNaN(e)?parseInt(CBC.APP.ANA.VARS.sessionID):e},C=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:void 0,r=CBC.APP.SC.UTIL.getCBCVisitorOrPlusCookieValue({isCbcPlus:!0}),r={id:{cbc:CBC.APP.SC.UTIL.getCBCVisitorOrPlusCookieValue({isCbcPlus:!1})||"",cbcplus:r||"",lr:null!=CBC.APP.SC.UTIL.getCookie("lr-user-uid")?CBC.APP.SC.UTIL.getCookie("lr-user-uid"):null},tier:e&&e.user&&e.user.tier||CBC.APP.SC.UTIL.getUserTier()};return"append"===t&&(r.experiment={},"experiment.id"===n&&(r.experiment.id=e),"experiment.variant"===n)&&(r.experiment.variant=e),r},v=function(e){var t,e=n(e),e=n(e);return(t=e).content&&t.content.media&&"nan"===t.content.media.episodenumber&&"nan"===t.content.media.seasonnumber&&2===Object.keys(t.content.media).length&&(delete t.content.media,Object.keys(t.content).length||delete t.content),e},y=function(e){e=u({datalayerSource:null,eventPropertySource:e&&e.feature&&e.feature.position});return e?String(e):null};return{formatCMS:d,formatIdentify:function(e){var t=e.value,n=e.method,e=e.property;return{app:{name:CBC.APP.SC.DTM.formatted.DAL.appname,pillar:CBC.APP.SC.DTM.formatted.DAL.pillar,version:CBC.APP.versions["cbc-stats-top"]},device:{os:CBC.APP.ANA.FORMATTERS.DAL.getOSInfo(),id:{uuid:g()}},user:C(t,n,e),ts:Date.now(),event:"IDENTIFY"}},formatSignal:function(e,t){var n,r,i={};if(t=CBC.APP.SC.UTIL.sanitizeObject(JSON.parse(JSON.stringify(t))),CBC.APP.SC.DTM.formatted.DAL&&(t={dataLayer:CBC.APP.SC.DTM.formatted.DAL,eventProperties:t},n=t.dataLayer,t=t.eventProperties,r=C(t),n={app:{name:u({datalayerSource:n.appname,eventPropertySource:t&&t.app&&t.app.name}),pillar:u({datalayerSource:n.pillar,eventPropertySource:t&&t.app&&t.app.pillar,callBackOrDefaultValue:"legacy"}),version:u({datalayerSource:CBC.APP.versions["cbc-stats-top"],eventPropertySource:t&&t.app&&t.app.version})},content:{area:u({datalayerSource:n.contentarea,eventPropertySource:t&&t.content&&t.content.area,callBackOrDefaultValue:"misc"}),authors:u({datalayerSource:n.authors,eventPropertySource:t&&t.content&&t.content.authors,callBackOrDefaultValue:l}),embeddedMedia:u({datalayerSource:n.embedtypes,eventPropertySource:null,callBackOrDefaultValue:p}),id:u({datalayerSource:n.contentid||n.contentId,eventPropertySource:t&&t.content&&t.content.id,callBackOrDefaultValue:function(e,t){return t?"".concat(t):e?"".concat(e):void 0}}),keywords:u({datalayerSource:n.keywords,eventPropertySource:t&&t.content&&t.content.rawKeywords,callBackOrDefaultValue:function(e,t){e=e||t;if(e)return t=null,"string"==typeof e?t=CBC.APP.SC.UTIL.formatKeywordsString(e).tag:"object"===_typeof(e)&&1==Object.keys(e).length&&"tag"==Object.keys(e)[0]&&Array.isArray(e.tag)&&e.tag.every(function(e){return"string"==typeof e})&&(t=e.tag),t?{tags:t=t.map(function(e){return{name:e,type:"generic"}}),concepts:[]}:CBC.APP.SC.UTIL.standardizeKeywordsData(e)}}),cms:d(n.contentcms,t.content&&t.content.cms),media:{audiovideo:u({datalayerSource:null,eventPropertySource:t&&t.content&&t.content.media&&t.content.media.audiovideo}),duration:u({datalayerSource:null,eventPropertySource:t&&t.content&&t.content.media&&t.content.media.length}),episode:u({datalayerSource:null,eventPropertySource:t&&t.content&&t.content.media&&t.content.media.episodenumber}),genre:u({datalayerSource:null,eventPropertySource:t&&t.content&&t.content.media&&t.content.media.genre}),publishedtime:u({datalayerSource:null,eventPropertySource:t&&t.content&&t.content.media&&t.content.media.publishedtime}),region:u({datalayerSource:null,eventPropertySource:t&&t.content&&t.content.media&&t.content.media.region}),season:u({datalayerSource:null,eventPropertySource:t&&t.content&&t.content.media&&t.content.media.seasonnumber}),show:u({datalayerSource:null,eventPropertySource:t&&t.content&&t.content.media&&t.content.media.show}),sport:u({datalayerSource:null,eventPropertySource:t&&t.content&&t.content.media&&t.content.media.sport}),streamtype:u({datalayerSource:null,eventPropertySource:t&&t.content&&t.content.media&&t.content.media.liveondemand}),type:u({datalayerSource:null,eventPropertySource:t&&t.content&&t.content.media&&t.content.media.type})},sport:u({datalayerSource:n.sport,eventPropertySource:t&&t.content&&t.content.media&&t.content.media.sport}),subsection1:u({datalayerSource:n.subsection1,eventPropertySource:t&&t.content&&t.content.subsection1}),subsection2:u({datalayerSource:n.subsection2,eventPropertySource:t&&t.content&&t.content.subsection2}),subsection3:u({datalayerSource:n.subsection3,eventPropertySource:t&&t.content&&t.content.subsection3}),subsection4:u({datalayerSource:n.subsection4,eventPropertySource:t&&t.content&&t.content.subsection4}),title:u({datalayerSource:n.title,eventPropertySource:t&&t.content&&t.content.title,callBackOrDefaultValue:document.title}),type:u({datalayerSource:n.contenttype,eventPropertySource:t&&t.content&&t.content.type,callBackOrDefaultValue:"page"}),url:u({datalayerSource:n.url,eventPropertySource:t&&t.content&&t.content.url,callBackOrDefaultValue:document.location.href}),wordcount:u({datalayerSource:n.wordcount,eventPropertySource:t&&t.content&&t.content.wordcount}),tier:CBC.APP.SC.UTIL.convertTier(u({datalayerSource:n.contenttier,eventPropertySource:t&&t.content&&t.content.tier,callBackOrDefaultValue:"free"})),updatedTime:parseInt(u({datalayerSource:n.updatedTime,eventPropertySource:t&&t.content&&t.content.updatedTime}),10),publishedTime:parseInt(u({datalayerSource:n.publishedTime,eventPropertySource:t&&t.content&&t.content.publishedTime}),10)},department:{level1:u({datalayerSource:n.department&&n.department.level1,eventPropertySource:t&&t.department&&t.department.level1}),level2:u({datalayerSource:n.department&&n.department.level2,eventPropertySource:t&&t.department&&t.department.level2}),level3:u({datalayerSource:n.department&&n.department.level3,eventPropertySource:t&&t.department&&t.department.level3})},device:{geo:{city:u({datalayerSource:n.geo&&n.geo.city,eventPropertySource:t&&t.geo&&t.content.geo.city}),country:u({datalayerSource:n.geo&&n.geo.country,eventPropertySource:t&&t.geo&&t.content.geo.country}),timezone:u({datalayerSource:n.geo&&n.geo.timezone,eventPropertySource:t&&t.geo&&t.content.geo.timezone})},manufacturer:h()?{name:h()}:null,os:CBC.APP.ANA.FORMATTERS.DAL.getOSInfo(),id:{uuid:g()}},feature:{name:u({datalayerSource:null,eventPropertySource:t&&t.feature&&t.feature.name}),instance:u({datalayerSource:null,eventPropertySource:t&&t.feature&&t.feature.instance}),position:y(t),value:u({datalayerSource:null,eventPropertySource:t&&t.feature&&t.feature.value})},referrer:{pillar:u({datalayerSource:n.referrer&&n.referrer.pillar,eventPropertySource:t&&t.referrer&&t.referrer.pillar}),url:u({datalayerSource:n.referrer&&n.referrer.url,eventPropertySource:t&&t.referrer&&t.referrer.url}),campaign:u({datalayerSource:n.referrer&&n.referrer.campaign,eventPropertySource:t&&t.referrer&&t.referrer.campaign})},session:{ts:m()},sponsor:{name:u({datalayerSource:n.sponsor&&n.sponsor.name,eventPropertySource:t&&t.sponsor&&t.sponsor.name})},ts:Date.now(),user:{id:r.id,tier:r.tier,interests:u({dataLayerSource:null,eventPropertySource:t&&t.user&&t.user.interests,callBackOrDefaultValue:f}),reason:u({datalayerSource:null,eventPropertySource:t&&t.user&&t.user.reason,callBackOrDefaultValue:function(e,t){return t?t.toLowerCase():void 0}}),selection:u({datalayerSource:null,eventPropertySource:t&&t.user&&t.user.selection,callBackOrDefaultValue:function(e,t){return t?t.toLowerCase():void 0}}),experiment:r.experiment}},i=v(n)),"START WEB SESSION"!==e.toUpperCase()&&"LOADED"!==e.toUpperCase()||(t=CBC.APP.SC.UTIL.getQueryStringParameterValue("cmp"))&&(i.referrer||(i.referrer={}),i.referrer.campaign=t),"LOADED"===e.toUpperCase()){var a=CBC.APP.SC.UTIL.determineWebViewFeatureName(window);if(a){var o,s=_createForOfIteratorHelper(CBC.APP.ANA.VALIDATORS.Common.getFeatureNameRegex());try{for(s.s();!(o=s.n()).done;){var c=o.value;if(RegExp(c).test(a)){i.feature||(i.feature={}),i.feature.name=a;break}}}catch(e){s.e(e)}finally{s.f()}}}if("READ"===e.toUpperCase()){if("index"===i.content.type)return CBC.APP.SC.UTIL.debug("READ validation failed, content = index"),null;"comments"===i.content.type&&(i.content.cms||(i.content.cms="polopoly"),i.referrer.department&&delete i.referrer.department,i.referrer.pillar)&&delete i.referrer.pillar,["story","segment","blogentry"].includes(window.CBC.APP.SC.DTM.DATA.contenttype)||i.content&&delete i.content.wordcount}else if("LOADED"===e.toUpperCase())["story","segment","blogentry"].includes(window.CBC.APP.SC.DTM.formatted.DAL.contenttype)||i.content&&(delete i.content.wordcount,delete i.content.embedded);else if("PLAYED"===e.toUpperCase()&&!CBC.APP.ANA.VALIDATORS.Common.validatePlayedContentType(i))return CBC.APP.SC.UTIL.debug("DAL payload failed PLAYED validation: "+JSON.stringify(i)),null;return"LOADED"!==e.toUpperCase()&&"READ"!==e.toUpperCase()&&(i.content&&delete i.content.wordcount,"LOADED"!==e.toUpperCase())&&i.content&&delete i.content.embedded,["LOADED","READ","STREAMED","WATCHED","LISTENED"].includes(e.toUpperCase())||(i.sponsor&&delete i.sponsor,i.content&&i.content.partner&&delete i.content.partner),i.user&&i.user.reason&&(r=CBC.APP.SC.UTIL.getMetadataAllowlist().metadata.allowlist,"SUBSCRIBED"!==e.toUpperCase()&&"UNSUBSCRIBED"!==e.toUpperCase()||"SUBSCRIBED"===e.toUpperCase()&&!0!==r.user.reason.SUBSCRIBED[i.user.reason])&&delete i.user.reason,(i=CBC.APP.SC.UTIL.removeGemID(i)).event=e.toUpperCase(),i.isWeb=!0,i},getOSInfo:function(){var e,t,n=navigator.userAgent.toLowerCase();if(/mobile|iphone|ipad|android/i.test(n)){var i=navigator.userAgent.toLowerCase(),n=-1<i.indexOf("iphone")||-1<i.indexOf("ipad")?"ios":"android",r=function(e){var t,n=_createForOfIteratorHelper("ios"===e?[/crios/,/fxios/,/safari/]:[/samsungbrowser/,/opr/,/edg/,/firefox/,/chrome/]);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.test(i))return r.toString().slice(1,-1)}}catch(e){n.e(e)}finally{n.f()}return"Unknown"}(n),a=r,o="Unknown";if("Unknown"!==r)if("ios"==n)switch(r){case"crios":var s=_slicedToArray(_("Chrome"),2),a=s[0],o=s[1];break;case"fxios":s=_slicedToArray(_("FxiOS"),2);a=s[0],o=s[1],a="Firefox";break;case"safari":s=_slicedToArray(_("Safari","version/"),2);a=s[0],o=s[1]}else switch(r){case"samsungbrowser":var c=_slicedToArray(_("SamsungBrowser"),2);a=c[0],o=c[1];break;case"opr":c=_slicedToArray(_("opr"),2);a=c[0],o=c[1],a="Opera";break;case"edg":c=_slicedToArray(_("Edg"),2);a=c[0],o=c[1],a="Edge";break;case"firefox":c=_slicedToArray(_("Firefox"),2);a=c[0],o=c[1];break;case"chrome":c=_slicedToArray(_("Chrome"),2);a=c[0],o=c[1]}return{name:a="Mobile "+a,version:o}}return n=navigator.userAgent.toLowerCase(),t=r="Unknown",-1!==n.indexOf("chrome")?(r=(e=_slicedToArray(_("Chrome"),2))[0],t=e[1]):-1!==n.indexOf("firefox")?(r=(e=_slicedToArray(_("Firefox"),2))[0],t=e[1]):-1!==n.indexOf("safari")&&(r="Safari",-1!==(e=n.indexOf("version")))&&(n=n.slice(e).split(" ")[0]).indexOf("/")&&(t=n.split("/")[1].split(".")[0]),{name:r,version:t}},getDeviceType:h}}(),CBC.APP.ANA.FORMATTERS.Comscore=function(){"use strict";return{c3mapper:function(e){switch(CBC.APP.SC.UTIL.cleanString(e)){case"arts":return"CBCArts";case"comedy":return"CBCComedy";case"kids":return"CBCKids";case"life":return"CBCLife";case"listen":return"CBCListen";case"music":return"CBCMusic";case"news":return"CBCNews";case"radio":return"CBCRADIO";case"sports":return"CBCSPORTS";default:return"CBC"}}}}(),CBC.APP.ANA.FORMATTERS.MirRoar=function(){"use strict";function r(e,t){return CBC.APP.ANA.FORMATTERS.Common.setPayloadProperty(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:void 0)}function n(e,t){return CBC.APP.ANA.FORMATTERS.Common.formatEpisodeSeasonNumber(e,t)}function i(e,t){return CBC.APP.ANA.FORMATTERS.Common.formatAuthenticated(e,t)}function a(e,t){return CBC.APP.ANA.FORMATTERS.Common.formatAuthors(e,t)}function o(e,t){return CBC.APP.ANA.FORMATTERS.Common.formatEmbeddedTypes(e,t)}function s(e,t){return CBC.APP.ANA.FORMATTERS.Common.formatKeywords(e,t)}function c(e,t){return n(t,"E")}function u(e,t){return n(t,"S")}function l(e,t){return CBC.APP.ANA.FORMATTERS.Common.formatGeoTimezone(e,t)}function d(e,t){return CBC.APP.ANA.FORMATTERS.Common.formatTimeEngaged(e,t)}function p(e,t){return CBC.APP.ANA.FORMATTERS.Common.formatUserInterests(e,t)}function f(e){var t={},n={};return"object"!==_typeof(e.dl)&&"object"!==_typeof(e.ep)?{}:((t="object"===_typeof(e.dl)?JSON.parse(JSON.stringify(e.dl)):t).department=t.department||{},t.geo=t.geo||{},t.partner=t.partner||{},t.referrer=t.referrer||{},t.referrer.department=t.referrer.department||{},t.sponsor=t.sponsor||{},(n="object"===_typeof(e.ep)?JSON.parse(JSON.stringify(e.ep)):n).app=n.app||{},n.content=n.content||{},n.content.media=n.content.media||{},n.content.partner=n.content.partner||{},n.department=n.department||{},n.feature=n.feature||{},n.referrer=n.referrer||{},n.referrer.department=n.referrer.department||{},n.sponsor=n.sponsor||{},n.time=n.time||{},n.user=n.user||{},e={user_id:null!=g()||null!=m()?(g()?g:m)():null,event_properties:{app:{name:r(t.appname,n.app.name),pillar:r(t.pillar,n.app.pillar,"legacy"),version:r(null,n.app.version)},content:{area:r(t.contentarea,n.content.area,"misc"),cms:r(t.contentcms,n.content.cms),department:{level1:r(t.department.level1,n.department.level1),level2:r(t.department.level2,n.department.level2),level3:r(t.department.level3,n.department.level3)},id:r(t.contentid,n.content.id),embedded:r(t.embedtypes,null,o),keywords:r(t.keywords,n.content.keywords,s),partner:{name:r(t.partner.name,n.content.partner.name)},authenticated:r(t.authenticated,n.content.authenticated,i),authors:r(t.authors,n.content.authors,a),publishedtime:r(t.publishedTime,n.content.publishedtime),subsection1:r(t.subsection1,n.content.subsection1),subsection2:r(t.subsection2,n.content.subsection2),subsection3:r(t.subsection3,n.content.subsection3),subsection4:r(t.subsection4,n.content.subsection4),tier:CBC.APP.SC.UTIL.convertTier(r(t.contenttier,n.content.tier,"free")),title:r(t.title,n.content.title,document.title),type:r(t.contenttype,n.content.type,"page"),updatedtime:r(t.updatedTime,n.content.updatedtime),url:r(t.url,n.content.url,document.location.href),wordcount:r(t.wordcount,n.content.wordcount),media:{audiovideo:r(null,n.content.media.audiovideo),episodenumber:r(null,n.content.media.episodenumber,c),genre:r(null,n.content.media.genre),length:r(null,n.content.media.length),liveondemand:r(null,n.content.media.liveondemand),publishedtime:r(null,n.content.media.publishedtime),region:r(null,n.content.media.region),seasonnumber:r(null,n.content.media.seasonnumber,u),show:r(null,n.content.media.show),sport:r(null,n.content.media.sport),type:r(null,n.content.media.type)}},feature:{instance:r(null,n.feature.instance),name:r(null,n.feature.name),position:r(null,n.feature.position),value:r(null,n.feature.value)},referrer:{campaign:r(t.referrer.campaign,n.referrer.campaign),department:{level1:r(t.referrer.department.level1,n.referrer.department.level1),level2:r(t.referrer.department.level2,n.referrer.department.level2),level3:r(t.referrer.department.level3,n.referrer.department.level3)},pillar:r(t.referrer.pillar,n.referrer.pillar),source:r(null,n.referrer.source),url:r(t.referrer.url,n.referrer.url)},sponsor:{name:r(t.sponsor.name,n.sponsor.name)}},custom:r(null,n.custom),device:r(t.geo,n.geo,l),country:r(t.geo,n.geo,function(){return CBC.APP.ANA.FORMATTERS.MirRoar.formatLocations(t.geo,n.geo,"country")}),region:r(t.geo,n.geo,function(){return CBC.APP.ANA.FORMATTERS.MirRoar.formatLocations(t.geo,n.geo,"region")}),city:r(t.geo,n.geo,function(){return CBC.APP.ANA.FORMATTERS.MirRoar.formatLocations(t.geo,n.geo,"city")}),timeengaged:r(null,n.time.engaged,d),time:CBC.APP.ANA.FORMATTERS.MirRoar.getTimeStamp(),session_id:r(CBC.APP.ANA.VARS.sessionID,CBC.APP.SC.UTIL.getCookie("cbc-session")),user_properties:{user:{interests:r(null,n.user.interests,p),id:{cbcvisitor:m(),cbcplus:g()},reason:r(null,n.user.reason,function(e,t){return t?t.toLowerCase():void 0}),selection:r(null,n.user.selection,function(e,t){return t?t.toLowerCase():void 0}),subscriptions:void 0,tier:CBC.APP.SC.UTIL.convertTier(n.user&&n.user.tier||CBC.APP.SC.UTIL.getUserTier())}}},e=JSON.parse(JSON.stringify(e,function(e,t){return""===t||null===t||Array.isArray(t)&&!t.length||"object"===_typeof(t)&&!Object.keys(t).length?void 0:t})),(e=JSON.parse(JSON.stringify(e,function(e,t){return""===t||null===t||Array.isArray(t)&&!t.length||"object"===_typeof(t)&&!Object.keys(t).length?void 0:t}))).event_properties.content&&e.event_properties.content.media&&"nan"===e.event_properties.content.media.episodenumber&&"nan"===e.event_properties.content.media.seasonnumber&&2===Object.keys(e.event_properties.content.media).length&&(delete e.event_properties.content.media,Object.keys(e.event_properties.content).length||delete e.event_properties.content),e)}function h(e){e.event_properties&&e.event_properties.content&&e.event_properties.content.wordcount&&delete e.event_properties.content.wordcount}function _(e){e.event_properties&&e.event_properties.content&&e.event_properties.content.embedded&&delete e.event_properties.content.embedded}var g=function(){var e=CBC.APP.SC.UTIL.getCBCVisitorOrPlusCookieValue({isCbcPlus:!0});return e||null},m=function(){var e=CBC.APP.SC.UTIL.getCBCVisitorOrPlusCookieValue({isCbcPlus:!1});return e||null};return{setPayloadProperty:r,formatAuthenticated:i,formatAuthors:a,formatEmbeddedTypes:o,formatKeywords:s,formatEpisodeNumber:c,formatSeasonNumber:u,formatGeoTimezone:l,formatLocations:function(e,t,n){t=t&&t[n]?t:e;return t&&t[n]?t[n]:void 0},formatTimeEngaged:d,formatUserInterests:p,formatMirRoar:f,formatSignal:function(e,t){t=CBC.APP.SC.UTIL.sanitizeObject(JSON.parse(JSON.stringify(t)));if("string"!=typeof e)return CBC.APP.SC.UTIL.debug("EventTracker - Warning: did not send an event name: "+e),!1;if("object"!==_typeof(t))return CBC.APP.SC.UTIL.debug("EventTracker - Warning: event properties must be sent as an object: "+t),!1;var e=e.toUpperCase(),n={},n=Object.keys(t).length<1?(CBC.APP.SC.UTIL.debug("set up event properties from DTM object if mirEventProperties object is empty"),f({dl:CBC.APP.SC.DTM.formatted.MirRoar})):(CBC.APP.SC.UTIL.debug("merge the 2 objects ep and dl together"),f({ep:t,dl:CBC.APP.SC.DTM.formatted.MirRoar}));if(["FOLLOWED","UNFOLLOWED"].includes(e)){var t=CBC.APP.SC.metadataAllowlist.metadata.allowlist.content.cms,r=n.user_properties&&n.user_properties.user&&n.user_properties.user.interests&&n.user_properties.user.interests.explicit,i="FOLLOWED"===e?"yes":"no";if(!(n.event_properties&&n.event_properties.content&&n.event_properties.content.cms&&t[n.event_properties.content.cms]))return CBC.APP.SC.UTIL.debug("EventTracker - Warning: "+e+" requires cms field to be set and present on metadata-allowlist"),!1;if(!r)return CBC.APP.SC.UTIL.debug("EventTracker - Warning: "+e+" requires explicit interests to be provided"),!1;t=n.user_properties.user.interests.explicit[i];if(!(t&&Array.isArray(t)&&0<t.length))return CBC.APP.SC.UTIL.debug("EventTracker - Warning: "+e+" explicit interests "+i+" array is required and must not empty"),!1}"START WEB SESSION"!==e&&"LOADED"!==e||(r=window.CBC.APP.SC.UTIL.getQueryStringParameterValue("cmp"))&&(n.referrer||(n.referrer={}),n.referrer.campaign=r);t=window.document.URL;r="true"===window.CBC.APP.SC.UTIL.getQueryStringParameterValue("webview",t)?(i=window.CBC.APP.SC.UTIL.getQueryStringParameterValue("appname",t),window.CBC.APP.SC.UTIL.getMetadataAllowlist().metadata.allowlist.webviewapps[i]?(i=window.CBC.APP.SC.UTIL.getQueryStringParameterValue("udid",t))?(CBC.APP.SC.UTIL.debug("checkWebView: setting deviceId"),i):(CBC.APP.SC.UTIL.debug("checkWebView: no deviceId passed"),!1):(CBC.APP.SC.UTIL.debug("checkWebView: not a allowlisted app"),!1)):(CBC.APP.SC.UTIL.debug("checkWebView: not a webview"),!1);if(r&&(n.device_id=r),"LOADED"===(n.event_type=e)){var a=CBC.APP.SC.UTIL.determineWebViewFeatureName(window);if(a){var o,s=_createForOfIteratorHelper(CBC.APP.ANA.VALIDATORS.Common.getFeatureNameRegex());try{for(s.s();!(o=s.n()).done;){var c=o.value;if(RegExp(c).test(a)){n.event_properties.feature||(n.event_properties.feature={}),n.event_properties.feature.name=a;break}}}catch(e){s.e(e)}finally{s.f()}}}if(Object.keys(n).length<1)return CBC.APP.SC.UTIL.debug("EventTracker - Warning: no event properties were sent"),!1;if("READ"===e){if("index"===n.event_properties.content.type)return CBC.APP.SC.UTIL.debug("READ validation failed, content = index"),!1;"comments"===n.event_properties.content.type&&(n.event_properties.content.cms||(n.event_properties.content.cms="polopoly"),n.event_properties.referrer.department&&delete n.event_properties.referrer.department,n.event_properties.referrer.pillar)&&delete n.event_properties.referrer.pillar,["story","segment","blogentry"].includes(CBC.APP.SC.DTM.DATA.contenttype)||h(n)}else if("LOADED"===e)["story","segment","blogentry"].includes(CBC.APP.SC.DTM.DATA.contenttype)||(h(n),_(n));else if("PLAYED"===e&&!CBC.APP.ANA.VALIDATORS.Common.validatePlayedContentType(n))return CBC.APP.SC.UTIL.debug("mir payload failed PLAYED validation: "+JSON.stringify(n)),!1;return"LOADED"!==e&&"READ"!==e&&h(n),"LOADED"!==e&&_(n),["LOADED","READ","STREAMED","WATCHED"].includes(e)||(n.event_properties.sponsor&&delete n.event_properties.sponsor,n.event_properties.content&&n.event_properties.content.partner&&delete n.event_properties.content.partner),n.event_properties.sponsor&&n.event_properties.sponsor.id&&delete n.event_properties.sponsor.id,n.event_properties.content.partner&&n.event_properties.content.partner.id&&delete n.event_properties.content.partner.id,n.user&&n.user.reason&&(t=CBC.APP.SC.UTIL.getMetadataAllowlist().metadata.allowlist,"SUBSCRIBED"!==e&&"UNSUBSCRIBED"!==e||"SUBSCRIBED"===e&&!0!==t.user.reason.SUBSCRIBED[n.user.reason])&&delete n.user.reason,["STREAMED","WATCHED"].includes(e)&&(n.event_properties.content&&n.event_properties.content.media&&("nan"==n.event_properties.content.media.episodenumber||"nan"==n.event_properties.content.media.seasonnumber)&&(n.event_properties.content.media.episodenumber&&delete n.event_properties.content.media.episodenumber,n.event_properties.content.media.seasonnumber)&&delete n.event_properties.content.media.seasonnumber,n.event_properties.content&&n.event_properties.content.media&&"nan"==n.event_properties.content.media.publishedTime&&delete n.event_properties.content.media.publishedTime,"watch"==n.event_properties.app.pillar)&&"ott-web-app"==n.event_properties.app.name&&(n.event_properties.content.cms=n.event_properties.content.cms||"ibm-cloud-video"),CBC.APP.ANA.DISPATCHERS.MirRoar.dispatch(n),n},getCBCPlusID:g,getCBCVisitorID:m,getTimeStamp:function(){return(new Date).getTime()}}}(),CBC.APP.ANA.FORMATTERS.HarmonizedAdobe=function(){"use strict";function n(){delete window.s_cbc_sitecatalyst.pageName,window.s_cbc_sitecatalyst.clearVars()}function r(e){switch(e){case"CAST-DEVICE CONNECTED":s_cbc_sitecatalyst.linkTrackEvents="event1";break;case"REGISTERED":s_cbc_sitecatalyst.linkTrackEvents="event2";break;case"SIGNED IN":s_cbc_sitecatalyst.linkTrackEvents="event3";break;case"SIGNED OUT":s_cbc_sitecatalyst.linkTrackEvents="event4";break;case"SUBSCRIBED":s_cbc_sitecatalyst.linkTrackEvents="event5";break;case"UNSUBSCRIBED":s_cbc_sitecatalyst.linkTrackEvents="event6";break;default:s_cbc_sitecatalyst.linkTrackEvents="None"}s_cbc_sitecatalyst.events=s_cbc_sitecatalyst.linkTrackEvents}function i(e){for(var n=["events"],t=JSON.parse('{\n    "appname": ["prop1", "eVar1"],\n    "appVersion": ["prop2","eVar2"],\n    "browser.ad_blocking": ["prop3", "eVar3"],\n    "browser.screenwidth": ["prop5", "eVar5"],\n    "browser.screenheight": ["prop6", "eVar6"],\n    "browser.type": ["prop7", "eVar7"],\n    "browser.version": ["prop9", "eVar9"],\n    "content.channel": ["prop10", "eVar10"],\n    "content.family_friendly": ["eVar12"],\n    "content.format": ["eVar13"],\n    "content.genre.level1": ["eVar14"],\n    "content.genre.level2": ["eVar15"],\n    "content.network": ["prop22", "eVar22"],\n    "content.principal_audience": ["prop28", "eVar28"],\n    "content.related_ids": ["eVar29"],\n    "content.string": ["prop30", "eVar30"],\n    "content.subject_theme.level1": ["prop31", "eVar31"],\n    "content.subject_theme.level2": ["prop32", "eVar32"],\n    "content.subject_theme.level3": ["prop33", "eVar33"],\n    "contentcms": ["prop11", "eVar11"],\n    "contentid": ["eVar16"],\n    "contenttier": ["eVar35"],\n    "contenttype": ["prop34", "eVar34"],\n    "department.level1": ["prop36", "eVar36"],\n    "department.level2": ["prop37", "eVar37"],\n    "department.level3": ["prop38", "eVar38"],\n    "department.level4": ["prop39", "eVar39"],\n    "department.level5": ["prop40", "eVar40"],\n    "device.id": [],\n    "device.manufacturer.name": ["prop46", "eVar46"],\n    "device.manufacturer.version": ["prop47", "eVar47"],\n    "device.offline": ["prop48", "eVar48"],\n    "device.os.name": ["prop49", "eVar49"],\n    "device.os.nametype": ["prop50", "eVar50"],\n    "device.type": ["prop52", "eVar52"],\n    "feature.additionalinfo": [],\n    "feature.instance": ["prop55", "eVar55"],\n    "feature.itemname": ["prop53", "eVar53"],\n    "feature.name": ["prop54", "eVar54"],\n    "feature.position": ["prop56", "eVar56"],\n    "feature.projectname": [],\n    "feature.tagmanager.name": ["prop57", "eVar57"],\n    "feature.value": ["prop58", "eVar58"],\n    "geo.city": ["prop42", "eVar42"],\n    "geo.country": ["prop43", "eVar43"],\n    "geo.region": ["prop44", "eVar44"],\n    "geo.timezone": ["prop45", "eVar45"],\n    "media.brand": ["prop17", "eVar17"],\n    "media.episode": ["eVar18"],\n    "media.media_title": ["eVar19"],\n    "media.season": ["eVar20"],\n    "osVersion": ["prop51", "eVar51"],\n    "other.ab_test.version": ["prop60", "eVar60"],\n    "other.analytics.version": ["prop74", "eVar74"],\n    "page.name": ["prop62", "eVar62"],\n    "push.device.id": ["eVar64"],\n    "referrer.id": ["prop65", "eVar65"],\n    "referrer.name": ["prop66", "eVar66"],\n    "referrer.type": ["prop67", "eVar67"],\n    "sponsor.name": ["prop68", "eVar68"],\n    "structure.server.domain": ["prop4", "eVar4"],\n    "timestamp.clientside": ["prop69", "eVar69"],\n    "timestamp.serverside": [],\n    "title": ["prop26", "eVar26"],\n    "url": ["prop8", "eVar8"],\n    "user.id": ["eVar70"],\n    "user.plan.ids": ["prop71", "eVar71"],\n    "user.subscription.ids": ["eVar72"],\n    "user.tier.ids": ["prop73", "eVar73"],\n    "user.tracking.code": []\n}\n'),r=Object.keys(t),i=Object.values(t),a=0;a<r.length;a++)!function(){var t=CBCRC.ANA.DATALAYER.getJSONValue(e,r[a]);void 0!==t&&(Array.isArray(t)&&(t=t.toString()),i[a].forEach(function(e){n.push(e),s_cbc_sitecatalyst[e]=t}))}();return n}function a(e){return CBC.APP.SC.UTIL.deepMergeObjs(CBC.APP.SC.DTM.formatted.harmonizedAdobe,e)}function o(e){s_cbc_sitecatalyst.linkTrackVars=e.toString()}return{formatPageLoad:function(){n(),i(CBC.APP.SC.DTM.formatted.harmonizedAdobe),CBC.APP.ANA.DISPATCHERS.HarmonizedAdobe.trackPageLoad()},formatMediaSignal:function(e,t){function i(n,r){Object.entries(n).forEach(function(e){var e=_slicedToArray(e,2),t=e[0],e=e[1];t.includes("keyword")||(r.push(t),["boolean","number","string"].includes(_typeof(e))||Array.isArray(e)?"string"!=typeof e&&!Array.isArray(e)||(n[t]=window.CBCRC.ANA.DATALAYER.sanitizeDataElement(r.join("."),e)):i(n[t],r),r.pop())})}var n=window.CBC.APP.SC.UTIL.checkPropertyExistence,r=JSON.parse(JSON.stringify(t)),a=Object.getOwnPropertyNames(r.media_object)[0],o=window.CBCRC.ANA.MEDIA.getActivePlayerList(),s=(!{}.hasOwnProperty.call(o,a)||i(r.media_object[a],[]),void 0),c=r.media_object[a],t=t.media_object[a];"mediaAdBreakStarted"===e?s=[{name:c.player.mediaAdBreak.name,position:Number(c.player.mediaAdBreak.podIndex),playhead:Number(c.player.playhead)}]:"mediaChapterStarted"===e?s=[{length:Number(c.cms.content.media.chapter_length),name:c.cms.content.media.chapter_name,position:Number(c.cms.content.media.chapter_number),playhead:Number(c.player.playhead),startTime:Number(c.cms.content.media.chapter_start)}]:"mediaSessionStarted"===e&&"on-demand"===(s=[{ovp:c.cms.content.cms,playerName:n(c,"player.name")||"cbc-default-media-player",vhbid:o[a]},{streamType:n(c,"cms.content.media.liveondemand")||"vod",length:Number(n(c,"cms.content.media.length"))||-1,playhead:Number(c.player.playhead),cbcContextVideo:{airdate:n(c,"cms.content.published.date"),appversion:n(c,"app.version")||"missing",audiovideo:n(c,"cms.content.media.stream_type")||"video",contentarea:n(c,"cms.content.area")||"missing",contenttier:CBC.APP.SC.UTIL.convertTier(n(c,"cms.content.tier")),department:{level1:n(c,"cms.department.level1"),level2:n(c,"cms.department.level2"),level3:n(c,"cms.department.level3")},episodenumber:n(c,"cms.content.media.episode"),feature:{name:n(c,"feature.name"),instance:n(c,"feature.instance"),position:n(c,"feature.position"),value:n(c,"feature.value")},genre:n(c,"cms.content.genre.level1"),is_full_episode:n(c,"cms.content.media.is_full_episode")||!1,keywords:n(c,"cms.content.keywords",{allowObjects:!0}),producer_name:n(c,"cms.content.producer.name"),program_id_on_air:n(c,"cms.content.media.programIdOnAir"),region:n(c,"cms.content.media.region"),seasonnumber:n(c,"cms.content.media.season"),show:n(t,"cms.content.media.media_title"),source:n(c,"cms.content.cms"),sponsorname:n(c,"sponsor.name"),station_code:n(c,"cms.content.station_code")||"5192",streamtitle:n(c,"cms.content.title")||"missing",totalchapters:1,type:n(c,"cms.content.type"),uid:c.cms.content.id,usertier:window.CBC.APP.SC.UTIL.getUserTier()||"free"},pagevars:{prop60:c.app.name,prop63:"web",prop64:c.app.version},playerContextVideo:{liveondemand:n(c,"cms.content.media.liveondemand")||"on-demand",pdkplayername:n(c,"player.name")||"cbc-default-media-player"}}])[1].streamType&&(s[1].streamType="vod"),s=s&&window.CBC.APP.SC.UTIL.dropInvalidObjectProperties(s),window.CBC.APP.ANA.DISPATCHERS.HarmonizedAdobe.trackMediaSignal(e,r,s)},formatSignal:function(e,t){n(),r(e);e=function(e){switch(e){case"CAST-DEVICE CONNECTED":return"castDeviceConnected";case"REGISTERED":return"registered";case"SIGNED IN":return"userSignedIn";case"SIGNED OUT":return"userSignedOut";case"SUBSCRIBED":return"userSubscribed";case"UNSUBSCRIBED":return"userUnsubscribed";default:return e}}(e);o(i(a(t))),CBC.APP.ANA.DISPATCHERS.HarmonizedAdobe.trackEvent(e)},mergeData:a,setLinkTrackEvents:r,setLinkTrackVars:o,setPropsAndEvars:i}}(),CBC.APP.ANA.FORMATTERS.ESS=function(){"use strict";function r(e){return/^\d\.\d+$/.test(e)}function s(e){return 0===Object.keys(e).length&&e.constructor===Object}function c(e,t,n){var r=CBC.APP.SC.UTIL.getCBCVisitorOrPlusCookieValue({isCbcPlus:!0}),i=CBC.APP.SC.UTIL.getCBCVisitorOrPlusCookieValue({isCbcPlus:!1}),a={};return a.subject={type:o.V0.USER,id:r||i},!(!a.subject.id||(a.predicate={type:o.V0.PREDICATE_TYPE[e],expId:n,end:(new Date).toISOString()},r=h(e,t),a.object={type:r,id:t.content&&t.content.id||""},!JSON.stringify(a))||"{}"===JSON.stringify(a))&&a}function u(e,t){var n=CBC.APP.SC.UTIL.getCBCVisitorOrPlusCookieValue({isCbcPlus:!0}),r=CBC.APP.SC.UTIL.getCBCVisitorOrPlusCookieValue({isCbcPlus:!1}),i={};if(i.type=o.V1.ESS_ENGAGES,i.user={type:o.V1.USER_TYPE,id:n||r},!i.user.id)return!1;if(t.content&&t.content.cms&&t.content.id||"watch"!==CBC.APP.SC.DTM.formatted.raw.pillar||"ott-web-app"!==CBC.APP.SC.DTM.formatted.raw.appname||!CBC.APP.SC.DTM.formatted.raw.contentid||(t.content={},t.content.cms="ibm-cloud-video",t.content.id=CBC.APP.SC.DTM.formatted.raw.contentid),!t.content||!t.content.cms||!t.content.id)return!1;if(i.entity={},t.content&&t.content.cms){var a=h(e,t);switch(t.content.cms){case"audio-db":case"audioid":i.entity.type=o.V1.ENTITY_TYPE.AUDIO_DB_CLIP;break;case"ibm-cloud-video":i.entity.type=o.V1.ENTITY_TYPE.IBM_VIDEO;break;case"ott-cms":i.entity.type=o.V1.ENTITY_TYPE.OTT_VIDEO;break;default:i.entity.type=a}}return i.entity.type===o.V0.MPX_VIDEO&&(i.entity.type=o.V1.ENTITY_TYPE.MPX_VIDEO),i.entity.id=t.content.id.toString(),i[[f.WATCHED,f.LISTENED].includes(e)?"end":"start"]={type:"IetfIsoDate",id:(new Date).toISOString().replace(/z$/i,"+00:00")},i.percent=e===f.STREAMED?0:.75,i.host={type:o.V1.HOST_TYPE,name:CBC.APP.SC.DTM.formatted.raw.appname},1<=Object.keys(d).length&&[f.WATCHED,f.LISTENED].includes(e)&&(i.id=d[t.content.id],delete d[t.content.id]),!(!JSON.stringify(i)||"{}"===JSON.stringify(i))&&[i]}function l(e){var t={},n=CBC.APP.ANA.VALIDATORS.Common.validateFromAllowlist;if(t.type=o.V1.ESS_ENGAGES,t.user=i(o.V1.USER_TYPE),!t.user.id)return!1;t.entity=a(o.V1.ARTICLE,CBC.APP.SC.DTM.formatted.googlecloud.content.id),t.start=a("IetfIsoDate",(new Date).toISOString().replace(/z$/i,"+00:00")),t.referrer={},CBC.APP.SC.DTM.formatted.googlecloud.referrer&&(t.referrer.url=CBC.APP.SC.DTM.formatted.googlecloud.referrer);var e=e.feature,r={};return e&&(e.name&&n("feature.name",e.name)&&(r.name=e.name),e.instance&&n("feature.instance",e.instance)&&(r.instance=e.instance),e.position&&n("feature.position",e.position)&&(r.position=parseInt(e.position)),e.value)&&n("feature.value",e.value)&&(r.value=e.value),0<Object.keys(r).length&&(t.referrer.feature=r,t.referrer.feature.type=o.V1.REFERRER.TYPE.WEB_COMPONENT),0<Object.keys(t.referrer).length?t.referrer.type=o.V1.REFERRER.TYPE.WEB_REFERRER:delete t.referrer,t.percent=0,[t]}var d={},p={ALL:"E0406C",VIDEOS:"BF73E4",NEWS:"A67DB5"},o={V0:{ARTICLE:"PolopolyArticle",AGGREGATE_API_VIDEO:"AggregateApiVideo",MPX_VIDEO:"MPXVideo",USER:"User",PREDICATE_TYPE:{READ:"Read",STREAMED:"Stream",WATCHED:"Watch"}},V1:{ESS_ENGAGES:"EssEngages",USER_TYPE:"UieUser",ENTITY_TYPE:{AUDIO_DB_CLIP:"AudioDbClip",IBM_VIDEO:"IbmVideo",OTT_VIDEO:"OttVideo",MPX_VIDEO:"MpxVideo"},HOST_TYPE:"GenericSoftware",ARTICLE:"PolopolyArticle",REFERRER:{TYPE:{WEB_REFERRER:"WebReferrer",WEB_COMPONENT:"WebComponent"}}}},f={LISTENED:"LISTENED",LOADED:"LOADED",READ:"READ",STREAMED:"STREAMED",WATCHED:"WATCHED"},h=function(e,t){var n;return e.toUpperCase()===f.READ?o.V0.ARTICLE:(e=o.V0.AGGREGATE_API_VIDEO,n=t.content&&t.content.id||"",t.content&&t.content.cms?(t=(t=t.content.cms)&&"mediaid"!==t.toLowerCase()&&"mpx"!==t.toLowerCase()&&0<n.length)&&!r(n)||!t&&0<n.length?o.V0.MPX_VIDEO:e:"")},i=function(e){var t=CBC.APP.SC.UTIL.getCBCVisitorOrPlusCookieValue({isCbcPlus:!0}),n=CBC.APP.SC.UTIL.getCBCVisitorOrPlusCookieValue({isCbcPlus:!1});return a(e,t||n)},a=function(e,t){return{type:e,id:t}};return{formatSignal:function(e,t){var n;if(null==e)return!1;var r={},i={},a={};switch(e=e.toUpperCase()){case f.READ:i=c(e,t,p.ALL);break;case f.STREAMED:case f.WATCHED:if("video"!==(null==t||null==(n=t.content)||null==(n=n.media)?void 0:n.audiovideo)||"on-demand"!==(null==t||null==(n=t.content)||null==(n=n.media)?void 0:n.liveondemand))return!1;r=u(e,t),i=c(e,t,p.VIDEOS),t.content&&t.content.area&&"news"===t.content.area.toLowerCase()&&(a=c(e,t,p.NEWS));break;case f.LISTENED:r=u(e,t);break;case f.LOADED:r=l(t);break;default:return}var o=e===f.STREAMED&&t.content&&t.content.id?function(e){Array.isArray(e)&&1===e.length&&(d[t.content.id]=e[0].id)}:void 0;!s(r)&&r&&CBC.APP.ANA.DISPATCHERS.ESS.trackEvent(1,r,o),!s(i)&&i&&CBC.APP.ANA.DISPATCHERS.ESS.trackEvent(0,i),!s(a)&&a&&CBC.APP.ANA.DISPATCHERS.ESS.trackEvent(0,a)},formatEssV1Payload:u,formatEssV0Payload:c,formatEssLoaded:l,generateGoogleCloudPayload:function(){var e={session:{},user:{},device:{},content:{}},t=(e.content.tags={},CBC.APP.SC.UTIL.getCookie("cbc-session")),t=(e.session.id=t||CBC.APP.SC.UTIL.getUuid(),e.session.isLoggedIn=!!(window.viafoura&&window.viafoura.users&&window.viafoura.users.current)&&"guest"!==window.viafoura.users.current().user_privilege,e.session.startTime="",e.user.id="",(window.navigator.userAgent||window.navigator.vendor||window.opera).toLowerCase()),t=CBC.APP.SC.Detectizr(t);return e.device.type=t.device.type,e.device.os=t.os.name,e.content.id=CBC.APP.SC.DTM.formatted.raw.contentid,e.content.area=CBC.APP.SC.DTM.formatted.raw.contentarea,e.content.subsection1=CBC.APP.SC.DTM.formatted.raw.subsection1,e.content.subsection2=CBC.APP.SC.DTM.formatted.raw.subsection2,e.content.subsection3=CBC.APP.SC.DTM.formatted.raw.subsection3,e.content.subsection4=CBC.APP.SC.DTM.formatted.raw.subsection4,e.content.authors=CBC.APP.SC.DTM.formatted.raw.authors?CBC.APP.SC.DTM.formatted.raw.authors.split(","):"",e.content.title=CBC.APP.SC.DTM.formatted.raw.title,e.content.url=CBC.APP.SC.DTM.formatted.raw.url,e.content.source="polopoly",e.content.publicationDate=CBC.APP.SC.DTM.formatted.raw.publishedTime,e.content.lastUpdatedDate=CBC.APP.SC.DTM.formatted.raw.updatedTime,e.content.tags.person=[],e.content.tags.location=[],e.referrer=document.referrer,CBC.APP.SC.DTM.formatted.raw.referrer&&CBC.APP.SC.DTM.formatted.raw.referrer.url&&(e.referrer=CBC.APP.SC.DTM.formatted.raw.referrer.url),e.eventTimestamp=Date.now(),CBC.APP.SC.DTM.formatted.googlecloud=e,CBC.APP.SC.DTM.formatted.googlecloud=JSON.parse(JSON.stringify(e))},getEssIdMap:function(){return d}}}(),!function(){"use strict";try{CBC.APP.SC.masterSwitch=JSON.parse('{"switches":{"adobe":true,"amplitude":true,"comscore":true,"conductrics":true,"cxense":true,"DAL":true,"ess":true,"essv0":true,"essv1":true,"exceptionreporting":true,"facebook":true,"googlecloud":true,"harmonizedAdobe":true,"idexchange":true,"legacysclt":true,"MirRoar":true},"amplitude":{"eventshash":{"CAST-DEVICE CONNECTED":true,"COMMENTED":true,"READ":true,"SCANNED":true,"LISTENED":true,"SHARED":true,"ENTERED":true,"SUBMITTED":true,"SIGNED IN":true,"SIGNED OUT":true,"SUBSCRIBED":true,"UNSUBSCRIBED":true,"SELECTED":true,"SEARCHED":true,"FAVOURITED":true,"UNFAVOURITED":true,"OPENED":true,"CLOSED":true,"RESIZED":true,"NEXT":true,"PLAYED":true,"PREVIOUS":true,"OPTED IN":false,"OPTED OUT":false,"ONBOARDED":true,"LOADED":true,"LOADED MORE":true,"STREAMED":true,"VIEWED AD":true,"START WEB SESSION":true,"SET PREFERENCE":true,"REGISTERED":true,"WATCHED":true,"FOLLOWED":true,"UNFOLLOWED":true,"IDENTIFY":true}},"pubsub":{"eventshash":{"CAST-DEVICE CONNECTED":true,"COMMENTED":true,"READ":true,"SCANNED":true,"LISTENED":true,"SHARED":true,"ENTERED":true,"SUBMITTED":true,"SIGNED IN":true,"SIGNED OUT":true,"SUBSCRIBED":true,"UNSUBSCRIBED":true,"SELECTED":true,"SEARCHED":true,"FAVOURITED":true,"UNFAVOURITED":true,"OPENED":true,"PLAYED":true,"CLOSED":true,"RESIZED":true,"NEXT":true,"PREVIOUS":true,"OPTED IN":false,"OPTED OUT":false,"ONBOARDED":true,"LOADED":true,"LOADED MORE":true,"STREAMED":true,"VIEWED AD":true,"START WEB SESSION":true,"SET PREFERENCE":true,"REGISTERED":true,"WATCHED":true,"FOLLOWED":true,"UNFOLLOWED":true,"IDENTIFY":true}},"sponsorverbs":{"LOADED":true,"READ":true,"STREAMED":true,"WATCHED":true},"partnerverbs":{"LOADED":true,"READ":true,"STREAMED":true,"WATCHED":true},"googlecloud":{"url":"//ess.data.cbc.ca/v0/set","essv0":{"url":"//ess.data.cbc.ca/v0/set"},"essv1":{"url":"//ess.data.cbc.ca/v1/set"}},"idexchange":{"endpoint":"https://uie.data.cbc.ca/v0/","context":"http://vocab.data.cbc.ca/"},"harmonizedAdobe":{"domains":{}},"omniture":{"saccount":"cbc-production","watch":"cbc-production","harmonized":"cbcrc-dev"}}')}catch(e){CBC.APP.SC.DEBUG&&console.log("ERROR: Master switch ESI not working. Using AJAX.");var t="//www.cbc.ca/network/includes/stats/master-switch.json";CBC.APP.SC.UTIL.makeGETRequest(t,{success:function(e,t){CBC.APP.SC.masterSwitch=JSON.parse(e.responseText)},failure:function(e,t){console.log("ERROR: Unable to talk to config URL: "+t.failure.uri)}},{success:{uri:t},failure:{uri:t}},0,0,{timeout:2e3,cb:function(){console.log("ERROR: AJAX request for //www.cbc.ca/network/includes/stats/master-switch.json timed out.")}})}}(),!function(){"use strict";try{CBC.APP.SC.dmpAudienceslist=JSON.parse('{"featureToggle":{"blueconic":{"globalDisableUserTracking":false},"lotame":{}},"masks":{"Ads":1,"Amplitude":2,"Conductrics":4,"Dfp":8},"audiences":{"339250":2,"345031":8,"357908":4,"381626":8,"381627":8,"418946":8,"422143":8,"422188":8,"424151":8,"450457":4,"450470":4,"451377":4,"462099":8,"471846":8,"471847":8,"492233":8,"494342":8,"494344":8,"494346":8,"494347":8,"494349":8,"494351":8,"494352":8,"494748":8,"494776":8,"494785":8,"494789":8,"494790":8,"494793":8,"494794":8,"495733":8,"497524":1,"501028":8,"501031":8,"501032":8,"501033":8,"501035":8,"501036":8,"501037":8,"501038":8,"501039":8,"501043":8,"501051":8,"501052":8,"502778":8,"503763":8,"505409":8,"505798":8,"506190":8,"506593":8,"507029":8,"508498":6,"508617":8,"509471":8,"509830":8,"510213":8,"513413":8,"513578":8,"513582":8,"513585":8,"513587":8,"513931":8,"514158":8,"514680":8,"515988":8,"515992":8,"515995":8,"516002":8,"517295":8,"517556":8,"518261":8,"518326":8,"518735":8,"519440":8,"519466":8,"519476":8,"519691":8,"520071":8,"521862":8,"522960":8,"522961":8,"524218":8,"525280":8,"525284":8,"525287":8,"525290":8,"527178":8,"527226":8,"527240":8,"527243":8,"527245":8,"527257":8,"528184":1,"528185":1,"529402":8,"531119":8,"531286":8,"534035":8,"534057":8,"534380":8,"534429":8,"535218":8,"537155":8,"537181":8,"537334":8,"537461":8,"537751":8,"537833":8,"537834":8,"537836":10,"537841":8,"537842":8,"537873":8,"537875":8,"537876":8,"537882":8,"538146":8,"538381":8,"538387":8,"538388":8,"538389":8,"538480":8,"538504":8,"538675":8,"538832":8,"538912":8,"539221":8,"539749":8,"539755":8,"539945":8,"540066":8,"540112":8,"541831":8,"542872":8,"542877":8,"542882":8,"543800":8,"545682":8,"548179":1,"548739":8,"548740":8,"548741":8,"550345":8,"552738":8,"552863":1,"552865":1,"552928":8,"552932":8,"552942":8,"553272":8,"553610":8,"554435":8,"556284":8,"560299":8,"565388":8,"572781":8,"574221":3,"574755":1,"575784":8,"577820":8,"579366":8,"579367":8,"579368":8,"579369":8,"583479":8,"583486":8,"583586":8,"583587":8,"585062":8,"585063":8,"589987":1,"589988":1,"589989":1,"590004":1,"593056":8,"593691":8,"593693":8,"593711":1,"593781":1,"593802":1,"593803":1,"593844":8,"593846":8,"593889":8,"593898":8,"593899":8,"593900":8,"601476":1,"601480":8,"601486":8,"603145":8,"603173":8,"603873":8,"603874":8,"604032":8,"604918":3,"608794":8,"608813":3,"610236":8,"611038":8,"626331":8,"628180":8,"628181":8,"628182":8,"628183":8,"628536":8,"629480":8,"637172":8,"637173":8,"637174":8,"637175":8,"637765":8,"637766":8,"637768":8,"638416":8,"655700":8,"656017":8,"656018":8,"656027":8,"661142":8,"661144":8,"663131":8,"663146":8,"665553":1,"667463":8,"667828":8,"668255":8,"668256":8,"668301":8,"668302":8,"668307":8,"668309":8,"669162":8,"669221":8,"669927":8,"671618":8,"671666":8,"671711":2,"672649":3,"674161":1,"676109":8,"677994":1,"677995":1,"681021":8,"682345":8,"682388":8,"682390":8,"682666":8,"682888":8,"682892":8,"683095":8,"683110":8,"683122":8,"683124":8,"683125":8,"683129":8,"683131":8,"683136":8,"683138":8,"683141":8,"683142":8,"683151":8,"684122":8,"684127":8,"684637":8,"685869":8,"685870":8,"688881":8,"690145":8,"690748":2,"690760":5,"692992":8,"739808":8,"739809":8,"741865":8,"755066":8,"756657":1,"757933":1,"758689":1,"761381":8,"761383":8,"761384":8,"761385":8,"762706":8,"767518":8,"772980":2,"782242":8,"783555":8,"785938":8,"786188":8,"787480":8,"788402":8,"801371":8,"801373":8,"801376":8,"801377":8,"801379":8,"801382":8,"815908":8,"816652":8,"816654":8,"817653":8,"821709":8,"821733":8,"822789":8,"822793":8,"823830":8,"824871":8,"824877":8,"832932":8,"832945":8,"834263":3,"835822":1,"835823":1,"836854":8,"837179":8,"837181":8,"837201":8,"837202":8,"837564":8,"837565":8,"837566":8,"837568":8,"838649":1,"838652":1,"838653":1,"838655":1,"838656":1,"838657":1,"838659":1,"838661":1,"838672":1,"838673":1,"838675":1,"838676":1,"838946":8,"838947":8,"839393":1,"839395":1,"839407":1,"839763":8,"839764":8,"839765":8,"839766":8,"840279":8,"840290":8,"840944":8,"840947":8,"840953":8,"840974":8,"845643":8,"845644":8,"845645":8,"845646":8,"845647":8,"845648":8,"846715":8,"846716":8,"846717":8,"846718":8,"846719":8,"846720":8,"850179":1,"852065":8,"854343":8,"855836":3,"855839":3,"856575":1,"859600":8,"860609":8,"860610":8,"860611":8,"860612":8,"860618":8,"860619":8,"860621":8,"860623":8,"860624":8,"860625":8,"860626":8,"860627":8,"861239":8,"861241":8,"861244":8,"861869":8,"861874":8,"861875":8,"861876":8,"861877":8,"861878":8,"861879":8,"861881":8,"861882":8,"861883":8,"861885":8,"862070":8,"862088":8,"862880":2,"862881":2,"862885":2,"862889":2,"862892":2,"864329":8,"867452":8,"867593":8,"867604":8,"868249":8,"868670":8,"875178":10,"875192":8,"875194":10,"875195":10,"875199":10,"875200":10,"875201":10,"875202":10,"875621":2,"875626":2,"876560":10,"876565":10,"878147":8,"883349":10,"883482":8,"884301":10,"914638":8,"915942":8,"922488":8,"931130":8,"934757":8,"935546":8,"944388":8,"944392":8,"944440":8,"947044":8,"948524":8,"948709":8,"948755":8,"949026":8,"949236":8,"949242":8,"949243":8,"949245":8,"949246":8,"949907":8,"949908":8,"949910":8,"949912":8,"949913":8,"950550":8,"950564":8,"951370":8,"951371":8,"952484":8,"952485":8,"952489":8,"952496":8,"977334":8,"979938":8,"980360":8,"981044":8,"984423":8,"984674":8,"987761":8,"994741":8,"996469":8,"998639":8,"1004076":8,"1005327":8,"1005328":8,"1010592":8,"1011789":8,"1011879":8,"1017181":8,"1017187":8,"1033661":8,"1038635":8,"1038636":8,"1038663":8,"1040848":8}}')}catch(e){CBC.APP.SC.DEBUG&&console.log("ERROR: DMP Audiences ESI not working. Using AJAX.");var t="//www.cbc.ca/network/includes/dmp/dmp-audiences.json";CBC.APP.SC.UTIL.makeGETRequest(t,{success:function(e,t){CBC.APP.SC.dmpAudienceslist=JSON.parse(e.responseText)},failure:function(e,t){console.log("ERROR: Unable to talk to DMP Audiences URL: "+t.failure.uri)}},{success:{uri:t},failure:{uri:t}},0,0,{timeout:2e3,cb:function(){console.log("ERROR: AJAX request for //www.cbc.ca/network/includes/dmp/dmp-audiences.json timed out.")}})}}(),!function(){"use strict";try{CBC.APP.SC.LOCALGEO=JSON.parse('{"disclaimer":"be a good citizen and store this output in the device session cache","network":{"bandwidth":"5000","throughput":"vhigh"},"geo":{"city":"DHAKA","continent":"AS","country":"BD","region":"","timezone":"GMT+6","latitude":"23.72","longitude":"90.41"}}')}catch(e){CBC.APP.SC.DEBUG&&console.log("ERROR: Geo ESI not working. Using AJAX.");var t="//www.cbc.ca/network/includes/stats/geo.json";CBC.APP.SC.UTIL.makeGETRequest(t,{success:function(e,t){CBC.APP.SC.LOCALGEO=JSON.parse(e.responseText)},failure:function(e,t){console.log("ERROR: Unable to talk to config URL: "+t.failure.uri)}},{success:{uri:t},failure:{uri:t}},0,0,{timeout:500,cb:function(){console.log("ERROR: AJAX request for //www.cbc.ca/network/includes/stats/geo.json timed out.")}})}}(),!function(){"use strict";try{CBC.APP.ANA.SEARCHDEFAULT=JSON.parse('{"cbc-keywords":7,"cbc-keywordscollections":7,"cbc-keywordslocation":4,"cbc-keywordsorganization":3,"cbc-keywordsperson":5}')}catch(e){CBC.APP.SC.DEBUG&&console.log("ERROR: Web AB Tests ESI not working. Using AJAX.");var t="//www.cbc.ca/network/includes/stats/search-default.json";CBC.APP.SC.UTIL.makeGETRequest(t,{success:function(e,t){CBC.APP.ANA.SEARCHDEFAULT=JSON.parse(e.responseText)},failure:function(e,t){console.log("ERROR: Unable to talk to config URL: "+t.failure.uri)}},{success:{uri:t},failure:{uri:t}},0,0,{timeout:500,cb:function(){console.log("ERROR: AJAX request for //www.cbc.ca/network/includes/stats/search-default.json timed out.")}})}}(),!function(){"use strict";try{CBC.APP.ANA.ABTESTSCONFIG=JSON.parse('{"tests":{"main-search":{"id":"a-FYaT0CWKbQ","scope":{"url":"www.cbc.ca/search"},"variants":{"A":{"content":{"cbc-keywords":7,"cbc-keywordscollections":7,"cbc-keywordslocation":4,"cbc-keywordsorganization":3,"cbc-keywordsperson":5,"cbc-keywordssubject":7,"cbc-publishedtime":30},"description":"status-quo"},"B":{"content":{"cbc-keywords":7,"cbc-keywordscollections":7,"cbc-keywordslocation":4,"cbc-keywordsorganization":3,"cbc-keywordsperson":5},"description":"new boost"}}},"video-swim-lane":{"id":"undefined","scope":{"url":"www.cbc.ca/search"},"variants":{"A":{"content":{"title":3,"keyword":5,"_all":1},"description":"qa boost 1"},"B":{"content":{"title":1,"keyword":1,"_all":1,"cbc-publishedtime":30},"description":"qa boost 2"}}},"story-page-recsys":{"id":"a-Xuk1r05Uuo","scope":{"url":"www.cbc.ca/"},"variants":{"A":{"recommendedType":"all-articles","description":"current-recsys-algorithm"},"B":{"recommendedType":"all-articles-variant","description":"new-recsys-algorithm"}}},"video-page-recsys":{"id":"a-aGWiaANYCznC","scope":{"url":"www.cbc.ca/player"},"variants":{"A":{"recommendedType":"short-form-video","description":"current-video-recsys-algorithm"},"B":{"recommendedType":"short-form-video-variant","description":"new-video-recsys-algorithm"}}},"lineup-optimization-politics":{"id":"a-oSf9Blm2kP","scope":{"url":"/news/politics"},"variants":{"A":{"label":"no-change","content":"news-politics-hybrid","description":"popularity-and-reverse-chronology"},"B":{"label":"new-lineup","content":"news-politics-variant-hybrid","description":"reverse-chronology-then-popularity"}}},"lineup-optimization-new-brunswick":{"id":"a-zwiicxUr2v","scope":{"url":"www.cbc.ca/news/canada/new-brunswick"},"goals":{"clicked":"api-clicked-lineup-card"},"variants":{"A":{"label":"no-change","content":"news-canada-new-brunswick","description":"manual-curation"},"B":{"label":"new-lineup","content":"news-canada-new-brunswick-variant","description":"reverse-chronology"}}},"lineup-optimization-edmonton":{"id":"a-Dn1dJnGJkL","scope":{"url":"www.cbc.ca/news/canada/edmonton"},"goals":{"clicked":"api-clicked-lineup-card-edmonton"},"variants":{"A":{"label":"new-lineup","content":"news-canada-edmonton-hybrid","description":"popularity-and-reverse-chronology"},"B":{"label":"new-lineup","content":"news-canada-edmonton-variant-hybrid","description":"region-specific-curation"}}},"lineup-optimization-british-columbia":{"id":"a-0HJeAGEsFv","scope":{"url":"www.cbc.ca/news/canada/british-columbia"},"goals":{"clicked":"api-clicked-lineup-card-bc"},"variants":{"A":{"label":"no-change","content":"news-canada-british-columbia","description":"manual-curation"},"B":{"label":"new-lineup","content":"news-canada-british-columbia-v2-hybrid","description":"popularity-and-reverse-chronology"}}},"lineup-optimization-manitoba":{"id":"a-3PJ8xEtzM5","scope":{"url":"www.cbc.ca/news/canada/manitoba"},"goals":{"clicked":"api-clicked-lineup-card-manitoba"},"variants":{"A":{"label":"new-lineup","content":"news-canada-manitoba-hybrid","description":"reverse-chronology"},"B":{"label":"new-lineup","content":"news-canada-manitoba-v2-hybrid","description":"popularity-and-reverse-chronology"}}},"lineup-optimization-thunder-bay":{"id":"a-qE1ZHoUI33","scope":{"url":"www.cbc.ca/news/canada/thunder-bay"},"goals":{"clicked":"api-clicked-lineup-card-thunder-bay"},"variants":{"A":{"label":"new-lineup","content":"news-canada-thunder-bay-hybrid","description":"popularity-and-reverse-chronology"},"B":{"label":"new-lineup","content":"news-canada-thunder-bay-variant-hybrid","description":"region-specific-curation"}}},"lineup-optimization-toronto":{"id":"a-WAbsihoKBt","scope":{"url":"www.cbc.ca/news/canada/toronto"},"goals":{"clicked":"api-clicked-lineup-card-toronto"},"variants":{"A":{"label":"no-change","content":"news-canada-toronto","description":"manual-curation"},"B":{"label":"new-lineup","content":"news-canada-toronto-hybrid","description":"popularity-and-reverse-chronology"}}},"lineup-optimization-montreal":{"id":"a-1gpg7gcPHt","scope":{"url":"www.cbc.ca/news/canada/montreal"},"goals":{"clicked":"api-clicked-lineup-card-montreal"},"variants":{"A":{"label":"new-lineup","content":"news-canada-montreal-hybrid","description":"popularity-and-reverse-chronology"},"B":{"label":"new-lineup","content":"news-canada-montreal-variant-hybrid","description":"region-specific-curation"}}},"lineup-optimization-edge-bbic":{"id":"a-N6AoRnq2B7","scope":{"url":"/news/canada/beingblackincanada"},"variants":{"A":{"label":"no-change","content":"being-black-in-canada-hybrid","description":"popularity-and-reverse-chronology"},"B":{"label":"new-lineup","content":"being-black-in-canada-variant-hybrid","description":"reverse-chronology-only"}}},"lineup-optimization-canada":{"id":"a-lCrkGuHnq6","scope":{"url":"/news/canada"},"variants":{"A":{"label":"no-change","content":"news-canada-hybrid","description":"popularity-and-reverse-chronology"},"B":{"label":"new-lineup","content":"news-canada-variant-hybrid","description":"reverse-chronology-only"}}},"lineup-optimization-entertainment":{"id":"a-0jOwtSJ23d","scope":{"url":"/news/entertainment"},"variants":{"A":{"label":"no-change","content":"news-entertainment-hybrid","description":"popularity-and-reverse-chronology"},"B":{"label":"new-lineup","content":"news-entertainment-variant-hybrid","description":"reverse-chronology-only"}}},"lineup-optimization-hamilton":{"id":"a-ApUMQLBNfu","scope":{"url":"www.cbc.ca/news/canada/hamilton"},"variants":{"A":{"label":"no-change","content":"news-canada-hamilton-hybrid","description":"popularity-and-reverse-chronology"},"B":{"label":"new-lineup","content":"news-canada-hamilton-variant-hybrid","description":"reverse-chronology-only"}}},"lineup-optimization-sudbury":{"id":"a-D39A3ZL3xw","scope":{"url":"www.cbc.ca/news/canada/sudbury"},"variants":{"A":{"label":"no-change","content":"news-canada-sudbury-hybrid","description":"popularity-and-reverse-chronology"},"B":{"label":"new-lineup","content":"news-canada-sudbury-variant-hybrid","description":"reverse-chronology-only"}}}}}')}catch(e){CBC.APP.SC.DEBUG&&console.log("ERROR: AB Tests Config ESI not working. Using AJAX.");var t="//www.cbc.ca/network/includes/stats/ab-tests-config.json";CBC.APP.SC.UTIL.makeGETRequest(t,{success:function(e,t){CBC.APP.ANA.ABTESTSCONFIG=JSON.parse(e.responseText)},failure:function(e,t){console.log("ERROR: Unable to talk to config URL: "+t.failure.uri)}},{success:{uri:t},failure:{uri:t}},0,0,{timeout:500,cb:function(){console.log("ERROR: AJAX request for //www.cbc.ca/network/includes/stats/ab-tests-config.json timed out.")}})}}(),!function(){"use strict";try{CBC.APP.ANA.SURVEYCONFIG=JSON.parse('{"/":{"trigger":"SHOW-SURVEY","enabled":false},"/search":{"trigger":"SHOW-SEARCH-SURVEY","enabled":true}}')}catch(e){CBC.APP.SC.DEBUG&&console.log("ERROR: Survey Config ESI not working. Using AJAX.");var t="//www.cbc.ca/network/includes/stats/survey-config.json";CBC.APP.SC.UTIL.makeGETRequest(t,{success:function(e,t){CBC.APP.ANA.SURVEYCONFIG=JSON.parse(e.responseText)},failure:function(e,t){console.log("ERROR: Unable to talk to config URL: "+t.failure.uri)}},{success:{uri:t},failure:{uri:t}},0,0,{timeout:500,cb:function(){console.log("ERROR: AJAX request for //www.cbc.ca/network/includes/stats/survey-config.json timed out.")}})}}(),function(e){var e=e.split("."),t=e[0],n=e[e.length-1];return{targetObject:e.slice(1,e.length-1).reduce(function(e,t){return e[t]},window[t]),dest:n}}),getAndSetConstantsFile=function(e,t,a){var o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};return new Promise(function(n,r){var i=getObjectValuesForOverwriting(e);try{i.targetObject[i.dest]=JSON.parse(t),n()}catch(e){CBC.APP.SC.DEBUG&&console.log(o.esiFail||"Error: ESI failed to hydrate."),CBC.APP.SC.UTIL.makeGETRequest(a,{success:function(e,t){i.targetObject[i.dest]=JSON.parse(e.responseText),n()},failure:function(e,t){console.log("Error: Unable to talk to config URL: "+t.failure.uri),r()}},{success:{uri:a},failure:{uri:a}},0,0,{timeout:2e3,cb:function(){console.log(o.timeout||"Error: AJAX request for "+a+" timed out."),r()}})}})},s_account=(CBC.APP.SC.FILE_STATUS={},CBC.APP.SC.FILE_STATUS.filePromises=[],[{windowPath:"CBC.APP.SC.metadataAllowlist",replaceObject:'{"metadata":{"allowlist":{"content":{"area":{"all":true,"arts":true,"audio":true,"books":true,"comedy":true,"documentaries":true,"entertainment":true,"help":true,"home":true,"homepage":true,"kids":true,"life":true,"lifestyle":true,"listen":true,"mediaid":true,"membership":true,"misc":true,"music":true,"mycbc":true,"news":true,"Olympics":true,"ott":true,"paralympics":true,"player":true,"podcasts":true,"programguide":true,"radio":true,"search":true,"sitemap":true,"sports":true,"subscriptions":true,"tv":true,"video":true},"cms":{"9cms":true,"alan":true,"audio-db":true,"audioid":true,"broadcast-schedule-api":true,"expression-engine":true,"ibm-cloud-video":true,"ibm-video-cloud":true,"mediaid":true,"mpx":true,"neuro":true,"ott-cms":true,"polopoly":true,"program-guide":true,"scoop":true},"embedded":{"media":{"audio":true,"photo":true,"photogallery":true,"video":true}},"media":{"audiovideo":{"audio":true,"video":true},"genre":{"action-and-adventure":true,"animation":true,"arts":true,"arts-entertainment":true,"award-shows":true,"biography":true,"books":true,"business":true,"comedy":true,"concerts-and-performances":true,"crime-and-police":true,"current-affairs":true,"documentary":true,"drama":true,"education":true,"environment-nature":true,"factual-reality":true,"game-and-quiz-show":true,"health":true,"horror":true,"interview-and-talk-show":true,"lifestyle":true,"magazine":true,"music":true,"musical":true,"music-blues":true,"music-celtic":true,"music-classical":true,"music-country":true,"music-electronic":true,"music-folk":true,"music-hip-hop":true,"music-indigenous":true,"music-jazz":true,"music-j-pop":true,"music-k-pop":true,"music-latin":true,"music-other":true,"music-pop":true,"music-r&b-soul":true,"music-reggae":true,"music-rock":true,"music-singer-songwriter":true,"music-soca":true,"music-world":true,"news":true,"olympics":true,"other":true,"politics":true,"paralympics":true,"reality":true,"romance":true,"science":true,"sci-fi-and-fantasy":true,"society-culture":true,"specials":true,"sporting-event":true,"sports":true,"suspense":true,"technology":true,"teen":true,"variety-show":true,"western":true},"live":{"streams-24-7":{"video":{"cbc-news-calgary":true,"cbc-news-charlottetown":true,"cbc-news-edmonton":true,"cbc-news-fredericton":true,"cbc-news-halifax":true,"cbc-news-montreal":true,"cbc-news-network":true,"cbc-news-ottawa":true,"cbc-news-regina":true,"cbc-news-st-johns":true,"cbc-news-toronto":true,"cbc-news-vancouver":true,"cbc-news-windsor":true,"cbc-news-winnipeg":true,"cbc-news-yellowknife":true},"audio":{"music-atlantic":true,"music-central":true,"music-eastern":true,"music-mountain":true,"music-pacific":true,"radio-one-barrie":true,"radio-one-calgary":true,"radio-one-charlottetown":true,"radio-one-cornerbrook":true,"radio-one-edmonton":true,"radio-one-fredericton":true,"radio-one-goose-bay":true,"radio-one-grand-falls":true,"radio-one-halifax":true,"radio-one-inuvik":true,"radio-one-iqaluit":true,"radio-one-kamloops":true,"radio-one-kewlowna":true,"radio-one-kingston":true,"radio-one-kitchener-waterloo":true,"radio-one-london":true,"radio-one-moncton":true,"radio-one-montreal":true,"radio-one-north-quebec":true,"radio-one-ottawa":true,"radio-one-peterborough":true,"radio-one-prince-george":true,"radio-one-quebec-city":true,"radio-one-regina":true,"radio-one-saint-john":true,"radio-one-saskatoon":true,"radio-one-st-johns":true,"radio-one-sudbury":true,"radio-one-sydney":true,"radio-one-thunderbay":true,"radio-one-toronto":true,"radio-one-vancouver":true,"radio-one-victoria":true,"radio-one-whitehorse":true,"radio-one-windsor":true,"radio-one-winnipeg":true,"radio-one-yellowknife":true}}},"liveondemand":{"linear":true,"live":true,"on-demand":true},"sport":{"3x3-basketball":true,"alpine-skiing":true,"artistic-gymnastics":true,"artistic-swimming":true,"aquatics":true,"archery":true,"athletics":true,"badminton":true,"baseball":true,"basketball":true,"beach-volleyball":true,"biathlon":true,"bmx":true,"boccia":true,"bobsleigh":true,"boxing":true,"canoe-kayak":true,"cross-country-skiing":true,"curling":true,"cycling":true,"cycling-mountain-bike":true,"cycling-road":true,"cycling-track":true,"diving":true,"equestrian":true,"fencing":true,"field-hockey":true,"figure-skating":true,"football":true,"freestyle-skiing":true,"goalball":true,"golf":true,"gymnastics":true,"handball":true,"hockey":true,"judo":true,"karate":true,"lacrosse":true,"luge":true,"marathon":true,"modern-pentathlon":true,"nordic-combined":true,"para-alpine-skiing":true,"para-archery":true,"para-athletics":true,"para-badminton":true,"para-biathlon":true,"para-canoe":true,"para-cross-country-skiing":true,"para-cycling":true,"para-equestrian":true,"para-football-five-a-side":true,"para-ice-hockey":true,"para-judo":true,"para-powerlifting":true,"para-rowing":true,"para-snowboard":true,"para-swimming":true,"para-table-tennis":true,"para-taekwondo":true,"para-triathlon":true,"pentathlon":true,"powerlifting":true,"rodeo":true,"rowing":true,"rugby":true,"rhythmic-gymnastics":true,"sailing":true,"shooting":true,"shooting-para-sport":true,"short-track-speed-skating":true,"sitting-volleyball":true,"skateboarding":true,"skeleton":true,"ski-jumping":true,"skiing":true,"sliding":true,"soccer":true,"soccer-5-a-side":true,"softball":true,"snowboard":true,"snowboarding":true,"speed-skating":true,"sport-climbing":true,"surfing":true,"swimming":true,"table-tennis":true,"taekwondo":true,"tennis":true,"track-and-field":true,"trampoline":true,"trampoline-gymnastics":true,"triathlon":true,"volleyball":true,"water-polo":true,"waterpolo":true,"wheelchair-basketball":true,"weightlifting":true,"wheelchair-curling":true,"wheelchair-fencing":true,"wheelchair-rugby":true,"wheelchair-tennis":true,"wrestling":true,"youth-olympics":true},"streamtype":{"linear":true,"live":true,"on-demand":true},"type":{"broadcast":true,"excerpt":true,"event-coverage":true,"full-program":true,"interview":true,"raw-video":true,"raw-audio":true,"text-to-speech":true,"tutorial":true}},"tier":{"authenticated":true,"free":true,"premium":true},"type":{"album":true,"article":true,"articles":true,"artist":true,"audioclip":true,"authorbio":true,"bio":true,"blogentry":true,"comments":true,"episode":true,"error":true,"form":true,"feature":true,"game":true,"homepage":true,"index":true,"longform":true,"newsletter":true,"ott-premium":true,"page":true,"photogallery":true,"photogalleryfluid":true,"podcast":true,"programguide":true,"quiz":true,"recipe":true,"requests":true,"schedule":true,"segment":true,"sponsoredcontent":true,"story":true,"topic":true,"videoclip":true}},"app":{"pillar":{"feed":true,"legacy":true,"legacyee":true,"listen":true,"lwf":true,"watch":true},"name":{"cbcca-web":true,"cbc-videoheartbeat-web":true,"ci-amazon-alexa":true,"ci-google-assistant":true,"ci-microsoft-cortana":true,"fia":true,"gamp":true,"kids-fantasy-hockey-web-app":true,"kids-web-app":true,"listen-android-app":true,"listen-ios-app":true,"listen-web-app":true,"listen-tvos-app":true,"lite-web-app":true,"membership-web-app":true,"news-android-app":true,"news-android-tv-app":true,"news-ios-app":true,"news-tvos-app":true,"newslabs-web-app":true,"newsletter-web-app":true,"ocelot":true,"ott-android-app":true,"ott-androidtv-app":true,"ott-chromecast-app":true,"ott-firetv-app":true,"ott-ios-app":true,"ott-lgtv-app":true,"ott-playstation4-app":true,"ott-playstation5-app":true,"ott-roku-app":true,"ott-samsungtv-app":true,"ott-tvos-app":true,"ott-web-app":true,"ott-xbox-app":true,"ott-xfinity-app":true,"sports-android-app":true,"sports-ios-app":true,"sso-web-app":true,"zendesk":true}},"user":{"tier":{"authenticated":true,"free":true,"premium":true},"reason":{"SUBSCRIBED":{"promotion":true}}},"sponsor":{"name":{"air-canada-fly-the-flag":true,"Air Transat":true,"AITQ-Bas-Saint-Laurent-2022":true,"AITQ-Centre-du-Québec-2022":true,"AITQ-Charlevoix Winter-2022":true,"AITQ-Eastern Townships Ski-2022":true,"AITQ-Indigenous Tourism-2022":true,"AITZ-Laurentians-2022":true,"AITQ-Laurentians Fall-2022":true,"AITQ-Laurentians Winter-2022":true,"AITQ-Laval-2022":true,"AITQ-Outaouais-2022":true,"AITQ-QC Charlevoix Ski-2022":true,"AITQ-Quebec by the Sea Outdoors-2022":true,"AITQ-Quebec by the Sea Road Trip-2022":true,"AITQ-Saguenay-2022":true,"AITQ-Saguenay Winter-2022":true,"ALC-Corporate Reputation-2023":true,"Allens":true,"asahi-sugoi-tokyo":true,"Athabasca University":true,"athabasca-university":true,"BCLIQUOR-SummerSippers-2024":true,"belairdirect-insurancetips-2024":true,"bell-faster-higher-stronger":true,"bell-faster-higher-stronger-beijing":true,"bell-faster-higher-stronger-paris":true,"Bell for Better-Paralympics-2024":true,"Beneva-The Right Partner-2023":true,"betrivers-that-feeling-beijing":true,"betrivers-the-game-paris":true,"Bluetti-AC180Launch-2023":true,"bmw-forcesofnature-2022":true,"Bonjour Quebec":true,"Brita":true,"Calm Radio":true,"Canadian Tire":true,"Chamber Market":true,"charlevoix-embracetheoutdoors-2024":true,"Charlevoix-Malbaie-2023":true,"charlevoix-petiteriviere-2023":true,"charlevoix-winter-2023":true,"CIRA-Article2-2022":true,"CIRA-ca domains-2022":true,"Club Med":true,"CMC Markets":true,"CoastCapital-BuildYourTomorrow-2023":true,"Cogeco":true,"Cogeco-backtoschool-2023":true,"college-universel":true,"Cornucopia":true,"Dairy Farmers of Canada-Contest-2022":true,"Dairy Farmers of Canada-Contest-2023":true,"Dell Technologies":true,"Desjardins-Clean Slate-2022":true,"Desjardins-Clean Slate-2023":true,"DesjardinsInsurance-AGE-2022":true,"DesjardinsInsurance-AGE-2023":true,"Desjardins-Dream the Impossible-2023":true,"Desjardins-Meet Our People-2023":true,"Destination BC":true,"Destination Quebec City-Summer Travel-2024":true,"District Central":true,"Dropbox-lettertoafounder-2023":true,"DUC-Invasive Species-2023":true,"DUC-Restoration-2023":true,"DUC-World Water Day-2024":true,"DUC-World Wetlands Day-2024":true,"Duracell":true,"EdmontonIntlAirport-KLM-2023":true,"Edmonton Intl Airport-KLM-2024":true,"Encorp":true,"ENCORP-MARR-2022":true,"EnjoySummerinQuebec-Attractions-2023":true,"EnjoySummerinQuebec-Celebrate-2023":true,"EnjoySummerinQuebec-Family-Fun-2023":true,"Explore Edmonton-Festival City-2023":true,"Explore Edmonton - Domestic Inbound - 2022":true,"Explore Edmonton-Domestic Inbound-2023":true,"Explore Edmonton-Winter-2022":true,"Fairmont Le Château Frontenac-Champlain Restaurant-2024":true,"Familia Torres":true,"Forests Ontario-seeds-2022":true,"Fort McMurray Wood Buffalo":true,"frankfurt-book-fair":true,"Future Skills Centre":true,"FWCU-Envision Financial-2023":true,"FWCU-Island Savings-2023":true,"FWCU-Valley First-2023":true,"Gillette":true,"Greek National Tourism Organization-Article-2022":true,"Greek Tourism":true,"H&R Block- Tax Season- 2023":true,"Hearing Life Canada":true,"Hilo":true,"HRBlock-TaxSeason-2023":true,"HydroQuebec-Hilo-2024":true,"IBM":true,"Indeed-Hiring-2022":true,"InnuNikamu-Festival-2024":true,"Intact-Driving Quiz-2022":true,"Intact-growasyougo-2023":true,"Intel-Alex McLeod-2024":true,"KIJU-Organic Life-2023":true,"Kinghome-Heat Pump-2023":true,"kraft-while-you-were-sleeping":true,"La Roche-Posay":true,"LCBO":true,"LCBO-Holiday-2022":true,"Le Massif-Winter Wonderland Contest-2023":true,"Leclerc-Celebration-2024":true,"Liberty - Natural Gas - 2022":true,"Little Canada-Junos-2024":true,"London Drugs-Holiday-2023":true,"lululemon-the-olympians-beijing":true,"M361-Indigenous Youth Leaders-2024":true,"mackenzie-top-peak-2023":true,"mackenzie-top-peak-2024":true,"Mastercard":true,"Michelin-Innovative Momentum-2024":true,"Movember-KNT-2023":true,"NABAA-The Faces of Entrepreneurship-2022":true,"National Gallery of Canada":true,"Natrel-Feel the Energy-2023":true,"NB Power-SaveEnergyNB-2024":true,"nespresso":true,"Netcoins":true,"Novartis":true,"Oasis":true,"Oasis-backtoschoolquiz-2023":true,"olg-the-quest":true,"Ontario - Trillium Gift of Life":true,"ozempic-that-figure-skating-show-beijing":true,"ozempic-lumieres-sur-paris-paris":true,"P&G":true,"Paramount Plus-Yellowstone-2022":true,"Pet Valu-Article-2022":true,"Petro-Canada-Live by the Leaf-2023":true,"petro-canada-the-bond":true,"petro-canada-the-bond-beijing":true,"petro-canada-mon-mentor-beijing":true,"Phildan - Belleruche - 2022":true,"PortugalWines-Map-2023":true,"Prime Video Canada":true,"Pro-Mix":true,"Product Care Recycling":true,"QEII-BMO Ride for Cancer-2024":true,"Quaker-Protein-2024":true,"quaker-quakerborough-2023":true,"Queen Elizabeth II Foundation-Patient Essentials Fund-2022":true,"rbc-spotlight":true,"rbc-spotlight-beijing":true,"rbc-spotlight-paris":true,"Reitmans-RWCO-Summer-2022":true,"RMHC Canada-Moments that Count-2023":true,"RodTheRepellent-Article-2023":true,"Royal Canadian Mint-Elsie MacGill-2023":true,"Royal Canadian Mint-Jean Paul Riopelle-2023":true,"Royal Canadian Mint-Oscar Peterson-2022":true,"RW&CO-Fall Fashion Trends-2022":true,"Sacred Heart-Fall Registration-2024":true,"samsung-3-stars-beijing":true,"Saputo-Holiday Hub-2022":true,"Saputo-HolidayHub-2023":true,"SAQ":true,"SAQ-Inspire-2023":true,"SHMP-Empress-2024":true,"SiriusXM-Junos1-2023":true,"sobeys-family-album":true,"sobeys-family-album-beijing":true,"sobeys-feed-the-dream-paris":true,"St. John Ambulance-Opioid Response Training-2023":true,"Sunrype-sunshine-2024":true,"sunwing-holiday-2023":true,"Tanguay-InteriorDesign-2023":true,"The Salvation Army":true,"ThePowerMBA":true,"Tim Hortons":true,"Tokyo Metropolitan Government":true,"Tokyo Tourism-Fall-2022":true,"Tourism Ireland-Fall-2022":true,"Tourism Kelowna-Fall Escapes-2022":true,"Tourism Mont Tremblant":true,"Tourism New Brunswick":true,"Tourism New Brunswick-Fundy Facts-2022":true,"Tourism New Brunswick-Road Trip-2022":true,"Tourism Tofino":true,"Tourism Whistler":true,"Tourism Whistler-ACH-2023":true,"Tourism Whistler-Cornucopia-2022":true,"Tourism Whistler-Cornucopia-2023":true,"Tourisme Gaspesie-Summer Travel-2024":true,"Tourisme Montreal-Walking Guide-2024":true,"Tourism-Whistler-Fall-2022":true,"TourismYukon-Summer-2023":true,"TourismYukon-Winter-2023":true,"toyota":true,"toyota-breakthrough":true,"toyota-breakthrough-beijing":true,"toyota-breakthrough-paris":true,"toyota-breakthrough-tokyo":true,"toyota-mon-destin-beijing":true,"toyota-mon-destin-tokyo":true,"toyota-searchlight-2021":true,"toyota-searchlight-2022":true,"Travel Alberta":true,"tvo":true,"uber-eats-who-delivered-beijing":true,"uber-go-getters":true,"UN-Global-Compact-2024":true,"United Way":true,"VIARail-RedefiningTravel-2024":true,"visa-olympic-moments":true,"visa-olympic-moments-beijing":true,"visa-olympic-moments-tokyo":true,"Visit Tokyo Okinawa-Hidden Gems-2024":true,"Whirlpool":true,"WorkSafeBC-Health and Safety-2022":true,"YorkshireTea-ProperBrew-2023":true}},"partner":{"name":{"partner-test":true}},"department":{"level3":{"arts":["unscripted"],"comedy":["scripted","unscripted"],"digital-originals":["scripted","unscripted"],"drama":["scripted"],"docs":["unscripted"],"factual":["unscripted"],"life":["unscripted"]},"level2":{"books":["radio"],"british-columbia":["local-services"],"business":["news"],"calgary":["local-services"],"edmonton":["local-services"],"entertainment":["news"],"hamilton":["local-services"],"health":["news"],"indigenous":["local-services"],"kamloops":["local-services"],"kids":["programming"],"kitchener-waterloo":["local-services"],"london":["local-services"],"manitoba":["local-services"],"montreal":["local-services"],"music":["radio"],"new-brunswick":["local-services"],"newfoundland":["local-services"],"north":["local-services"],"nova-scotia":["local-services"],"opinion":["news"],"ottawa":["local-services"],"pei":["local-services"],"podcast":["radio"],"politics":["news"],"saskatchewan":["local-services"],"saskatoon":["local-services"],"science":["news"],"scripted":["programming"],"sudbury":["local-services"],"talk":["radio"],"technology":["news"],"thunder-bay":["local-services"],"toronto":["local-services"],"unscripted":["programming"],"windsor":["local-services"]},"level1":{"digital-archives":true,"homepage":true,"local-services":true,"news":true,"programming":true,"radio":true,"sports":true,"watch":true}},"feature":{"name":{"banner":true,"card-grid":true,"carousel":true,"content-package":true,"link":true,"media-embed":true,"media-player":true,"media-playlist-player":true,"modal":true,"multiple-choice":true,"navigation":true,"push-notification":true,"quiz":true,"radio-bar":true,"radio-button":true,"search":true,"story-auth-prompt":true,"swimlane":true,"vertical-card-list":true},"instance":{"Aquatics":true,"Archives":true,"Arts":true,"Arts and Entertainment":true,"BC":true,"Baseball":true,"Basketball":true,"Breaking News":true,"Business":true,"breadcrumb":true,"breakthrough":true,"Calgary":true,"Calgary Stampede":true,"Canada":true,"Canoe-Kayak":true,"closed-captions":true,"Commonwealth Games":true,"Consumer Life":true,"Cricket":true,"Curling":true,"Cycling":true,"Diving":true,"Docs":true,"Edmonton":true,"feature":true,"Field Hockey":true,"Figure Skating":true,"Football":true,"gem":true,"global-nav":true,"Golf":true,"Gymnastics":true,"Hamilton":true,"Health":true,"Hockey":true,"in-page-nav":true,"info-card":true,"Indigenous":true,"Judo":true,"Kitchener-Waterloo":true,"lead-media":true,"LIVE NOW":true,"Life":true,"local":true,"Local News Shows":true,"London":true,"Manitoba":true,"Maritimes":true,"Montreal":true,"more":true,"Music":true,"Must Watch":true,"My Local":true,"my-olympics":true,"NB":true,"next":true,"NL":true,"nlp-match":true,"NS":true,"News":true,"North":true,"Olympic Sports":true,"olympics":true,"Ottawa":true,"PEI":true,"Paralympics":true,"Politics":true,"popular-sports":true,"primary-headline":true,"primary-related":true,"primary-visual":true,"question-1":true,"question-2":true,"question-3":true,"question-4":true,"question-5":true,"question-6":true,"question-7":true,"question-8":true,"random":true,"rec-sys":true,"related-link":true,"related-media":true,"replays":true,"Road to the Olympic Games":true,"Rowing":true,"Rugby":true,"Saskatchewan":true,"Saskatoon":true,"Science":true,"search":true,"secondary-navigation":true,"secondary-related":true,"shortcuts-bar":true,"Show Jumping":true,"Skiing":true,"Sliding":true,"Snowboarding":true,"Soccer":true,"Softball":true,"sort":true,"Speed Skating":true,"Sports":true,"Sudbury":true,"suggested-authentication":true,"Surfing":true,"TV Shows":true,"Technology and Science":true,"Tennis":true,"Thunder Bay":true,"Toronto":true,"Track and Field":true,"trending":true,"video-categories":true,"video-thumbnail":true,"Volleyball":true,"weather-widget":true,"Windsor":true,"World":true},"position":{"pattern":"^(?:[1-9]|[1-9][0-9]|[1-9][0-9]{2})$"},"value":{"off":true,"on":true,"manual-curation":true,"reverse-chronological":true,"trending":true,"topics":true}},"webviewapps":{"news-ios-app":true,"news-android-app":true,"sports-ios-app":true,"sports-android-app":true,"listen-ios-app":true,"listen-android-app":true}}}}',uri:"//www.cbc.ca/network/includes/stats/metadata-allowlist.json"}].forEach(function(e){CBC.APP.SC.FILE_STATUS.filePromises.push(getAndSetConstantsFile(e.windowPath,e.replaceObject,e.uri,e.errorMsgs))}),!function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}"function"!=typeof window.CustomEvent&&(e.prototype=window.Event.prototype,window.CustomEvent=e)}(),CBC.APP.SC.DEBUG=!1,s_account||""),ottTest=new RegExp(/^https?:\/\/(gem|watch).*/),s_cbc_sitecatalyst=(void 0!==window.CBC.APP.SC.masterSwitch.omniture?void 0!==window.CBC.APP.SC.masterSwitch.omniture.saccount&&(s_account=void 0!==window.CBC.APP.SC.masterSwitch.omniture.watch&&ottTest.test(document.location.href)?s_account||window.CBC.APP.SC.masterSwitch.omniture.watch:s_account||window.CBC.APP.SC.masterSwitch.omniture.saccount):s_account=(ottTest.test(document.location.href),s_account||"cbc-production"),window.s_gi(s_account)),__org_id__="951720B3535680CB0A490D45@AdobeOrg",__trackingServer__="metrics.cbc.ca",__trackingServerSecure__="smetrics.cbc.ca",e=function(){"use strict";function M(e){return(M="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}function e(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}function s(e,t,n){e=null==e?void 0:e[t];return void 0===e?n:e}function n(e,t){if(e===t)return 0;e=e.toString().split("."),t=t.toString().split(".");if(function(e){for(var t=/^\d+$/,n=0,r=e.length;n<r;n++)if(!t.test(e[n]))return;return 1}(e.concat(t))){for(var n=e,r=t;n.length<r.length;)n.push("0");for(;r.length<n.length;)r.push("0");for(var i=e,a=t,o=0;o<i.length;o++){var s=parseInt(i[o],10),c=parseInt(a[o],10);if(c<s)return 1;if(s<c)return-1}return 0}return NaN}function r(e){this.name=this.constructor.name,this.message=e,"function"==typeof Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error(e).stack}function t(){function t(e,t){e=I(e);return e.length?e.every(function(e){return!!t[e]}):B(t)}function r(){P(y),A(w),h(f.status,f.permissions),p.set(f.permissions,{optInCookieDomain:u,optInStorageExpiry:l}),_.execute(Ne)}function e(n){return function(e,t){if(D(e))return A(be),Object.assign(y,S(I(e),n)),t||r(),f;throw new Error("[OptIn] Invalid category(-ies). Please use the `OptIn.Categories` enum.")}}var n,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},a=i.doesOptInApply,o=i.previousPermissions,s=i.preOptInApprovals,c=i.isOptInStorageEnabled,u=i.optInCookieDomain,l=i.optInStorageExpiry,d=i.isIabContext,i=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).cookies,o=J(o),p=(z(o,"Invalid `previousPermissions`!"),z(s,"Invalid `preOptInApprovals`!"),function(e,t){var e=0<arguments.length&&void 0!==e?e:{},n=e.isEnabled,r=e.cookieName,i=(1<arguments.length&&void 0!==t?t:{}).cookies;return n&&r&&i?{remove:function(){i.remove(r)},get:function(){var e=i.get(r),t={};try{t=JSON.parse(e)}catch(e){t={}}return t},set:function(e,t){t=t||{},i.set(r,JSON.stringify(e),{domain:t.optInCookieDomain||"",cookieLifetime:t.optInStorageExpiry||3419e4,expires:!0})}}:{get:N,set:N,remove:N}}({isEnabled:!!c,cookieName:"adobeujs-optin"},{cookies:i})),f=this,h=O(f),_=b(),c=W(o),g=W(s),i=p.get(),m={},C=(o=i,k(c)||o&&k(o)?w:Pe),v=(o=g,c=c,i=i,n=S(T,!a),a?Object.assign({},n,o,c,i):n),y=L(v),A=function(e){return C=e},P=function(e){return v=e};f.deny=e(!1),f.approve=e(!0),f.denyAll=f.deny.bind(f,T),f.approveAll=f.approve.bind(f,T),f.isApproved=function(e){return t(e,f.permissions)},f.isPreApproved=function(e){return t(e,g)},f.fetchPermissions=function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=t?f.on(w,e):N;return!a||f.isComplete||s?e(f.permissions):t||_.add(Ne,function(){return e(f.permissions)}),n},f.complete=function(){f.status===be&&r()},f.registerPlugin=function(e){if(!e||!e.name||"function"!=typeof e.onRegister)throw new Error("[OptIn#registerPlugin] Plugin is invalid.");m[e.name]||(m[e.name]=e).onRegister.call(e,f)},f.execute=Q(m),Object.defineProperties(f,{permissions:{get:function(){return v}},status:{get:function(){return C}},Categories:{get:function(){return E}},doesOptInApply:{get:function(){return!!a}},isPending:{get:function(){return f.status===Pe}},isComplete:{get:function(){return f.status===w}},__plugins:{get:function(){return Object.keys(m)}},isIabContext:{get:function(){return d}}})}function u(e,t){var n;return void 0===t?e:(n=setTimeout(function(){n=null,e.call(e,new r("The call took longer than you wanted!"))},t),function(){n&&(clearTimeout(n),e.apply(e,arguments))})}function l(){if(window.__cmp)return window.__cmp;var i,a,e=window;if(e!==window.top){for(;!i;){e=e.parent;try{e.frames.__cmpLocator&&(i=e)}catch(e){}if(e===window.top)break}if(i)return a={},window.__cmp=function(e,t,n){var r=Math.random()+"",e={__cmpCall:{command:e,parameter:t,callId:r}};a[r]=n,i.postMessage(e,"*")},window.addEventListener("message",function(e){var t=e.data;if("string"==typeof t)try{t=JSON.parse(e.data)}catch(e){}t.__cmpReturn&&(t=t.__cmpReturn,a[t.callId])&&(a[t.callId](t.returnValue,t.success),delete a[t.callId])},!1),window.__cmp}g.error("__cmp not found")}var R="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};Object.assign=Object.assign||function(e){for(var t,n,r=1;r<arguments.length;++r)for(t in n=arguments[r])Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e};function v(a){function n(){}this.getMarketingCloudVisitorID=function(e){var t=this.findField(ae.MCMID,e=e||n),e=function(n,r){var i=this;return function(){var e=a(0,n),t={};return t[n]=e,i.setStateAndPublish(t),r(e),e}}.call(this,ae.MCMID,e);return void 0!==t?t:e()},this.getVisitorValues=function(t){this.getMarketingCloudVisitorID(function(e){t({MCMID:e})})}}function y(){function r(){}Object.keys(se).forEach(function(n){this[se[n]]=function(e){var t=this.findField(n,e=e||r),e=function(e,t){var n=this;return function(){return n.callbackRegistry.add(e,t),n.messageParent(oe.GETSTATE),""}}.call(this,n,e);return void 0!==t?t:e()}},this),Object.keys(ce).forEach(function(e){this[ce[e]]=function(){return this.findField(e,r)||{}}},this)}function A(){Object.keys(ue).forEach(function(t){this[ue[t]]=function(e){this.callbackRegistry.add(t,e)}},this)}function x(r,i){this.parse=function(e){try{var n={};return e.data.split("|").forEach(function(e,t){void 0!==e&&(n[pe[t]]=2!==t?e:JSON.parse(e))}),n}catch(e){}},this.isInvalid=function(e){var t,n=this.parse(e);return!n||Object.keys(n).length<2||(t=r!==n.orgID,e=!i||e.origin!==i,n=-1===Object.keys(de).indexOf(n.prefix),t)||e||n},this.send=function(e,t,n){t=t+"|"+r;n&&n===Object(n)&&(t+="|"+JSON.stringify(n));try{e.postMessage(t,i)}catch(e){}}}function P(e,t,n,r){function i(e){Object.assign(l,e)}function a(e){f.isInvalid(e)||(p=!1,e=f.parse(e),l.setStateAndPublish(e.state))}function o(e){!p&&d&&(p=!0,f.send(r,e))}function s(){i(new v(n._generateID)),l.getMarketingCloudVisitorID(),l.callbackRegistry.executeAll(l.state,!0),R.removeEventListener("message",c)}function c(e){f.isInvalid(e)||(e=f.parse(e),p=!1,R.clearTimeout(l._handshakeTimeout),R.removeEventListener("message",c),i(new y),R.addEventListener("message",a),l.setStateAndPublish(e.state),l.callbackRegistry.hasCallbacks()&&o(fe.GETSTATE))}function u(){Object.keys(n).forEach(function(e){0!==e.indexOf("_")&&"function"==typeof n[e]&&(l[e]=function(){})}),l.getSupplementalDataID=n.getSupplementalDataID,l.isAllowed=function(){return!0}}var l=this,d=t.whitelistParentDomain,p=(l.state={ALLFIELDS:{}},l.version=n.version,l.marketingCloudOrgID=e,l.cookieDomain=n.cookieDomain||"",!(l._instanceType="child")),f=new x(e,d);l.callbackRegistry=le(),l.init=function(){R.s_c_in||(R.s_c_il=[],R.s_c_in=0),l._c="Visitor",l._il=R.s_c_il,l._in=R.s_c_in,l._il[l._in]=l,R.s_c_in++,u(),i(new A),d&&postMessage?(R.addEventListener("message",c),o(fe.HANDSHAKE),l._handshakeTimeout=setTimeout(s,250)):s()},l.findField=function(e,t){if(void 0!==l.state[e])return t(l.state[e]),l.state[e]},l.messageParent=o,l.setStateAndPublish=function(e){Object.assign(l.state,e),Object.assign(l.state.ALLFIELDS,e),l.callbackRegistry.executeAll(l.state)}}function Y(a,i){function t(i){return function e(t){n=[],a._loading&&Object.keys(a._loading).forEach(function(e){a._loading[e]&&(e=ge[e],n.push(e))});var n,r=n.length?n:null;r?(r=_e[r[0]],a[r](e,!0)):i()}}function r(e,t){n={},Object.keys(he).forEach(function(e){var t=he[e],t=a[t]();U.isValueEmpty(t)||(n[e]=t)});var n,r=n;i.send(e,t,r)}function n(e){var t,n;t=e,n=a.setCustomerIDs,a.setCustomerIDs=function(e){n.call(a,e),i.send(t,h.PARENTSTATE,{CUSTOMERIDS:a.getCustomerIDs()})},r(e,h.HANDSHAKE)}return function(e){i.isInvalid(e)||(i.parse(e).prefix===h.HANDSHAKE?n:function(e){t(function(){r(e,h.PARENTSTATE)})()})(e.source)}}function H(i,a){var o={},s=0,c=Object.keys(i).length;Object.keys(i).forEach(function(e){var t,n,r=i[e];r.fn&&((t=r.args||[]).unshift((n=e,function(e){o[n]=e,++s===c&&a(o)})),r.fn.apply(r.context||null,t))})}function V(e){for(var t,n=(t=e=!e&&R.location?R.location.hostname:e).split("."),r=n.length-2;0<=r;r--)if(t=n.slice(r).join("."),F.set("test","cookie",{domain:t}))return F.remove("test",{domain:t}),t;return""}function q(e){var t,n,r="0123456789",i="",a="",o=8,s=10,c=10;if(1==e){for(r+="ABCDEF",t=0;t<16;t++)n=Math.floor(Math.random()*o),i+=r.substring(n,n+1),n=Math.floor(Math.random()*o),a+=r.substring(n,n+1),o=16;return i+"-"+a}for(t=0;t<19;t++)n=Math.floor(Math.random()*s),i+=r.substring(n,n+1),0===t&&9==n?s=3:((1==t||2==t)&&10!=s&&n<2||2<t)&&(s=10),n=Math.floor(Math.random()*c),a+=r.substring(n,n+1),0===t&&9==n?c=3:((1==t||2==t)&&10!=c&&n<2||2<t)&&(c=10);return i+a}function K(r,e){return{corsMetadata:(t="none",n=!0,"undefined"!=typeof XMLHttpRequest&&XMLHttpRequest===Object(XMLHttpRequest)&&("withCredentials"in new XMLHttpRequest?t="XMLHttpRequest":"undefined"!=typeof XDomainRequest&&XDomainRequest===Object(XDomainRequest)&&(n=!1),0<Object.prototype.toString.call(R.HTMLElement).indexOf("Constructor"))&&(n=!1),{corsType:t,corsCookiesEnabled:n}),getCORSInstance:function(){return"none"===this.corsMetadata.corsType?null:new R[this.corsMetadata.corsType]},fireCORS:function(a,e,t){var o=this;e&&(a.loadErrorHandler=e);try{var n=this.getCORSInstance();n.open("get",a.corsUrl+"&ts="+(new Date).getTime(),!0),"XMLHttpRequest"===this.corsMetadata.corsType&&(n.withCredentials=!0,n.timeout=r.loadTimeout,n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.onreadystatechange=function(){if(4===this.readyState&&200===this.status){var e,t=this.responseText;try{if((e=JSON.parse(t))!==Object(e))return void o.handleCORSError(a,null,"Response is not JSON")}catch(t){return void o.handleCORSError(a,t,"Error parsing response as JSON")}try{for(var n=a.callback,r=R,i=0;i<n.length;i++)r=r[n[i]];r(e)}catch(t){o.handleCORSError(a,t,"Error forming callback function")}}}),n.onerror=function(e){o.handleCORSError(a,e,"onerror")},n.ontimeout=function(e){o.handleCORSError(a,e,"ontimeout")},n.send(),r._log.requests.push(a.corsUrl)}catch(e){this.handleCORSError(a,e,"try-catch")}},handleCORSError:function(e,t,n){r.CORSErrors.push({corsData:e,error:t,description:n}),e.loadErrorHandler&&("ontimeout"===n?e.loadErrorHandler(!0):e.loadErrorHandler(!1))}};var t,n}function O(e){var i={};return e.on=function(e,t,n){if(!t||"function"!=typeof t)throw new Error("[ON] Callback should be a function.");i.hasOwnProperty(e)||(i[e]=[]);var r=i[e].push({callback:t,context:n})-1;return function(){i[e].splice(r,1),i[e].length||delete i[e]}},e.off=function(e,t){i.hasOwnProperty(e)&&(i[e]=i[e].filter(function(e){if(e.callback!==t)return e}))},e.publish=function(e){var t;i.hasOwnProperty(e)&&(t=[].slice.call(arguments,1),i[e].slice(0).forEach(function(e){e.callback.apply(e.context,t)}))},e.publish}function b(){var i={};return i.callbacks=Object.create(null),i.add=function(e,t){var n,r;if("function"==typeof(n=t)||n instanceof Array&&n.length)return i.callbacks[e]=i.callbacks[e]||[],r=i.callbacks[e].push(t)-1,function(){i.callbacks[e].splice(r,1)};throw new Error("[callbackRegistryFactory] Make sure callback is a function or an array of functions.")},i.execute=function(e,t){if(i.callbacks[e]){t=(t=void 0===t?[]:t)instanceof Array?t:[t];try{for(;i.callbacks[e].length;){var n=i.callbacks[e].shift();"function"==typeof n?n.apply(null,t):n instanceof Array&&n[1].apply(n[0],t)}delete i.callbacks[e]}catch(e){}}},i.executeAll=function(n,e){(e||n&&((e=n)!==Object(e)||0!==Object.keys(e).length))&&Object.keys(i.callbacks).forEach(function(e){var t=void 0!==n[e]?n[e]:"";i.execute(e,t)},i)},i.hasCallbacks=function(){return Boolean(Object.keys(i.callbacks).length)},i}function i(r,i,e){return e()?function(){if(Ee(r)){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console[r].apply(console,[i].concat(t))}}:we}function B(t){var e=Object.keys(t);return!!e.length&&e.every(function(e){return!0===t[e]})}function S(e,n){return e.reduce(function(e,t){return e[t]=n,e},{})}function L(e){return JSON.parse(JSON.stringify(e))}function W(e){if(De(e))return e;try{return JSON.parse(e)}catch(e){return{}}}function J(e){return m(e,"function")?e():e}function z(e,t){k(e)||g.error("".concat(t))}function X(e){return ke(e).filter(function(e,t,n){return n.indexOf(e)===t})}function Q(s){return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.command,n=e.params,n=void 0===n?{}:n,e=e.callback,e=void 0===e?N:e;if(!t||-1===t.indexOf("."))throw new Error("[OptIn.execute] Please provide a valid command.");try{var r=t.split("."),i=s[r[0]],a=r[1];if(!i||"function"!=typeof i[a])throw new Error("Make sure the plugin and API name exist.");var o=Object.assign(n,{callback:e});i[a].call(i,o)}catch(e){g.error("[execute] Something went wrong: "+e.message)}}}function $(e,t){return e="SHA-256"!==t&&"SHA256"!==t&&"sha256"!==t&&"sha-256"!==t?e:Oe(e)}function Z(e){return String(e).trim().toLowerCase()}function ee(r,n,e){function t(e){var r=e;return function(e){var t=e||A.location.href;try{var n=g._extractParamFromUri(t,r);if(n)return N.parsePipeDelimetedKeyValues(n)}catch(e){}}}function i(e){g._supplementalDataIDCurrent=(e=e||{}).supplementalDataIDCurrent||"",g._supplementalDataIDCurrentConsumed=e.supplementalDataIDCurrentConsumed||{},g._supplementalDataIDLast=e.supplementalDataIDLast||"",g._supplementalDataIDLastConsumed=e.supplementalDataIDLastConsumed||{}}function a(e){var e=e.reduce(function(e,t){var n,r=t[0],t=t[1];return e=null!=t&&t!==I?(n=(n=e)&&n+"|")+(r+"="+encodeURIComponent(t)):e},"");return(e=(e=e)&&e+"|")+"TS="+N.getTimestampInSeconds()}function c(){return g.configs.isIabContext?m.optIn.isApproved(m.optIn.Categories.ECID)&&v:m.optIn.isApproved(m.optIn.Categories.ECID)}function o(e,t){if(v=!0,e)throw new Error("[IAB plugin] : "+e);t.gdprApplies&&(C=t.consentString),g.init(),u()}function s(){m.optIn.isApproved(m.optIn.Categories.ECID)&&(g.configs.isIabContext?m.optIn.execute({command:"iabPlugin.fetchConsentData",callback:o}):(g.init(),u()))}function u(){m.optIn.off("complete",s)}if(!e||e.split("").reverse().join("")!==r)throw new Error("Please use `Visitor.getInstance` to instantiate Visitor.");function l(e){return!Object.prototype[e]}var h,d,p,f,_,g=this,m=window.adobe,C="",v=!1,y=!1,A=(g.version="4.4.0",R),P=A.Visitor,b=(P.version=g.version,P.AuthState=re,P.OptOut=ie,A.s_c_in||(A.s_c_il=[],A.s_c_in=0),g._c="Visitor",g._il=A.s_c_il,g._in=A.s_c_in,g._il[g._in]=g,A.s_c_in++,g._instanceType="regular",g._log={requests:[]},g.marketingCloudOrgID=r,g.cookieName="AMCV_"+r,g.sessionCookieName="AMCVS_"+r,g.cookieDomain=V(),g.loadSSL=0<=A.location.protocol.toLowerCase().indexOf("https"),g.loadTimeout=3e4,g.CORSErrors=[],g.marketingCloudServer=g.audienceManagerServer="dpm.demdex.net",g.sdidParamExpiry=30,null),S="MCMID",w="MCAID",E="AAM",T="MCAAMB",I="NONE",D=K(g),k=(g.FIELDS=ne,g.cookieRead=function(e){return F.get(e)},g.cookieWrite=function(e,t,n){var r=g.cookieLifetime?(""+g.cookieLifetime).toUpperCase():"",i=!1;return g.configs&&g.configs.secureCookie&&"https:"===location.protocol&&(i=!0),F.set(e,""+t,{expires:n,domain:g.cookieDomain,cookieLifetime:r,secure:i})},g.resetState=function(e){e?g._mergeServerState(e):i()},g._isAllowedDone=!1,g._isAllowedFlag=!1,g.isAllowed=function(){return!g._isAllowedDone&&(g._isAllowedDone=!0,g.cookieRead(g.cookieName)||g.cookieWrite(g.cookieName,"T",1))&&(g._isAllowedFlag=!0),"T"===g.cookieRead(g.cookieName)&&g._helpers.removeCookie(g.cookieName),g._isAllowedFlag},g.setMarketingCloudVisitorID=function(e){g._setMarketingCloudFields(e)},g._use1stPartyMarketingCloudServer=!1,g.getMarketingCloudVisitorID=function(e,t){g.marketingCloudServer&&g.marketingCloudServer.indexOf(".demdex.net")<0&&(g._use1stPartyMarketingCloudServer=!0);var n=g._getAudienceManagerURLData("_setMarketingCloudFields"),r=n.url;return g._getRemoteField(S,r,e,t,n)},g.getVisitorValues=function(e,t){var n={MCMID:{fn:g.getMarketingCloudVisitorID,args:[!0],context:g},MCOPTOUT:{fn:g.isOptedOut,args:[void 0,!0],context:g},MCAID:{fn:g.getAnalyticsVisitorID,args:[!0],context:g},MCAAMLH:{fn:g.getAudienceManagerLocationHint,args:[!0],context:g},MCAAMB:{fn:g.getAudienceManagerBlob,args:[!0],context:g}},t=t&&t.length?U.pluck(n,t):n;H(t,e)},g._currentCustomerIDs={},g._customerIDsHashChanged=!1,g._newCustomerIDsHash="",g.setCustomerIDs=function(e,t){if(!g.isOptedOut()&&e){if(!U.isObject(e)||U.isObjectEmpty(e))return!1;var n,r,i;for(n in g._readVisitor(),e)if(l(n)&&(r=e[n],t=r.hasOwnProperty("hashType")?r.hashType:t,r))if("object"===M(r)){var a={};if(r.id){if(t){if(!(i=$(Z(r.id),t)))return;r.id=i,a.hashType=t}a.id=r.id}null!=r.authState&&(a.authState=r.authState),g._currentCustomerIDs[n]=a}else if(t){if(!(i=$(Z(r),t)))return;g._currentCustomerIDs[n]={id:i,hashType:t}}else g._currentCustomerIDs[n]={id:r};var o=g.getCustomerIDs(),s="",c=(c=g._getField("MCCIDH"))||0;for(n in o)l(n)&&(r=o[n],s+=(s?"|":"")+n+"|"+(r.id||"")+(r.authState||""));g._newCustomerIDsHash=String(g._hash(s)),g._newCustomerIDsHash!==c&&(g._customerIDsHashChanged=!0,g._mapCustomerIDs(function(){g._customerIDsHashChanged=!1}))}},g.getCustomerIDs=function(){g._readVisitor();var e,t,n={};for(e in g._currentCustomerIDs)l(e)&&(t=g._currentCustomerIDs[e],n[e]||(n[e]={}),t.id&&(n[e].id=t.id),null!=t.authState?n[e].authState=t.authState:n[e].authState=P.AuthState.UNKNOWN,t.hashType)&&(n[e].hashType=t.hashType);return n},g.setAnalyticsVisitorID=function(e){g._setAnalyticsFields(e)},g.getAnalyticsVisitorID=function(t,e,n){var r,i,a,o,s;return N.isTrackingServerPopulated()||n?(a="",(a=n?a:g.getMarketingCloudVisitorID(function(e){g.getAnalyticsVisitorID(t,!0)}))||n?(i=n?g.marketingCloudServer:g.trackingServer,s="",g.loadSSL&&(n?g.marketingCloudServerSecure&&(i=g.marketingCloudServerSecure):g.trackingServerSecure&&(i=g.trackingServerSecure)),r={},i&&(i="http"+(g.loadSSL?"s":"")+"://"+i+"/id",a="d_visid_ver="+g.version+"&mcorgid="+encodeURIComponent(g.marketingCloudOrgID)+(a?"&mid="+encodeURIComponent(a):"")+(g.idSyncDisable3rdPartySyncing||g.disableThirdPartyCookies?"&d_coppa=true":""),o=["s_c_il",g._in,"_set"+(n?"MarketingCloud":"Analytics")+"Fields"],s=i+"?"+a+"&callback=s_c_il%5B"+g._in+"%5D._set"+(n?"MarketingCloud":"Analytics")+"Fields",r.corsUrl=i+"?"+a,r.callback=o),r.url=s,g._getRemoteField(n?S:w,s,t,e,r)):""):(g._callCallback(t,[""]),"")},g.getAudienceManagerLocationHint=function(t,e){if(g.getMarketingCloudVisitorID(function(e){g.getAudienceManagerLocationHint(t,!0)})){var n,r=g._getField(w);if((r=!r&&N.isTrackingServerPopulated()?g.getAnalyticsVisitorID(function(e){g.getAudienceManagerLocationHint(t,!0)}):r)||!N.isTrackingServerPopulated())return n=(r=g._getAudienceManagerURLData()).url,g._getRemoteField("MCAAMLH",n,t,e,r)}return""},g.getLocationHint=g.getAudienceManagerLocationHint,g.getAudienceManagerBlob=function(t,e){if(g.getMarketingCloudVisitorID(function(e){g.getAudienceManagerBlob(t,!0)})){var n,r=g._getField(w);if((r=!r&&N.isTrackingServerPopulated()?g.getAnalyticsVisitorID(function(e){g.getAudienceManagerBlob(t,!0)}):r)||!N.isTrackingServerPopulated())return n=(r=g._getAudienceManagerURLData()).url,g._customerIDsHashChanged&&g._setFieldExpire(T,-1),g._getRemoteField(T,n,t,e,r)}return""},g._supplementalDataIDCurrent="",g._supplementalDataIDCurrentConsumed={},g._supplementalDataIDLast="",g._supplementalDataIDLastConsumed={},!(g.getSupplementalDataID=function(e,t){g._supplementalDataIDCurrent||t||(g._supplementalDataIDCurrent=g._generateID(1));var n=g._supplementalDataIDCurrent;return g._supplementalDataIDLast&&!g._supplementalDataIDLastConsumed[e]?(n=g._supplementalDataIDLast,g._supplementalDataIDLastConsumed[e]=!0):n&&(g._supplementalDataIDCurrentConsumed[e]&&(g._supplementalDataIDLast=g._supplementalDataIDCurrent,g._supplementalDataIDLastConsumed=g._supplementalDataIDCurrentConsumed,g._supplementalDataIDCurrent=n=t?"":g._generateID(1),g._supplementalDataIDCurrentConsumed={}),n)&&(g._supplementalDataIDCurrentConsumed[e]=!0),n})),N=(g._liberatedOptOut=null,g.getOptOut=function(e,t){var n=g._getAudienceManagerURLData("_setMarketingCloudFields"),r=n.url;return c()?g._getRemoteField("MCOPTOUT",r,e,t,n):(g._registerCallback("liberatedOptOut",e),null!==g._liberatedOptOut?(g._callAllCallbacks("liberatedOptOut",[g._liberatedOptOut]),k=!1,g._liberatedOptOut):(k||(k=!0,r="liberatedGetOptOut",n.corsUrl=n.corsUrl.replace(/dpm\.demdex\.net\/id\?/,"dpm.demdex.net/optOutStatus?"),n.callback=[r],R[r]=function(e){var t;e===Object(e)&&(t=(e=U.parseOptOut(e,t,I)).optOut,e=1e3*e.d_ottl,g._liberatedOptOut=t,setTimeout(function(){g._liberatedOptOut=null},e)),g._callAllCallbacks("liberatedOptOut",[t]),k=!1},D.fireCORS(n)),null))},g.isOptedOut=function(t,n,e){n=n||P.OptOut.GLOBAL;e=g.getOptOut(function(e){e=e===P.OptOut.GLOBAL||0<=e.indexOf(n);g._callCallback(t,[e])},e);return e?e===P.OptOut.GLOBAL||0<=e.indexOf(n):null},g._fields=null,g._fieldsExpired=null,g._hash=function(e){var t,n=0;if(e)for(t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n&=n;return n},g._generateID=q,g._generateLocalMID=function(){var e=g._generateID(0);return B.isClientSideMarketingCloudVisitorID=!0,e},g._callbackList=null,g._callCallback=function(e,t){try{"function"==typeof e?e.apply(A,t):e[1].apply(e[0],t)}catch(e){}},g._registerCallback=function(e,t){t&&(null==g._callbackList&&(g._callbackList={}),null==g._callbackList[e]&&(g._callbackList[e]=[]),g._callbackList[e].push(t))},g._callAllCallbacks=function(e,t){if(null!=g._callbackList){var n=g._callbackList[e];if(n)for(;0<n.length;)g._callCallback(n.shift(),t)}},g._addQuerystringParam=function(e,t,n,r){var i,t=encodeURIComponent(t)+"="+encodeURIComponent(n),n=N.parseHash(e),e=N.hashlessUrl(e);return-1===e.indexOf("?")?e+"?"+t+n:(i=(e=e.split("?"))[0]+"?",e=e[1],i+N.addQueryParamAtLocation(e,t,r)+n)},g._extractParamFromUri=function(e,t){t=new RegExp("[\\?&#]"+t+"=([^&#]*)").exec(e);if(t&&t.length)return decodeURIComponent(t[1])},g._parseAdobeMcFromUrl=t(G.ADOBE_MC),g._parseAdobeMcSdidFromUrl=t(G.ADOBE_MC_SDID),g._attemptToPopulateSdidFromUrl=function(e){var e=g._parseAdobeMcSdidFromUrl(e),t=1e9;e&&e.TS&&(t=N.getTimestampInSeconds()-e.TS),e&&e.SDID&&e.MCORGID===r&&t<g.sdidParamExpiry&&(g._supplementalDataIDCurrent=e.SDID,g._supplementalDataIDCurrentConsumed.SDID_URL_PARAM=!0)},g._attemptToPopulateIdsFromUrl=function(){var e,t=g._parseAdobeMcFromUrl();function n(e,t,n){e&&e.match(G.VALID_VISITOR_ID_REGEX)&&(n===S&&(y=!0),t(e))}t&&t.TS&&(e=N.getTimestampInSeconds()-t.TS,Math.floor(e/60)>G.ADOBE_MC_TTL_IN_MIN||t.MCORGID!==r||(n((e=t)[S],g.setMarketingCloudVisitorID,S),g._setFieldExpire(T,-1),n(e[w],g.setAnalyticsVisitorID)))},g._mergeServerState=function(e){if(e)try{var t;r=e,(e=N.isObject(r)?r:JSON.parse(r))[g.marketingCloudOrgID]&&(t=e[g.marketingCloudOrgID],n=t.customerIDs,N.isObject(n)&&g.setCustomerIDs(n),i(t.sdid))}catch(e){throw new Error("`serverState` has an invalid format.")}var n,r},g._timeout=null,g._loadData=function(e,t,n,r){t=g._addQuerystringParam(t,"d_fieldgroup",e,1),r.url=g._addQuerystringParam(r.url,"d_fieldgroup",e,1),r.corsUrl=g._addQuerystringParam(r.corsUrl,"d_fieldgroup",e,1),B.fieldGroupObj[e]=!0,r===Object(r)&&r.corsUrl&&"XMLHttpRequest"===D.corsMetadata.corsType&&D.fireCORS(r,n,e)},g._clearTimeout=function(e){null!=g._timeout&&g._timeout[e]&&(clearTimeout(g._timeout[e]),g._timeout[e]=0)},g._settingsDigest=0,g._getSettingsDigest=function(){var e;return g._settingsDigest||(e=g.version,g.audienceManagerServer&&(e+="|"+g.audienceManagerServer),g.audienceManagerServerSecure&&(e+="|"+g.audienceManagerServerSecure),g._settingsDigest=g._hash(e)),g._settingsDigest},g._readVisitorDone=!1,g._readVisitor=function(){if(!g._readVisitorDone){g._readVisitorDone=!0;var e,t,n,r,i,a=g._getSettingsDigest(),o=!1,s=g.cookieRead(g.cookieName),c=new Date;if(s||y||g.discardTrackingServerECID||(s=g.cookieRead(G.FIRST_PARTY_SERVER_COOKIE)),null==g._fields&&(g._fields={}),s&&"T"!==s)for((s=s.split("|"))[0].match(/^[\-0-9]+$/)&&(parseInt(s[0],10)!==a&&(o=!0),s.shift()),s.length%2==1&&s.pop(),e=0;e<s.length;e+=2)t=(i=s[e].split("-"))[0],n=s[e+1],i=1<i.length?(r=parseInt(i[1],10),0<i[1].indexOf("s")):(r=0,!1),o&&("MCCIDH"===t&&(n=""),0<r)&&(r=c.getTime()/1e3-60),t&&n&&(g._setField(t,n,1),0<r)&&(g._fields["expire"+t]=r+(i?"s":""),c.getTime()>=1e3*r||i&&!g.cookieRead(g.sessionCookieName))&&(g._fieldsExpired||(g._fieldsExpired={}),g._fieldsExpired[t]=!0);!g._getField(w)&&N.isTrackingServerPopulated()&&(s=g.cookieRead("s_vi"))&&1<(s=s.split("|")).length&&0<=s[0].indexOf("v1")&&(n=0<=(e=(n=s[1]).indexOf("["))?n.substring(0,e):n)&&n.match(G.VALID_VISITOR_ID_REGEX)&&g._setField(w,n)}},g._appendVersionTo=function(e){var t="vVersion|"+g.version,n=e?g._getCookieVersion(e):null;return n?Ce(n,g.version)&&(e=e.replace(G.VERSION_REGEX,t)):e+=(e?"|":"")+t,e},g._writeVisitor=function(){var e,t,n=g._getSettingsDigest();for(e in g._fields)l(e)&&g._fields[e]&&"expire"!==e.substring(0,6)&&(t=g._fields[e],n+=(n?"|":"")+e+(g._fields["expire"+e]?"-"+g._fields["expire"+e]:"")+"|"+t);n=g._appendVersionTo(n),g.cookieWrite(g.cookieName,n,1)},g._getField=function(e,t){return null==g._fields||!t&&g._fieldsExpired&&g._fieldsExpired[e]?null:g._fields[e]},g._setField=function(e,t,n){null==g._fields&&(g._fields={}),g._fields[e]=t,n||g._writeVisitor()},g._getFieldList=function(e,t){e=g._getField(e,t);return e?e.split("*"):null},g._setFieldList=function(e,t,n){g._setField(e,t?t.join("*"):"",n)},g._getFieldMap=function(e,t){var n=g._getFieldList(e,t);if(n){for(var r={},i=0;i<n.length;i+=2)r[n[i]]=n[i+1];return r}return null},g._setFieldMap=function(e,t,n){var r,i=null;if(t)for(r in i=[],t)l(r)&&(i.push(r),i.push(t[r]));g._setFieldList(e,i,n)},g._setFieldExpire=function(e,t,n){var r=new Date;r.setTime(r.getTime()+1e3*t),null==g._fields&&(g._fields={}),g._fields["expire"+e]=Math.floor(r.getTime()/1e3)+(n?"s":""),t<0?(g._fieldsExpired||(g._fieldsExpired={}),g._fieldsExpired[e]=!0):g._fieldsExpired&&(g._fieldsExpired[e]=!1),n&&!g.cookieRead(g.sessionCookieName)&&g.cookieWrite(g.sessionCookieName,"1")},g._findVisitorID=function(e){return e&&((e=(e="object"===M(e)?e.d_mid||e.visitorID||e.id||e.uuid||""+e:e)&&"NOTARGET"===(e=e.toUpperCase())?I:e)&&(e===I||e.match(G.VALID_VISITOR_ID_REGEX))||(e="")),e},g._setFields=function(e,t){if(g._clearTimeout(e),null!=g._loading&&(g._loading[e]=!1),B.fieldGroupObj[e]&&B.setState(e,!1),"MC"===e){!0!==B.isClientSideMarketingCloudVisitorID&&(B.isClientSideMarketingCloudVisitorID=!1);var n=g._getField(S);if(!n||g.overwriteCrossDomainMCIDAndAID){if(!(n="object"===M(t)&&t.mid?t.mid:g._findVisitorID(t))){if(g._use1stPartyMarketingCloudServer&&!g.tried1stPartyMarketingCloudServer)return g.tried1stPartyMarketingCloudServer=!0,void g.getAnalyticsVisitorID(null,!1,!0);n=g._generateLocalMID()}g._setField(S,n)}n&&n!==I||(n=""),"object"===M(t)&&((t.d_region||t.dcs_region||t.d_blob||t.blob)&&g._setFields(E,t),g._use1stPartyMarketingCloudServer)&&t.mid&&g._setFields("A",{id:t.id}),g._callAllCallbacks(S,[n])}var r,i;e===E&&"object"===M(t)&&(n=604800,null!=t.id_sync_ttl&&t.id_sync_ttl&&(n=parseInt(t.id_sync_ttl,10)),r=O.getRegionAndCheckIfChanged(t,n),g._callAllCallbacks("MCAAMLH",[r]),r=g._getField(T),(t.d_blob||t.blob)&&(r=(r=t.d_blob)||t.blob,g._setFieldExpire(T,n),g._setField(T,r)),g._callAllCallbacks(T,[r=r||""]),!t.error_msg)&&g._newCustomerIDsHash&&g._setField("MCCIDH",g._newCustomerIDsHash),"A"===e&&((n=g._getField(w))&&!g.overwriteCrossDomainMCIDAndAID||((n=g._findVisitorID(t))?n!==I&&g._setFieldExpire(T,-1):n=I,g._setField(w,n)),g._callAllCallbacks(w,[n=n&&n!==I?n:""])),g.idSyncDisableSyncs||g.disableIdSyncs?O.idCallNotProcesssed=!0:(O.idCallNotProcesssed=!1,(r={}).ibs=t.ibs,r.subdomain=t.subdomain,O.processIDCallData(r)),t===Object(t)&&(c()&&g.isAllowed()&&(i=g._getField("MCOPTOUT")),i=(e=U.parseOptOut(t,i,I)).optOut,n=e.d_ottl,g._setFieldExpire("MCOPTOUT",n,!0),g._setField("MCOPTOUT",i),g._callAllCallbacks("MCOPTOUT",[i]))},g._loading=null,g._getRemoteField=function(t,e,n,r,i){var a,o="",s=N.isFirstPartyAnalyticsVisitorIDCall(t);if(c()&&g.isAllowed())if(g._readVisitor(),!(!(o=g._getField(t,!0==={MCAAMLH:!0,MCAAMB:!0}[t]))||g._fieldsExpired&&g._fieldsExpired[t])||g.disableThirdPartyCalls&&!s)o||(t===S?(g._registerCallback(t,n),o=g._generateLocalMID(),g.setMarketingCloudVisitorID(o)):t===w?(g._registerCallback(t,n),o="",g.setAnalyticsVisitorID(o)):r=!(o=""));else if(t===S||"MCOPTOUT"===t?a="MC":"MCAAMLH"===t||t===T?a=E:t===w&&(a="A"),a)return!e||null!=g._loading&&g._loading[a]||(null==g._loading&&(g._loading={}),g._loading[a]=!0,g._loadData(a,e,function(e){g._getField(t)||(e&&B.setState(a,!0),e="",t===S?e=g._generateLocalMID():a===E&&(e={error_msg:"timeout"}),g._setFields(a,e))},i)),g._registerCallback(t,n),o||(e||g._setFields(a,{id:I}),"");return t!==S&&t!==w||o!==I||(r=!(o="")),n&&r&&g._callCallback(n,[o]),o},g._setMarketingCloudFields=function(e){g._readVisitor(),g._setFields("MC",e)},g._mapCustomerIDs=function(e){g.getAudienceManagerBlob(e,!0)},g._setAnalyticsFields=function(e){g._readVisitor(),g._setFields("A",e)},g._setAudienceManagerFields=function(e){g._readVisitor(),g._setFields(E,e)},g._getAudienceManagerURLData=function(e){var t=g.audienceManagerServer,n="",r=g._getField(S),i=g._getField(T,!0),a=g._getField(w),o=a&&a!==I?"&d_cid_ic=AVID%01"+encodeURIComponent(a):"";if(t=g.loadSSL&&g.audienceManagerServerSecure?g.audienceManagerServerSecure:t){var s,c,u=g.getCustomerIDs();if(u)for(s in u)l(s)&&(c=u[s],o+="&d_cid_ic="+encodeURIComponent(s)+"%01"+encodeURIComponent(c.id||"")+(c.authState?"%01"+c.authState:""));e=e||"_setAudienceManagerFields";a="http"+(g.loadSSL?"s":"")+"://"+t+"/id",t="d_visid_ver="+g.version+(C&&-1!==a.indexOf("demdex.net")?"&gdpr=1&gdpr_force=1&gdpr_consent="+C:"")+"&d_rtbd=json&d_ver=2"+(!r&&g._use1stPartyMarketingCloudServer?"&d_verify=1":"")+"&d_orgid="+encodeURIComponent(g.marketingCloudOrgID)+"&d_nsid="+(g.idSyncContainerID||0)+(r?"&d_mid="+encodeURIComponent(r):"")+(g.idSyncDisable3rdPartySyncing||g.disableThirdPartyCookies?"&d_coppa=true":"")+(!0===b?"&d_coop_safe=1":!1===b?"&d_coop_unsafe=1":"")+(i?"&d_blob="+encodeURIComponent(i):"")+o,r=["s_c_il",g._in,e];return{url:n=a+"?"+t+"&d_cb=s_c_il%5B"+g._in+"%5D."+e,corsUrl:a+"?"+t,callback:r}}return{url:n}},g.appendVisitorIDsTo=function(e){try{var t=[[S,g._getField(S)],[w,g._getField(w)],["MCORGID",g.marketingCloudOrgID]];return g._addQuerystringParam(e,G.ADOBE_MC,a(t))}catch(t){return e}},g.appendSupplementalDataIDTo=function(e,t){if(!(t=t||g.getSupplementalDataID(N.generateRandomString(),!0)))return e;try{var n=a([["SDID",t],["MCORGID",g.marketingCloudOrgID]]);return g._addQuerystringParam(e,G.ADOBE_MC_SDID,n)}catch(t){return e}},{parseHash:function(e){var t=e.indexOf("#");return 0<t?e.substr(t):""},hashlessUrl:function(e){var t=e.indexOf("#");return 0<t?e.substr(0,t):e},addQueryParamAtLocation:function(e,t,n){e=e.split("&");return n=null!=n?n:e.length,e.splice(n,0,t),e.join("&")},isFirstPartyAnalyticsVisitorIDCall:function(e,t,n){return e===w&&(t=t||g.trackingServer,n=n||g.trackingServerSecure,!("string"!=typeof(e=g.loadSSL?n:t)||!e.length))&&e.indexOf("2o7.net")<0&&e.indexOf("omtrdc.net")<0},isObject:function(e){return Boolean(e&&e===Object(e))},removeCookie:function(e){F.remove(e,{domain:g.cookieDomain})},isTrackingServerPopulated:function(){return!!g.trackingServer||!!g.trackingServerSecure},getTimestampInSeconds:function(){return Math.round((new Date).getTime()/1e3)},parsePipeDelimetedKeyValues:function(e){return e.split("|").reduce(function(e,t){t=t.split("=");return e[t[0]]=decodeURIComponent(t[1]),e},{})},generateRandomString:function(e){e=e||5;for(var t="",n="abcdefghijklmnopqrstuvwxyz0123456789";e--;)t+=n[Math.floor(Math.random()*n.length)];return t},normalizeBoolean:function(e){return"true"===e||"false"!==e&&e},parseBoolean:function(e){return"true"===e||"false"!==e&&null},replaceMethodsWithFunction:function(e,t){for(var n in e)e.hasOwnProperty(n)&&"function"==typeof e[n]&&(e[n]=t);return e}}),O=(g._helpers=N,h=g,d=P,p=R.document,{THROTTLE_START:3e4,MAX_SYNCS_LENGTH:649,throttleTimerSet:!1,id:null,onPagePixels:[],iframeHost:null,getIframeHost:function(e){if("string"==typeof e)return(e=e.split("/"))[0]+"//"+e[2]},subdomain:null,url:null,getUrl:function(){var e="http://fast.",t="?d_nsid="+h.idSyncContainerID+"#"+encodeURIComponent(p.location.origin);return this.subdomain||(this.subdomain="nosubdomainreturned"),e=(e=h.loadSSL?h.idSyncSSLUseAkamai?"https://fast.":"https://":e)+this.subdomain+".demdex.net/dest5.html"+t,this.iframeHost=this.getIframeHost(e),this.id="destination_publishing_iframe_"+this.subdomain+"_"+h.idSyncContainerID,e},checkDPIframeSrc:function(){var e="?d_nsid="+h.idSyncContainerID+"#"+encodeURIComponent(p.location.href);"string"==typeof h.dpIframeSrc&&h.dpIframeSrc.length&&(this.id="destination_publishing_iframe_"+(h._subdomain||this.subdomain||(new Date).getTime())+"_"+h.idSyncContainerID,this.iframeHost=this.getIframeHost(h.dpIframeSrc),this.url=h.dpIframeSrc+e)},idCallNotProcesssed:null,doAttachIframe:!1,startedAttachingIframe:!1,iframeHasLoaded:null,iframeIdChanged:null,newIframeCreated:null,originalIframeHasLoadedAlready:null,iframeLoadedCallbacks:[],regionChanged:!1,timesRegionChanged:0,sendingMessages:!1,messages:[],messagesPosted:[],messagesReceived:[],messageSendingInterval:G.POST_MESSAGE_ENABLED?null:100,onPageDestinationsFired:[],jsonForComparison:[],jsonDuplicates:[],jsonWaiting:[],jsonProcessed:[],canSetThirdPartyCookies:!0,receivedThirdPartyCookiesNotification:!1,readyToAttachIframePreliminary:function(){return!(h.idSyncDisableSyncs||h.disableIdSyncs||h.idSyncDisable3rdPartySyncing||h.disableThirdPartyCookies||h.disableThirdPartyCalls)},readyToAttachIframe:function(){return this.readyToAttachIframePreliminary()&&(this.doAttachIframe||h._doAttachIframe)&&(this.subdomain&&"nosubdomainreturned"!==this.subdomain||h._subdomain)&&this.url&&!this.startedAttachingIframe},attachIframe:function(){function e(){(r=p.createElement("iframe")).sandbox="allow-scripts allow-same-origin",r.title="Adobe ID Syncing iFrame",r.id=n.id,r.name=n.id+"_name",r.style.cssText="display: none; width: 0; height: 0;",r.src=n.url,n.newIframeCreated=!0,t(),p.body.appendChild(r)}function t(e){r.addEventListener("load",function(){r.className="aamIframeLoaded",n.iframeHasLoaded=!0,n.fireIframeLoadedCallbacks(e),n.requestToProcess()})}this.startedAttachingIframe=!0;var n=this,r=p.getElementById(this.id);r?"IFRAME"!==r.nodeName?(this.id+="_2",this.iframeIdChanged=!0,e()):(this.newIframeCreated=!1,"aamIframeLoaded"!==r.className?(this.originalIframeHasLoadedAlready=!1,t("The destination publishing iframe already exists from a different library, but hadn't loaded yet.")):(this.originalIframeHasLoadedAlready=!0,this.iframeHasLoaded=!0,this.iframe=r,this.fireIframeLoadedCallbacks("The destination publishing iframe already exists from a different library, and had loaded alresady."),this.requestToProcess())):e(),this.iframe=r},fireIframeLoadedCallbacks:function(t){this.iframeLoadedCallbacks.forEach(function(e){"function"==typeof e&&e({message:t||"The destination publishing iframe was attached and loaded successfully."})}),this.iframeLoadedCallbacks=[]},requestToProcess:function(e){function t(){i.jsonForComparison.push(e),i.jsonWaiting.push(e),i.processSyncOnPage(e)}var n,r,i=this;if(e===Object(e)&&e.ibs)if(n=JSON.stringify(e.ibs||[]),this.jsonForComparison.length){for(var a,o=!1,s=0,c=this.jsonForComparison.length;s<c;s++)if(a=this.jsonForComparison[s],n===JSON.stringify(a.ibs||[])){o=!0;break}o?this.jsonDuplicates.push(e):t()}else t();(this.receivedThirdPartyCookiesNotification||!G.POST_MESSAGE_ENABLED||this.iframeHasLoaded)&&this.jsonWaiting.length&&(r=this.jsonWaiting.shift(),this.process(r),this.requestToProcess()),h.idSyncDisableSyncs||h.disableIdSyncs||!this.iframeHasLoaded||!this.messages.length||this.sendingMessages||(this.throttleTimerSet||(this.throttleTimerSet=!0,setTimeout(function(){i.messageSendingInterval=G.POST_MESSAGE_ENABLED?null:150},this.THROTTLE_START)),this.sendingMessages=!0,this.sendMessages())},getRegionAndCheckIfChanged:function(e,t){var n=h._getField("MCAAMLH"),e=e.d_region||e.dcs_region;return n?e&&(h._setFieldExpire("MCAAMLH",t),h._setField("MCAAMLH",e),parseInt(n,10)!==e)&&(this.regionChanged=!0,this.timesRegionChanged++,h._setField("MCSYNCSOP",""),h._setField("MCSYNCS",""),n=e):(n=e)&&(h._setFieldExpire("MCAAMLH",t),h._setField("MCAAMLH",n)),n=n||""},processSyncOnPage:function(e){var t,n,r,i;if((t=e.ibs)&&t instanceof Array&&(n=t.length))for(r=0;r<n;r++)(i=t[r]).syncOnPage&&this.checkFirstPartyCookie(i,"","syncOnPage")},process:function(e){var t,n,r,i,a,o=encodeURIComponent,s=!1;if((t=e.ibs)&&t instanceof Array&&(n=t.length))for(s=!0,r=0;r<n;r++)i=t[r],a=[o("ibs"),o(i.id||""),o(i.tag||""),U.encodeAndBuildRequest(i.url||[],","),o(i.ttl||""),"","",i.fireURLSync?"true":"false"],i.syncOnPage||(this.canSetThirdPartyCookies?this.addMessage(a.join("|")):i.fireURLSync&&this.checkFirstPartyCookie(i,a.join("|")));s&&this.jsonProcessed.push(e)},checkFirstPartyCookie:function(e,t,n){var n="syncOnPage"===n,r=n?"MCSYNCSOP":"MCSYNCS";h._readVisitor();var i,a,o=h._getField(r),s=Math.ceil((new Date).getTime()/G.MILLIS_PER_DAY);o?(i=o.split("*"),a=(o=this.pruneSyncData(i,e.id,s)).dataPresent,o=o.dataValid,a&&o||this.fireSync(n,e,t,i,r,s)):this.fireSync(n,e,t,i=[],r,s)},pruneSyncData:function(e,t,n){for(var r,i,a=!1,o=!1,s=0;s<e.length;s++)r=e[s],i=parseInt(r.split("-")[1],10),r.match("^"+t+"-")?(a=!0,n<i?o=!0:(e.splice(s,1),s--)):i<=n&&(e.splice(s,1),s--);return{dataPresent:a,dataValid:o}},manageSyncsSize:function(e){if(e.join("*").length>this.MAX_SYNCS_LENGTH)for(e.sort(function(e,t){return parseInt(e.split("-")[1],10)-parseInt(t.split("-")[1],10)});e.join("*").length>this.MAX_SYNCS_LENGTH;)e.shift()},fireSync:function(e,t,n,r,l,i){var d=this;if(e){if("img"===t.tag)for(var a=t.url,o=h.loadSSL?"https:":"http:",s=0,c=a.length;s<c;s++){var u=a[s],p=/^\/\//.test(u),f=new Image;f.addEventListener("load",function(o,s,c,u){return function(){d.onPagePixels[o]=null,h._readVisitor();var e=h._getField(l),t=[];if(e)for(var n,r,i=0,a=(r=e.split("*")).length;i<a;i++)(n=r[i]).match("^"+s.id+"-")||t.push(n);d.setSyncTrackingData(t,s,c,u)}}(this.onPagePixels.length,t,l,i)),f.src=(p?o:"")+u,this.onPagePixels.push(f)}}else this.addMessage(n),this.setSyncTrackingData(r,t,l,i)},addMessage:function(e){var t=encodeURIComponent(h._enableErrorReporting?"---destpub-debug---":"---destpub---");this.messages.push((G.POST_MESSAGE_ENABLED?"":t)+e)},setSyncTrackingData:function(e,t,n,r){e.push(t.id+"-"+(r+Math.ceil(t.ttl/60/24))),this.manageSyncsSize(e),h._setField(n,e.join("*"))},sendMessages:function(){var e,t=this,n="",r=encodeURIComponent;this.regionChanged&&(n=r("---destpub-clear-dextp---"),this.regionChanged=!1),this.messages.length?G.POST_MESSAGE_ENABLED?(e=n+r("---destpub-combined---")+this.messages.join("%01"),this.postMessage(e),this.messages=[],this.sendingMessages=!1):(e=this.messages.shift(),this.postMessage(n+e),setTimeout(function(){t.sendMessages()},this.messageSendingInterval)):this.sendingMessages=!1},postMessage:function(e){j.postMessage(e,this.url,this.iframe.contentWindow),this.messagesPosted.push(e)},receiveMessage:function(e){var t=/^---destpub-to-parent---/;"string"==typeof e&&t.test(e)&&("canSetThirdPartyCookies"===(t=e.replace(t,"").split("|"))[0]&&(this.canSetThirdPartyCookies="true"===t[1],this.receivedThirdPartyCookiesNotification=!0,this.requestToProcess()),this.messagesReceived.push(e))},processIDCallData:function(e){(null==this.url||e.subdomain&&"nosubdomainreturned"===this.subdomain)&&("string"==typeof h._subdomain&&h._subdomain.length?this.subdomain=h._subdomain:this.subdomain=e.subdomain||"",this.url=this.getUrl()),e.ibs instanceof Array&&e.ibs.length&&(this.doAttachIframe=!0),this.readyToAttachIframe()&&(h.idSyncAttachIframeOnWindowLoad?!d.windowLoaded&&"complete"!==p.readyState&&"loaded"!==p.readyState||this.attachIframe():this.attachIframeASAP()),"function"==typeof h.idSyncIDCallResult?h.idSyncIDCallResult(e):this.requestToProcess(e),"function"==typeof h.idSyncAfterIDCallResult&&h.idSyncAfterIDCallResult(e)},canMakeSyncIDCall:function(e,t){return h._forceSyncIDCall||!e||t-e>G.DAYS_BETWEEN_SYNC_ID_CALLS},attachIframeASAP:function(){var t=this;!function e(){t.startedAttachingIframe||(p.body?t.attachIframe():setTimeout(e,30))}()}}),B=(g._destinationPublishing=O,g.timeoutMetricsLog=[],{isClientSideMarketingCloudVisitorID:null,MCIDCallTimedOut:null,AnalyticsIDCallTimedOut:null,AAMIDCallTimedOut:null,fieldGroupObj:{},setState:function(e,t){switch(e){case"MC":!1===t?!0!==this.MCIDCallTimedOut&&(this.MCIDCallTimedOut=!1):this.MCIDCallTimedOut=t;break;case"A":!1===t?!0!==this.AnalyticsIDCallTimedOut&&(this.AnalyticsIDCallTimedOut=!1):this.AnalyticsIDCallTimedOut=t;break;case E:!1===t?!0!==this.AAMIDCallTimedOut&&(this.AAMIDCallTimedOut=!1):this.AAMIDCallTimedOut=t}}});if(g.isClientSideMarketingCloudVisitorID=function(){return B.isClientSideMarketingCloudVisitorID},g.MCIDCallTimedOut=function(){return B.MCIDCallTimedOut},g.AnalyticsIDCallTimedOut=function(){return B.AnalyticsIDCallTimedOut},g.AAMIDCallTimedOut=function(){return B.AAMIDCallTimedOut},g.idSyncGetOnPageSyncInfo=function(){return g._readVisitor(),g._getField("MCSYNCSOP")},g.idSyncByURL=function(e){var t,n,r,i,a;if(!g.isOptedOut())return i=(r=e||{}).minutesToLive,a="",(g.idSyncDisableSyncs||g.disableIdSyncs)&&(a=a||"Error: id syncs have been disabled"),"string"==typeof r.dpid&&r.dpid.length||(a=a||"Error: config.dpid is empty"),"string"==typeof r.url&&r.url.length||(a=a||"Error: config.url is empty"),void 0===i?i=20160:(i=parseInt(i,10),(isNaN(i)||i<=0)&&(a=a||"Error: config.minutesToLive needs to be a positive number")),(r={error:a,ttl:i}).error||(a=e.url,i=encodeURIComponent,t=O,a=a.replace(/^https:/,"").replace(/^http:/,""),n=U.encodeAndBuildRequest(["",e.dpid,e.dpuuid||""],","),e=["ibs",i(e.dpid),"img",i(a),r.ttl,"",n],t.addMessage(e.join("|")),t.requestToProcess(),"Successfully queued")},g.idSyncByDataSource=function(e){if(!g.isOptedOut())return e===Object(e)&&"string"==typeof e.dpuuid&&e.dpuuid.length?(e.url="//dpm.demdex.net/ibs:dpid="+e.dpid+"&dpuuid="+e.dpuuid,g.idSyncByURL(e)):"Error: config or config.dpuuid is empty"},_=O,(f=g).publishDestinations=function(e){var t=arguments[1],n=arguments[2];try{n="function"==typeof n?n:e.callback}catch(e){n=function(){}}var r=_;if(r.readyToAttachIframePreliminary()){if("string"==typeof e){if(!e.length)return void n({error:"subdomain is not a populated string."});if(!(t instanceof Array&&t.length))return void n({error:"messages is not a populated array."});var i=!1;if(t.forEach(function(e){"string"==typeof e&&e.length&&(r.addMessage(e),i=!0)}),!i)return void n({error:"None of the messages are populated strings."})}else{if(!U.isObject(e))return void n({error:"Invalid parameters passed."});t=e;if("string"!=typeof(e=t.subdomain)||!e.length)return void n({error:"config.subdomain is not a populated string."});t=t.urlDestinations;if(!(t instanceof Array&&t.length))return void n({error:"config.urlDestinations is not a populated array."});var a=[];t.forEach(function(e){U.isObject(e)&&(e.hideReferrer?e.message&&r.addMessage(e.message):a.push(e))}),!function n(){a.length&&setTimeout(function(){var e=new Image,t=a.shift();e.src=t.url,r.onPageDestinationsFired.push(t),n()},100)}()}r.iframe?(n({message:"The destination publishing iframe is already attached and loaded."}),r.requestToProcess()):!f.subdomain&&f._getField("MCMID")?(r.subdomain=e,r.doAttachIframe=!0,r.url=r.getUrl(),r.readyToAttachIframe()?(r.iframeLoadedCallbacks.push(function(e){n({message:"Attempted to attach and load the destination publishing iframe through this API call. Result: "+(e.message||"no result")})}),r.attachIframe()):n({error:"Encountered a problem in attempting to attach and load the destination publishing iframe through this API call."})):r.iframeLoadedCallbacks.push(function(e){n({message:"Attempted to attach and load the destination publishing iframe through normal Visitor API processing. Result: "+(e.message||"no result")})})}else n({error:"The destination publishing iframe is disabled in the Visitor library."})},g._getCookieVersion=function(e){e=e||g.cookieRead(g.cookieName);e=G.VERSION_REGEX.exec(e);return e&&1<e.length?e[1]:null},g._resetAmcvCookie=function(e){var t=g._getCookieVersion();t&&!me(t,e)||N.removeCookie(g.cookieName)},g.setAsCoopSafe=function(){b=!0},g.setAsCoopUnsafe=function(){b=!1},g.configs=Object.create(null),N.isObject(n))for(var L in n)l(L)&&(g[L]=n[L],g.configs[L]=n[L]);[["getMarketingCloudVisitorID"],["setCustomerIDs",void 0],["getAnalyticsVisitorID"],["getAudienceManagerLocationHint"],["getLocationHint"],["getAudienceManagerBlob"]].forEach(function(e){var t=e[0],n=2===e.length?e[1]:"",r=g[t];g[t]=function(e){return c()&&g.isAllowed()?r.apply(g,arguments):("function"==typeof e&&g._callCallback(e,[n]),n)}}),g.init=function(){if(g.configs.doesOptInApply&&(!m.optIn.isComplete||!c()))return m.optIn.fetchPermissions(s,!0);if(N.isObject(n)?(g.idSyncContainerID=g.idSyncContainerID||0,b="boolean"==typeof g.isCoopSafe?g.isCoopSafe:N.parseBoolean(g.isCoopSafe),g.resetBeforeVersion&&g._resetAmcvCookie(g.resetBeforeVersion),g._attemptToPopulateIdsFromUrl(),g._attemptToPopulateSdidFromUrl(),g._readVisitor(),e=g._getField("MCIDTS"),t=Math.ceil((new Date).getTime()/G.MILLIS_PER_DAY),g.idSyncDisableSyncs||g.disableIdSyncs||!O.canMakeSyncIDCall(e,t)||(g._setFieldExpire(T,-1),g._setField("MCIDTS",t)),g.getMarketingCloudVisitorID(),g.getAudienceManagerLocationHint(),g.getAudienceManagerBlob(),g._mergeServerState(g.serverState)):(g._attemptToPopulateIdsFromUrl(),g._attemptToPopulateSdidFromUrl()),!g.idSyncDisableSyncs&&!g.disableIdSyncs){O.checkDPIframeSrc();A.addEventListener("load",function(){var e;P.windowLoaded=!0,(e=O).readyToAttachIframe()&&e.attachIframe()});try{j.receiveMessage(function(e){O.receiveMessage(e.data)},O.iframeHost)}catch(e){}}var e,t;g.whitelistIframeDomains&&G.POST_MESSAGE_ENABLED&&(g.whitelistIframeDomains=g.whitelistIframeDomains instanceof Array?g.whitelistIframeDomains:[g.whitelistIframeDomains],g.whitelistIframeDomains.forEach(function(e){var t=new x(r,e),t=Y(g,t);j.receiveMessage(t,e)}))}}var a,o,c,d={HANDSHAKE:"HANDSHAKE",GETSTATE:"GETSTATE",PARENTSTATE:"PARENTSTATE"},p={MCMID:"getMarketingCloudVisitorID",MCAID:"getAnalyticsVisitorID",MCAAMB:"getAudienceManagerBlob",MCAAMLH:"getAudienceManagerLocationHint",MCOPTOUT:"isOptedOut",ALLFIELDS:"getVisitorValues"},f={MCMID:"getMarketingCloudVisitorID",MCAAMB:"getAudienceManagerBlob",MCAAMLH:"getAudienceManagerLocationHint",MCOPTOUT:"isOptedOut",MCAID:"getAnalyticsVisitorID",CUSTOMERIDS:"getCustomerIDs",ALLFIELDS:"getVisitorValues"},te={MC:"MCMID",A:"MCAID",AAM:"MCAAMB"},ne={MCMID:"MCMID",MCOPTOUT:"MCOPTOUT",MCAID:"MCAID",MCAAMLH:"MCAAMLH",MCAAMB:"MCAAMB"},re={UNKNOWN:0,AUTHENTICATED:1,LOGGED_OUT:2},ie={GLOBAL:"global"},ae={MCMID:"MCMID",MCAID:"MCAID",MCAAMB:"MCAAMB",MCAAMLH:"MCAAMLH",MCOPTOUT:"MCOPTOUT",CUSTOMERIDS:"CUSTOMERIDS"},oe=d,se=p,ce={CUSTOMERIDS:"getCustomerIDs"},ue=p,U=((c=(o={exports:{}}).exports).isObjectEmpty=function(e){return e===Object(e)&&0===Object.keys(e).length},c.isValueEmpty=function(e){return""===e||c.isObjectEmpty(e)},c.getIeVersion=function(){if(document.documentMode)return document.documentMode;for(var e=7;4<e;e--){var t=document.createElement("div");if(t.innerHTML="\x3c!--[if IE "+e+"]><span></span><![endif]--\x3e",t.getElementsByTagName("span").length)return t=null,e;t=null}return null},c.encodeAndBuildRequest=function(e,t){return e.map(encodeURIComponent).join(t)},c.isObject=function(e){return null!==e&&"object"===M(e)&&!1===Array.isArray(e)},c.defineGlobalNamespace=function(){return window.adobe=c.isObject(window.adobe)?window.adobe:{},window.adobe},c.pluck=function(n,e){return e.reduce(function(e,t){return n[t]&&(e[t]=n[t]),e},Object.create(null))},c.parseOptOut=function(e,t,n){t||(t=n,e.d_optout&&e.d_optout instanceof Array&&(t=e.d_optout.join(",")));n=parseInt(e.d_ottl,10);return{optOut:t,d_ottl:n=isNaN(n)?7200:n}},c.normalizeBoolean=function(e){var t=e;return"true"===e?t=!0:"false"===e&&(t=!1),t},o.exports),le=(U.isObjectEmpty,U.isValueEmpty,U.getIeVersion,U.encodeAndBuildRequest,U.isObject,U.defineGlobalNamespace,U.pluck,U.parseOptOut,U.normalizeBoolean,function(){return{callbacks:{},add:function(e,t){this.callbacks[e]=this.callbacks[e]||[];var n=this.callbacks[e].push(t)-1,r=this;return function(){r.callbacks[e].splice(n,1)}},execute:function(e,t){if(this.callbacks[e]){t=(t=void 0===t?[]:t)instanceof Array?t:[t];try{for(;this.callbacks[e].length;){var n=this.callbacks[e].shift();"function"==typeof n?n.apply(null,t):n instanceof Array&&n[1].apply(n[0],t)}delete this.callbacks[e]}catch(e){}}},executeAll:function(n,e){(e||n&&!U.isObjectEmpty(n))&&Object.keys(this.callbacks).forEach(function(e){var t=void 0!==n[e]?n[e]:"";this.execute(e,t)},this)},hasCallbacks:function(){return Boolean(Object.keys(this.callbacks).length)}}}),de=d,pe={0:"prefix",1:"orgID",2:"state"},fe=d,h=d,he=f,_e=p,ge=te,F={get:function(e){e=encodeURIComponent(e);var t=(";"+document.cookie).split(" ").join(";"),n=t.indexOf(";"+e+"="),r=n<0?n:t.indexOf(";",n+1);return n<0?"":decodeURIComponent(t.substring(n+2+e.length,r<0?t.length:r))},set:function(e,t,n){var r,i=s(n,"cookieLifetime"),a=s(n,"expires"),o=s(n,"domain"),n=s(n,"secure")?"Secure":"";return a&&"SESSION"!==i&&"NONE"!==i?(r=""!==t?parseInt(i||0,10):-60)?(a=new Date).setTime(a.getTime()+1e3*r):1===a&&(r=(a=new Date).getYear(),a.setYear(r+2+(r<1900?1900:0))):a=0,e&&"NONE"!==i?(document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+"; path=/;"+(a?" expires="+a.toGMTString()+";":"")+(o?" domain="+o+";":"")+n,this.get(e)===t):0},remove:function(e,t){t=(t=s(t,"domain"))?" domain="+t+";":"";document.cookie=encodeURIComponent(e)+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;"+t}},me=function(e,t){return n(e,t)<0},Ce=function(e,t){return 0!==n(e,t)},ve=!!R.postMessage,j={postMessage:function(e,t,n){t&&(ve?n.postMessage(e,t.replace(/([^:]+:\/\/[^\/]+).*/,"$1")):t&&(n.location=t.replace(/#.*$/,"")+"#"+ +new Date+"1&"+e))},receiveMessage:function(t,n){var e;try{ve&&(t&&(e=function(e){if("string"==typeof n&&e.origin!==n||"[object Function]"===Object.prototype.toString.call(n)&&!1===n(e.origin))return!1;t(e)}),R.addEventListener?R[t?"addEventListener":"removeEventListener"]("message",e):R[t?"attachEvent":"detachEvent"]("onmessage",e))}catch(t){}}},G={POST_MESSAGE_ENABLED:!!R.postMessage,DAYS_BETWEEN_SYNC_ID_CALLS:1,MILLIS_PER_DAY:864e5,ADOBE_MC:"adobe_mc",ADOBE_MC_SDID:"adobe_mc_sdid",VALID_VISITOR_ID_REGEX:/^[0-9a-fA-F\-]+$/,ADOBE_MC_TTL_IN_MIN:5,VERSION_REGEX:/vVersion\|((\d+\.)?(\d+\.)?(\*|\d+))(?=$|\|)/,FIRST_PARTY_SERVER_COOKIE:"s_ecid"},ye={audienceManagerServer:{},audienceManagerServerSecure:{},cookieDomain:{},cookieLifetime:{},cookieName:{},doesOptInApply:{},disableThirdPartyCalls:{},discardTrackingServerECID:{},idSyncAfterIDCallResult:{},idSyncAttachIframeOnWindowLoad:{},idSyncContainerID:{},idSyncDisable3rdPartySyncing:{},disableThirdPartyCookies:{},idSyncDisableSyncs:{},disableIdSyncs:{},idSyncIDCallResult:{},idSyncSSLUseAkamai:{},isCoopSafe:{},isIabContext:{},isOptInStorageEnabled:{},loadSSL:{},loadTimeout:{},marketingCloudServer:{},marketingCloudServerSecure:{},optInCookieDomain:{},optInStorageExpiry:{},overwriteCrossDomainMCIDAndAID:{},preOptInApprovals:{},previousPermissions:{},resetBeforeVersion:{},sdidParamExpiry:{},serverState:{},sessionCookieName:{},secureCookie:{},takeTimeoutMetrics:{},trackingServer:{},trackingServerSecure:{},whitelistIframeDomains:{},whitelistParentDomain:{}},Ae={getConfigNames:function(){return Object.keys(ye)},getConfigs:function(){return ye},normalizeConfig:function(e){return"function"!=typeof e?e:e()}},Pe="pending",be="changed",w="complete",E={AAM:"aam",ADCLOUD:"adcloud",ANALYTICS:"aa",CAMPAIGN:"campaign",ECID:"ecid",LIVEFYRE:"livefyre",TARGET:"target",VIDEO_ANALYTICS:"videoaa"},_=(e(o={},E.AAM,565),e(o,E.ECID,565),o),Se=(e(d={},E.AAM,[1,2,5]),e(d,E.ECID,[1,2,5]),d),T=(a=E,Object.keys(a).map(function(e){return a[e]})),we=function(){},Ee=function(e){var t=window.console;return!!t&&"function"==typeof t[e]},g=new function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){return!0};this.log=i("log",e,t),this.warn=i("warn",e,t),this.error=i("error",e,t)}("[ADOBE OPT-IN]"),m=function(e,t){return M(e)===t},I=function(e,t){return e instanceof Array?e:m(e,"string")?[e]:t||[]},D=function(e){return!(!e||Te(e))&&I(e).every(function(e){return-1<T.indexOf(e)})},Te=function(e){return"[object Array]"===Object.prototype.toString.call(e)&&!e.length},k=function(e){return void 0===e||(De(e)?D(Object.keys(e)):Ie(e))},Ie=function(e){try{var t=JSON.parse(e);return!!e&&m(e,"string")&&D(Object.keys(t))}catch(e){return!1}},De=function(e){return null!==e&&m(e,"object")&&!1===Array.isArray(e)},N=function(){},ke=function(t){return Object.keys(t).map(function(e){return t[e]})},Ne=((r.prototype=Object.create(Error.prototype)).constructor=r,"fetchPermissions"),f=(t.Categories=E,t.TimeoutError=r,Object.freeze({OptIn:t,IabPlugin:function(){function i(e){o[e]=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}}var e=this,a=(e.name="iabPlugin",e.version="0.0.1",b()),o={allConsentData:null},t=(e.fetchConsentData=function(e){e=u(e.callback,e.timeout);t({callback:e})},e.isApproved=function(e){var r=e.callback,i=e.category,e=e.timeout;if(o.allConsentData)return r(null,c(i,o.allConsentData.vendorConsents,o.allConsentData.purposeConsents));e=u(function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=t.vendorConsents,t=t.purposeConsents;r(e,c(i,n,t))},e);t({category:i,callback:e})},e.onRegister=function(a){var o=Object.keys(_);e.fetchConsentData({callback:function(e){var t,n=(t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).purposeConsents,r=t.gdprApplies,i=t.vendorConsents;!e&&r&&i&&n&&(o.forEach(function(e){var t=c(e,i,n);a[t?"approve":"deny"](e,!0)}),a.complete())}})},function(e){e=e.callback;if(o.allConsentData)return e(null,o.allConsentData);a.add("FETCH_CONSENT_DATA",e);var r={};n(function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.purposeConsents,n=e.gdprApplies,e=e.vendorConsents;1<arguments.length&&arguments[1]&&i("allConsentData",r={purposeConsents:t,gdprApplies:n,vendorConsents:e}),s(function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};1<arguments.length&&arguments[1]&&(r.consentString=e.consentData,i("allConsentData",r)),a.execute("FETCH_CONSENT_DATA",[null,o.allConsentData])})})}),s=function(e){var t=l();t&&t("getConsentData",null,e)},n=function(e){var t=X(_),n=l();n&&n("getVendorConsents",t,e)},c=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return!!t[_[e]]&&Se[e].every(function(e){return n[e]})}}})),Oe=function e(t){function n(e,t){return e>>>t|e<<32-t}for(var r,i,a=Math.pow,o=a(2,32),s="",c=[],u=8*t.length,l=e.h=e.h||[],d=e.k=e.k||[],p=d.length,f={},h=2;p<64;h++)if(!f[h]){for(r=0;r<313;r+=h)f[r]=h;l[p]=a(h,.5)*o|0,d[p++]=a(h,1/3)*o|0}for(t+="";t.length%64-56;)t+="\0";for(r=0;r<t.length;r++){if((i=t.charCodeAt(r))>>8)return;c[r>>2]|=i<<(3-r)%4*8}for(c[c.length]=u/o|0,c[c.length]=u,i=0;i<c.length;){var _=c.slice(i,i+=16),g=l;for(l=l.slice(0,8),r=0;r<64;r++){var m=_[r-15],C=_[r-2],v=l[0],y=l[4],y=l[7]+(n(y,6)^n(y,11)^n(y,25))+(y&l[5]^~y&l[6])+d[r]+(_[r]=r<16?_[r]:_[r-16]+(n(m,7)^n(m,18)^m>>>3)+_[r-7]+(n(C,17)^n(C,19)^C>>>10)|0);(l=[y+((n(v,2)^n(v,13)^n(v,22))+(v&l[1]^v&l[2]^l[1]&l[2]))|0].concat(l))[4]=l[4]+y|0}for(r=0;r<8;r++)l[r]=l[r]+g[r]|0}for(r=0;r<8;r++)for(i=3;i+1;i--){var A=l[r]>>8*i&255;s+=(A<16?0:"")+A.toString(16)}return s},p=f.OptIn,C=(U.defineGlobalNamespace(),window.adobe.OptInCategories=p.Categories,ee.config=Ae,R.Visitor=ee),Be=f.OptIn,Le=f.IabPlugin;return C.getInstance=function(r,e){if(!r)throw new Error("Visitor requires Adobe Marketing Cloud Org ID.");r.indexOf("@")<0&&(r+="@AdobeOrg");var t=function(){var e=R.s_c_il;if(e)for(var t=0;t<e.length;t++){var n=e[t];if(n&&"Visitor"===n._c&&n.marketingCloudOrgID===r)return n}}();if(t)return t;t=function(r){if(U.isObject(r))return Object.keys(r).filter(function(e){return""!==r[e]}).reduce(function(e,t){var n="doesOptInApply"!==t?r[t]:Ae.normalizeConfig(r[t]),n=U.normalizeBoolean(n);return e[t]=n,e},Object.create(null))}(e);e=t||{},R.adobe.optIn=R.adobe.optIn||(n=U.pluck(e,["doesOptInApply","previousPermissions","preOptInApprovals","isOptInStorageEnabled","optInStorageExpiry","isIabContext"]),e=(e=e.optInCookieDomain||e.cookieDomain||V())===window.location.hostname?"":e,n.optInCookieDomain=e,e=new Be(n,{cookies:F}),n.isIabContext&&(n=new Le(window.__cmp),e.registerPlugin(n)),e);var n=r.split("").reverse().join(""),e=new C(r,null,n),i=(U.isObject(t)&&t.cookieDomain&&(e.cookieDomain=t.cookieDomain),R.s_c_il.splice(--R.s_c_in,1),U.getIeVersion());return"number"==typeof i&&i<10?e._helpers.replaceMethodsWithFunction(e,function(){}):(i=function(){try{return R.self!==R.parent}catch(e){return 1}}()&&((i=e).cookieWrite("TEST_AMCV_COOKIE","T",1),"T"!==i.cookieRead("TEST_AMCV_COOKIE")||(i._helpers.removeCookie("TEST_AMCV_COOKIE"),0))&&R.parent?new P(r,t,e,R.parent):new C(r,t,n),e=null,i.init(),i)},R.addEventListener?R.addEventListener("load",Me):R.attachEvent&&R.attachEvent("onload",Me),C.codeLoadEnd=(new Date).getTime(),C;function Me(){C.windowLoaded=!0}}(),visitor=Visitor.getInstance(__org_id__,{trackingServer:__trackingServer__,trackingServerSecure:__trackingServerSecure__}),s_cbc_sitecatalyst_init=function(e){var t;e.charSet="UTF-8",e.currencyCode="CAD",e.trackDownloadLinks=!1,e.trackExternalLinks=!1,e.trackInlineStats=!0,e.linkDownloadFileTypes="exe,zip,wav,mp3,mov,mpg,avi,wmv,pdf,doc,docx,xls,xlsx,ppt,pptx,asx",e.linkInternalFilters="javascript:,cbc.ca",e.linkLeaveQueryString=!1,e.linkTrackVars="events",e.linkTrackEvents="None",e.ssl=!0,e.usePlugins=!0,e.doPlugins=function(e){},e.c_r=e.Util.cookieRead,e.c_w=e.Util.cookieWrite,e.getValOnce=new Function("v","c","e","var s=this,k=s.c_r(c),a=new Date;e=e?e:0;if(v){a.setTime(a.getTime()+e*86400000);s.c_w(c,v,e?a:0);}return v==k?'':v"),e.split=new Function("l","d","var i,x=0,a=new Array;while(l){i=l.indexOf(d);i=i>-1?i:l.length;a[x++]=l.substring(0,i);l=l.substring(i+d.length);}return a"),e.apl=function(e,t,n,r){var i=0;if(e=e||"",r)for(var a,o=this.split(e,n),s=0;s<o.length;s++)a=o[s],i=i||(1==r?a==t:a.toLowerCase()==t.toLowerCase());return e=i?e:e?e+n+t:t},e.getNewRepeat=new Function("d","cn","var s=this,e=new Date(),cval,sval,ct=e.getTime();d=d?d:30;cn=cn?cn:'s_nr';e.setTime(ct+d*24*60*60*1000);cval=s.c_r(cn);if(cval.length==0){s.c_w(cn,ct+'-New',e);return'New';}sval=s.split(cval,'-');if(ct-sval[0]<30*60*1000&&sval[1]=='New'){s.c_w(cn,ct+'-New',e);return'New';}else{s.c_w(cn,ct+'-Repeat',e);return'Repeat';}"),e.visitor=Visitor.getInstance(__org_id__),e.visitorNamespace="cbcca",e.trackingServer=__trackingServer__,e.trackingServerSecure=__trackingServerSecure__,e.maxDelay="3000",window.CBC.APP.SC.UTIL.getQueryStringParameterValue("webview",window.document.url)&&(t=window.CBC.APP.SC.UTIL.getQueryStringParameterValue("appname",window.document.url),window.CBC.APP.SC.UTIL.getMetadataAllowlist().metadata.allowlist.webviewapps[t])&&(t=window.CBC.APP.SC.UTIL.getQueryStringParameterValue("udid",window.document.url))&&(e.visitorID=t)};function AppMeasurement(e){var f=this,d=(f.version="2.17.0",window);d.s_c_in||(d.s_c_il=[],d.s_c_in=0),f._il=d.s_c_il,f._in=d.s_c_in,f._il[f._in]=f,d.s_c_in++,f._c="s_c";var t,n,r,i,h=(h=d.AppMeasurement.ec)||null,l=d;try{for(t=l.parent,n=l.location;t&&t.location&&n&&""+t.location!=""+n&&l.location&&""+t.location!=""+l.location&&t.location.host==n.host;)t=(l=t).parent}catch(e){}f.C=function(e){try{console.log(e)}catch(e){}},f.Pa=function(e){return""+parseInt(e)==""+e},f.replace=function(e,t,n){return!e||e.indexOf(t)<0?e:e.split(t).join(n)},f.escape=function(e){var t,n;if(e)for(e=encodeURIComponent(e),t=0;t<7;t++)n="+~!*()'".substring(t,t+1),0<=e.indexOf(n)&&(e=f.replace(e,n,"%"+n.charCodeAt(0).toString(16).toUpperCase()));return e},f.unescape=function(e){if(!e)return e;e=0<=e.indexOf("+")?f.replace(e,"+"," "):e;try{return decodeURIComponent(e)}catch(e){}return unescape(e)},f.Kb=function(){var e,t=d.location.hostname,n=(n=f.fpCookieDomainPeriods)||f.cookieDomainPeriods;if(t&&!f.Ia&&!/^[0-9.]+$/.test(t)&&(n=2<(n=n?parseInt(n):2)?n:2,0<=(e=t.lastIndexOf(".")))){for(;0<=e&&1<n;)e=t.lastIndexOf(".",e-1),n--;f.Ia=0<e?t.substring(e):t}return f.Ia},f.c_r=f.cookieRead=function(e){e=f.escape(e);var t=" "+f.d.cookie,n=t.indexOf(" "+e+"="),r=n<0?n:t.indexOf(";",n);return"[[B]]"!=(e=n<0?"":f.unescape(t.substring(n+2+e.length,r<0?t.length:r)))?e:""},f.c_w=f.cookieWrite=function(e,t,n){var r,i=f.Kb(),a=f.cookieLifetime;return t=""+t,a=a?(""+a).toUpperCase():"",n&&"SESSION"!=a&&"NONE"!=a&&((r=""!=t?parseInt(a||0):-60)?(n=new Date).setTime(n.getTime()+1e3*r):1===n&&(r=(n=new Date).getYear(),n.setYear(r+2+(r<1900?1900:0)))),e&&"NONE"!=a?(f.d.cookie=f.escape(e)+"="+f.escape(""!=t?t:"[[B]]")+"; path=/;"+(n&&"SESSION"!=a?" expires="+n.toUTCString()+";":"")+(i?" domain="+i+";":""),f.cookieRead(e)==t):0},f.Hb=function(){var e=f.Util.getIeVersion();"number"==typeof e&&e<10&&(f.unsupportedBrowser=!0,f.ub(f,function(){}))},f.ub=function(e,t){for(var n in e)e.hasOwnProperty(n)&&"function"==typeof e[n]&&(e[n]=t)},f.K=[],f.ea=function(e,t,n){if(f.Ja)return 0;f.maxDelay||(f.maxDelay=250);var r=0,i=(new Date).getTime()+f.maxDelay,a=f.d.visibilityState,o=["webkitvisibilitychange","visibilitychange"];if((a=a||f.d.webkitVisibilityState)&&"prerender"==a){if(!f.fa)for(f.fa=1,n=0;n<o.length;n++)f.d.addEventListener(o[n],function(){"visible"==(f.d.visibilityState||f.d.webkitVisibilityState)&&(f.fa=0,f.delayReady())});r=1,i=0}else n||f.u("_d")&&(r=1);return r&&(f.K.push({m:e,a:t,t:i}),f.fa||setTimeout(f.delayReady,f.maxDelay)),r},f.delayReady=function(){var e,t=(new Date).getTime(),n=0;for(f.u("_d")?n=1:f.ya();0<f.K.length;){if(e=f.K.shift(),n&&!e.t&&e.t>t){f.K.unshift(e),setTimeout(f.delayReady,parseInt(f.maxDelay/2));break}f.Ja=1,f[e.m].apply(f,e.a),f.Ja=0}},f.setAccount=f.sa=function(e){var t,n;if(!f.ea("setAccount",arguments))if(f.account=e,f.allAccounts)for(t=f.allAccounts.concat(e.split(",")),f.allAccounts=[],t.sort(),n=0;n<t.length;n++)0!=n&&t[n-1]==t[n]||f.allAccounts.push(t[n]);else f.allAccounts=e.split(",")},f.foreachVar=function(e,t){var n,r,i,a="",o=r="";for(f.lightProfileID?(n=f.O,a=(a=f.lightTrackVars)&&","+a+","+f.ka.join(",")+","):(n=f.g,(f.pe||f.linkType)&&(a=f.linkTrackVars,r=f.linkTrackEvents,f.pe)&&(o=f.pe.substring(0,1).toUpperCase()+f.pe.substring(1),f[o])&&(a=f[o].ac,r=f[o].$b),a=a&&","+a+","+f.F.join(",")+",",r&&a&&(a+=",events,")),t=t&&","+t+",",r=0;r<n.length;r++)o=n[r],(i=f[o])&&(!a||0<=a.indexOf(","+o+","))&&(!t||0<=t.indexOf(","+o+","))&&e(o,i)},f.o=function(e,t,n,r,i){var a,o,s,c,u="",l=0;if("contextData"==e&&(e="c"),t){for(a in t)if(!(Object.prototype[a]||i&&a.substring(0,i.length)!=i)&&t[a]&&(!n||0<=n.indexOf(","+(r?r+".":"")+a+","))){if(s=!1,l)for(o=0;o<l.length;o++)if(a.substring(0,l[o].length)==l[o]){s=!0;break}if(!s&&(""==u&&(u+="&"+e+"."),o=t[a],0<(a=i?a.substring(i.length):a).length))if(0<(s=a.indexOf(".")))o=a.substring(0,s),(l=l||[]).push(s=(i||"")+o+"."),u+=f.o(o,t,n,r,s);else if(o="boolean"==typeof o?o?"true":"false":o){if("retrieveLightData"==r&&i.indexOf(".contextData.")<0)switch(s=a.substring(0,4),c=a.substring(4),a){case"transactionID":a="xact";break;case"channel":a="ch";break;case"campaign":a="v0";break;default:f.Pa(c)&&("prop"==s?a="c"+c:"eVar"==s?a="v"+c:"list"==s?a="l"+c:"hier"==s&&(a="h"+c,o=o.substring(0,255)))}u+="&"+f.escape(a)+"="+f.escape(o)}}""!=u&&(u+="&."+e)}return u},f.usePostbacks=0,f.Nb=function(){var e,t,n,r,i,a,o,s,c="",u="",l="",d=r="",p=f.T();if(f.lightProfileID?(e=f.O,u=(u=f.lightTrackVars)&&","+u+","+f.ka.join(",")+","):(e=f.g,(f.pe||f.linkType)&&(u=f.linkTrackVars,l=f.linkTrackEvents,f.pe)&&(r=f.pe.substring(0,1).toUpperCase()+f.pe.substring(1),f[r])&&(u=f[r].ac,l=f[r].$b),u=u&&","+u+","+f.F.join(",")+",",l&&(l=","+l+",",u)&&(u+=",events,"),f.events2&&(d+=(""!=d?",":"")+f.events2)),p&&p.getCustomerIDs){if(r=h,i=p.getCustomerIDs())for(t in i)Object.prototype[t]||(n=i[t],"object"==_typeof(n)&&(r=r||{},n.id&&(r[t+".id"]=n.id),n.authState)&&(r[t+".as"]=n.authState));r&&(c+=f.o("cid",r))}for(f.AudienceManagement&&f.AudienceManagement.isReady()&&(c+=f.o("d",f.AudienceManagement.getEventCallConfigParams())),t=0;t<e.length;t++){if(r=e[t],i=f[r],n=r.substring(0,4),a=r.substring(4),i||("events"==r&&d?(i=d,d=""):"marketingCloudOrgID"==r&&p&&f.V("ECID")&&(i=p.marketingCloudOrgID)),i&&(!u||0<=u.indexOf(","+r+","))){switch(r){case"customerPerspective":r="cp";break;case"marketingCloudOrgID":r="mcorgid";break;case"supplementalDataID":r="sdid";break;case"timestamp":r="ts";break;case"dynamicVariablePrefix":r="D";break;case"visitorID":r="vid";break;case"marketingCloudVisitorID":r="mid";break;case"analyticsVisitorID":r="aid";break;case"audienceManagerLocationHint":r="aamlh";break;case"audienceManagerBlob":r="aamb";break;case"authState":r="as";break;case"pageURL":r="g",255<i.length&&(f.pageURLRest=i.substring(255),i=i.substring(0,255));break;case"pageURLRest":r="-g";break;case"referrer":r="r";break;case"vmk":case"visitorMigrationKey":r="vmt";break;case"visitorMigrationServer":r="vmf",f.ssl&&f.visitorMigrationServerSecure&&(i="");break;case"visitorMigrationServerSecure":r="vmf",!f.ssl&&f.visitorMigrationServer&&(i="");break;case"charSet":r="ce";break;case"visitorNamespace":r="ns";break;case"cookieDomainPeriods":r="cdp";break;case"cookieLifetime":r="cl";break;case"variableProvider":r="vvp";break;case"currencyCode":r="cc";break;case"channel":r="ch";break;case"transactionID":r="xact";break;case"campaign":r="v0";break;case"latitude":r="lat";break;case"longitude":r="lon";break;case"resolution":r="s";break;case"colorDepth":r="c";break;case"javascriptVersion":r="j";break;case"javaEnabled":r="v";break;case"cookiesEnabled":r="k";break;case"browserWidth":r="bw";break;case"browserHeight":r="bh";break;case"connectionType":r="ct";break;case"homepage":r="hp";break;case"events":if(d&&(i+=(""!=i?",":"")+d),l)for(a=i.split(","),i="",n=0;n<a.length;n++)0<=(s=(o=0<=(s=(o=a[n]).indexOf("="))?o.substring(0,s):o).indexOf(":"))&&(o=o.substring(0,s)),0<=l.indexOf(","+o+",")&&(i+=(i?",":"")+a[n]);break;case"events2":i="";break;case"contextData":c+=f.o("c",f[r],u,r),i="";break;case"lightProfileID":r="mtp";break;case"lightStoreForSeconds":r="mtss",f.lightProfileID||(i="");break;case"lightIncrementBy":r="mti",f.lightProfileID||(i="");break;case"retrieveLightProfiles":r="mtsr";break;case"deleteLightProfiles":r="mtsd";break;case"retrieveLightData":f.retrieveLightProfiles&&(c+=f.o("mts",f[r],u,r)),i="";break;default:f.Pa(a)&&("prop"==n?r="c"+a:"eVar"==n?r="v"+a:"list"==n?r="l"+a:"hier"==n&&(r="h"+a,i=i.substring(0,255)))}i&&(c+="&"+r+"="+("pev"!=r.substring(0,3)?f.escape(i):i))}"pev3"==r&&f.e&&(c+=f.e)}return f.ja&&(c+="&lrt="+f.ja,f.ja=null),c},f.B=function(e){var t=e.tagName;return"undefined"!=""+e.hc||"undefined"!=""+e.Wb&&"HTML"!=(""+e.Wb).toUpperCase()?"":((t="SHAPE"==(t=t&&t.toUpperCase?t.toUpperCase():"")?"":t)&&(("INPUT"==t||"BUTTON"==t)&&e.type&&e.type.toUpperCase?t=e.type.toUpperCase():!t&&e.href&&(t="A")),t)},f.La=function(e){var t=d.location,n=e.href||"",r=n.indexOf(":"),i=n.indexOf("?"),a=n.indexOf("/");return n&&(r<0||0<=i&&i<r||0<=a&&a<r)&&(i=e.protocol&&1<e.protocol.length?e.protocol:t.protocol||"",r=t.pathname.lastIndexOf("/"),n=(i?i+"//":"")+(e.host||t.host||"")+("/"!=n.substring(0,1)?t.pathname.substring(0,r<0?0:r)+"/":"")+n),n},f.L=function(e){var t,n,r=f.B(e),i="",a=0;return r&&(t=e.protocol,n=e.onclick,!e.href||"A"!=r&&"AREA"!=r||n&&t&&!(t.toLowerCase().indexOf("javascript")<0)?n?(i=f.replace(f.replace(f.replace(f.replace(""+n,"\r",""),"\n",""),"\t","")," ",""),a=2):"INPUT"==r||"SUBMIT"==r?(e.value?i=e.value:e.innerText?i=e.innerText:e.textContent&&(i=e.textContent),a=3):"IMAGE"==r&&e.src&&(i=e.src):i=f.La(e),i)?{id:i.substring(0,100),type:a}:0},f.fc=function(e){for(var t=f.B(e),n=f.L(e);e&&!n&&"BODY"!=t;)(e=e.parentElement||e.parentNode)&&(t=f.B(e),n=f.L(e));return e=(e=n&&"BODY"!=t?e:0)&&(0<=(t=e.onclick?""+e.onclick:"").indexOf(".tl(")||0<=t.indexOf(".trackLink("))?0:e},f.Vb=function(){var e,t,n,r,i,a=f.linkObject,o=f.linkType,s=f.linkURL;if(f.la=1,a||(f.la=0,a=f.clickObject),a){for(e=f.B(a),t=f.L(a);a&&!t&&"BODY"!=e;)(a=a.parentElement||a.parentNode)&&(e=f.B(a),t=f.L(a));(a=t&&"BODY"!=e?a:0)&&!f.linkObject&&(0<=(i=a.onclick?""+a.onclick:"").indexOf(".tl(")||0<=i.indexOf(".trackLink("))&&(a=0)}else f.la=1;if((s=!s&&a?f.La(a):s)&&!f.linkLeaveQueryString&&0<=(n=s.indexOf("?"))&&(s=s.substring(0,n)),!o&&s){var c,u=0,l=0;if(f.trackDownloadLinks&&f.linkDownloadFileTypes)for(n=(i=s.toLowerCase()).indexOf("?"),r=i.indexOf("#"),0<=(n=0<=n&&!(0<=r&&r<n)?n:r)&&(i=i.substring(0,n)),n=f.linkDownloadFileTypes.toLowerCase().split(","),r=0;r<n.length;r++)(c=n[r])&&i.substring(i.length-(c.length+1))=="."+c&&(o="d");if(f.trackExternalLinks&&!o&&(i=s.toLowerCase(),f.Oa(i))&&(f.linkInternalFilters||(f.linkInternalFilters=d.location.hostname),n=0,f.linkExternalFilters?(n=f.linkExternalFilters.toLowerCase().split(","),u=1):f.linkInternalFilters&&(n=f.linkInternalFilters.toLowerCase().split(",")),n)){for(r=0;r<n.length;r++)c=n[r],0<=i.indexOf(c)&&(l=1);l?u&&(o="e"):u||(o="e")}}f.linkObject=a,f.linkURL=s,f.linkType=o,(f.trackClickMap||f.trackInlineStats)&&(f.e="",a)&&(o=f.pageName,s=1,a=a.sourceIndex,o||(o=f.pageURL,s=0),d.s_objectID&&(t.id=d.s_objectID,a=t.type=1),o)&&t&&t.id&&e&&(f.e="&pid="+f.escape(o.substring(0,255))+(s?"&pidt="+s:"")+"&oid="+f.escape(t.id.substring(0,100))+(t.type?"&oidt="+t.type:"")+"&ot="+e+(a?"&oi="+a:""))},f.Ob=function(){var e=f.la,t=f.linkType,n=f.linkURL,r=f.linkName;if(t&&(n||r)&&(t=t.toLowerCase(),f.pe="lnk_"+(t="d"!=t&&"e"!=t?"o":t),f.pev1=n?f.escape(n):"",f.pev2=r?f.escape(r):"",e=1),f.abort&&(e=0),f.trackClickMap||f.trackInlineStats||f.Rb()){var i,a,o,t={},n=0,s=(c=f.pb())?c.split("&"):0,c=0;if(s)for(i=0;i<s.length;i++)a=s[i].split("="),r=f.unescape(a[0]).split(","),t[a=f.unescape(a[1])]=r;for(o in r=f.account.split(","),i={},f.contextData)o&&!Object.prototype[o]&&"a.activitymap."==o.substring(0,14)&&(i[o]=f.contextData[o],f.contextData[o]="");if(f.e=f.o("c",i)+(f.e||""),e||f.e){for(a in e&&!f.e&&(c=1),t)if(!Object.prototype[a])for(o=0;o<r.length;o++)for(c&&(s=t[a].join(","),s==f.account)&&(f.e+=("&"!=a.charAt(0)?"&":"")+a,t[a]=[],n=1),i=0;i<t[a].length;i++)s=t[a][i],s==r[o]&&(c&&(f.e+="&u="+f.escape(s)+("&"!=a.charAt(0)?"&":"")+a+"&u=0"),t[a].splice(i,1),n=1);if(n=e?n:1){for(a in c="",i=2,!e&&f.e&&(c=f.escape(r.join(","))+"="+f.escape(f.e),i=1),t)!Object.prototype[a]&&0<i&&0<t[a].length&&(c+=(c?"&":"")+f.escape(t[a].join(","))+"="+f.escape(a),i--);f.wb(c)}}}return e},f.pb=function(){return f.useLinkTrackSessionStorage?f.Ca()?d.sessionStorage.getItem(f.P):void 0:f.cookieRead(f.P)},f.Ca=function(){return!!d.sessionStorage},f.wb=function(e){f.useLinkTrackSessionStorage?f.Ca()&&d.sessionStorage.setItem(f.P,e):f.cookieWrite(f.P,e)},f.Pb=function(){if(!f.Zb){var e,t,n,r,i=new Date,a=l.location,o=(t=e="","1.2"),s=f.cookieWrite("s_cc","true",0)?"Y":"N",c="",u="";if(i.setUTCDate&&(o="1.3",0..toPrecision)&&(o="1.5",(i=[]).forEach)){o="1.6",t=0,e={};try{(t=new Iterator(e)).next&&(o="1.7",i.reduce)&&(o="1.8").trim&&(o="1.8.1",Date.parse)&&(o="1.8.2",Object.create)&&(o="1.8.5")}catch(e){}}e=screen.width+"x"+screen.height,i=navigator.javaEnabled()?"Y":"N",t=screen.pixelDepth||screen.colorDepth,n=f.w.innerWidth||f.d.documentElement.offsetWidth,r=f.w.innerHeight||f.d.documentElement.offsetHeight;try{f.b.addBehavior("#default#homePage"),c=f.b.gc(a)?"Y":"N"}catch(e){}try{f.b.addBehavior("#default#clientCaps"),u=f.b.connectionType}catch(e){}f.resolution=e,f.colorDepth=t,f.javascriptVersion=o,f.javaEnabled=i,f.cookiesEnabled=s,f.browserWidth=n,f.browserHeight=r,f.connectionType=u,f.homepage=c,f.Zb=1}},f.Q={},f.loadModule=function(t,e){var n=f.Q[t];if(!n){n=d["AppMeasurement_Module_"+t]?new d["AppMeasurement_Module_"+t](f):{},(f.Q[t]=f[t]=n).ib=function(){return n.sb},n.xb=function(e){(n.sb=e)&&(f[t+"_onLoad"]=e,f.ea(t+"_onLoad",[f,n],1)||e(f,n))};try{Object.defineProperty?Object.defineProperty(n,"onLoad",{get:n.ib,set:n.xb}):n._olc=1}catch(e){n._olc=1}}e&&(f[t+"_onLoad"]=e,f.ea(t+"_onLoad",[f,n],1)||e(f,n))},f.u=function(e){var t,n;for(t in f.Q)if(!Object.prototype[t]&&(n=f.Q[t])&&(n._olc&&n.onLoad&&(n._olc=0,n.onLoad(f,n)),n[e])&&n[e]())return 1;return 0},f.Rb=function(){return!(!f.ActivityMap||!f.ActivityMap._c)},f.Sb=function(){var e=Math.floor(1e13*Math.random()),t=f.visitorSampling,n=f.visitorSamplingGroup,n="s_vsn_"+(f.visitorNamespace||f.account)+(n?"_"+n:""),r=f.cookieRead(n);if(t){if(t*=100,!(r=r&&parseInt(r))){if(!f.cookieWrite(n,e))return 0;r=e}if(t<r%1e4)return 0}return 1},f.S=function(e,t){for(var n,r,i,a,o,s={},c=0;c<2;c++)for(n=0<c?f.Ea:f.g,r=0;r<n.length;r++)if((a=e[i=n[r]])||e["!"+i]){if(a&&!t&&("contextData"==i||"retrieveLightData"==i)&&f[i])for(o in f[i])a[o]||(a[o]=f[i][o]);f[i]||(s["!"+i]=1),s[i]=f[i],f[i]=a}return s},f.cc=function(e){for(var t,n,r,i=0;i<2;i++)for(t=0<i?f.Ea:f.g,n=0;n<t.length;n++)e[r=t[n]]=f[r],e[r]||"prop"!==r.substring(0,4)&&"eVar"!==r.substring(0,4)&&"hier"!==r.substring(0,4)&&"list"!==r.substring(0,4)&&"channel"!==r&&"events"!==r&&"eventList"!==r&&"products"!==r&&"productList"!==r&&"purchaseID"!==r&&"transactionID"!==r&&"state"!==r&&"zip"!==r&&"campaign"!==r&&"events2"!==r&&"latitude"!==r&&"longitude"!==r&&"ms_a"!==r&&"contextData"!==r&&"supplementalDataID"!==r&&"tnt"!==r&&"timestamp"!==r&&"abort"!==r&&"useBeacon"!==r&&"linkObject"!==r&&"clickObject"!==r&&"linkType"!==r&&"linkName"!==r&&"linkURL"!==r&&"bodyClickTarget"!==r&&"bodyClickFunction"!==r||(e["!"+r]=1)},f.Jb=function(e){var t,n,r,i,a,o,s=0,c="",u="";if(e&&255<e.length&&0<(n=(t=""+e).indexOf("?"))&&(o=t.substring(n+1),"http://"==(i=(t=t.substring(0,n)).toLowerCase()).substring(r=0,7)?r+=7:"https://"==i.substring(0,8)&&(r+=8),0<(n=i.indexOf("/",r)))&&(i=i.substring(r,n),a=t.substring(n),t=t.substring(0,n),0<=i.indexOf("google")?s=",q,ie,start,search_key,word,kw,cd,":0<=i.indexOf("yahoo.co")?s=",p,ei,":0<=i.indexOf("baidu.")&&(s=",wd,word,"),s)&&o){if((e=o.split("&"))&&1<e.length){for(r=0;r<e.length;r++)0<(n=(i=e[r]).indexOf("="))&&0<=s.indexOf(","+i.substring(0,n)+",")?c+=(c?"&":"")+i:u+=(u?"&":"")+i;c&&u?o=c+"&"+u:u=""}e=t+(0<(n=253-(o.length-u.length)-t.length)?a.substring(0,n):"")+"?"+o}return e},f.bb=function(e){var t=f.d.visibilityState,n=["webkitvisibilitychange","visibilitychange"];if((t=t||f.d.webkitVisibilityState)&&"prerender"==t){if(e)for(t=0;t<n.length;t++)f.d.addEventListener(n[t],function(){"visible"==(f.d.visibilityState||f.d.webkitVisibilityState)&&e()});return!1}return!0},f.ba=!1,f.H=!1,f.zb=function(){f.H=!0,f.p()},f.I=!1,f.Ab=function(e){f.marketingCloudVisitorID=e.MCMID,f.visitorOptedOut=e.MCOPTOUT,f.analyticsVisitorID=e.MCAID,f.audienceManagerLocationHint=e.MCAAMLH,f.audienceManagerBlob=e.MCAAMB,f.I=!1,f.p()},f.ab=function(e){return f.maxDelay||(f.maxDelay=250),!f.u("_d")||(e&&setTimeout(function(){e()},f.maxDelay),!1)},f.Z=!1,f.G=!1,f.ya=function(){f.G=!0,f.p()},f.isReadyToTrack=function(){var e=!0;return!(!f.mb()||!f.kb()||(f.ob()||(e=!1),!f.rb()))&&e},f.mb=function(){return f.ba||f.H||(f.bb(f.zb)?f.H=!0:f.ba=!0),!(f.ba&&!f.H)},f.kb=function(){var e=f.va();if(e){if(!f.ra&&!f.aa)return e.fetchPermissions(f.tb,!0),!(f.aa=!0);if(!f.ra)return!1;if(!e.isApproved(e.Categories.ANALYTICS))return!1}return!0},f.V=function(e){var t=f.va();return!(t&&!t.isApproved(t.Categories[e]))},f.va=function(){return d.adobe&&d.adobe.optIn?d.adobe.optIn:null},f.Y=!0,f.ob=function(){var e=f.T();return!e||!e.getVisitorValues||(f.Y&&(f.Y=!1,f.I||(f.I=!0,e.getVisitorValues(f.Ab))),!f.I)},f.T=function(){var e=f.visitor;return e=e&&!e.isAllowed()?null:e},f.rb=function(){return f.Z||f.G||(f.ab(f.ya)?f.G=!0:f.Z=!0),!(f.Z&&!f.G)},f.aa=!1,f.tb=function(){f.aa=!1,f.ra=!0},f.j=h,f.q=0,f.callbackWhenReadyToTrack=function(e,t,n){var r={};r.Eb=e,r.Db=t,r.Bb=n,f.j==h&&(f.j=[]),f.j.push(r),0==f.q&&(f.q=setInterval(f.p,100))},f.p=function(){var e;if(f.isReadyToTrack()&&(f.yb(),f.j!=h))for(;0<f.j.length;)(e=f.j.shift()).Db.apply(e.Eb,e.Bb)},f.yb=function(){f.q&&(clearInterval(f.q),f.q=0)},f.ta=function(e){var t,n={};if(f.cc(n),e!=h)for(t in e)n[t]=e[t];f.callbackWhenReadyToTrack(f,f.Da,[n]),f.Ba()},f.Lb=function(){var e=f.cookieRead("s_fid"),t="",n="",r=8,i=4;if(!e||e.indexOf("-")<0){for(e=0;e<16;e++)r=Math.floor(Math.random()*r),t+="0123456789ABCDEF".substring(r,r+1),r=Math.floor(Math.random()*i),n+="0123456789ABCDEF".substring(r,r+1),r=i=16;e=t+"-"+n}return e=f.cookieWrite("s_fid",e,1)?e:0},f.Da=function(e){var t,n=new Date,r="s"+Math.floor(n.getTime()/108e5)%10+Math.floor(1e13*Math.random()),i=n.getYear(),i="t="+f.escape(n.getDate()+"/"+n.getMonth()+"/"+(i<1900?i+1900:i)+" "+n.getHours()+":"+n.getMinutes()+":"+n.getSeconds()+" "+n.getDay()+" "+n.getTimezoneOffset()),a=f.T();e&&(t=f.S(e,1)),f.Sb()&&!f.visitorOptedOut&&(f.wa()||(f.fid=f.Lb()),f.Vb(),f.usePlugins&&f.doPlugins&&f.doPlugins(f),f.account)&&(f.abort||(f.trackOffline&&!f.timestamp&&(f.timestamp=Math.floor(n.getTime()/1e3)),e=d.location,f.pageURL||(f.pageURL=e.href||e),f.referrer||f.Za||(e=f.Util.getQueryParam("adobe_mc_ref",null,null,!0),f.referrer=e||void 0===e?void 0===e?"":e:l.document.referrer),f.Za=1,f.referrer=f.Jb(f.referrer),f.u("_g")),f.Ob())&&!f.abort&&(a&&f.V("TARGET")&&!f.supplementalDataID&&a.getSupplementalDataID&&(f.supplementalDataID=a.getSupplementalDataID("AppMeasurement:"+f._in,!f.expectSupplementalData)),f.V("AAM")||(f.contextData["cm.ssf"]=1),f.Pb(),i+=f.Nb(),f.qb(r,i),f.u("_t"),f.referrer=""),f.Ba(),t&&f.S(t,1)},f.t=f.track=function(e,t){t&&f.S(t),f.Y=!0,f.isReadyToTrack()?null!=f.j&&0<f.j.length?(f.ta(e),f.p()):f.Da(e):f.ta(e)},f.Ba=function(){f.abort=f.supplementalDataID=f.timestamp=f.pageURLRest=f.linkObject=f.clickObject=f.linkURL=f.linkName=f.linkType=d.s_objectID=f.pe=f.pev1=f.pev2=f.pev3=f.e=f.lightProfileID=f.useBeacon=f.referrer=0},f.Aa=[],f.registerPreTrackCallback=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);"function"==typeof e?f.Aa.push([e,t]):f.debugTracking&&f.C("DEBUG: Non function type passed to registerPreTrackCallback")},f.fb=function(e){f.ua(f.Aa,e)},f.za=[],f.registerPostTrackCallback=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);"function"==typeof e?f.za.push([e,t]):f.debugTracking&&f.C("DEBUG: Non function type passed to registerPostTrackCallback")},f.eb=function(e){f.ua(f.za,e)},f.ua=function(e,t){if("object"==_typeof(e))for(var n=0;n<e.length;n++){var r=e[n][0],i=e[n][1].slice();if(i.unshift(t),"function"==typeof r)try{r.apply(null,i)}catch(e){f.debugTracking&&f.C(e.message)}}},f.tl=f.trackLink=function(e,t,n,r,i){return f.linkObject=e,f.linkType=t,f.linkName=n,i&&(f.bodyClickTarget=e,f.bodyClickFunction=i),f.track(r)},f.trackLight=function(e,t,n,r){return f.lightProfileID=e,f.lightStoreForSeconds=t,f.lightIncrementBy=n,f.track(r)},f.clearVars=function(){for(var e,t=0;t<f.g.length;t++)"prop"!=(e=f.g[t]).substring(0,4)&&"eVar"!=e.substring(0,4)&&"hier"!=e.substring(0,4)&&"list"!=e.substring(0,4)&&"channel"!=e&&"events"!=e&&"eventList"!=e&&"products"!=e&&"productList"!=e&&"purchaseID"!=e&&"transactionID"!=e&&"state"!=e&&"zip"!=e&&"campaign"!=e||(f[e]=void 0)},f.tagContainerMarker="",f.qb=function(e,t){e=f.gb()+"/"+e+"?AQB=1&ndh=1&pf=1&"+(f.xa()?"callback=s_c_il["+f._in+"].doPostbacks&et=1&":"")+t+"&AQE=1";f.fb(e),f.cb(e),f.U()},f.gb=function(){var e=f.hb();return"http"+(f.ssl?"s":"")+"://"+e+"/b/ss/"+f.account+"/"+(f.mobile?"5.":"")+(f.xa()?"10":"1")+"/JS-"+f.version+(f.Yb?"T":"")+(f.tagContainerMarker?"-"+f.tagContainerMarker:"")},f.xa=function(){return f.AudienceManagement&&f.AudienceManagement.isReady()||0!=f.usePostbacks},f.hb=function(){var e=f.dc,t=f.trackingServer;return t?f.trackingServerSecure&&f.ssl&&(t=f.trackingServerSecure):("d1"==(e=e?(""+e).toLowerCase():"d1")?e="112":"d2"==e&&(e="122"),t=f.jb()+"."+e+".2o7.net"),t},f.jb=function(){var e=f.visitorNamespace;return e=e?e:(e=f.account.split(",")[0]).replace(/[^0-9a-z]/gi,"")},f.Ya=/{(%?)(.*?)(%?)}/,f.bc=RegExp(f.Ya.source,"g"),f.Ib=function(e){if("object"==_typeof(e.dests))for(var t=0;t<e.dests.length;++t){var n=e.dests[t];if("string"==typeof n.c&&"aa."==n.id.substr(0,3))for(var r=n.c.match(f.bc),i=0;i<r.length;++i){var a=r[i],o=a.match(f.Ya),s="";"%"==o[1]&&"timezone_offset"==o[2]?s=(new Date).getTimezoneOffset():"%"==o[1]&&"timestampz"==o[2]&&(s=f.Mb()),n.c=n.c.replace(a,f.escape(s))}}},f.Mb=function(){var e=new Date,t=new Date(6e4*Math.abs(e.getTimezoneOffset()));return f.k(4,e.getFullYear())+"-"+f.k(2,e.getMonth()+1)+"-"+f.k(2,e.getDate())+"T"+f.k(2,e.getHours())+":"+f.k(2,e.getMinutes())+":"+f.k(2,e.getSeconds())+(0<e.getTimezoneOffset()?"-":"+")+f.k(2,t.getUTCHours())+":"+f.k(2,t.getUTCMinutes())},f.k=function(e,t){return(Array(e+1).join(0)+t).slice(-e)},f.pa={},f.doPostbacks=function(e){if("object"==_typeof(e))if(f.Ib(e),"object"==_typeof(f.AudienceManagement)&&"function"==typeof f.AudienceManagement.isReady&&f.AudienceManagement.isReady()&&"function"==typeof f.AudienceManagement.passData)f.AudienceManagement.passData(e);else if("object"==_typeof(e)&&"object"==_typeof(e.dests))for(var t=0;t<e.dests.length;++t){var n=e.dests[t];"object"==_typeof(n)&&"string"==typeof n.c&&"string"==typeof n.id&&"aa."==n.id.substr(0,3)&&(f.pa[n.id]=new Image,f.pa[n.id].alt="",f.pa[n.id].src=n.c)}},f.cb=function(e){f.i||f.Qb(),f.i.push(e),f.ia=f.A(),f.Wa()},f.Qb=function(){f.i=f.Tb(),f.i||(f.i=[])},f.Tb=function(){var e,t;if(f.oa()){try{(t=d.localStorage.getItem(f.ma()))&&(e=d.JSON.parse(t))}catch(e){}return e}},f.oa=function(){var e=!0;return e=f.trackOffline&&f.offlineFilename&&d.localStorage&&d.JSON?e:!1},f.Ma=function(){var e=0;return f.i&&(e=f.i.length),f.l&&e++,e},f.U=function(){var e;f.l&&(f.v&&f.v.complete&&f.v.D&&f.v.R(),f.l)||(f.Na=h,f.na?(f.ia>f.N&&f.Ua(f.i),f.qa(500)):0<(e=f.Cb())?f.qa(e):(e=f.Ka())&&(f.l=1,f.Ub(e),f.Xb(e)))},f.qa=function(e){f.Na||(e=e||0,f.Na=setTimeout(f.U,e))},f.Cb=function(){var e;return!f.trackOffline||f.offlineThrottleDelay<=0||(e=f.A()-f.Sa,f.offlineThrottleDelay<e)?0:f.offlineThrottleDelay-e},f.Ka=function(){if(0<f.i.length)return f.i.shift()},f.Ub=function(e){if(f.debugTracking){var t,n="AppMeasurement Debug: "+e;for(e=e.split("&"),t=0;t<e.length;t++)n+="\n\t"+f.unescape(e[t]);f.C(n)}},f.wa=function(){return f.marketingCloudVisitorID||f.analyticsVisitorID},f.X=!1;try{r=JSON.parse('{"x":"y"}')}catch(e){r=null}for(r&&"y"==r.x?(f.X=!0,f.W=function(e){return JSON.parse(e)}):d.$$APPMEASUREMENT_CORE&d.$.parseJSON?(f.W=function(e){return d.$.parseJSON(e)},f.X=!0):f.W=function(){return null},f.Xb=function(e){var t,n,r;if(f.lb(e)&&(n=1,t={send:function(e){f.useBeacon=!1,navigator.sendBeacon(e)?t.R():t.ga()}}),!t&&f.wa()&&2047<e.length&&(f.$a()&&(n=2,t=new XMLHttpRequest),t)&&(f.AudienceManagement&&f.AudienceManagement.isReady()||0!=f.usePostbacks)&&(f.X?t.Fa=!0:t=0),!t&&f.Xa&&(e=e.substring(0,2047)),!t&&f.d.createElement&&(0!=f.usePostbacks||f.AudienceManagement&&f.AudienceManagement.isReady())&&(t=f.d.createElement("SCRIPT"))&&"async"in t&&((r=(r=f.d.getElementsByTagName("HEAD"))&&r[0]?r[0]:f.d.body)?(t.type="text/javascript",t.setAttribute("async","async"),n=3):t=0),t||((t=new Image).alt="",t.abort)||void 0===d.InstallTrigger||(t.abort=function(){t.src=h}),t.Ta=Date.now(),t.Ha=function(){try{t.D&&(clearTimeout(t.D),t.D=0)}catch(e){}},t.onload=t.R=function(){if(t.Ta&&(f.ja=Date.now()-t.Ta),f.eb(e),t.Ha(),f.Gb(),f.ca(),f.l=0,f.U(),t.Fa){t.Fa=!1;try{f.doPostbacks(f.W(t.responseText))}catch(e){}}},t.onabort=t.onerror=t.ga=function(){t.Ha(),(f.trackOffline||f.na)&&f.l&&f.i.unshift(f.Fb),f.l=0,f.ia>f.N&&f.Ua(f.i),f.ca(),f.qa(500)},t.onreadystatechange=function(){4==t.readyState&&(200==t.status?t.R():t.ga())},f.Sa=f.A(),1===n)t.send(e);else if(2===n)r=e.indexOf("?"),n=e.substring(0,r),r=(r=e.substring(r+1)).replace(/&callback=[a-zA-Z0-9_.\[\]]+/,""),t.open("POST",n,!0),t.withCredentials=!0,t.send(r);else if(t.src=e,3===n){if(f.Qa)try{r.removeChild(f.Qa)}catch(e){}r.firstChild?r.insertBefore(t,r.firstChild):r.appendChild(t),f.Qa=f.v}t.D=setTimeout(function(){t.D&&(t.complete?t.R():(f.trackOffline&&t.abort&&t.abort(),t.ga()))},5e3),f.Fb=e,f.v=d["s_i_"+f.replace(f.account,",","_")]=t,(f.useForcedLinkTracking&&f.J||f.bodyClickFunction)&&(f.forcedLinkTrackingTimeout||(f.forcedLinkTrackingTimeout=250),f.da=setTimeout(f.ca,f.forcedLinkTrackingTimeout))},f.lb=function(e){var t=!1;return navigator.sendBeacon&&(f.nb(e)||f.useBeacon)&&(t=!0),t=f.vb(e)?!1:t},f.nb=function(e){return!!(e&&0<e.indexOf("pe=lnk_e"))},f.vb=function(e){return 64e3<=e.length},f.$a=function(){return"undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest},f.Gb=function(){if(f.oa()&&!(f.Ra>f.N))try{d.localStorage.removeItem(f.ma()),f.Ra=f.A()}catch(e){}},f.Ua=function(e){if(f.oa()){f.Wa();try{d.localStorage.setItem(f.ma(),d.JSON.stringify(e)),f.N=f.A()}catch(e){}}},f.Wa=function(){if(f.trackOffline)for((!f.offlineLimit||f.offlineLimit<=0)&&(f.offlineLimit=10);f.i.length>f.offlineLimit;)f.Ka()},f.forceOffline=function(){f.na=!0},f.forceOnline=function(){f.na=!1},f.ma=function(){return f.offlineFilename+"-"+f.visitorNamespace+f.account},f.A=function(){return(new Date).getTime()},f.Oa=function(e){return 0!=(e=e.toLowerCase()).indexOf("#")&&0!=e.indexOf("about:")&&0!=e.indexOf("opera:")&&0!=e.indexOf("javascript:")},f.setTagContainer=function(e){var t,n,r;for(f.Yb=e,t=0;t<f._il.length;t++)if((n=f._il[t])&&"s_l"==n._c&&n.tagContainerName==e){if(f.S(n),n.lmq)for(t=0;t<n.lmq.length;t++)r=n.lmq[t],f.loadModule(r.n);if(n.ml)for(r in n.ml)if(f[r])for(t in e=f[r],r=n.ml[r],r)!Object.prototype[t]&&("function"!=typeof r[t]||(""+r[t]).indexOf("s_c_il")<0)&&(e[t]=r[t]);if(n.mmq)for(t=0;t<n.mmq.length;t++)r=n.mmq[t],f[r.m]&&(e=f[r.m])[r.f]&&"function"==typeof e[r.f]&&(r.a?e[r.f].apply(e,r.a):e[r.f].apply(e));if(n.tq)for(t=0;t<n.tq.length;t++)f.track(n.tq[t]);n.s=f;break}},f.Util={urlEncode:f.escape,urlDecode:f.unescape,cookieRead:f.cookieRead,cookieWrite:f.cookieWrite,getQueryParam:function(e,t,n,r){var i,a="";return t=t||f.pageURL||d.location,n=n||"&",!e||!t||(i=(t=""+t).indexOf("?"))<0?a:(t=n+t.substring(i+1)+n,r&&(0<=t.indexOf(n+e+n)||0<=t.indexOf(n+e+"="+n))?void 0:((i=(t=0<=(i=t.indexOf("#"))?t.substr(0,i)+n:t).indexOf(n+e+"="))<0||0<(t=0<=(i=(t=t.substring(i+n.length+e.length+1)).indexOf(n))?t.substring(0,i):t).length&&(a=f.unescape(t)),a))},getIeVersion:function(){if(document.documentMode)return document.documentMode;for(var e=7;4<e;e--){var t=document.createElement("div");if(t.innerHTML="\x3c!--[if IE "+e+"]><span></span><![endif]--\x3e",t.getElementsByTagName("span").length)return e}return null}},f.F="supplementalDataID timestamp dynamicVariablePrefix visitorID marketingCloudVisitorID analyticsVisitorID audienceManagerLocationHint authState fid vmk visitorMigrationKey visitorMigrationServer visitorMigrationServerSecure charSet visitorNamespace cookieDomainPeriods fpCookieDomainPeriods cookieLifetime pageName pageURL customerPerspective referrer contextData currencyCode lightProfileID lightStoreForSeconds lightIncrementBy retrieveLightProfiles deleteLightProfiles retrieveLightData".split(" "),f.g=f.F.concat("purchaseID variableProvider channel server pageType transactionID campaign state zip events events2 products audienceManagerBlob tnt".split(" ")),f.ka="timestamp charSet visitorNamespace cookieDomainPeriods cookieLifetime contextData lightProfileID lightStoreForSeconds lightIncrementBy".split(" "),f.O=f.ka.slice(0),f.Ea="account allAccounts debugTracking visitor visitorOptedOut trackOffline offlineLimit offlineThrottleDelay offlineFilename usePlugins doPlugins configURL visitorSampling visitorSamplingGroup linkObject clickObject linkURL linkName linkType trackDownloadLinks trackExternalLinks trackClickMap trackInlineStats linkLeaveQueryString linkTrackVars linkTrackEvents linkDownloadFileTypes linkExternalFilters linkInternalFilters useForcedLinkTracking forcedLinkTrackingTimeout useLinkTrackSessionStorage trackingServer trackingServerSecure ssl abort mobile dc lightTrackVars maxDelay expectSupplementalData useBeacon usePostbacks registerPreTrackCallback registerPostTrackCallback bodyClickTarget bodyClickFunction AudienceManagement".split(" "),t=0;t<=250;t++)t<76&&(f.g.push("prop"+t),f.O.push("prop"+t)),f.g.push("eVar"+t),f.O.push("eVar"+t),t<6&&f.g.push("hier"+t),t<4&&f.g.push("list"+t);t="pe pev1 pev2 pev3 latitude longitude resolution colorDepth javascriptVersion javaEnabled cookiesEnabled browserWidth browserHeight connectionType homepage pageURLRest marketingCloudOrgID ms_a".split(" "),f.g=f.g.concat(t),f.F=f.F.concat(t),f.ssl=0<=d.location.protocol.toLowerCase().indexOf("https"),f.charSet="UTF-8",f.contextData={},f.offlineThrottleDelay=0,f.offlineFilename="AppMeasurement.offline",f.P="s_sq",f.Sa=0,f.ia=0,f.N=0,f.Ra=0,f.linkDownloadFileTypes="exe,zip,wav,mp3,mov,mpg,avi,wmv,pdf,doc,docx,xls,xlsx,ppt,pptx",f.w=d,f.d=d.document;try{f.Xa=!1,navigator&&(i=navigator.userAgent,"Microsoft Internet Explorer"==navigator.appName||0<=i.indexOf("MSIE ")||0<=i.indexOf("Trident/")&&0<=i.indexOf("Windows NT 6"))&&(f.Xa=!0)}catch(e){}f.ca=function(){f.da&&(d.clearTimeout(f.da),f.da=h),f.bodyClickTarget&&f.J&&f.bodyClickTarget.dispatchEvent(f.J),f.bodyClickFunction&&("function"==typeof f.bodyClickFunction?f.bodyClickFunction():f.bodyClickTarget&&f.bodyClickTarget.href&&(f.d.location=f.bodyClickTarget.href)),f.bodyClickTarget=f.J=f.bodyClickFunction=0},f.Va=function(){f.b=f.d.body,f.b?(f.r=function(e){var t,n,r,i,a;if(!(f.d&&f.d.getElementById("cppXYctnr")||e&&e["s_fe_"+f._in])){if(f.Ga){if(!f.useForcedLinkTracking)return f.b.removeEventListener("click",f.r,!0),void(f.Ga=f.useForcedLinkTracking=0);f.b.removeEventListener("click",f.r,!1)}else f.useForcedLinkTracking=0;f.clickObject=e.srcElement||e.target;try{if(!f.clickObject||f.M&&f.M==f.clickObject||!(f.clickObject.tagName||f.clickObject.parentElement||f.clickObject.parentNode))f.clickObject=0;else{var o=f.M=f.clickObject;if(f.ha&&(clearTimeout(f.ha),f.ha=0),f.ha=setTimeout(function(){f.M==o&&(f.M=0)},1e4),r=f.Ma(),f.track(),r<f.Ma()&&f.useForcedLinkTracking&&e.target){for(i=e.target;i&&i!=f.b&&"A"!=i.tagName.toUpperCase()&&"AREA"!=i.tagName.toUpperCase();)i=i.parentNode;if(i&&(a=i.href,f.Oa(a)||(a=0),n=i.target,e.target.dispatchEvent)&&a&&(!n||"_self"==n||"_top"==n||"_parent"==n||d.name&&n==d.name)){try{t=f.d.createEvent("MouseEvents")}catch(e){t=new d.MouseEvent}if(t){try{t.initMouseEvent("click",e.bubbles,e.cancelable,e.view,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget)}catch(e){t=0}t&&(t["s_fe_"+f._in]=t.s_fe=1,e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),e.preventDefault(),f.bodyClickTarget=e.target,f.J=t)}}}}}catch(e){f.clickObject=0}}},f.b&&f.b.attachEvent?f.b.attachEvent("onclick",f.r):f.b&&f.b.addEventListener&&(navigator&&(0<=navigator.userAgent.indexOf("WebKit")&&f.d.createEvent||0<=navigator.userAgent.indexOf("Firefox/2")&&d.MouseEvent)&&(f.Ga=1,f.useForcedLinkTracking=1,f.b.addEventListener("click",f.r,!0)),f.b.addEventListener("click",f.r,!1))):setTimeout(f.Va,30)},f.Hb(),f.ic||(e?f.setAccount(e):f.C("Error, missing Report Suite ID in AppMeasurement initialization"),f.Va(),f.loadModule("ActivityMap"))}function s_gi(e){var t,n,r,i,a,o=window.s_c_il,s=e.split(","),c=0;if(o)for(n=0;!c&&n<o.length;){if("s_c"==(t=o[n])._c&&(t.account||t.oun))if(t.account&&t.account==e)c=1;else for(r=t.account||t.oun,r=t.allAccounts||r.split(","),i=0;i<s.length;i++)for(a=0;a<r.length;a++)s[i]==r[a]&&(c=1);n++}return c?t.setAccount&&t.setAccount(e):t=new AppMeasurement(e),t}function s_pgicq(){var e,t,n,r=window,i=r.s_giq;if(i)for(e=0;e<i.length;e++)(n=s_gi((t=i[e]).oun)).setAccount(t.un),n.setTagContainer(t.tagContainerName);r.s_giq=0}s_cbc_sitecatalyst_init(s_cbc_sitecatalyst),AppMeasurement.getInstance=s_gi,window.s_objectID||(window.s_objectID=0),s_pgicq(),CBC.APP.ANA.VALIDATORS.FBPIXEL=function(){var e=[],r=void 0;return{shouldRestrictTracking:function(){return/(cbc)?kids(cbc2|news|fantasyhockey)?/.test(CBC.APP.SC.UTIL.returnURL())||CBC.APP.SC.UTIL.isIOSWebviewPrivate()},validateFacebookLibrary:function(){return new Promise(function(t,n){CBC.APP.ANA.VALIDATORS.FBPIXEL.setUserOptinFlag().then(function(e){e?(CBC.APP.ANA.LIBRARY.FBPIXEL.facebookLibrary(),t(!0)):t(!1)}).catch(function(e){n(e)})})},initializeFacebookLibrary:function(){return new Promise(function(t,e){CBC.APP.SC.masterSwitch.switches&&CBC.APP.SC.masterSwitch.switches.facebook&&!CBC.APP.ANA.VALIDATORS.FBPIXEL.shouldRestrictTracking()?CBC.APP.ANA.VALIDATORS.FBPIXEL.validateFacebookLibrary().finally(function(){t(CBC.APP.ANA.VALIDATORS.FBPIXEL.checkOptIn())}):CBC.APP.SC.masterSwitch.switches&&{}.hasOwnProperty.call(CBC.APP.SC.masterSwitch.switches,"facebook")?e("Facebook Library has not been initialized"):CBC.APP.SC.UTIL.masterSwitchMetaPromise().then(function(e){e.switches.facebook&&!CBC.APP.ANA.VALIDATORS.FBPIXEL.shouldRestrictTracking()&&CBC.APP.ANA.VALIDATORS.FBPIXEL.validateFacebookLibrary().finally(function(){t(CBC.APP.ANA.VALIDATORS.FBPIXEL.checkOptIn())})})})},checkOptinStatusAndPrivacy:function(){return window.fbq&&CBC.APP.ANA.VALIDATORS.FBPIXEL.checkOptIn()&&!CBC.APP.ANA.VALIDATORS.FBPIXEL.shouldRestrictTracking()},getUserFlagPromise:function(){var e=CBC.APP.SC.UTIL.getCBCVisitorOrPlusCookieValue({isCbcPlus:!0}),t=CBC.APP.SC.UTIL.getCBCVisitorOrPlusCookieValue({isCbcPlus:!1}),e=e&&e.length?e:t,r="https://ups.data.cbc.ca/v0/UIEUser/"+e+"/UPSPreferences/fdfc9e";return 0===e.length?Promise.resolve({response:JSON.stringify({fbpixel_tracking:!1})}):new Promise(function(t,n){CBC.APP.SC.UTIL.makeGETRequest(r,{success:function(e){t(e)},failure:function(e,t){n(t.failure.message)}},{failure:{message:"unable to communicate"}})})},setUserOptinFlag:function(){return new Promise(function(t,n){CBC.APP.ANA.VALIDATORS.FBPIXEL.getUserFlagPromise().then(function(e){e=JSON.parse(e.response);window.CBC.APP.PubSub.publish("AD_PREFERENCES_LOADED",e),t(r=void 0===e.fbpixel_tracking||e.fbpixel_tracking)}).catch(function(e){n(e)})})},checkOptIn:function(){return r},trackEvent:function(){void 0===window.fbq&&void 0===CBC.APP.ANA.VALIDATORS.FBPIXEL.checkOptIn()?e.push("track"):CBC.APP.ANA.DISPATCHERS.FBPIXEL&&CBC.APP.ANA.VALIDATORS.FBPIXEL.checkOptinStatusAndPrivacy()&&CBC.APP.ANA.DISPATCHERS.FBPIXEL.pageView()},executeQueue:function(){e.length&&e.forEach(function(e){"track"===e&&CBC.APP.ANA.VALIDATORS.FBPIXEL.trackEvent()})}}}(),CBC.APP.ANA.LIBRARY.FBPIXEL={facebookLibrary:function(){var e,t,n;t=window,n=document,t.fbq||(e=t.fbq=function(){e.callMethod?e.callMethod.apply(e,arguments):e.queue.push(arguments)},t._fbq||(t._fbq=e),(e.push=e).loaded=!0,e.version="2.0",e.queue=[],(t=n.createElement("script")).async=!0,t.src="https://connect.facebook.net/en_US/fbevents.js",(n=n.getElementsByTagName("script")[0]).parentNode.insertBefore(t,n)),fbq.disablePushState=!0,fbq("set","autoConfig",!1,"1023886784662676"),fbq("init","1023886784662676")}};var SENTRY_URL="https://browser.sentry-cdn.com/7.44.1/bundle.tracing.min.js",SENTRY_ENV="production",SENTRY_DSN="https://9b9aaf21ee3c4fc1ae36f17c41c54043@o148878.ingest.sentry.io/4504084475281408",sentryErrorHandler=function(){function i(e){CBC.APP.SC.DEBUG&&"undefined"!=typeof console&&"function"==typeof console.log&&console.log(e)}function a(){return 3<n}var n=0,o=null,t=null;return{debug:i,initSentry:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};window.Sentry&&(null!=t&&null!=o||(t=new window.Sentry.BrowserClient({dsn:SENTRY_DSN,transport:window.Sentry.makeFetchTransport,stackParser:window.Sentry.defaultStackParser,integrations:window.Sentry.defaultIntegrations,environment:SENTRY_ENV,debug:"production"!==SENTRY_ENV,attachStacktrace:!0,normalizeDepth:!0,tracesSampleRate:0}),o=new window.Sentry.Hub(t)),e["stats-top@"]=CBC.APP.versions["cbc-stats-top"],e["stats-bottom@"]=CBC.APP.versions["cbc-stats-bottom"],o.setTags(e))},loadSentryScript:function(){return new Promise(function(e){var t;window.Sentry||a()||(n++,(t=document.createElement("script")).type="text/javascript",t.crossOrigin="anonymous",t.src=SENTRY_URL,t.integrity="sha384-+WswOKwnNyC+4lLRe7E8bNO/tukhjzv4d3gfVjLXtzleULq77vTiHDCOvCQOTECm",document.head.appendChild(t)),e()})},setUp:function(){CBC.APP.ANA.LIBRARY.SENTRY.loadSentryScript().then(function(){CBC.APP.ANA.LIBRARY.SENTRY.initSentry()})},report:function(e,t,n){var r=this;window.CBC.APP.SC.masterSwitch&&window.CBC.APP.SC.masterSwitch.switches&&window.CBC.APP.SC.masterSwitch.switches.exceptionreporting?window.Sentry?(CBC.APP.ANA.LIBRARY.SENTRY.initSentry(n),o.setExtras(t),o.captureException(e)):a()?i("Reach maximum of loading Sentry SDK!"):CBC.APP.ANA.LIBRARY.SENTRY.loadSentryScript().then(function(){r.report(e,t,n)}):i("Exception Reporting is disabled on the environment. Update master-switch configuration to enable it.")}}};CBC.APP.ANA.LIBRARY.SENTRY=sentryErrorHandler(),CBC.APP.ANA.LIBRARY.SENTRY.setUp(),CBC.APP.ANA.LinkTracker=function(){"use strict";function a(e){return e.textContent.replace(/\s/g,"")?e.textContent.replace(/\n/g,"").trim():!("IMG"!==e.tagName||!e.alt.replace(/\s/g,""))&&e.alt.replace(/\n/g,"").trim()}return{checkClickEvent:function(e){try{var t=e.target,n=CBC.APP.ANA.LinkTracker.bubbleUpProps(t);CBC.APP.ANA.LinkTracker.registerLinkClick(n)}catch(e){console.log(e)}},bubbleUpProps:function(e){for(var t={};e&&"BODY"!==e.nodeName;){var n,r,i=window.CBC.APP.SC.UTIL.cleanString;for(n in e.dataset)switch(n){case"featureName":t.dataFeatureName||(t.dataFeatureName=i(e.dataset.featureName));break;case"featureInstance":t.dataFeatureInstance||(t.dataFeatureInstance=i(e.dataset.featureInstance));break;case"featurePosition":t.dataFeaturePosition||(t.dataFeaturePosition=i(e.dataset.featurePosition));break;case"featureValue":t.dataFeatureValue||(t.dataFeatureValue=i(e.dataset.featureValue));break;default:CBC.APP.SC.UTIL.console("invalid data feature type: "+n)}t.linkName||(t.linkName=i(function(e){if(a(e))return a(e);if(!e.childNodes)return console.log("LinkTracker: LinkName undefined."),"";for(var t=0;t<e.childNodes.length;t++)if(a(e.childNodes[t]))return a(e.childNodes[t])}(e))),t.linkPosition||e.getAttribute("class")&&(r=new RegExp(/\bsclt-([a-zA-Z0-9_]+)\b/),r=e.getAttribute("class").match(r))&&r[1]&&(t.linkPosition=i(r[1])),e=e.parentElement}return t},registerLinkClick:function(e){var t="DATA_FEATURE_LINKS",n=window.CBC.APP.SC.UTIL,r=(n.setCookie(t,"",1),n.setCookie("SC_LINKS","",1),void 0===window.s_cbc_sitecatalyst.pageName?"":window.s_cbc_sitecatalyst.pageName),i=void 0===e.linkName?"":e.linkName;try{var a,o,s=r.replace(/"/g,'\\"'),c=i.replace(/"/g,'\\"');e.linkPosition&&(a={pageName:s,linkName:c,concatValue:"".concat(s," | ").concat(c),linkPosition:e.linkPosition},n.setCookie("SC_LINKS",JSON.stringify(a))),(e.dataFeatureName||e.dataFeatureInstance||e.dataFeaturePosition||e.dataFeatureValue)&&(o={pageName:s,dataFeatureName:e.dataFeatureName,dataFeatureInstance:e.dataFeatureInstance,dataFeaturePosition:e.dataFeaturePosition,dataFeatureValue:e.dataFeatureValue},n.setCookie(t,JSON.stringify(o)))}catch(e){console.log(e)}}}}(),function(){"use strict";window._sf_startpt=(new Date).getTime();var n={uid:46236,domain:"cbc.ca",flickerControl:!1,useCanonical:!0,autoDetect:!1,articleBlockSelector:"a.card"},o=!1;document.location.pathname.match(/^\/g\/stats\/ext.html/g)&&(n.path=document.location.href),n.cbc={authors:"",sections:"",title:"",path:"",stringSanitize:function(e){return e.replace(/[.,\/#!$%\^&\*;:{}=\-_`~()\s]/g,"").toLowerCase()},objectToSections:function(e){var t=[];return e.contentarea&&t.push(n.cbc.stringSanitize(e.contentarea)),e.subsection1&&t.push(n.cbc.stringSanitize(e.subsection1)),e.subsection2&&t.push(n.cbc.stringSanitize(e.subsection2)),e.subsection3&&t.push(n.cbc.stringSanitize(e.subsection3)),e.contenttype&&(t.push(n.cbc.stringSanitize(e.contenttype)),"index"===e.contenttype)&&(window._sf_async_config.useCanonical=!1),"string"==typeof CBC.APP.SC.DTM.DATA.syndicate&&t.push(n.cbc.stringSanitize(CBC.APP.SC.DTM.DATA.syndicate)),e.title&&(e.spa||e.syndicate)?this.title=/\s/g.test(e.title)?e.title:e.title.replace(/\-/g," "):this.title=document.title,e.url&&(this.path=e.url),t.join(",")},chartbeatSections:function(){0<Object.keys(CBC.APP.SC.DTM.formatted.chartbeat).length&&(this.sections=n.cbc.objectToSections(CBC.APP.SC.DTM.formatted.chartbeat)),"string"==typeof this.sections&&this.sections.match(/regions/)&&(this.sections=this.sections.replace("radio","news"))},chartbeatAuthors:function(){this.authors="",CBC.APP.SC.DTM.formatted.chartbeat&&(this.authors=void 0!==CBC.APP.SC.DTM.formatted.chartbeat.authors?CBC.APP.SC.DTM.formatted.chartbeat.authors.toLowerCase().replace(/\s/g,"-"):"")},chartbeatTitle:function(e){void 0!==this.title&&""!==this.title||(this.title=e)},chartbeatPath:function(e){void 0!==this.path&&""!==this.path||(this.path=e)},clearMetadata:function(){try{this.sections="",this.authors="",this.title="",this.path=""}catch(e){CBC.APP.SC.DEBUG&&console.log("Error - Chartbeat clearMetadata: "+e)}},setIframeMode:function(e){0},addLibrary:function(){var e=document.createElement("script"),t=document.getElementsByTagName("script")[0],e=(e.async=!0,e.src="//static.chartbeat.com/js/chartbeat_mab_image.js",t.parentNode.insertBefore(e,t),document.createElement("script")),t=document.getElementsByTagName("script")[0];e.src="//static.chartbeat.com/js/chartbeat_video.js",t.parentNode.insertBefore(e,t),"fia"===window.CBC.APP.SC.DTM.DATA.syndicate&&(e=document.createElement("script"),t=document.getElementsByTagName("script")[0],e.src="//static.chartbeat.com/js/chartbeat_fia.js",e.defer=!0,t.parentNode.insertBefore(e,t))},pageChange:function(){var e,t,n,r,i="",a="";try{if(i=document.title,a=CBC.APP.SC.UTIL.returnURL().replace(/\?.*|#.*/,""),CBC.APP.SC.DTM.formatted.chartbeat&&(i=(void 0!==window.CBC.APP.SC.DTM.formatted.chartbeat.title?window.CBC.APP.SC.DTM.formatted.chartbeat:document).title,a=void 0!==window.CBC.APP.SC.DTM.formatted.chartbeat.url?window.CBC.APP.SC.DTM.formatted.chartbeat.url:CBC.APP.SC.UTIL.returnURL().replace(/\?.*|#.*/,"")),o&&window._sf_async_config.cbc.clearMetadata(),window._sf_async_config.cbc.chartbeatAuthors(),window._sf_async_config.cbc.chartbeatSections(),window._sf_async_config.cbc.chartbeatPath(a),window._sf_async_config.cbc.chartbeatTitle(i),e=this.authors,t=this.sections,n=this.path,r=this.title,o){if(void 0===window.pSUPERFLY||"function"!=typeof window.pSUPERFLY.virtualPage)return!1;window.pSUPERFLY.virtualPage({authors:e,sections:t,path:n,title:r})}else window._sf_async_config.authors=e,window._sf_async_config.sections=t,window._sf_async_config.title=r,window._sf_async_config.path=n,window._sf_async_config.cbc.addLibrary(),o=!0;return CBC.APP.SC.DEBUG&&console.log("Chartbeat - location: "+a+" title: "+i),!0}catch(e){return CBC.APP.SC.DEBUG&&console.log("Error - ChartbeatSPA: "+e),!1}}},window._sf_async_config||(window._sf_async_config=n)}(),function(){"use strict";var e;Object.keys(CBC.APP.PubSub).length||(e=function(){function r(e,t,n){_classCallCheck(this,r),this.subscribers=e||{},this.queuedEvents=t||[],this.isOn=n||!1}return _createClass(r,[{key:"turnOn",value:function(){if(this.isOn=!0,this.queuedEvents.length)for(var e=0;e<this.queuedEvents.length;e++)this.publish(this.queuedEvents[e].event,this.queuedEvents[e].payload),this.queuedEvents.splice(e,1)}},{key:"turnOff",value:function(){this.isOn=!1}},{key:"isOn",value:function(){return this.isOn}},{key:"publish",value:function(t,n){t in this.subscribers?this.subscribers[t].slice().forEach(function(e){try{e(t,n)}catch(e){console.error(e.message)}}):this.isOn||this.queuedEvents.push({event:t,payload:n})}},{key:"subscribe",value:function(e,t){return e in this.subscribers||(this.subscribers[e]=[]),this.subscribers[e].some(function(e){if(t===e)return!0})?(console.log("callback already exists for event:",e,t),!1):(this.subscribers[e].push(t),!0)}},{key:"unsubscribe",value:function(e,r){e in this.subscribers&&this.subscribers[e].some(function(e,t,n){if(r===e)return n.splice(t,1),!0})}}]),r}(),CBC.APP.PubSub=new e)}(),CBC.APP.ANA.VARS=CBC.APP.ANA.VARS||{},CBC.APP.ANA.VARS.sessionID="",CBC.APP.ANA.VARS.sessionTimeOut=0,CBC.APP.SC.EventTracker=function(){"use strict";var i=!1,a=[],o=[];function e(){if(CBC.APP.SC.Subscribers.eventtracker){var e=CBC.APP.SC.Subscribers.eventtracker,t=e.length;if(t)for(var n=0;n<t;n++)"function"==typeof e[t-1].cb&&e.pop().cb()}}function s(){var e,t="",t=/cbc\.ca$/.test(window.document.domain)?".cbc.ca":void 0;CBC.APP.SC.UTIL.getCookie("cbc-session")?(e=CBC.APP.SC.UTIL.getCookie("cbc-session"),CBC.APP.SC.UTIL.setCookie("cbc-session",e,1/48,t)):CBC.APP.SC.UTIL.setCookie("cbc-session",CBC.APP.SC.UTIL.getEpochTime(),1/48,t)}function c(e){CBC.APP.SC.DEBUG&&"undefined"!=typeof console&&"function"==typeof console.log&&console.log(e)}function t(e,t){var n,r;return"string"!=typeof e?(c("EventTracker - Warning: did not send an event name: "+e),!1):"object"!==_typeof(t)?(c("EventTracker - Warning: event properties must be sent as an object: "+t),!1):i?(n=(n=e).toUpperCase(),Boolean(a[n])?("START WEB SESSION"!==e.toUpperCase()&&(window.navigator.cookieEnabled?(n=CBC.APP.SC.UTIL.getCookie("cbc-session"),CBC.APP.SC.EventTracker.checkStartWebSession(n,!0)):CBC.APP.SC.EventTracker.checkStartWebSession("",!1)),n=e,r=t,s(),CBC.APP.PubSub.publish(n.toUpperCase(),r),t):(c("EventTracker - Warning: not a valid event: "+e),!1)):(o.push([e,t]),c("EventTracker - Warning: not turned on but the tracked events have been queued: "+e+" "+t),!1)}function n(){Promise.all(CBC.APP.SC.FILE_STATUS.filePromises).finally(function(){CBC.APP.SC.UTIL.getCBCVisitorOrPlusCookieValue({isCbcPlus:!1})?(i=!0,r(),e()):CBC.APP.SC.UTIL.setCBCVisitorIDPromise().then(function(){}).catch(function(e){CBC.APP.SC.UTIL.debug(e)}).finally(function(){i=!0,r(),e(),CBC.APP.SC.UTIL.getCBCVisitorOrPlusCookieValue({isCbcPlus:!1})&&CBC.APP.PubSub.publish("UIEAlert")}),CBC.APP.ANA.VALIDATORS.FBPIXEL.initializeFacebookLibrary().catch(function(e){console.log(e)}).finally(function(){CBC.APP.ANA.VALIDATORS.FBPIXEL.executeQueue()})})}function r(){if(o.length){for(var e=0;e<o.length;e++)t(o[e][0],o[e][1]);o=[]}}return{trackEvent:t,setCBCSession:s,checkStartWebSession:function(e,t){var n=CBC.APP.SC.UTIL.getEpochTime(),r=CBC.APP.ANA.VARS.sessionTimeOut+18e5;return CBC.APP.ANA.VARS.sessionID=n.toString(),CBC.APP.ANA.VARS.sessionTimeOut=n,t?e?(c("checkStartWebSession: current session in progress."),!1):(c('checkStartWebSession: new session - firing "START WEB SESSION"'),window.CBC.APP.SC.EventTracker.trackEvent("START WEB SESSION",{}),!0):(c("checkStartWebSession: (cookies disabled) - tracking in memory."),r<n?(c('checkStartWebSession: (cookies disabled) new session - firing "START WEB SESSION"'),window.CBC.APP.SC.EventTracker.trackEvent("START WEB SESSION",{}),!0):(c("checkStartWebSession: (cookies disabled) - current session in progress."),CBC.APP.ANA.VARS.sessionTimeOut=n,!1))},getValidEvents:function(){return a},isOn:function(){return i},turnOn:function(){try{a=CBC.APP.SC.masterSwitch.pubsub.eventshash,n()}catch(e){var t="//www.cbc.ca/network/includes/stats/master-switch.json";CBC.APP.SC.UTIL.makeGETRequest(t,{success:function(e,t){e=JSON.parse(e.responseText);a=e.pubsub.eventshash,n()},failure:function(e,t){c("ERROR: Unable to talk to config URL: "+t.failure.uri)}},{success:{uri:t},failure:{uri:t}},0,0,{timeout:2e3,cb:function(){console.log("ERROR: AJAX request for //www.cbc.ca/network/includes/stats/master-switch.json timed out.")}})}}}}(),CBC.APP.SC.Subscribers.eventtracker=CBC.APP.SC.Subscribers.eventtracker||[],CBC.APP.SC.EventTracker.turnOn(),window.conductricsDataLayer=window.conductricsDataLayer||[],Object.keys(CBC.APP.AB).length||(CBC.APP.AB={Experiments:{ids:[],variants:[]},setUserPropertyExperiments:function(){var e,t,n,r,i,a,o,s,c;CBC.APP.SC.UTIL.getDoNotTrackValue()||(e="stats_experiment_ids",t="stats_experiment_variants",n="experiment.id",r="experiment.variant",i=window.CBC.APP.SC.UTIL.getCookie(e),a=window.CBC.APP.SC.UTIL.getCookie(t),i&&"undefined"!==i&&a&&"undefined"!==a?(i!==JSON.stringify(this.Experiments.ids)&&(o=[],this.Experiments.ids.forEach(function(e){-1==i.indexOf(e)&&o.push(e)}),o.length)&&(c=window.CBC.APP.SC.UTIL.uniqueArray(JSON.parse(i).concat(this.Experiments.ids)),window.CBC.APP.SC.UTIL.setCookie(e,JSON.stringify(c)),window.CBC.APP.ANA.FORMATTERS.Common.mUP("append",n,o)),a!==JSON.stringify(this.Experiments.variants)&&(s=[],this.Experiments.variants.forEach(function(e){-1==a.indexOf(e)&&s.push(e)}),s.length)&&(c=window.CBC.APP.SC.UTIL.uniqueArray(JSON.parse(a).concat(this.Experiments.variants)),window.CBC.APP.SC.UTIL.setCookie(t,JSON.stringify(c)),window.CBC.APP.ANA.FORMATTERS.Common.mUP("append",r,s))):(window.CBC.APP.SC.UTIL.setCookie(e,JSON.stringify(this.Experiments.ids)),window.CBC.APP.ANA.FORMATTERS.Common.mUP("append",n,this.Experiments.ids),window.CBC.APP.SC.UTIL.setCookie(t,JSON.stringify(this.Experiments.variants)),window.CBC.APP.ANA.FORMATTERS.Common.mUP("append",r,this.Experiments.variants)))},sendEventGoalToConductrics:function(e,t){void 0!==CBC.APP.SC.DTM.formatted.googlecloud&&"READ"==e&&(t=CBC.APP.SC.DTM.formatted.googlecloud),"STREAMED"===e&&t.content?"video"===t.content.area||t.content.media&&"video"===t.content.media.audiovideo?window.CBC.APP.AB.Testing.sendGoal("api-streamed-video",1):("audio"===t.content.area||t.content.media&&"audio"===t.content.media.audiovideo)&&window.CBC.APP.AB.Testing.sendGoal("api-streamed-audio",1):"READ"===e&&t.content&&"comments"===t.content.type&&window.CBC.APP.AB.Testing.sendGoal("api-read-comment",1)},processConductricsViewStateChange:function(e,t){var n,r;CBC.APP.AB.Testing&&(n=["audio","video"],"STREAMED"===(e=e.replace(" ","-").toUpperCase())&&t.content&&(r=(r=(r=t.content.media&&n.includes(t.content.media.audiovideo)?t.content.media.audiovideo:"")||(n.includes(t.content.area)?t.content.area:""))?{audiovideo:r}:void 0),CBC.APP.AB.Testing.viewStateChange(e,r))},init:function(){window.conductricsDataLayer.push({conductrics_traits:[]});function n(){CBC.APP.AB.conductrics_api=new window.Conductrics.ClientApi,CBC.APP.PubSub.subscribe("loadedAudiences",function(e,t){t=CBC.APP.DMP.LOTAME.filterAudienceSegmentIDs(t,["Conductrics"]).map(function(e){return"aud:".concat(e)});t&&t.length&&(window.conductricsDataLayer.push(["conductrics_traits.push"].concat(_toConsumableArray(t))),CBC.APP.AB.Testing.viewStateChange("lotame-loaded"))})}try{CBC.APP.SC.masterSwitch.switches.conductrics&&n()}catch(e){var t="//www.cbc.ca/network/includes/stats/master-switch.json";CBC.APP.SC.UTIL.makeGETRequest(t,{success:function(e,t){JSON.parse(e.responseText).switches.conductrics&&n()},failure:function(e,t){console.log("ERROR: Unable to talk to config URL: ".concat(t.failure.uri))}},{success:{uri:t},failure:{uri:t}})}},Testing:{getDecision:function(n,e,t,r){if(CBC.APP.SC.UTIL.getCookie("ab_test_override")){var i=CBC.APP.SC.UTIL.getCookie("ab_test_override").split(":"),a=i[0],i=i[1];if(a===n)return console.log("Overriding Conductrics A/B test "+n+" to decision "+i),r({status:200,data:{sels:_defineProperty({},n,i)}}),!0}return!!CBC.APP.AB.conductrics_api&&(a={a:n},e&&(a.c=e),t&&(a.n=t),r&&CBC.APP.AB.conductrics_api.exec([a],function(e,t){t.sels[n]&&(-1===CBC.APP.AB.Experiments.ids.indexOf(n)&&CBC.APP.AB.Experiments.ids.push(n),-1===CBC.APP.AB.Experiments.variants.indexOf(n+"|"+t.sels[n])&&CBC.APP.AB.Experiments.variants.push(n+"|"+t.sels[n]),CBC.APP.AB.setUserPropertyExperiments()),r({status:e?500:200,data:t})}),!0)},sendGoal:function(e,t,n){var r;return!!CBC.APP.AB.conductrics_api&&(e={g:e},t&&(e.v=t),r=n||function(){},CBC.APP.AB.conductrics_api.exec([e],function(e,t){r({status:e?500:200,data:t})}),!0)},viewStateChange:function(e,t){return!!CBC.APP.AB.conductrics_api&&(window.conductricsDataLayer.push({conductrics_vstate:e}),t?window.conductricsDataLayer.push({event:e,DATA:t}):window.conductricsDataLayer.push({event:e}),!0)}}}),function(e,t,n,r){(n=e.createElement(t)).type="text/java"+t,n.src="//cdn-cbc-v3.conductrics.com/ac-zNSqTXgWDt/v3/agent-api/js/f-vBLHMPIjsJ/dt-j8cr9H0FLuClP05ufJyktE9whuke2M?apikey=api-tmcIKLoOJOCyesvewQIB",n.onload=CBC.APP.AB.init,(r=e.getElementsByTagName(t)[0])&&r.parentNode.insertBefore(n,r)}(document,"script"),CBC.APP.readJS=function(){"use strict";return{init:function(){var e,t=!1,n=!1,r=[],s={resetConfigStatus:function(){return s.status={strict:!1,spa:!1,debug:{console:!1,overlay:!1,overlays:{}},timeInterval:1.5,activity:{scrollDepth:0,maxVertical:0,timeOnPage:0,timeInUnknownState:0,timeInView:0,scrolled:!1,dnp:0,vpp:0,pollingPoints:0,readingPoints:0,increment:100,read:!1,averageReadSpeed:5,totalTime:0,initialTime:0},thresholds:{viewport:25,domNode:30,minVertical:50,readingPoint:400,domPolling:100,minTimeInView:3,maxTimeInView:20,scrollDepth:0,percentagePoint:30}},!0},getConfig:function(){return s.status},setConfig:function(){return!(t||("undefined"==typeof readJSConfig?(s.console("Error: Cannot find Read JS config object readJSConfig"),1):("boolean"==typeof readJSConfig.spa&&(s.status.spa=readJSConfig.spa),"boolean"==typeof readJSConfig.strict&&(s.status.strict=readJSConfig.strict),readJSConfig.debug&&("boolean"==typeof readJSConfig.debug.console&&(s.status.debug.console=readJSConfig.debug.console),"boolean"==typeof readJSConfig.debug.overlay)&&(s.status.debug.overlay=readJSConfig.debug.overlay),"number"==typeof readJSConfig.timeInterval&&(s.status.timeInterval=readJSConfig.timeInterval),readJSConfig.activity&&("number"==typeof readJSConfig.activity.increment&&(s.status.activity.increment=readJSConfig.activity.increment),"number"==typeof readJSConfig.activity.averageReadSpeed)&&(s.status.activity.averageReadSpeed=readJSConfig.activity.averageReadSpeed),readJSConfig.thresholds&&("number"==typeof readJSConfig.thresholds.viewport&&(s.status.thresholds.viewport=readJSConfig.thresholds.viewport),"number"==typeof readJSConfig.thresholds.domNode&&(s.status.thresholds.domNode=readJSConfig.thresholds.domNode),"number"==typeof readJSConfig.thresholds.readingPoint&&(s.status.thresholds.readingPoint=readJSConfig.thresholds.readingPoint),"number"==typeof readJSConfig.thresholds.domPolling&&(s.status.thresholds.domPolling=readJSConfig.thresholds.domPolling),"number"==typeof readJSConfig.thresholds.timeInView&&(s.status.thresholds.timeInView=readJSConfig.thresholds.timeInView),"number"==typeof readJSConfig.thresholds.minTimeInView&&(s.status.thresholds.minTimeInView=readJSConfig.thresholds.minTimeInView),"number"==typeof readJSConfig.thresholds.maxTimeInView&&(s.status.thresholds.maxTimeInView=readJSConfig.thresholds.maxTimeInView),"number"==typeof readJSConfig.thresholds.minVertical&&(s.status.thresholds.minVertical=readJSConfig.thresholds.minVertical),"number"==typeof readJSConfig.thresholds.percentagePoint)&&(s.status.thresholds.percentagePoint=readJSConfig.thresholds.percentagePoint),"string"!=typeof readJSConfig.el?(s.console("ERROR: readJS.setConfig() expected a string representation of css selector"),1):"function"!=typeof readJSConfig.cb&&(s.console("ERROR: readJS.setConfig() expected a callback function"),1))))},setInitialTime:function(){return s.status.activity.initialTime=(new Date).getTime(),s.status.activity.initialTime},calculateTotalTime:function(){var e,t;return s.status.activity.initialTime&&(e=(new Date).getTime(),t=s.status.activity.totalTime,s.status.activity.totalTime=parseInt(t)+parseInt(e)-parseInt(s.status.activity.initialTime),s.status.activity.initialTime=0),0<s.status.activity.totalTime?s.status.activity.totalTime:(s.console("ERROR: readJS.calculateTotalTime() - initial time not set"),!1)},initialize:function(e){return"function"!=typeof e?(s.console("ERROR: readJS.initialize() expected a callback function"),!1):(s.callback=e,readJSConfig.el?(s.setInitialTime(),t=!0,s.stopPolling(),s.readingWorker=window.setInterval(s.checkActivity,1e3*s.status.timeInterval),r.push(s.readingWorker),s.console("readJS: starting interval ID",s.readingWorker),s.inDebugMode(),!0):(s.console("ERROR: readJS.initialize() expected a dom node to inspect"),!1))},getIntervals:function(){return r},checkActivity:function(){var e=s.status.timeInterval;s.status.activity.timeOnPage+=e,s.status.activity.timeInUnknownState+=e,s.status.activity.readingPoints+=e,s.detectForScroll(),s.endConditionsChecked()},endConditionsChecked:function(){return!!s.isUpdateRequired()&&(s.calculateCoordinates(),s.addPoints(),s.hasRead(),!0)},detectForScroll:function(){return!!s.status.activity.scrolled&&(s.status.activity.scrolled=!1,s.reactivate(),s.console("detected scroll:",s.status.activity.timeOnPage," seconds"),!0)},console:(e=function(){return!!s.status.debug.console&&(console.log(s.readingWorker,arguments),!0)},i.toString=function(){return e.toString()},i),getText:function(e){try{for(var t="",n=e.childNodes.length,r=0;r<n;r++){var i=e.childNodes[r];8!==i.nodeType&&(t+=1!==i.nodeType?i.nodeValue:s.getText(i))}return t.replace(/[\t\n\r]+/g,"").replace(/\s+/g," ").trim()}catch(e){return s.console(e),!1}},calculateCoordinates:function(){var e;return s.domNode?(e=s.inView(s.domNode),s.console("dom_node_inview_percent",e.dom_node_inview_percent,"dom_node_viewport_percent",e.dom_node_viewport_percent),!0):(s.console("ERROR: could not find the story body"),!1)},hasRead:function(){if(!s.status.activity.read){if(s.status.activity.scrollDepth<s.status.thresholds.scrollDepth)return s.console("Has not read yet because user didn't pass scrollDepth threshold"),s.report(),!1;if(s.status.strict&&s.status.activity.dnp<s.status.thresholds.domNode)return s.console("STRICT MODE: not enough of dom node is in view"),s.report(),!1;if(s.status.activity.readingPoints<=s.status.thresholds.readingPoint)return s.report(),!1;if(s.status.activity.timeInView<s.status.thresholds.timeInView)return s.report(),!1;s.status.activity.read=!0,s.callback(s.calculateTotalTime()),s.removeListeners(),s.console("readJS: the user has read the article",s.status.activity.readingPoints),s.stopPolling()}return!0},stopPolling:function(){s.readingWorker&&(window.clearInterval(s.readingWorker),s.console("readJS: ending interval ID",s.readingWorker),delete s.readingWorker)},report:function(){s.console("readingPoints: "+s.status.activity.readingPoints,"timeInView: "+s.status.activity.timeInView,s.status.thresholds.readingPoint,s.status.thresholds.timeInView)},addPoints:function(){return!!s.inViewport(s.domNode)&&(s.status.activity.dnp>s.status.thresholds.domNode&&(s.status.activity.readingPoints+=s.status.activity.increment),s.status.activity.vpp>s.status.thresholds.viewport&&(s.status.activity.readingPoints+=s.status.activity.increment),s.status.activity.readingPoints)},isUpdateRequired:function(){return s.status.activity.pollingPoints+=100*Math.pow(.9,s.status.activity.timeInUnknownState),s.status.activity.pollingPoints>=s.status.thresholds.domPolling&&(s.console("readJS: analyzing the DOM at",s.status.activity.timeOnPage," seconds",s.status.activity.pollingPoints),!(s.status.activity.pollingPoints=0))},reactivate:function(){s.console("readJS: reactivating refresh rate"),s.status.activity.timeInUnknownState=0,s.status.activity.pollingPoints+=s.status.activity.increment},inDebugMode:function(){s.status.debug.overlay&&(s.scrollDataOverlay=document.createElement("DIV"),s.scrollDataOverlay.style.position="fixed",s.scrollDataOverlay.style.bottom="2em",s.scrollDataOverlay.style.right="2em",s.scrollDataOverlay.style.zIndex=1e4,s.scrollDataOverlay.id="scrollinfo",document.body.appendChild(s.scrollDataOverlay),s.showScrollInfo())},inViewport:function(e){e=e.getBoundingClientRect();return 0<e.bottom&&0<e.right&&e.left<window.innerWidth&&e.top<window.innerHeight},showScrollInfo:function(){return!!s.status.debug.overlay&&(document.getElementById("scrollinfo").innerHTML=s.status.activity.scrollDepth,!0)},getScrollInfo:function(){var e=document.body.scrollTop||document.documentElement.scrollTop,e=Math.abs(e)+window.innerHeight;return e>s.status.activity.scrollDepth&&(s.status.activity.scrollDepth=e),!0},removeDomNode:function(e){e=document.getElementById(e);return!!e&&(e.parentNode.removeChild(e),!null)},removeOverlays:function(){s.removeDomNode("viewport_inview"),s.removeDomNode("overlap_inview"),s.removeDomNode("domnode_inview")},getVisibilityProperties:function(){var e,t;return void 0!==document.hidden?(e="hidden",t="visibilitychange"):void 0!==document.mozHidden?(e="mozHidden",t="mozvisibilitychange"):void 0!==document.msHidden?(e="msHidden",t="msvisibilitychange"):void 0!==document.webkitHidden&&(e="webkitHidden",t="webkitvisibilitychange"),{hiddenProp:e,eventName:t}},handleVisibilityChange:function(){var e=s.getVisibilityProperties().hiddenProp;document[e]?(s.console("readJS: pausing after detecting focus to another tab"),s.stopPolling(),s.calculateTotalTime()):(s.console("readJS: reinitializing after detecting tab is in focus"),s.initialize(s.callback))},inView:function(e){s.domNode=e;var t,n,r={tl:[],br:[]},i=(r.tl[0]=Math.abs(document.body.scrollLeft||document.documentElement.scrollLeft),r.tl[1]=Math.abs(document.body.scrollTop||document.documentElement.scrollTop),r.br[0]=r.tl[0]+window.innerWidth,r.br[1]=r.tl[1]+window.innerHeight,r.width=window.innerWidth,r.height=window.innerHeight,r.area=r.width*r.height,s.status.debug.overlay&&(s.status.debug.overlays.vui||((i=document.createElement("DIV")).id="viewport_inview",i.style.position="absolute",i.style.background="green",i.style.opacity="0.5",i.style.zIndex=9999,document.body.appendChild(i),s.status.debug.overlays.vui=i),(i=s.status.debug.overlays.vui).style.left=r.tl[0]+"px",i.style.top=r.tl[1]+"px",i.style.width=r.width+"px",i.style.height=r.height+"px"),{tl:[],br:[]}),e=e.getBoundingClientRect(),a=void 0===window.scrollX?parseInt(window.pageXOffset,10):parseInt(window.scrollX,10),o=void 0===window.scrollY?parseInt(window.pageYOffset,10):parseInt(window.scrollY,10);return i.tl[0]=e.left+a,i.tl[1]=e.top+o,i.br[0]=i.tl[0]+e.width,i.br[1]=i.tl[1]+e.height,s.getScrollInfo(),s.status.thresholds.scrollDepth=Math.abs(i.tl[1])+e.height*s.status.thresholds.minVertical/100,s.status.debug.overlay&&(s.status.debug.overlays.dui||((n=document.createElement("DIV")).id="domnode_inview",n.style.position="absolute",n.style.background="blue",n.style.opacity="0.5",n.style.zIndex=9999,document.body.appendChild(n),s.status.debug.overlays.dui=n),(n=s.status.debug.overlays.dui).style.left=i.tl[0]+"px",n.style.top=i.tl[1]+"px",n.style.width=e.width+"px",n.style.height=e.height+"px"),s.inViewport(s.domNode)?((a={tl:[],br:[]}).tl[0]=(i.tl[0]>=r.tl[0]?i:r).tl[0],a.tl[1]=(i.tl[1]>=r.tl[1]?i:r).tl[1],a.br[0]=(i.br[0]<=r.br[0]?i:r).br[0],a.br[1]=(i.br[1]<=r.br[1]?i:r).br[1],o=Math.abs(a.tl[0]-a.br[0]),n=Math.abs(a.tl[1]-a.br[1]),e=Math.abs((i.tl[0]-i.br[0])*(i.tl[1]-i.br[1])),e=(i=Math.abs(o*n))/e*100,i=i/r.area*100,s.status.debug.overlay&&(s.status.debug.overlays.oui||((t=document.createElement("DIV")).id="overlap_inview",document.body.appendChild(t),t.style.position="absolute",t.style.background="red",t.style.opacity="0.5",t.style.zIndex=9999,s.status.debug.overlays.oui=t),(t=s.status.debug.overlays.oui).style.left=a.tl[0]+"px",t.style.top=a.tl[1]+"px",t.style.width=o+"px",t.style.height=n+"px"),r={dom_node_inview_percent:s.status.activity.dnp=e,dom_node_viewport_percent:s.status.activity.vpp=i},s.status.strict&&(e<s.status.thresholds.domNode||i<s.status.thresholds.viewport)||(s.status.activity.timeInView+=s.status.timeInterval),r):{dom_node_inview_percent:0,dom_node_viewport_percent:0}},handleScroll:function(){s.status.activity.scrolled=!0,s.showScrollInfo()},handleClick:function(){s.status.activity.readingPoints+=s.status.activity.increment,s.reactivate()},handleLoad:function(){s.domNode=document.querySelector(readJSConfig.el),s.setTimeInViewThreshold(),s.domNode.addEventListener("click",s.handleClick),s.calculateCoordinates()},setTimeInViewThreshold:function(){var e,t;return"number"!=typeof s.status.thresholds.timeInView&&(e=s.getText(s.domNode).split(" ").length,t=s.status.activity.averageReadSpeed,s.status.thresholds.timeInView=Math.floor(e*(s.status.thresholds.percentagePoint/100)/t),s.status.thresholds.minTimeInView>s.status.thresholds.timeInView?s.status.thresholds.timeInView=s.status.thresholds.minTimeInView:s.status.thresholds.timeInView>s.status.thresholds.maxTimeInView&&(s.status.thresholds.timeInView=s.status.thresholds.maxTimeInView),!0)},removeListeners:function(){window.removeEventListener("scroll",s.handleScroll),window.removeEventListener("load",s.handleLoad),void 0!==s.domNode&&s.domNode.removeEventListener("click",s.handleClick),document.removeEventListener(s.getVisibilityProperties().eventName,s.handleVisibilityChange,!1)},isOn:function(){return t},turnOff:function(){return!(!t||(s.removeListeners(),s.console("readJS: stopping midway"),s.stopPolling(),s.removeOverlays(),s.status.activity.read=!1,t=!1))},turnOn:function(){return!(t||(s.resetConfigStatus(),s.setConfig(),n&&!readJSConfig.spa?(s.console("ERROR: Not a SPA. Cannot turnOn() again on the same web page"),1):"undefined"==typeof readJSConfig?(s.console("ERROR: Could not find callback and/or domNode css selector in window.readJSConfig"),1):"string"!=typeof readJSConfig.el?(s.console("ERROR: Could not find domNode css selector in window.readJSConfig"),1):"function"!=typeof readJSConfig.cb?(s.console("ERROR: Could not find callback function in window.readJSConfig"),1):(window.addEventListener("scroll",s.handleScroll),document.addEventListener(s.getVisibilityProperties().eventName,s.handleVisibilityChange,!1),s.status.spa?s.handleLoad():window.addEventListener("load",s.handleLoad),s.initialize(readJSConfig.cb),t=!0,n||(s.handleVisibilityChange(),n=!0),0)))}};function i(){return e.apply(this,arguments)}window.readJS=s},checkLoad:function(){void 0===window.readJS&&CBC.APP.readJS.init(),void 0!==window.readJSConfig&&!0!==window.readJSConfig.spa?(window.readJS.isOn&&window.readJS.resetConfigStatus(),window.readJS.turnOn()):void 0!==window.readJS&&window.readJS.resetConfigStatus()}}}(),function(){"use strict";function a(t){var o,s;s=function(){return r=this,i=function(e){switch(e.label){case 0:return t.priorityCommandQueue.length?[4,t.priorityCommandQueue.shift()()]:[3,2];case 1:return e.sent(),[3,0];case 2:for(;t.commandQueue.length&&!t.locked;)t.commandQueue.shift()();return[2]}},c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},u={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function e(n){return function(e){var t=[n,e];if(a)throw new TypeError("Generator is already executing.");for(;c=u&&t[u=0]?0:c;)try{if(a=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return c.label++,{value:t[1],done:!1};case 5:c.label++,o=t[1],t=[0];continue;case 7:t=c.ops.pop(),c.trys.pop();continue;default:if(!((s=0<(s=c.trys).length&&s[s.length-1])||6!==t[0]&&2!==t[0])){c=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3]))c.label=t[1];else if(6===t[0]&&c.label<s[1])c.label=s[1],s=t;else{if(!(s&&c.label<s[2])){s[2]&&c.ops.pop(),c.trys.pop();continue}c.label=s[2],c.ops.push(t)}}t=i.call(r,c)}catch(e){t=[6,e],o=0}finally{a=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}var r,i,a,o,s,c,u},new(o=(o=void 0,Promise))(function(n,t){function r(e){try{a(s.next(e))}catch(e){t(e)}}function i(e){try{a(s.throw(e))}catch(e){t(e)}}function a(e){var t;e.done?n(e.value):((t=e.value)instanceof o?t:new o(function(e){e(t)})).then(r,i)}a((s=s.apply(void 0,[])).next())})}function r(e,t){var n,r,i,a,o,s,c,u,l,d,p,f;try{switch(e){case"CBC_Loaded":r=window.CBC.APP.SC.DTM.formatted.raw,n={ContentArea:null==r?void 0:r.contentarea,ContentSubsection1:null==r?void 0:r.subsection1,KeywordsSubject:_(r),KeywordsGeneric:g("generic",r),KeywordsLocation:g("location",r),KeywordsOrganization:g("organization",r),KeywordsPerson:g("person",r),ContentSubsection2:null==r?void 0:r.subsection2,ContentSubsection3:null==r?void 0:r.subsection3,ContentSubsection4:null==r?void 0:r.subsection4,AppName:r.appname,AppPillar:r.pillar};break;case"CBC_Start_Web_Session":f=window.CBC.APP.SC.DTM.formatted.raw,n={ContentArea:null==f?void 0:f.contentarea,ContentSubsection1:null==f?void 0:f.subsection1,KeywordsSubject:_(f),KeywordsGeneric:g("generic",f),KeywordsLocation:g("location",f),KeywordsOrganization:g("organization",f),KeywordsPerson:g("person",f),ContentSubsection2:null==f?void 0:f.subsection2,ContentSubsection3:null==f?void 0:f.subsection3,ContentSubsection4:null==f?void 0:f.subsection4,AppName:f.appname,AppPillar:f.pillar};break;case"CBC_Read":p=window.CBC.APP.SC.DTM.formatted.raw,n={ContentArea:null==p?void 0:p.contentarea,ContentSubsection1:null==p?void 0:p.subsection1,KeywordsSubject:_(p),KeywordsGeneric:g("generic",p),KeywordsLocation:g("location",p),KeywordsOrganization:g("organization",p),KeywordsPerson:g("person",p),ContentSubsection2:null==p?void 0:p.subsection2,ContentSubsection3:null==p?void 0:p.subsection3,ContentSubsection4:null==p?void 0:p.subsection4,AppName:p.appname,AppPillar:p.pillar};break;case"CBC_Streamed_Video":l=window.CBC.APP.SC.DTM.formatted.raw,d=t.content.media,n={ContentArea:null==l?void 0:l.contentarea,ContentSubsection1:null==l?void 0:l.subsection1,KeywordsSubject:_(l),KeywordsGeneric:g("generic",l),KeywordsLocation:g("location",l),KeywordsOrganization:g("organization",l),KeywordsPerson:g("person",l),AppName:l.appname,AppPillar:l.pillar,MediaSeason:d.seasonnumber,MediaEpisode:d.episodenumber,MediaGenre:d.genre,MediaShow:d.show,MediaSport:d.sport};break;case"CBC_Watched":c=window.CBC.APP.SC.DTM.formatted.raw,u=t.content.media,n={ContentArea:null==c?void 0:c.contentarea,ContentSubsection1:null==c?void 0:c.subsection1,KeywordsSubject:_(c),KeywordsGeneric:g("generic",c),KeywordsLocation:g("location",c),KeywordsOrganization:g("organization",c),KeywordsPerson:g("person",c),AppName:c.appname,AppPillar:c.pillar,MediaSeason:u.seasonnumber,MediaEpisode:u.episodenumber,MediaGenre:u.genre,MediaShow:u.show,MediaSport:u.sport};break;case"CBC_Streamed_Audio":o=window.CBC.APP.SC.DTM.formatted.raw,s=t.content.media,n={ContentArea:o.contentarea,ContentSubsection1:null==o?void 0:o.subsection1,KeywordsSubject:_(o),KeywordsGeneric:g("generic",o),KeywordsLocation:g("location",o),KeywordsOrganization:g("organization",o),KeywordsPerson:g("person",o),AppName:o.appname,AppPillar:o.pillar,MediaSeason:null==s?void 0:s.seasonnumber,MediaEpisode:null==s?void 0:s.episodenumber,MediaGenre:null==s?void 0:s.genre,MediaShow:null==s?void 0:s.show,MediaSport:null==s?void 0:s.sport};break;case"CBC_Listened":i=window.CBC.APP.SC.DTM.formatted.raw,a=t.content.media,n={ContentArea:null==i?void 0:i.contentarea,ContentSubsection1:null==i?void 0:i.subsection1,KeywordsSubject:_(i),KeywordsGeneric:g("generic",i),KeywordsLocation:g("location",i),KeywordsOrganization:g("organization",i),KeywordsPerson:g("person",i),AppName:i.appname,AppPillar:i.pillar,MediaSeason:a.seasonnumber,MediaEpisode:a.episodenumber,MediaGenre:a.genre,MediaShow:a.show,MediaSport:a.sport}}}catch(e){console.error("sendTimelineEvent",e)}h(function(){window.blueConicClient.profile.getProfile().timeline.createEvent(e,new Date,n,void 0,function(){})})}function o(){for(var e,t,n=0,r=Object.entries(window.localStorage);n<r.length;n++){var i=r[n],a=i[0],i=i[1];d.test(a)&&(e=i)}return e?(t=window.atob(e),t=JSON.parse(t).token,JSON.parse(window.atob(t.split(".")[0])),JSON.parse(window.atob(t.split(".")[1]))):null}function e(e){var t,n=window.CBC.APP.SC.UTIL.getCookie("cbc_plus"),r=window.CBC.APP.SC.UTIL.getCookie("cbc_visitor"),i=null==(t=o())?void 0:t.rcid;n||r?(t=function(){return new Promise(function(t){window.blueConicClient.profile.getProfile().loadValues(["cbc_plus_id","cbc_visitor_id","rc_id","rc_visitor_id"],void 0,function(){return f(void 0,void 0,void 0,function(){return m(this,function(e){switch(e.label){case 0:return[4,(s=n,c=r,u=i,f(void 0,void 0,void 0,function(){var t,n,r,i,a,o;return m(this,function(e){switch(e.label){case 0:return t=window.blueConicClient.profile.getProfile(),n=t.getValue("cbc_plus_id"),r=t.getValue("cbc_visitor_id"),i=t.getValue("rc_id"),a=t.getValue("rc_visitor_id"),s?s===n||s===i?[3,3]:(o=r?"cbc_visitor_id":a?"rc_visitor_id":"")?[4,C()]:[3,2]:[3,4];case 1:e.sent(),t.setValue(o,""),e.label=2;case 2:t.setValue("cbc_plus_id",s),v(),e.label=3;case 3:return u&&u!==i&&(t.setValue("rc_id",u),v()),[3,9];case 4:return c?r?[3,6]:[4,C()]:[3,9];case 5:return e.sent(),t.setValue("cbc_visitor_id",c),v(),[3,9];case 6:return c===r||c===a?[3,9]:n||i?[4,C()]:[3,8];case 7:e.sent(),t.setValue("cbc_plus_id",""),t.setValue("rc_id",""),e.label=8;case 8:t.setValue("cbc_visitor_id",c),v(),e.label=9;case 9:return[2]}})}))];case 1:return e.sent(),l.locked=!1,a(l),t(),[2]}var s,c,u})})})})},l.eventReady?t():l.priorityCommandQueue.push(t)):window.Sentry&&window.Sentry.captureMessage("CDP - NO visitor or plus id detected")}function n(e){var t,n=window.blueConicClient.profile.getProfile(),r=p(e,"Email").Value,r=(n.setValue("email",r),null==(r=p(e,"Addresses"))?void 0:r.PostalCode);n.setValue("gender","O"===e.Gender&&(null==(t=e.CustomFields)?void 0:t.GenderDescription)||e.Gender),n.setValue("geo_zipcode",r),n.setValue("birthYear",e.BirthDate?Number(e.BirthDate.split("/").pop()):null),v()}function t(e){var n=(e=e||y.OFF)===y.OFF?0:e===y.ALL?A.length:A.indexOf(e)+1,r={};function i(e){return e&&e.toString===Object.prototype.toString?JSON.stringify(e):Array.isArray(e)?"[".concat(e.map(i).join(","),"]"):""+e}return A.forEach(function(e,t){r[e]=t<n?function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];e=e||"",t=0<n.length?t.replace(/{(\d+)}/g,function(e,t){return t in n?i(n[parseInt(t,10)]):e}):i(t),console.log("DMP: ".concat(e.toUpperCase(),": ").concat(t))}.bind(null,e):function(){}}),r}var i,s,c,l={eventReady:!1,locked:!0,commandQueue:[],priorityCommandQueue:[]},h=function(e){l.eventReady&&!l.locked?e():l.commandQueue.push(e)},_=function(e){var t;return null==(t=e.keywords)||!t.concepts||null==(t=e.keywords)?void 0:t.concepts.map(function(e){return e.path})},g=function(t,e){var n;return null==(n=e.keywords)||!n.tags||null==(n=e.keywords)?void 0:n.tags.filter(function(e){return e.type===t}).map(function(e){return e.name})},u=((i=i||{}).BLUECONIC="blueconic",i.LOTAME="lotame",(s=s||{}).GLOBAL_DISABLE_USER_TRACKING="globalDisableUserTracking",["www.cbc.ca","gem.cbc.ca","newsinteractives.cbc.ca","cbchelp.cbc.ca","subscriptions.cbc.ca","usability.cbc.ca"]),d=/^idt\|(.*)/,p=function(e,t,n){return void 0===n&&(n={PostalCode:"",Value:""}),null!=(t=null==(e=null==e?void 0:e[t])?void 0:e.find(function(e){return"Primary"===e.Type}))?t:n},f=function(e,o,s,c){return new(s=s||Promise)(function(n,t){function r(e){try{a(c.next(e))}catch(e){t(e)}}function i(e){try{a(c.throw(e))}catch(e){t(e)}}function a(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,i)}a((c=c.apply(e,o||[])).next())})},m=function(r,i){var a,o,s,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},u={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function e(n){return function(e){var t=[n,e];if(a)throw new TypeError("Generator is already executing.");for(;c=u&&t[u=0]?0:c;)try{if(a=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return c.label++,{value:t[1],done:!1};case 5:c.label++,o=t[1],t=[0];continue;case 7:t=c.ops.pop(),c.trys.pop();continue;default:if(!((s=0<(s=c.trys).length&&s[s.length-1])||6!==t[0]&&2!==t[0])){c=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3]))c.label=t[1];else if(6===t[0]&&c.label<s[1])c.label=s[1],s=t;else{if(!(s&&c.label<s[2])){s[2]&&c.ops.pop(),c.trys.pop();continue}c.label=s[2],c.ops.push(t)}}t=i.call(r,c)}catch(e){t=[6,e],o=0}finally{a=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},C=function(){return new Promise(function(e){window.blueConicClient.profile.createProfile(window,function(){e(!0)})})},v=function(){return window.blueConicClient.profile.updateProfile(window,function(){console.log("profile updated")})},y={OFF:"OFF",FATAL:"fatal",ERROR:"error",WARN:"warn",INFO:"info",DEBUG:"debug",TRACE:"trace",ALL:"ALL"},A=["fatal","error","warn","info","debug","trace"],P=y,b=/cbckids\.(ca|com)|cbc\.(ca|com)(:\d{4})?\/kids($|\/|cbc2|news|fantasyhockey)|subscriptions\.cbc\.ca\/listmanagement\/widget\/KID|gem\.cbc\.ca\/category\/kids/i,S=(w.prototype.getClientId=function(){var e=10205;return e="cbcmusic.ca"===this._hostname.replace(/.+?(?=cbc)/,"")?10907:e},w.prototype.isInitialized=function(){return!!(this.LOTCC&&this.LOTCC.page&&this.LOTCC.collect)},Object.defineProperty(w.prototype,"audienceLabels",{get:function(){var e=window.CBC.APP.SC&&window.CBC.APP.SC.dmpAudienceslist;return void 0===e?(this._logger.error("expected window.CBC.APP.SC.dmpAudienceslist"),{}):e.audiences},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"audienceMasks",{get:function(){var n;return null!==this._audienceMasks?this._audienceMasks:void 0===(n=window.CBC.APP.SC&&window.CBC.APP.SC.dmpAudienceslist)?(this._logger.error("expected window.CBC.APP.SC.dmpAudienceslist"),{}):(this._audienceMasks=Object.keys(n.masks).reduce(function(e,t){return Object.assign(e,((e={})[t.toLowerCase()]=n.masks[t],e))},{}),this._audienceMasks)},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"pageViewCount",{get:function(){return this._pageViewCount},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"LOTCC",{get:function(){return window["lotame_".concat(this.getClientId())]},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"profileId",{get:function(){return this._profileId},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"audiences",{get:function(){var t=this;return new Promise(function(e){if(t._hasReceivedAudiences)return e(t._parseAudiences(t.LOTCC.getAudiences()));t._audienceCallbacks.push(e)})},enumerable:!1,configurable:!0}),w.prototype.init=function(){this.isInitialized()||this._hasInited||(this.loadScript(),this._hasInited=!0)},w.prototype.loadScript=function(){var e,t,n,r=this;this._hasInited||(e=this.getClientId(),(t=this.createScriptElement()).src="https://tags.crwdcntrl.net/lt/c/".concat(e,"/lt.min.js"),t.async=!0,n=window["lotame_".concat(e)]||{},n=Object.assign({cmd:[]},n,{data:{},config:{clientId:e,audienceLocalStorage:!0,onTagReady:function(){r._logger.debug("⚡ tag loaded for {0}",e)},onProfileReady:function(e){var t=r._parseAudiences(e.getAudiences());r._profileId=e.getProfileId(),r._audienceCallbacks.forEach(function(e){try{e(t)}catch(e){r._logger.error(e)}}),r._audienceCallbacks=[],r._hasReceivedAudiences=!0,r._logger.debug("⚡ profile ready for {0}",r.profileId),r._pubSub.publish("loadedAudiences",t)}}}),window["lotame_".concat(e)]=n,this.injectScriptElement(t))},w.prototype._parseAudiences=function(e){return Array.isArray(e)?e.map(function(e){return{id:e}}):(this._logger.error("expected audiences to be an array, received {0}",_typeof(e)),[])},w.prototype.injectScriptElement=function(e){var t;e&&(t=document.getElementsByTagName("script")[0]).parentNode.insertBefore(e,t)},w.prototype.createScriptElement=function(){return document.createElement("script")},w.prototype.sendBehaviours=function(e,t){var n=this,r=t&&this.pageViewCount,i=(t&&this._pageViewCount++,{behaviors:e.reduce(function(e,t){var n=t.type,t=t.value;return e[n]||(e[n]=[]),e[n].push(t),e},{})});r?this.LOTCC.cmd.push(function(){n.LOTCC.page(i)}):this.LOTCC.cmd.push(function(){n.LOTCC.collect(i)})},w.prototype.getLabelMask=function(e){if("string"==typeof e)return this.audienceMasks[e.toLowerCase()]},w.prototype.filterAudiences=function(e,t){var n,r=this;return void 0===t&&(t=[]),0!==e.length&&Array.isArray(t)&&0!==t.length?(n=t.map(function(e){return r.getLabelMask(e)}).filter(function(e){return e}).reduce(function(e,t){return e|t},0),e.filter(function(e){return e&&r.audienceLabels[e.id]&n})):[]},w.prototype.filterAudienceSegmentIDs=function(e,t){return this.filterAudiences(e,t=void 0===t?[]:t).map(function(e){return e.id})},w);function w(e,t){var n=e.logger,e=e.pubSub;this._logger=n,this._pubSub=e,this._hostname=t||"",this._pageViewCount=0,this._hasInited=!1,this._hasReceivedAudiences=!1,this._audienceCallbacks=[],this._audienceMasks=null,this._profileId=""}i=i.BLUECONIC,s=s.GLOBAL_DISABLE_USER_TRACKING,((c=null==(c=null==(c=null==(c=null==(c=null==(c=window.CBC)?void 0:c.APP)?void 0:c.SC)?void 0:c.dmpAudienceslist)?void 0:c.featureToggle)?void 0:c[i])?void 0===(c=c[s])?(console.error("Property ".concat(s," is not defined for ").concat(i," feature toggle.")),0):c:(console.error("".concat(i," feature toggle is not defined.")),0))?console.debug("Blueconic initialization is disabled by the feature toggle."):((s=window.CBC.APP.PubSub).subscribe("LOADED",function(e,t){r("CBC_Loaded",t)}),s.subscribe("READ",function(e,t){r("CBC_Read",t)}),s.subscribe("START WEB SESSION",function(e,t){r("CBC_Start_Web_Session",t)}),s.subscribe("STREAMED",function(e,t){var n;"video"===(null==(n=null==(n=t.content)?void 0:n.media)?void 0:n.audiovideo)&&r("CBC_Streamed_Video",t)}),s.subscribe("STREAMED",function(e,t){var n;"audio"===(null==(n=null==(n=t.content)?void 0:n.media)?void 0:n.audiovideo)&&r("CBC_Streamed_Audio",t)}),s.subscribe("WATCHED",function(e,t){r("CBC_Watched",t)}),s.subscribe("LISTENED",function(e,t){r("CBC_Listened",t)}),s.subscribe("UIEAlert",e),s.subscribe("USER_ID_AVAILABLE",e),s.subscribe("AD_PREFERENCES_LOADED",function(e,t){var r=t;h(function(){var e={cbc_ad_targeting:!1!==r.cbc_ad_targeting?"true":"false",fbpixel_tracking:!1!==r.fbpixel_tracking?"true":"false"},t=window.blueConicClient.profile.getProfile(),n=!1;t.getValue("cbc_facebook_integration_allowed")!==e.fbpixel_tracking&&(n=!0,t.setValue("cbc_facebook_integration_allowed",e.fbpixel_tracking)),n&&(console.log("blueconic profile ad preferences updated"),window.blueConicClient.profile.updateProfile())})}),s.subscribe("SIGNED IN",function(){l.locked=!0,h(function(){return f(void 0,void 0,void 0,function(){var t;return m(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,new Promise(function(e,t){var n=e,r=t,i="//api.loginradius.com/identity/v2/auth/account?apikey="+(u.includes(window.location.hostname)||"ocelot-staging.cbc.ca"==window.location.hostname?"3f4beddd-2061-49b0-ae80-6f1f2ed65b37":"936da557-6daa-4444-92cc-161fc290c603");new Promise(function(e,t){var n;window.LR_IS_READY||window.LoginRadiusV2?e(null):n=setInterval(function(){(window.LR_IS_READY||window.LoginRadiusV2)&&(clearInterval(n),e(null))},100)}).then(function(){var e=window.localStorage.getItem("LRTokenKey")?window.localStorage.getItem("LRTokenKey").replace(/"/g,""):window.localStorage.getItem("lrtoken")?window.localStorage.getItem("lrtoken").replace(/"/g,""):window.CBC.APP.SC.UTIL.getCookie("lr-user--token")?window.CBC.APP.SC.UTIL.getCookie("lr-user--token").replace(/"/g,""):(e=o())?e.lrat.replace(/"/g,""):null;if(!e)return n(null);window.CBC.APP.SC.UTIL.makeGETRequest(i,{success:function(e,t){console.debug("User logged in success : {0}",e.responseText),n(JSON.parse(e.responseText))},failure:function(e,t){console.error("Error : login radius api call to get user profile"),r&&r()}},void 0,void 0,{Authorization:"Bearer "+e},void 0)})})];case 1:return t=e.sent(),n(t),[3,3];case 2:return t=e.sent(),console.log("LOGIN RADIUS ERROR",t),[3,3];case 3:return[2]}})})})}),s.subscribe("SIGNED OUT",function(){l.locked=!0}),s.subscribe("LOGIN RADIUS CHANGE EMAIL VERIFIED",function(e,t){window.blueConicClient.profile.getProfile().setValue("email",t.newEmail),v()}),s.subscribe("LOGIN RADIUS UPDATE PROFILE",function(e,a){h(function(){return f(void 0,void 0,void 0,function(){var t,n,r,i;return m(this,function(e){return t=a.nextProfile,n=window.blueConicClient.profile.getProfile(),r=null==(r=p(t,"Addresses"))?void 0:r.PostalCode,n.setValue("gender","O"===t.Gender&&(null==(i=t.CustomFields)?void 0:i.GenderDescription)||t.Gender),n.setValue("geo_zipcode",r),n.setValue("birthYear",t.BirthDate?Number(t.BirthDate.split("/").pop()):null),v(),[2]})})})}),window.addEventListener("onBlueConicLoaded",function(){window.blueConicClient.event.subscribe(window.blueConicClient.event.onEventReady,{},function(e,t){t.isFirstLoad&&(window.BLUECONIC_LOADED=!0,l.eventReady=!0,a(l))})},!1)),window.CBC=window.CBC||{},(c=window.CBC).APP=c.APP||{},c.APP.DMP=c.APP.DMP||{},i=t(window.CBC.APP.SC.DEBUG?P.DEBUG:P.ERROR),c.APP.DMP.LOGGER=i,c.APP.DMP.LOTAME=new S({logger:i,pubSub:c.APP.PubSub},window.location.hostname),b.test(window.location.href)||c.APP.SC.UTIL.isIOSWebviewPrivate()?i.debug("Not initializing Lotame on CBC Kids or Kids News"):c.APP.DMP.LOTAME.init()}(),function(){"use strict";var e=document.getElementsByTagName("script")[0],t=document.createElement("script");t.id="adblockers-test-js",t.src="//www.cbc.ca/g/stats/js/ads.js",e&&e.parentNode.insertBefore(t,e)}(),Object.getOwnPropertyNames(CBC.APP.SC.VideoHeartbeatVars).length||(CBC.APP.SC.VideoHeartbeatVars={Conf:{marketingCloudId:"951720B3535680CB0A490D45@AdobeOrg",trackingServer:"metrics.cbc.ca",trackingServerSecure:"smetrics.cbc.ca",visitorNamespace:"cbcca",dpid:"cbc-dpid",dpuuid:"cbc-dpuuid",charSet:"UTF-8",heartbeatServer:"cbcca.hb.omtrdc.net",publisher:"951720B3535680CB0A490D45@AdobeOrg",playerSuffix:{s:":singleplayer",m:":multipleplayers"},varDefault:"nan",audioVideoDefault:"video",totalchaptersDefault:1},Player:{channel:"cbc-videoheartbeat-channel",ovp:"cbc-videoheartbeat-ovp",sdk:null,quietMode:!1,ssl:!0,debugLogging:!1,consoleLogging:!1,pagevars:{pageName:"cbc-videoheartbeat-pagename",prop60:"cbc-videoheartbeat-web",prop63:"web",prop64:"",s_account:"adobeheartbeatdevcbc"},videoid:"cbc-videoheartbeat-videoid",videoname:"cbc-videoheartbeat-videoname",videoplayername:"cbc-videoheartbeat-playername",videolength:86400,videostreamtype:"on-demand",videoplayhead:0,chaptername:"cbc-videoheartbeat-chaptername",chapterlength:18e3,chapterstarttime:0,chapterposition:1,adbreakposition:1,adbreakname:"unknown",adbreakstarttime:0,adlength:30,adid:"cbc-videoheartbeat-adid",adposition:1,cbcContextVideo:{},playerContextVideo:{},cbcContextChapter:{},playerContextChapter:{},customContextGenerate:{}}}),Object.getOwnPropertyNames(CBCRC.ANA.MEDIA).length||(CBCRC.ANA.MEDIA=function(){"use strict";function n(e){void 0!==e&&void 0!==r[e]&&(CBC.APP.SC.VideoHeartbeat.destroy(r[e]),delete r[e])}var r={};return{init:function(e){var e=void 0===e?window.CBC.APP.SC.UTIL.getUuid().replace(/-/g,""):e,t=(void 0!==r[e]&&n(e),"vhb"+Math.floor(99999*Math.random()));return r[e]=t,e},destroy:n,getActivePlayerList:function(){return r},updatePlayHead:function(e,t){void 0!==e&&void 0!==r[e]&&CBC.APP.SC.VideoHeartbeat.updatePlayHead(r[e],{playhead:t})}}}()),Object.getOwnPropertyNames(CBC.APP.SC.VideoHeartbeat).length||(CBC.APP.SC.VideoHeartbeat=function(){"use strict";var A={},P=ADB.va.MediaHeartbeat,R=ADB.va.MediaHeartbeatConfig,x=ADB.va.MediaHeartbeatDelegate,b={VIDEO_LOAD:"_onLoad",VIDEO_UNLOAD:"_onUnload",PLAY:"_onPlay",PAUSE:"_onPause",COMPLETE:"_onComplete",DESTROY:"_destroy",SEEK_START:"_onSeekStart",SEEK_COMPLETE:"_onSeekComplete",CHAPTER_START:"_onChapterStart",CHAPTER_SKIP:"_onChapterSkip",CHAPTER_COMPLETE:"_onChapterComplete",ADBREAK_START:"_onAdBreakStart",ADBREAK_COMPLETE:"_onAdBreakComplete",AD_START:"_onAdStart",AD_COMPLETE:"_onAdComplete",BUFFER_START:"_onBufferStart",BUFFER_COMPLETE:"_onBufferComplete"},r={AdPosition:{PREROLL:"a1",MIDROLL:"a2",POSTROLL:"a3",OVERLAY:"a4",SPECIAL:"a5"},ContentType:{AD:"ad",CONTENT:"ct"},VideoState:{UNPLAYED:"s1",PLAYED:"s2",STOPPED:"s3",COMPLETED:"s4"}},V=6e4,S=CBC.APP.SC.VideoHeartbeatVars.Conf,o=CBC.APP.SC.VideoHeartbeatVars.Player,n={},i="",a={};function s(e){n=window.CBC.APP.SC.VideoHeartbeat.getPlayers(),i=Object.keys(n)[0],(a=n[i]).vars.cbStrategy=a.vars.cbStrategy||{};var t=a.vars.cbStrategy;t.isReady=!1,t.title="",t.videoPath="",t.adPosition="",t.contentType=r.ContentType.CONTENT,t.totalDuration=0,t.videoState=r.VideoState.UNPLAYED,t.startTime=-1,t.playerType="",t.startPlayTime=-1,t.adPlayTime=-1,t.thumbnailPath=""}s.prototype.getStrategyName=function(){return"CBV"},s.prototype.isReady=function(){return a.vars.cbStrategy.isReady},s.prototype.getTitle=function(){return a.vars.cbStrategy.title},s.prototype.getVideoPath=function(){return a.vars.cbStrategy.videoPath},s.prototype.getThumbnailPath=function(){return""},s.prototype.getContentType=function(){return a.vars.cbStrategy.contentType},s.prototype.getAdPosition=function(){return a.vars.cbStrategy.adPosition},s.prototype.getTotalDuration=function(){return a.vars.cbStrategy.totalDuration},s.prototype.getState=function(){return a.vars.cbStrategy.videoState},s.prototype.getCurrentPlayTime=function(){return 1e3*a.vars.playhead},s.prototype.getBitrate=function(){return-1},s.prototype.getThumbnailPath=function(){return""},s.prototype.getPlayerType=function(){return a.vars.cbStrategy.playerType},s.prototype.getViewStartTime=function(){var e;return-1!==a.vars.cbStrategy.startTime&&0<(e=(new Date).getTime()-a.vars.cbStrategy.startTime)?e:-1},s.prototype.getViewPlayTime=function(){var e;return-1!==a.vars.cbStrategy.startPlayTime&&0<(e=(new Date).getTime()-a.vars.cbStrategy.startPlayTime)?e:-1},s.prototype.getViewAdPlayTime=function(){var e;return-1!==a.vars.cbStrategy.adPlayTime&&0<(e=(new Date).getTime()-a.vars.cbStrategy.adPlayTime)?e:-1},s.verify=function(e){return!0};var c=function(){this._events={}};function u(e){var t="";return t=window.Detectizr&&("osVersion"===e&&window.Detectizr.os&&window.Detectizr.os.version&&(t=window.Detectizr.os.version),"os"===e)&&window.Detectizr.os&&window.Detectizr.os.name?window.Detectizr.os.name:t}function l(e){var t,n=0;for(t in e)!{}.hasOwnProperty.call(e,t)||++n;return n}function d(e){return e="string"==typeof e?CBC.APP.SC.UTIL.normalize(e.replace(/[^0-9A-Za-z/_$.+\-|\s]/g,"").replace(/\+/g,"-")):e}function w(e){return e="object"===_typeof(e)?CBC.APP.SC.UTIL.sanitizeObject(e,""):Object.values(CBC.APP.SC.UTIL.sanitizeObject({val:e},""))[0]}function E(e){o.debugLogging&&console.log(e)}function T(e,t){var n=!1;return t?void 0!==e&&"object"===_typeof(e)&&0<l(A)&&(n=!0):void 0!==e&&""!==e&&null!==e&&(n=!0),n}function p(e,t){return""!==e&&(e+="|"),T(t)?e+=t:e+=S.varDefault,e}function f(){var e=window.location.href,t=e.indexOf("#"),t=(e=-1!==t?e.substring(0,t):e).indexOf("?");return e=-1!==t?e.substring(0,t):e}function I(t){void 0!==t&&Object.keys(t).forEach(function(e){""===t[e]&&delete t[e]})}function h(e){var t=e;return!!(t=void 0===e?f():t).match(/\.radio-canada\.ca/gi)}function _(e){return e||S.audioVideoDefault}function g(e,t){var n=t;switch(A[e].videoPlayer._videoInfo.streamType){case"vod":n="on-demand";break;case"live":n="live";break;case"linear":n="linear"}return n}function U(e){var n=[];if("object"!==_typeof(e))return"";for(var t in e)!function(t){e[t].forEach(function(e){n.push(t+":"+e)})}(t);return n.join([","]).toLowerCase().replace(/\s/g,"-")}function D(e){var t,n=["name","value","instance"];for(t in n)e[n[t]]&&!function(e,t){try{return Boolean(CBC.APP.SC.metadataAllowlist.metadata.allowlist.feature[e][t])}catch(e){}}(n[t],e[n[t]])&&delete e[n[t]];return e.position&&!new RegExp("^[0-9]*$").test(e.position)&&delete e.position,e}c.prototype.addEventListener=function(e,t,n){e&&t&&(n=n||window,this._events[e]=this._events[e]||[],this._events[e].push({cb:t,ctx:n}))},c.prototype.removeEventListener=function(e,t,n){if(e&&t){n=n||window;var r,i,a=!1;for(i in this._events)if(e===i){a=!0;break}if(a){for(r=this._events[i].length-1;0<=r;r--){var o=this._events[i][r];t===o.cb&&n===o.ctx&&this._events[i].splice(r,1)}this._events[i].length||delete this._events[i]}}},c.prototype.dispatchEvent=function(e){if(e)for(var t in this._events)if({}.hasOwnProperty.call(this._events,t)&&e===t){for(var n=this._events[t].slice(0),r=n.length,i=0;i<r;++i)n[i].cb.call(n[i].ctx);break}};var k=function e(t){return e.prototype._instance=e.prototype._instance||{},e.prototype._instance[t]||(e.prototype._instance[t]=new c),e.prototype._instance[t]};function m(e,t){try{E("updatePlayHead:::"+e);CBC.APP.SC.UTIL.getCookie("cbc-session")&&(n=CBC.APP.SC.UTIL.getEpochTime(),CBC.APP.ANA.VARS.sessionTimeOut+900<n)&&(window.CBC.APP.SC.EventTracker.setCBCSession(),window.CBC.APP.ANA.VARS.sessionTimeOut=n),E(t);var n,r,i,a,o,s,c=0;if(t&&t.playhead&&(c=t.playhead),A[e]&&A[e].videoPlayer&&A[e].videoPlayer._videoInfo&&A[e].vars)return r=A[e].vars.cbcContextVideo,A[e].videoPlayer._videoInfo.playhead=c,A[e].vars.playhead=c,"video"===r.audiovideo?(r._doNotFireWatchedEvent=r._doNotFireWatchedEvent||!1,"on-demand"===r.liveondemand?!r._doNotFireWatchedEvent&&c>Math.floor(.75*A[e].videoPlayer._videoInfo.length)?(r._doNotFireWatchedEvent=!0,E("User has seeked past 75% of the video length. Therefore, WATCHED event will not ever fire for this video.")):!r._doNotFireWatchedEvent&&window.CBC.APP.SC.EventTracker&&A[e].videoPlayer._videoInfo.length&&c==Math.floor(.75*A[e].videoPlayer._videoInfo.length)&&(r._doNotFireWatchedEvent=!0,window.CBC.APP.SC.EventTracker.isOn()||window.CBC.APP.SC.EventTracker.turnOn(),i=N(A[e],"WATCHED"),E("CBC_EventTracker: FIRING WATCHED EVENT"),E(i),CBC.APP.SC.EventTracker.trackEvent("WATCHED",i)):(a=CBC.APP.SC.VideoHeartbeat.getCurrentTime(),!r._doNotFireWatchedEvent&&a-r._timeMainContentStreamStarted-r._accumulatedPauseTime-r._accumulatedBufferTime>=V&&(r._doNotFireWatchedEvent=!0,window.CBC.APP.SC.EventTracker.isOn()||window.CBC.APP.SC.EventTracker.turnOn(),o=N(A[e],"WATCHED"),E("CBC_EventTracker: FIRING WATCHED EVENT"),E(o),CBC.APP.SC.EventTracker.trackEvent("WATCHED",o)))):"audio"===r.audiovideo&&(r._doNotFireListenedEvent=r._doNotFireListenedEvent||!1,"on-demand"===r.liveondemand)&&(!r._doNotFireListenedEvent&&c>Math.floor(.75*A[e].videoPlayer._videoInfo.length)?(r._doNotFireListenedEvent=!0,E("User has seeked past 75% of the video length. Therefore, LISTENED event will not ever fire for this video.")):!r._doNotFireListenedEvent&&window.CBC.APP.SC.EventTracker&&A[e].videoPlayer._videoInfo.length&&c==Math.floor(.75*A[e].videoPlayer._videoInfo.length)&&(r._doNotFireListenedEvent=!0,window.CBC.APP.SC.EventTracker.isOn()||window.CBC.APP.SC.EventTracker.turnOn(),s=N(A[e],"LISTENED"),E("CBC_EventTracker: FIRING LISTENED EVENT"),E(s),CBC.APP.SC.EventTracker.trackEvent("LISTENED",s))),!0;throw new Error(L(6,"updatePlayHead",e,t))}catch(e){return M(e),!1}}function C(e,t){try{if(E("videoPause:::"+e),E(t),A[e]&&A[e].videoPlayer&&"function"==typeof A[e].videoPlayer._onPause)return m(e,t),A[e].videoPlayer._onPause(e,t),!0;throw new Error(L(8,"videoPause",e,t))}catch(e){return M(e),!1}}function v(e,t){try{if(E("videoUnload:::"+e),E(t),A[e]&&A[e].videoPlayer&&"function"==typeof A[e].videoPlayer._videoUnload)return A[e].videoPlayer._videoUnload(e,t),!0;throw new Error(L(4,"videoUnload",e,t))}catch(e){return M(e),!1}}function y(e){try{if(E("destroy:::"+e),A[e]&&A[e].videoPlayer&&"function"==typeof A[e].videoPlayer._destroy)return v(e),A[e].videoPlayer._destroy(e),!0;throw new Error(L(5,"destroy",e))}catch(e){return M(e),!1}}function F(e,t){var n="",r=A[e].vars.cbcContextVideo,i=A[e].vars.customContextGenerate.showval,n=p(n,r.contentarea);return n=p(n,i),n=p(n,r.streamtitle),n=p(n,r.seasonnumber),n=p(n,r.episodenumber),"music"!==r.contentarea&&"radio"!==r.contentarea&&t&&T(A[e].videoPlayer._chapterInfo.position)&&r.totalchapters&&(n=p(n,A[e].videoPlayer._chapterInfo.position+"of"+r.totalchapters)),n=p(n,Math.floor(A[e].videoPlayer._videoInfo.length)),n=p(n,r.type),r.audiovideo=_(r.audiovideo),n=p(n,r.audiovideo),r.liveondemand=g(e,r.liveondemand),n=p(n,r.liveondemand)}function N(e,t){var e=e.vars,n=e.cbcContextVideo||{},e=e.customContextGenerate||{},r=window.CBC&&CBC.APP&&CBC.APP.SC&&CBC.APP.SC.DTM&&CBC.APP.SC.DTM.DATA&&CBC.APP.SC.DTM.DATA.pillar?CBC.APP.SC.DTM.DATA.pillar:"",i={content:{media:{audiovideo:n.audiovideo||n.mediaType||"",liveondemand:n.liveondemand||e.copy_videostreamtype||"",type:n.type||n.contentType||"",genre:n.genre||"",show:n.show||n.broadcastType||"",sport:n.sport||"",region:n.region||"",publishedtime:n.airdate||n.publishedTime||"",seasonnumber:n.seasonnumber&&"nan"!==n.seasonnumber?n.seasonnumber:"",episodenumber:n.episodenumber&&"nan"!==n.episodenumber?n.episodenumber:"",length:e.copy_videolength||""},area:n.contentarea||"",cms:n.source||"",id:n.uid,tier:CBC.APP.SC.UTIL.convertTier(n.contenttier),title:n.streamtitle||n.title||"",url:CBC.APP.SC.DTM.formatted.DAL.url||document.location.href},department:n.department||{},referrer:{},app:{name:e.appname,pillar:n.pillar||r||"legacy",version:n.appversion||""},user:{tier:CBC.APP.SC.UTIL.convertTier(n.usertier)}},e=(CBC.APP.SC.DTM.formatted.raw.referrer&&CBC.APP.SC.DTM.formatted.raw.referrer.url&&(i.referrer.url=CBC.APP.SC.DTM.formatted.raw.referrer.url),n.sponsorname&&(i.sponsor={},i.sponsor.name=n.sponsorname),n.partnername&&(i.content.partner={},i.content.partner.name=n.partnername),CBC.APP.SC.LOCALGEO&&CBC.APP.SC.LOCALGEO.geo&&CBC.APP.SC.LOCALGEO.geo.timezone&&(i.device={},i.device.geo={},i.device.geo.timezone=CBC.APP.SC.LOCALGEO.geo.timezone),n.keywords&&(i.content.keywords=n.keywords),n.rawKeywords&&(i.content.rawKeywords=n.rawKeywords),n.feature&&(i.feature=D(n.feature)),CBC.APP.SC.UTIL.getReferringDepartmentStatus());return""!==e[t]||"STREAMED"!==t&&("WATCHED"!==t&&"LISTENED"!==t||e.STREAMED!==i.content.id)||(CBC.APP.SC.UTIL.setReferringDepartmentStatus(t,i.content.id),i.referrer.department={},i.referrer.department.level1=CBC.APP.SC.DTM.formatted.DAL&&CBC.APP.SC.DTM.formatted.DAL.referrer&&CBC.APP.SC.DTM.formatted.DAL.referrer.department&&CBC.APP.SC.DTM.formatted.DAL.referrer.department.level1||"",i.referrer.department.level2=CBC.APP.SC.DTM.formatted.DAL&&CBC.APP.SC.DTM.formatted.DAL.referrer&&CBC.APP.SC.DTM.formatted.DAL.referrer.department&&CBC.APP.SC.DTM.formatted.DAL.referrer.department.level2||"",i.referrer.department.level3=CBC.APP.SC.DTM.formatted.DAL&&CBC.APP.SC.DTM.formatted.DAL.referrer&&CBC.APP.SC.DTM.formatted.DAL.referrer.department&&CBC.APP.SC.DTM.formatted.DAL.referrer.department.level3||"",Object.keys(i.referrer.department).forEach(function(e){""===i.referrer.department[e]&&delete i.referrer.department[e]})),Object.keys(i.referrer).length||delete i.referrer,Object.keys(i.content.media).forEach(function(e){""===i.content.media[e]&&delete i.content.media[e]}),Object.keys(i.content).forEach(function(e){""===i.content[e]&&delete i.content[e]}),Object.keys(i.app).forEach(function(e){""===i.app[e]&&delete i.app[e]}),Object.keys(i.department).forEach(function(e){""===i.department[e]&&delete i.department[e]}),Object.keys(i.department).length||delete i.department,i}function j(e){e=A[e].vars.cbcContextVideo;T(e.seasonnumber)&&/^(S|s)?[0-9]+$/.test(e.seasonnumber)?(e.seasonnumber.toString(),1===e.seasonnumber.length?e.seasonnumber="s0"+e.seasonnumber:"s"!==e.seasonnumber.charAt(0)&&(e.seasonnumber="s"+e.seasonnumber)):e.seasonnumber=S.varDefault,T(e.episodenumber)&&/^(E|e)?[0-9]+$/.test(e.episodenumber)?(e.episodenumber.toString(),1===e.episodenumber.length?e.episodenumber="e0"+e.episodenumber:"e"!==e.episodenumber.charAt(0)&&(e.episodenumber="e"+e.episodenumber)):e.episodenumber=S.varDefault}function G(e,t){A[e].vars.customContextGenerate||(A[e].vars.customContextGenerate={});var n,r=A[e].vars,e=A[e].vars.customContextGenerate;function i(){var e,t,n,r="cbcvideoheartbeatplayer",i=function(e){for(var t=escape(e)+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var i=n[r];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t))return unescape(i.substring(t.length,i.length))}return null}(r);return null===i&&(i=0),i=parseInt(i),r=r,e=++i,void 0===t&&(t=30),(n=new Date).setTime(n.getTime()+60*t*1e3),t="; expires="+n.toGMTString(),document.cookie=escape(r)+"="+escape(e)+t+"; path=/",i}function a(){var e=r.cbcContextVideo.show;return T(e)&&"(not specified)"!==e&&e!==S.varDefault||(T(r.cbcContextVideo.genre)&&(e=r.cbcContextVideo.genre),T(r.cbcContextVideo.sport)&&(e=r.cbcContextVideo.sport),T(r.cbcContextVideo.region)&&(e=r.cbcContextVideo.region)),e}"startvideo"===t&&(T(r.cbcContextVideo,!0)?(T(r.cbcContextVideo.airDate)&&!T(r.cbcContextVideo.airdate)&&(r.cbcContextVideo.airdate=r.cbcContextVideo.airDate,delete r.cbcContextVideo.airDate),T(r.cbcContextVideo.airdate)&&(e.daysince=!(!T(t=r.cbcContextVideo.airdate)||t===S.varDefault||!(T((t=t.split("-"))[0])&&T(t[1])&&T(t[2])))&&(n=new Date,n=new Date(n.getFullYear(),n.getMonth(),n.getDate(),0,0,0,0),t=new Date(Number(t[0]),Number(t[1])-1,Number(t[2]),0,0,0,0),n=Math.ceil((n.getTime()-t.getTime())/864e5),0===++n?"0":n)),e.showval=a()):r.cbcContextVideo=o.cbcContextVideo,e.playercounter=i(),e.osversion=u("osVersion"),e.os=u("os"),e.videourl=f(),e.videolang="en",h()&&(e.videolang="fr"),e.videopage=r.pagevars.pageName,e.appname=r.pagevars.prop60,e.webornative=r.pagevars.prop63,e.appversion=r.pagevars.prop64,t=CBC.APP.SC.UTIL.getCookie("cbc_plus"))&&(e.cbcplus=t),e.servertime=("0"+(n=new Date).getHours()).slice(-2)+("0"+n.getMinutes()).slice(-2),e.offset=-(new Date).getTimezoneOffset()/60,e.daytype=0===(t=(new Date).getDay())||6===t?"weekend":"weekday",e.dayofweek=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][(new Date).getDay()],e.hour=("0"+(t=new Date).getHours()).slice(-2)+(30<t.getMinutes()?"30":"00"),e.pillar=function(e){CBC.APP.SC.Pillar=CBC.APP.SC.Pillar||{},0===Object.getOwnPropertyNames(CBC.APP.SC.Pillar).length&&(CBC.APP.SC.Pillar={pillar:{available:["feed","listen","watch"],url:{default:"nan","cbc.ca/listen":"listen","cbcmusic.ca":"listen","watch.cbc.ca":"watch","gem.cbc.ca":"watch"}}});var t=CBC.APP.SC.Pillar.pillar,n=e||f();if(CBC.APP.SC.DTM.DATA.pillar&&-1<t.available.indexOf(CBC.APP.SC.DTM.DATA.pillar))return CBC.APP.SC.DTM.DATA.pillar;for(var r=t.url.default,i=Object.keys(t.url),a=0;a<i.length;++a){var o=i[a];if({}.hasOwnProperty.call(t.url,o)&&-1<n.indexOf(o)){r=t.url[o];break}}return r}(),w(e)}function Y(e,t){var n,r={pageName:o.pagevars.pageName,prop60:o.pagevars.prop60,prop63:o.pagevars.prop63,prop64:o.pagevars.prop64,s_account:o.pagevars.s_account},t=t&&t.pagevars&&T(t.pagevars,!0)?t.pagevars:{},i=T(window.s_cbc_sitecatalyst,!0)?window.s_cbc_sitecatalyst:{};r.pageName=n="string"==typeof(n=t.pageName||i.pageName||r.pageName)?CBC.APP.SC.UTIL.normalize(n.replace(/[^0-9A-Za-z/_$.+\-:\s]/g,"").replace(/\+/g,"-")):n,r.prop60=w(t.prop60||i.prop60||r.prop60),r.prop63=w(t.prop63||i.prop63||r.prop63),r.prop64=w(t.prop64||i.prop64||r.prop64),window.s_account&&T(window.s_cbc_sitecatalyst,!0)&&(window.s_cbc_sitecatalyst.s_account=window.s_account),r.s_account=w(t.s_account||i.s_account||r.s_account),A[e].vars.pagevars=JSON.parse(JSON.stringify(r))}function H(e,t){var n={playhead:0};console.log("timerStop: hbid="+e+", playhead="+A[e].vars.playhead),T(A[e].vars.playhead)&&(n.playhead=A[e].vars.playhead),T(A[e].vars.customContextGenerate.timerset)&&(window.clearInterval(t),A[e].vars.customContextGenerate.timerset="",C(e,n),v(e,n),y(e))}function O(e){var t=A[e].videoPlayer;if(!t)throw new Error("Illegal argument. Player reference cannot be null.");this._player=t,this._playerID=e,this._heartbeat=A[e].heartbeat,this._initialPlay=!1}O.prototype._onLoad=function(){E("CBC_VideoAnalyticsProvider: VIDEO_LOAD");var e,t,n,r,i=A[this._playerID].vars,a={};i.customContextGenerate.copy_videoid=A[this._playerID].videoPlayer._videoInfo.id,i.customContextGenerate.copy_videoname=A[this._playerID].videoPlayer._videoInfo.name,i.customContextGenerate.copy_videoplayername=A[this._playerID].videoPlayer._videoInfo.playerName,i.customContextGenerate.copy_videolength=Math.floor(A[this._playerID].videoPlayer._videoInfo.length),i.customContextGenerate.copy_videostreamtype=A[this._playerID].videoPlayer._videoInfo.streamType,window.CBC.APP.SC.UTIL.mediaCustomContextDataObjectGenerate(a,i.customContextGenerate,[]),i.cbcContextVideo.keywords&&(t=JSON.parse(JSON.stringify(i.cbcContextVideo.keywords)),i.cbcContextVideo.rawKeywords="string"==typeof t?CBC.APP.SC.UTIL.formatKeywordsString(t):t,i.cbcContextVideo.keywords=function(e){if("object"===_typeof(e)){var t,n={};for(t in e)Array.isArray(e[t])&&e[t].forEach(function(e){var t="generic"==e.type?"tag":e.type;n[t]||(n[t]=[]),e.name&&!n[t].includes(e.name)?n[t].push(e.name):e.path&&!n[t].includes(e.path)&&n[t].push(e.path)});return n}if("string"==typeof e)return CBC.APP.SC.UTIL.formatKeywordsString(e)}(i.cbcContextVideo.keywords)),i.cbcContextVideo&&i.cbcContextVideo.source&&(i.cbcContextVideo.source="9"===i.cbcContextVideo.source?"9cms":i.cbcContextVideo.source),T(i.cbcContextVideo,!0)&&(w(i.cbcContextVideo),window.CBC.APP.SC.UTIL.mediaCustomContextDataObjectGenerate(a,i.cbcContextVideo,[])),T(i.playerContextVideo,!0)&&(w(i.playerContextVideo),window.CBC.APP.SC.UTIL.mediaCustomContextDataObjectGenerate(a,i.playerContextVideo,[])),"object"===_typeof(i.mediaObj)&&Object.keys(i.mediaObj).length&&window.CBC.APP.SC.UTIL.mediaCustomContextDataObjectGenerate(a,i.mediaObj,[]),a["a.media.season"]=i.cbcContextVideo.seasonnumber,a["a.media.episode"]=i.cbcContextVideo.episodenumber,a.keywords=U(i.cbcContextVideo.keywords),this._heartbeat.trackSessionStart(this._player.getVideoInfo(),a),i.customContextGenerate.timerset=(e=this._playerID,t=A[this._playerID].videoPlayer._videoInfo.id,a=A[this._playerID].videoPlayer._videoInfo.streamType,n=0,r="",console.log("timerStart: hbid="+e+", videoid="+t),r="live"===a&&"news|the-national|the-national-live|nan|nan|-1|full-program|video|live"===t?window.setInterval(function(){10800<=(n+=60)&&H(e,r)},6e4):r)},O.prototype._onPlay=function(){E("CBC_VideoAnalyticsProvider: PLAY");var e,t=A[this._playerID].vars.cbcContextVideo;!this._initialPlay&&window.CBC.APP.SC.EventTracker?(window.CBC.APP.SC.EventTracker.isOn()||window.CBC.APP.SC.EventTracker.turnOn(),this._initialPlay=!0,t._timeMainContentStreamStarted=CBC.APP.SC.VideoHeartbeat.getCurrentTime(),t._accumulatedBufferTime=0,t._timeBufferStarted=0,t._accumulatedPauseTime=0,t._timePauseStarted=0,e=N(A[this._playerID],"STREAMED"),E("CBC_EventTracker: FIRING STREAMED EVENT"),CBC.APP.SC.EventTracker.trackEvent("STREAMED",e)):t._timePauseStarted&&(t._accumulatedPauseTime+=CBC.APP.SC.VideoHeartbeat.getCurrentTime()-t._timePauseStarted,t._timePauseStarted=0),this._heartbeat.trackPlay()},O.prototype._onChapterStart=function(){E("CBC_VideoAnalyticsProvider: CHAPTER_START");var e=A[this._playerID].vars,t={};e.customContextGenerate.copy_chaptername=A[this._playerID].videoPlayer._chapterInfo.name,e.customContextGenerate.copy_chapterlength=A[this._playerID].videoPlayer._chapterInfo.length,e.customContextGenerate.copy_chapterstarttime=A[this._playerID].videoPlayer._chapterInfo.startTime,e.customContextGenerate.copy_chapterposition=A[this._playerID].videoPlayer._chapterInfo.position,window.CBC.APP.SC.UTIL.mediaCustomContextDataObjectGenerate(t,e.customContextGenerate,[]),T(e.cbcContextChapter,!0)&&(w(e.cbcContextChapter),window.CBC.APP.SC.UTIL.mediaCustomContextDataObjectGenerate(t,e.cbcContextChapter,[])),T(e.playerContextChapter,!0)&&(w(e.playerContextChapter),window.CBC.APP.SC.UTIL.mediaCustomContextDataObjectGenerate(t,e.playerContextChapter,[])),this._heartbeat.trackEvent(P.Event.ChapterStart,this._player.getChapterInfo(),t)},O.prototype._onUnload=function(){E("CBC_VideoAnalyticsProvider: VIDEO_UNLOAD"),this._heartbeat.trackSessionEnd(),T(A[this._playerID].vars.customContextGenerate.timerset)&&H(this._playerID,A[this._playerID].vars.customContextGenerate.timerset)},O.prototype._destroy=function(){E("CBC_VideoAnalyticsProvider: DESTROY");var e=A[this._playerID];if(this._player){/^(rcbcconsole|player-audio)/.test(e.vars.videoplayername)&&this._onUnload(),this._heartbeat=null,this._player=null;var t=this._playerID;E("uninstall event listeners");var n,r,i=A[t].analyticsProvider;for(n in b)!{}.hasOwnProperty.call(b,n)||"function"!=typeof i[r=b[n]]||new k(t).removeEventListener(r,i[r],i)}e.vars.videoid="",e.vars.videoname="",e.vars.videolength="",e.vars.videostreamtype="",e.vars.videoplayhead=0,e.vars.chaptername="",e.vars.chapterlength=0,e.vars.chapterstarttime=0,e.vars.chapterposition=1,e.vars.customContextGenerate={},e.vars.cbcContextVideo={},e.vars.playerContextVideo={},e.vars.cbcContextChapter={},e.vars.playerContextChapter={},delete e.vars.mediaObj},O.prototype._onPause=function(){E("CBC_VideoAnalyticsProvider: PAUSE"),A[this._playerID].vars.cbcContextVideo._timePauseStarted=CBC.APP.SC.VideoHeartbeat.getCurrentTime(),this._heartbeat.trackPause()},O.prototype._onChapterSkip=function(){E("CBC_VideoAnalyticsProvider: CHAPTER_SKIP"),this._heartbeat.trackEvent(P.Event.ChapterSkip)},O.prototype._onChapterComplete=function(){E("CBC_VideoAnalyticsProvider: CHAPTER_COMPLETE"),this._heartbeat.trackEvent(P.Event.ChapterComplete)},O.prototype._onComplete=function(){E("CBC_VideoAnalyticsProvider: COMPLETE"),this._heartbeat.trackComplete()},O.prototype._onSeekStart=function(){E("CBC_VideoAnalyticsProvider: SEEK_START"),this._heartbeat.trackEvent(P.Event.SeekStart)},O.prototype._onSeekComplete=function(){E("CBC_VideoAnalyticsProvider: SEEK_COMPLETE"),this._heartbeat.trackEvent(P.Event.SeekComplete)},O.prototype._onAdBreakStart=function(){E("CBC_VideoAnalyticsProvider: ADBREAK_START"),this._heartbeat.trackEvent(P.Event.AdBreakStart,this._player.getAdBreakInfo())},O.prototype._onAdBreakComplete=function(){E("CBC_VideoAnalyticsProvider: ADBREAK_COMPLETE"),this._heartbeat.trackEvent(P.Event.AdBreakComplete)},O.prototype._onAdStart=function(){E("CBC_VideoAnalyticsProvider: AD_START"),this._heartbeat.trackEvent(P.Event.AdStart,this._player.getAdInfo())},O.prototype._onAdComplete=function(){E("CBC_VideoAnalyticsProvider: AD_COMPLETE"),this._heartbeat.trackEvent(P.Event.AdComplete)},O.prototype._onBufferStart=function(){E("CBC_VideoAnalyticsProvider: BUFFER_START"),A[this._playerID].vars.cbcContextVideo._timeBufferStarted=CBC.APP.SC.VideoHeartbeat.getCurrentTime(),this._heartbeat.trackEvent(P.Event.BufferStart)},O.prototype._onBufferComplete=function(){E("CBC_VideoAnalyticsProvider: BUFFER_COMPLETE");var e=A[this._playerID].vars.cbcContextVideo;e._timeBufferStarted&&(e._accumulatedBufferTime+=CBC.APP.SC.VideoHeartbeat.getCurrentTime()-e._timeBufferStarted,e._timeBufferStarted=0),this._heartbeat.trackEvent(P.Event.BufferComplete)};var B=function(){this._videoInfo=null,this._chapterInfo=null,this._adBreakInfo=null,this._adInfo=null,this._isLoaded=!1,this.activateComscoreSwitch()};B.prototype.getVideoInfo=function(){return P.createMediaObject(this._videoInfo.name,this._videoInfo.id,this._videoInfo.length,this._videoInfo.streamType)},B.prototype.getChapterInfo=function(){return P.createChapterObject(this._chapterInfo.name,this._chapterInfo.position,this._chapterInfo.length,this._chapterInfo.startTime)},B.prototype.getAdBreakInfo=function(){return P.createAdBreakObject(this._adBreakInfo.name,this._adBreakInfo.position,this._adBreakInfo.startTime)},B.prototype.getAdInfo=function(){return P.createAdObject(this._adInfo.name,this._adInfo.id,this._adInfo.position,this._adInfo.length)},B.prototype._videoLoad=function(e,t){E("CBC_VideoPlayer: _videoLoad"),this._videoInfo={},"your-stream-will-begin-playing-after-this-message"!==w(t.cbcContextVideo.streamtitle)&&(this._isLoaded=!0),G(e,"startvideo"),T(t,!0)?(T(t.cbcContextVideo,!0)&&j(e),this._videoInfo.streamType=T(t.streamType)?t.streamType:o.videostreamtype,"vod"!==this._videoInfo.streamType&&"live"!==this._videoInfo.streamType&&"linear"!==this._videoInfo.streamType&&(this._videoInfo.streamType="vod",E("CBC_VideoPlayer: invalid stream type "+this._videoInfo.streamType)),T(t.length)||"live"!==this._videoInfo.streamType?T(t.length)&&!isNaN(t.length)?this._videoInfo.length=Number(t.length):this._videoInfo.length=o.videolength:this._videoInfo.length=-1,T(t.id)?this._videoInfo.id=d(t.id):T(A[e].vars.cbcContextVideo,!0)?this._videoInfo.id=d(F(e,!1)):this._videoInfo.id=o.videoid,this._videoInfo.name=T(t.name)?d(t.name):this._videoInfo.id,this._videoInfo.isAudio=!(!T(t.cbcContextVideo.audiovideo)||"audio"!==t.cbcContextVideo.audiovideo)):(this._videoInfo.id=o.videoid,this._videoInfo.isAudio=!1,this._videoInfo.name=this._videoInfo.id,this._videoInfo.length=o.videolength,this._videoInfo.streamType=o.videostreamtype),B.prototype.isAudio=this._videoInfo.isAudio,this._videoInfo.playerName=A[e].vars.videoplayername,A[e].vars.playhead||(A[e].vars.playhead=T(t.playhead)&&!isNaN(t.playhead)?Number(t.playhead):o.videoplayhead),this._videoInfo.playhead=A[e].vars.playhead,this.comscore._comscoreDataInit(e,t,this),A[e].vars.cbStrategy=A[e].vars.cbStrategy||{};var n=A[e].vars.cbStrategy,t=t.cbcContextVideo;A[e].vars.customContextGenerate;n.isReady=!0,n.title=t.streamtitle||"",n.videoPath=t.uid||"",n.contentType=r.ContentType.CONTENT,n.totalDuration=Number(1e3*this._videoInfo.length),n.videoState=r.VideoState.UNPLAYED,n.startTime=(new Date).getTime(),new k(e).dispatchEvent(b.VIDEO_LOAD)},B.prototype._onPlay=function(e,t){E("CBC_VideoPlayer: _onPlay"),this.comscore._comscoreNotifyPlayStart();var n=A[e].vars.cbStrategy;n.videoState=r.VideoState.PLAYED,-1===n.startPlayTime&&(n.startPlayTime=(new Date).getTime()),new k(e).dispatchEvent(b.PLAY)},B.prototype._startChapter=function(e,t){var n,r,i,a;E("CBC_VideoPlayer: _startChapter"),null!==this._chapterInfo&&new k(e).dispatchEvent(b.CHAPTER_SKIP),this._chapterInfo={},G(e,"startChapter"),this.comscore._comscoreNotifyPlayStart(),T(t,!0)?(T(t.length)||"live"!==this._videoInfo.streamType?T(t.length)&&!isNaN(t.length)?this._chapterInfo.length=Number(t.length):this._chapterInfo.length=o.videolength:this._chapterInfo.length=-1,this._chapterInfo.startTime=T(t.startTime)&&!isNaN(t.startTime)?Number(t.startTime):Number(o.chapterstarttime),this._chapterInfo.position=T(t.position)?Number(t.position):Number(o.chapterposition),T(t.name)?this._chapterInfo.name=d(t.name):T(A[e].vars.cbcContextVideo,!0)?this._chapterInfo.name=d((t=t,r="",i=A[n=e].vars.cbcContextVideo,a=t.cbcContextChapter,r="music"===A[n].vars.cbcContextVideo.contentarea?(r=p(r,i.contentarea),r=p(r,a.author),r=p(r,a.chaptertitle),r=p(r,_(i.audiovideo)),p(r,t.length)):"radio"===A[n].vars.cbcContextVideo.contentarea?(r=p(r,i.contentarea),r=p(r,a.show),r=p(r,i.streamtitle),r=p(r,i.seasonnumber),r=p(r,i.episodenumber),r=p(r,t.position),r=p(r,Math.floor(A[n].videoPlayer._videoInfo.length)),r=p(r,i.type),i.audiovideo=_(i.audiovideo),r=p(r,i.audiovideo),i.liveondemand=g(n,i.liveondemand),p(r,i.liveondemand)):(console.log("calling generate concatid"),F(n,!0)))):this._chapterInfo.name=o.chaptername):(this._chapterInfo.name=o.chaptername,this._chapterInfo.length=Number(o.chapterlength),this._chapterInfo.startTime=Number(o.chapterstarttime),this._chapterInfo.position=Number(o.chapterposition)),new k(e).dispatchEvent(b.CHAPTER_START)},B.prototype._completeChapter=function(e,t){E("CBC_VideoPlayer: _completeChapter"),this.comscore._comscoreNotifyPlayEnd(),new k(e).dispatchEvent(b.CHAPTER_COMPLETE),this._chapterInfo=null},B.prototype._onPause=function(e,t){E("CBC_VideoPlayer: _onPause"),this.comscore._comscoreNotifyPauseStart(),A[e].vars.cbStrategy=A[e].vars.cbStrategy||{},A[e].vars.cbStrategy.videoState=r.VideoState.STOPPED,new k(e).dispatchEvent(b.PAUSE)},B.prototype._onSeekStart=function(e,t){E("CBC_VideoPlayer: _onSeekStart"),this.comscore._comscoreNotifySeekStart(),new k(e).dispatchEvent(b.SEEK_START)},B.prototype._onSeekComplete=function(e,t){E("CBC_VideoPlayer: _onSeekComplete"),this.comscore._comscoreNotifySeekEnd(t.playhead),new k(e).dispatchEvent(b.SEEK_COMPLETE)},B.prototype._onComplete=function(e,t){E("CBC_VideoPlayer: _onComplete"),A[e].vars.cbStrategy=A[e].vars.cbStrategy||{},A[e].vars.cbStrategy.videoState=r.VideoState.COMPLETED,new k(e).dispatchEvent(b.COMPLETE),this._videoUnload(e,t)},B.prototype._videoUnload=function(e,t){E("CBC_VideoPlayer: _videoUnload"),this._isLoaded=!1,this.comscore._comscoreNotifySeekEnd(),this.comscore._comscoreNotifyAdEnd(),this.comscore._comscoreNotifyPlayEnd(),new k(e).dispatchEvent(b.VIDEO_UNLOAD)},B.prototype._destroy=function(e){E("CBC_VideoPlayer: _destroy"),new k(e).dispatchEvent(b.DESTROY),this._videoUnload(e)},B.prototype._adBreakStart=function(e,t){E("CBC_VideoPlayer: _adBreakStart"),this._adBreakInfo={},T(t,!0)?(this._adBreakInfo.position=Number(t.position),this._adBreakInfo.name=t.name?t.name.toLowerCase():"unknown",/^(pre|post|mid)-roll/.test(this._adBreakInfo.name)||(this._adBreakInfo.name="unknown"),this._adBreakInfo.startTime=Number(t.playhead)):(this._adBreakInfo.position=Number(o.adbreakposition),this._adBreakInfo.name=o.adbreakname,this._adBreakInfo.startTime=Number(o.adbreakstarttime)),this._adBreakInfo.playerName=A[e].vars.videoplayername;var n=A[e].vars.cbStrategy;-1===n.adPlayTime&&(n.adPlayTime="pre-roll"===t.name?(new Date).getTime():-1),n.adPosition=/^(pre|post|mid)-roll/i.test(t.name)?"":r.AdPosition[t.name.toUpperCase().replace(/[-|\d]/g,"")],n.contentType=r.ContentType.AD,new k(e).dispatchEvent(b.ADBREAK_START)},B.prototype._adBreakComplete=function(e,t){E("CBC_VideoPlayer: _adBreakComplete");var n=A[e].vars.cbStrategy;n.adPosition="",n.contentType=r.ContentType.CONTENT,null!==this._adInfo&&this._adComplete(e,t),new k(e).dispatchEvent(b.ADBREAK_COMPLETE),this._adBreakInfo=null},B.prototype._adStart=function(e,t){E("CBC_VideoPlayer: _adStart"),this._adInfo={},T(t,!0)?(this._adInfo.length=Number(t.length),this._adInfo.id=t.id,this._adInfo.position=Number(t.position),t.name?this._adInfo.name=w(t.name):this._adInfo.name=o.adbreakname):(this._adInfo.length=Number(o.adlength),this._adInfo.id=o.adid,this._adInfo.position=Number(o.adposition),this._adInfo.name=o.adbreakname),this.comscore._comscoreNotifyAdStart(t.playhead),new k(e).dispatchEvent(b.AD_START)},B.prototype._adPause=function(e,t){E("CBC_VideoPlayer: _adPause"),this.comscore._comscoreNotifyPauseStart()},B.prototype._adPlay=function(e,t){E("CBC_VideoPlayer: _adPlay"),this.comscore._comscoreNotifyPauseEnd()},B.prototype._adComplete=function(e,t){E("CBC_VideoPlayer: _adComplete"),this.comscore._comscoreNotifyAdEnd(),new k(e).dispatchEvent(b.AD_COMPLETE),this._adInfo=null},B.prototype._onBufferStart=function(e,t){new k(e).dispatchEvent(b.BUFFER_START),this.comscore._comscoreNotifyBufferStart()},B.prototype._onBufferComplete=function(e,t){new k(e).dispatchEvent(b.BUFFER_COMPLETE),this.comscore._comscoreNotifyBufferStop()},B.prototype.comscore={},B.prototype.comscore._comscoreDataInit=function(e,t,n){T(t,!0)&&T(t.cbcContextVideo,!0)&&(this._that=n,this._comscoreStreamingApi=ns_.analytics,this._comscoreStreamingInstance=null,this._comscoreStreamingContentMetadata=null,this._comscoreAdFlag=!1,this._comscorePauseFlag=!1,this._comscorePlayFlag=!1,this._comscoreSeekFlag=!1,this._comscoreStreamingApi.PlatformApi.setPlatformAPI(this._comscoreStreamingApi.PlatformApi.PlatformApis.WebBrowser),n=CBC.APP.SC.UTIL.getCookie("cbc_visitor"),n=new this._comscoreStreamingApi.configuration.PublisherConfiguration({publisherId:"3005684",persistentLabels:{cs_fpid:n||"*null",cs_fpit:"c",cs_fpdm:"*null",cs_fpdt:"*null"}}),this._comscoreStreamingApi.configuration.addClient(n),this._comscoreStreamingApi.configuration.setUsagePropertiesAutoUpdateMode(this._comscoreStreamingApi.configuration.UsagePropertiesAutoUpdateMode.FOREGROUND_AND_BACKGROUND),this._comscoreStreamingApi.start(),this._comscoreStreamingInstance=new this._comscoreStreamingApi.StreamingAnalytics,(n=this._comscoreGetInitData(t.cbcContextVideo,A[e].vars)).player.name&&this._comscoreStreamingInstance.setMediaPlayerName(n.player.name),n.player.version&&this._comscoreStreamingInstance.setMediaPlayerVersion(n.player.version),this._comscoreStreamingInstance.createPlaybackSession(),this._comscoreStreamingContentMetadata=new this._comscoreStreamingApi.StreamingAnalytics.ContentMetadata,this._comscoreStreamingContentMetadata.classifyAsAudioStream(n.isAudio),this._comscoreStreamingContentMetadata.classifyAsCompleteEpisode(n.is_full_episode),this._comscoreStreamingContentMetadata.setClipUrl(n.url),1900<n.airDate.year&&0<n.airDate.month&&0<n.airDate.day&&(this._comscoreStreamingContentMetadata.setDateOfTvAiring(n.airDate.year,n.airDate.month,n.airDate.day),this._comscoreStreamingContentMetadata.setDateOfDigitalAiring(n.airDate.year,n.airDate.month,n.airDate.day)),this._comscoreStreamingContentMetadata.setDictionaryClassificationC3(n.c3),this._comscoreStreamingContentMetadata.setDictionaryClassificationC4(n.c4),this._comscoreStreamingContentMetadata.setDictionaryClassificationC6(n.c6),this._comscoreStreamingContentMetadata.setEpisodeId(n.episode.id),this._comscoreStreamingContentMetadata.setEpisodeNumber(n.episode.number),this._comscoreStreamingContentMetadata.setEpisodeSeasonNumber(n.season.number),this._comscoreStreamingContentMetadata.setEpisodeTitle(n.episode.title),this._comscoreStreamingContentMetadata.setGenreName(n.genre),this._comscoreStreamingContentMetadata.setLength(Math.trunc(n.length)),this._comscoreStreamingContentMetadata.setMediaType(n.mediaType),this._comscoreStreamingContentMetadata.setProgramId(n.program.id),this._comscoreStreamingContentMetadata.setProgramTitle(n.program.title),this._comscoreStreamingContentMetadata.setPublisherName(n.publisher.name),this._comscoreStreamingContentMetadata.setStationCode(n.station.code),this._comscoreStreamingContentMetadata.setStationTitle(n.station.title),this._comscoreStreamingContentMetadata.setTotalSegments(n.totalSegments),this._comscoreStreamingContentMetadata.setUniqueId(n.uniqueId))};function q(){return new B}function L(e,t,n,r){return"error_id:".concat(e,", method: ").concat(t,"(player_id:").concat(n,", param:").concat(r,"), player_list:").concat(A)}function M(e){CBC.APP.SC.VideoHeartbeatVars.Player.consoleLogging&&console.error(e)}B.prototype.comscore._comscoreGetInitData=function(e,t){var n,r=e.airdate?e.airdate.split("-"):new Array(3),i="*null",i="live"==this._that._videoInfo.streamType||"linear"==this._that._videoInfo.streamType?this._comscoreStreamingApi.StreamingAnalytics.ContentMetadata.ContentType.LIVE:600<this._that._videoInfo.length?this._comscoreStreamingApi.StreamingAnalytics.ContentMetadata.ContentType.LONG_FORM_ON_DEMAND:this._comscoreStreamingApi.StreamingAnalytics.ContentMetadata.ContentType.SHORT_FORM_ON_DEMAND,a=e.episodenumber&&isNaN(parseInt(e.episodenumber.charAt(0)))?e.episodenumber.substring(1):e.episodenumber,o=e.seasonnumber&&isNaN(parseInt(e.seasonnumber.charAt(0)))?e.seasonnumber.substring(1):e.seasonnumber;return{airDate:{day:r[2]&&parseInt(r[2])?parseInt(r[2]):-1,month:r[1]&&parseInt(r[1])?parseInt(r[1]):-1,year:r[0]&&parseInt(r[0])?parseInt(r[0]):-1},c3:t.customContextGenerate&&["ott-web-app","ott-android-app","ott-ios-app","ott-tvos-app","ott-androidtv-app","ott-chromecast-app","ott-firetv-app"].includes(t.customContextGenerate.appname)?"CBCGem":CBC.APP.ANA.FORMATTERS.Comscore.c3mapper(e.contentarea),c4:(null==(r=t)||null==(n=r.mediaObj)||null==(n=n.cms)||null==(n=n.content)?void 0:n.comscoreC4)||function(e){if(e&&e.length)for(var t=0;t<e.length;t++)if(e[t].name){var n=e[t].name.toLowerCase().split(" ");if(n.some(function(e){return e.includes("olympic")}))return"olympics";if(n.some(function(e){return e.includes("paralympic")}))return"paralympics"}return null}(null==(n=CBC)||null==(n=n.APP)||null==(n=n.SC)||null==(n=n.DTM)||null==(n=n.DATA)||null==(n=n.keywords)?void 0:n.tags)||(null==r||null==(n=r.customContextGenerate)?void 0:n.appname)||"unknown",c6:"*null",episode:{id:a&&parseInt(a)?String(a):"",number:a&&parseInt(a)?String(a).padStart(3,"0"):"*null",title:e.streamtitle||"*null"},genre:e.genre||"*null",isAudio:this._that._videoInfo.isAudio,is_full_episode:!{}.hasOwnProperty.call(e,"is_full_episode")||e.is_full_episode,length:0<this._that._videoInfo.length?1e3*this._that._videoInfo.length:0,mediaType:i,player:{name:this._that._videoInfo.playerName,version:this._that._videoInfo.sdk},program:{id:e.program_id_on_air&&"string"==typeof e.program_id_on_air?e.program_id_on_air:"*null",title:e.show||"*null"},publisher:{name:{}.hasOwnProperty.call(e,"producer_name")?e.producer_name:"CBC"},season:{number:o&&parseInt(o)?String(o).padStart(2,"0"):"*null"},station:{code:e.station_code||(e.show&&e.show.toLowerCase().includes("news network")?"5326":"5192"),title:"CBC"},totalSegments:e.totalchapters&&parseInt(e.totalchapters)?parseInt(e.totalchapters):0,uniqueId:e.uid||"*null",url:"*null"}},B.prototype.comscore._comscoreNotifyAdStart=function(e){var t=new this._comscoreStreamingApi.StreamingAnalytics.AdvertisementMetadata,n=this._comscoreStreamingApi.StreamingAnalytics.AdvertisementMetadata.AdvertisementType,r=n.ON_DEMAND_MID_ROLL;if("live"===this._that._videoInfo.streamType||"linear"===this._that._videoInfo.streamType)r=n.LIVE;else switch(this._that._adBreakInfo.name){case"pre-roll":r=n.ON_DEMAND_PRE_ROLL;break;case"post-roll":r=n.ON_DEMAND_POST_ROLL;break;case"unknown":r=n.OTHER}t.classifyAsAudioStream(this._that._videoInfo.isAudio),t.setLength(1e3*this._that._adInfo.length),t.setMediaType(r),t.setOwner(this._comscoreStreamingApi.StreamingAnalytics.AdvertisementMetadata.AdvertisementOwner.DISTRIBUTOR),t.setUniqueId(this._that._adInfo.id),t.setRelatedContentMetadata(this._comscoreStreamingContentMetadata),this._comscoreNotifySeekEnd(e),this._comscoreNotifyPlayEnd(),this._comscoreAdFlag||(this._comscoreStreamingInstance.setMetadata(t),this._comscoreStreamingInstance.notifyPlay(),this._comscoreAdFlag=!0)},B.prototype.comscore._comscoreNotifyAdEnd=function(){this._comscoreAdFlag&&(this._comscoreStreamingInstance.notifyEnd(),this._comscoreAdFlag=!1)},B.prototype.comscore._comscoreNotifyPauseStart=function(){this._comscorePauseFlag||(this._comscoreStreamingInstance.notifyPause(),this._comscorePauseFlag=!0)},B.prototype.comscore._comscoreNotifyPauseEnd=function(){this._comscorePauseFlag&&(this._comscoreStreamingInstance.notifyPlay(),this._comscorePauseFlag=!1)},B.prototype.comscore._comscoreNotifyPlayStart=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._comscoreStreamingContentMetadata;this._comscorePlayFlag?this._comscorePlayFlag&&this._comscorePauseFlag&&this._comscoreNotifyPauseEnd():(this._comscoreStreamingInstance.setMetadata(e),this._comscoreStreamingInstance.notifyPlay(),this._comscorePlayFlag=!0)},B.prototype.comscore._comscoreNotifyPlayEnd=function(){this._comscorePlayFlag&&(this._comscoreStreamingInstance.notifyEnd(),this._comscorePlayFlag=!1)},B.prototype.comscore._comscoreNotifySeekStart=function(){this._comscoreSeekFlag||(this._comscoreStreamingInstance.notifySeekStart(),this._comscoreSeekFlag=!0)},B.prototype.comscore._comscoreNotifySeekEnd=function(){this._comscoreSeekFlag&&(this._comscoreStreamingInstance.startFromPosition(1e3*Number(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"0")),this._comscoreStreamingInstance.notifyPlay(),this._comscorePauseFlag&&this._comscoreStreamingInstance.notifyPause(),this._comscoreSeekFlag=!1)},B.prototype.comscore._comscoreNotifyBufferStart=function(){this._comscoreStreamingInstance.notifyBufferStart()},B.prototype.comscore._comscoreNotifyBufferStop=function(){this._comscoreStreamingInstance.notifyBufferStop()},B.prototype.activateComscoreSwitch=function(){var t;B.prototype.comscoreSwitch||(t=this.comscore,Object.keys(t).forEach(function(e){var r=t[e];"function"==typeof t[e]&&(t[e]=function(){if(CBC.APP.SC.UTIL.isIOSWebviewPrivate()||B.prototype.isAudio)return function(){};for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.call.apply(r,[this].concat(t))})}),B.prototype.comscoreSwitch=!0)};var e,t={init:function(e){try{E("init"),E(e),void 0===window.CBC.APP.SC.VideoHeartbeat.cbStratInit&&(window.CBC.APP.SC.VideoHeartbeat.cbStratInit=!1);var t=T(e.vhbid)?w(e.vhbid):"vhb"+Math.floor(99999*Math.random());if(A[t]={vars:{}},T(e,!0)){for(var n in T(e.config,!0)&&(T(e.config.marketingCloudId)&&(S.marketingCloudId=e.config.marketingCloudId),T(e.config.trackingServer)&&(S.trackingServer=e.config.trackingServer),T(e.config.trackingServerSecure)&&(S.trackingServerSecure=e.config.trackingServerSecure),T(e.config.heartbeatServer)&&(S.heartbeatServer=e.config.heartbeatServer),T(e.config.visitorNamespace)&&(S.visitorNamespace=e.config.visitorNamespace),T(e.config.publisher))&&(S.publisher=e.config.publisher),A[t].vars.videoplayername=T(e.playerName)?w(e.playerName):o.videoplayername,T(e.channel)?A[t].vars.channel=w(e.channel):T(e.playerName)?A[t].vars.channel=w(e.playerName)+"-channel":A[t].vars.channel=o.channel,A[t].vars.ovp=T(e.ovp)?w(e.ovp):o.ovp,A[t].vars.sdk=T(e.sdk)?w(e.sdk):o.sdk,A[t].vars.quietMode=(T(e.quietMode)?e:o).quietMode,A[t].vars.ssl=(T(e.ssl)?e:o).ssl,A[t].vars.debugLogging=(T(e.debugLogging)?e:o).debugLogging,o.debugLogging=A[t].vars.debugLogging,A)T(A[n].vars.videoplayername)&&(A[n].vars.videoplayername.indexOf(S.playerSuffix.s)<0&&A[n].vars.videoplayername.indexOf(S.playerSuffix.m)<0&&(A[n].vars.videoplayername+=S.playerSuffix.s),1<l(A))&&(A[n].vars.videoplayername=A[n].vars.videoplayername.replace(S.playerSuffix.s,S.playerSuffix.m));A[t].vars.cbStrategy=A[t].vars.cbStrategy||{};var r=A[t].vars.cbStrategy;window.CBC.APP.SC.VideoHeartbeat.cbStratInit||(window._cbv_strategies=window._cbv_strategies||[],window._cbv_strategies.push(s),window.CBC.APP.SC.VideoHeartbeat.cbStratInit=!0),window._cbv=window._cbv||[],window._cbv.push(A[t]),T(e.playerName,!0)&&(r.playerType=A[t].vars.videoplayername)}return t}catch(e){return M(e),!1}},destroy:y,videoLoad:function(e,t,n){if(!A[e]||A[e].videoPlayer&&/^(rcbcconsole|player-audio)/.test(A[e].vars.videoplayername)&&A[e].videoPlayer._isLoaded)M("Video has already been loaded.");else try{if(I(t.cbcContextVideo),E("videoLoad:::"+e),E(t),T(A[e],!0)){if(T(A[e].videoPlayer,!0)&&"function"==typeof A[e].videoPlayer._destroy&&A[e].videoPlayer._destroy(e),T(A[e].vars.pagevars,!0)||Y(e,t),A[e].videoPlayer=q(),A[e].appMeasurement=(C=e,(v=Visitor.getInstance(S.marketingCloudId,{trackingServer:S.trackingServer,trackingServerSecure:S.trackingServerSecure})).setCustomerIDs({userId:{id:S.dpid},puuid:{id:S.dpuuid}}),C=A[C].vars.pagevars.s_account,(y=new AppMeasurement(C=window.s_cbc_sitecatalyst&&window.s_cbc_sitecatalyst instanceof AppMeasurement?window.s_cbc_sitecatalyst.account:C)).visitor=v,y.trackingServer=S.trackingServer,y.trackingServerSecure=S.trackingServerSecure,y.account=C,y.visitorNamespace=S.visitorNamespace,y.charSet=S.charSet,y),A[e].heartbeat=(_=e,(g=new R).trackingServer=S.heartbeatServer,g.playerName=A[_].vars.videoplayername,g.channel=A[_].vars.channel,g.debugLogging=!1,g.appVersion=A[_].vars.sdk,g.ssl=A[_].vars.ssl,g.ovp=A[_].vars.ovp,(m=new x).getCurrentPlaybackTime=function(){return A[_].vars.playhead},new P(m,g,A[_].appMeasurement)),A[e].analyticsProvider=new O(e),t.cbcContextVideo.sponsorname){var r,i=CBC.APP.SC.UTIL.cleanString(t.cbcContextVideo.sponsorname),a={},o=window.CBC.APP.SC.UTIL.getMetadataAllowlist();for(r in o.metadata.allowlist.sponsor.name)a[CBC.APP.SC.UTIL.cleanString(r)]=o.metadata.allowlist.sponsor.name[r];a[i]?t.cbcContextVideo.sponsorname=i:delete t.cbcContextVideo.sponsorname}if(t.cbcContextVideo.partnername){var s,c=CBC.APP.SC.UTIL.cleanString(t.cbcContextVideo.partnername),u={},l=window.CBC.APP.SC.UTIL.getMetadataAllowlist();for(s in l.metadata.allowlist.partner.name)u[CBC.APP.SC.UTIL.cleanString(s)]=l.metadata.allowlist.partner.name[s];u[c]?t.cbcContextVideo.partnername=c:delete t.cbcContextVideo.partnername}if(t.cbcContextVideo.feature&&(t.cbcContextVideo.feature=D(t.cbcContextVideo.feature)),t.cbcContextVideo.usertier||(t.cbcContextVideo.usertier="free"),"your-stream-will-begin-playing-after-this-message"!==w(t.cbcContextVideo.streamtitle)){var d=e;E("install event listeners");var p,f,h=A[d].analyticsProvider;for(p in b)!{}.hasOwnProperty.call(b,p)||"function"!=typeof h[f=b[p]]||new k(d).addEventListener(f,h[f],h)}return T(t.cbcContextVideo,!0)&&(A[e].vars.cbcContextVideo=JSON.parse(JSON.stringify(t.cbcContextVideo))),T(t.playerContextVideo,!0)&&(A[e].vars.playerContextVideo=JSON.parse(JSON.stringify(t.playerContextVideo))),"object"===_typeof(n)&&Object.keys(n).length&&(A[e].vars.mediaObj=JSON.parse(JSON.stringify(n))),A[e].videoPlayer&&"function"==typeof A[e].videoPlayer._videoLoad?(A[e].videoPlayer._videoLoad(e,t),!0):(M("error_id:2, method: videoLoad(player_id:"+e+", param:"+t+"), player_list:"+A),!1)}return M("error_id:3, method: videoLoad(player_id:"+e+", param:"+t+"), player_list:"+A),!1}catch(e){return M(e),!1}var _,g,m,C,v,y},videoComplete:function(e,t){try{if(E("videoComplete:::"+e),E(t),A[e]&&A[e].videoPlayer&&"function"==typeof A[e].videoPlayer._onComplete)return A[e].videoPlayer._onComplete(e,t),!0;throw new Error("error_id:1, method: videoComplete(player_id:"+e+", param:"+t+"), player_list:"+A)}catch(e){return M(e),!1}},videoUnload:v,videoPlay:function(e,t){try{if(E("videoPlay:::"+e),E(t),A[e]&&A[e].videoPlayer&&"function"==typeof A[e].videoPlayer._onPlay)return m(e,t),A[e].videoPlayer._onPlay(e,t),!0;throw new Error("error_id:7, method: videoPlay(player_id:"+e+", param:"+t+"), player_list:"+A)}catch(e){return M(e),!1}},videoPause:C,adBreakStart:function(e,t){try{if(E("adBreakStart:::"+e),E(t),A[e]&&A[e].videoPlayer&&"function"==typeof A[e].videoPlayer._adBreakStart)return A[e].videoPlayer._adBreakStart(e,t),!0;throw new Error("error_id:13, method: adBreakStart(player_id:"+e+", param:"+t+"), player_list:"+A)}catch(e){return M(e),!1}},adBreakComplete:function(e,t){try{if(E("adBreakComplete:::"+e),E(t),A[e]&&A[e].videoPlayer&&"function"==typeof A[e].videoPlayer._adBreakComplete)return m(e,t),A[e].videoPlayer._adBreakComplete(e,t),!0;throw new Error("error_id:14, method: adBreakComplete(player_id:"+e+", param:"+t+"), player_list:"+A)}catch(e){return M(e),!1}},adStart:function(e,t){try{if(E("adStart:::"+e),E(t),A[e]&&A[e].videoPlayer&&"function"==typeof A[e].videoPlayer._adStart)return A[e].videoPlayer._adStart(e,t),!0;throw new Error("error_id:15, method: adStart(player_id:"+e+", param:"+t+"), player_list:"+A)}catch(e){return M(e),!1}},adPause:function(e,t){try{if(E("adPause:::"+e),E(t),A[e]&&A[e].videoPlayer&&"function"==typeof A[e].videoPlayer._adPause)return A[e].videoPlayer._adPause(e,t),!0;throw new Error("error_id:19, method: adPause(player_id:"+e+", param:"+t+"), player_list:"+A)}catch(e){return M(e),!1}},adPlay:function(e,t){try{if(E("adPlay:::"+e),E(t),A[e]&&A[e].videoPlayer&&"function"==typeof A[e].videoPlayer._adPlay)return A[e].videoPlayer._adPlay(e,t),!0;throw new Error("error_id:20, method: adPlay(player_id:"+e+", param:"+t+"), player_list:"+A)}catch(e){return M(e),!1}},adComplete:function(e,t){try{if(E("adComplete:::"+e),E(t),A[e]&&A[e].videoPlayer&&"function"==typeof A[e].videoPlayer._adComplete)return A[e].videoPlayer._adComplete(e,t),!0;throw new Error("error_id:16, method: adComplete(player_id:"+e+", param:"+t+"), player_list:"+A)}catch(e){return M(e),!1}},chapterStart:function(e,t){try{if(I(t.cbcContextChapter),E("chapterStart:::"+e),E(t),A[e]&&A[e].videoPlayer&&"function"==typeof A[e].videoPlayer._startChapter)return T(t.cbcContextChapter,!0)&&(A[e].vars.cbcContextChapter=JSON.parse(JSON.stringify(t.cbcContextChapter))),T(t.playerContextChapter,!0)&&(A[e].vars.playerContextChapter=JSON.parse(JSON.stringify(t.playerContextChapter))),A[e].videoPlayer._startChapter(e,t),!0;throw new Error("error_id:9, method: chapterStart(player_id:"+e+", param:"+t+"), player_list:"+A)}catch(e){return M(e),!1}},chapterComplete:function(e,t){try{if(E("chapterComplete:::"+e),E(t),A[e]&&A[e].videoPlayer&&"function"==typeof A[e].videoPlayer._completeChapter)return m(e,t),A[e].videoPlayer._completeChapter(e,t),!0;throw new Error("error_id:10, method: chapterComplete(player_id:"+e+", param:"+t+"), player_list:"+A)}catch(e){return M(e),!1}},seekStart:function(e,t){try{if(E("seekStart:::"+e),E(t),A[e]&&A[e].videoPlayer&&"function"==typeof A[e].videoPlayer._onSeekStart)return m(e,t),A[e].videoPlayer._onSeekStart(e,t),!0;throw new Error("error_id:11, method: seekStart(player_id:"+e+", param:"+t+"), player_list:"+A)}catch(e){return M(e),!1}},seekComplete:function(e,t){try{if(E("seekComplete:::"+e),E(t),A[e]&&A[e].videoPlayer&&"function"==typeof A[e].videoPlayer._onSeekComplete)return m(e,t),A[e].videoPlayer._onSeekComplete(e,t),!0;throw new Error("error_id:12, method: seekComplete(player_id:"+e+", param:"+t+"), player_list:"+A)}catch(e){return M(e),!1}},bufferStart:function(e,t){try{if(E("bufferStart:::"+e),E(t),A[e]&&A[e].videoPlayer&&"function"==typeof A[e].videoPlayer._onBufferStart)return A[e].videoPlayer._onBufferStart(e,t),!0;throw new Error("error_id:17, method: bufferStart(player_id:"+e+", param:"+t+"), player_list:"+A)}catch(e){return M(e),!1}},bufferComplete:function(e,t){try{if(E("bufferComplete:::"+e),E(t),A[e]&&A[e].videoPlayer&&"function"==typeof A[e].videoPlayer._onBufferComplete)return A[e].videoPlayer._onBufferComplete(e,t),!0;throw new Error("error_id:18, method: bufferComplete(player_id:"+e+", param:"+t+"), player_list:"+A)}catch(e){return M(e),!1}}};for(e in t)!function(){var r;t.hasOwnProperty(e)&&(r=t[e],t[e]=function(){CBC.APP.SC.EventTracker.setCBCSession();for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.apply(this,t)})}();return Object.assign(t,{updatePlayHead:m,getPlayers:function(){return A},isFrench:h,adobeLogging:function(e,t){t?(A[e].heartbeat._playerPlugin._logger.enable(),A[e].heartbeat._ahPlugin._logger.enable(),A[e].heartbeat._aaPlugin._logger.enable(),A[e].heartbeat._logger.enable()):(A[e].heartbeat._playerPlugin._logger.disable(),A[e].heartbeat._ahPlugin._logger.disable(),A[e].heartbeat._aaPlugin._logger.disable(),A[e].heartbeat._logger.disable())},getCurrentTime:function(){return(new Date).getTime()},createCBCPlayer:q})}());